/*! For license information please see web3-bundle.js.LICENSE.txt */
(()=>{var e,t,r={220:(e,t,r)=>{"use strict";var n=r(9404),i=r(7011),s=i.assert,o=i.cachedProperty,a=i.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=a(t)),Array.isArray(t)&&(s(t.length===2*e.encodingLength,"Signature has invalid size"),t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),s(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}o(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),o(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),o(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),o(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const n=r(9026);t.toMiliseconds=function(e){return e*n.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/n.ONE_THOUSAND)}},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,d=this._events[a],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,i),!0;case 5:return d.fn.call(d.context,t,n,i,s),!0;case 6:return d.fn.call(d.context,t,n,i,s,o),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];d.fn.apply(d.context,c)}else{var l,f=d.length;for(u=0;u<f;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),h){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,n);break;case 4:d[u].fn.call(d[u].context,t,n,i);break;default:if(!c)for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];d[u].fn.apply(d[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,u=[],d=a.length;c<d;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},370:(e,t,r)=>{"use strict";var n=r(9404),i=r(6698),s=r(6677),o=r(7011);function a(e){s.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,r){s.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,s),e.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},i(c,s.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},a.prototype.point=function(e,t){return new c(this,e,t)},a.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),s=e.x.redSub(e.z).redMul(r),o=i.redMul(n),a=t.z.redMul(s.redAdd(o).redSqr()),c=t.x.redMul(s.redISub(o).redSqr());return this.curve.point(a,c)},c.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var s=i.length-1;s>=0;s--)0===i[s]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},480:(e,t,r)=>{"use strict";var n,i=t,s=r(7952),o=r(894),a=r(7011).assert;function c(e){"short"===e.type?this.curve=new o.short(e):"edwards"===e.type?this.curve=new o.edwards(e):this.curve=new o.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function u(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var r=new c(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=c,u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(4011)}catch(e){n=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},793:e=>{"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,n){var i=n&&n.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var o=new Array(s);o[0]=i(e);for(var a=1;a<s;a++)o[a]=i(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var c=r.length;if(0===c)return e;for(var u="",d=0,h=-1,l=e&&e.length||0,f=0;f<l;){if(37===e.charCodeAt(f)&&f+1<l){switch(h=h>-1?h:0,e.charCodeAt(f+1)){case 100:case 102:if(d>=c)break;if(null==r[d])break;h<f&&(u+=e.slice(h,f)),u+=Number(r[d]),h=f+2,f++;break;case 105:if(d>=c)break;if(null==r[d])break;h<f&&(u+=e.slice(h,f)),u+=Math.floor(Number(r[d])),h=f+2,f++;break;case 79:case 111:case 106:if(d>=c)break;if(void 0===r[d])break;h<f&&(u+=e.slice(h,f));var p=typeof r[d];if("string"===p){u+="'"+r[d]+"'",h=f+2,f++;break}if("function"===p){u+=r[d].name||"<anonymous>",h=f+2,f++;break}u+=i(r[d]),h=f+2,f++;break;case 115:if(d>=c)break;h<f&&(u+=e.slice(h,f)),u+=String(r[d]),h=f+2,f++;break;case 37:h<f&&(u+=e.slice(h,f)),u+="%",h=f+2,f++,d--}++d}++f}return-1===h?e:(h<l&&(u+=e.slice(h)),u)}},894:(e,t,r)=>{"use strict";var n=t;n.base=r(6677),n.short=r(9188),n.mont=r(370),n.edwards=r(1298)},1089:(e,t)=>{"use strict";function r(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function n(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=r,t.isNode=n,t.isBrowser=function(){return!r()&&!n()}},1200:(e,t,r)=>{"use strict";var n=r(9404),i=r(7011).assert;function s(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=s,s.fromPublic=function(e,t,r){return t instanceof s?t:new s(e,{pub:t,pubEnc:r})},s.fromPrivate=function(e,t,r){return t instanceof s?t:new s(e,{priv:t,privEnc:r})},s.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},s.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},s.prototype.derive=function(e){return e.validate()||i(e.validate(),"public point not validated"),e.mul(this.priv).getX()},s.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},s.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},1298:(e,t,r)=>{"use strict";var n=r(7011),i=r(9404),s=r(6698),o=r(6677),a=n.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function u(e,t,r,n,s){o.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=s&&new i(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(c,o),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),s=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(s.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var c=a.fromRed().isOdd();return(t&&!c||!t&&c)&&(a=a.redNeg()),this.point(e,a)},c.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),s=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(s.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},s(u,o.BasePoint),c.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},c.prototype.point=function(e,t,r,n){return new u(this,e,t,r,n)},u.fromJSON=function(e,t){return new u(e,t[0],t[1],t[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},u.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),s=n.redAdd(t),o=s.redSub(r),a=n.redSub(t),c=i.redMul(o),u=s.redMul(a),d=i.redMul(a),h=o.redMul(s);return this.curve.point(c,u,h,d)},u.prototype._projDbl=function(){var e,t,r,n,i,s,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var u=(n=this.curve._mulA(a)).redAdd(c);this.zOne?(e=o.redSub(a).redSub(c).redMul(u.redSub(this.curve.two)),t=u.redMul(n.redSub(c)),r=u.redSqr().redSub(u).redSub(u)):(i=this.z.redSqr(),s=u.redSub(i).redISub(i),e=o.redSub(a).redISub(c).redMul(s),t=u.redMul(n.redSub(c)),r=u.redMul(s))}else n=a.redAdd(c),i=this.curve._mulC(this.z).redSqr(),s=n.redSub(i).redSub(i),e=this.curve._mulC(o.redISub(n)).redMul(s),t=this.curve._mulC(n).redMul(a.redISub(c)),r=n.redMul(s);return this.curve.point(e,t,r)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),s=r.redSub(t),o=i.redSub(n),a=i.redAdd(n),c=r.redAdd(t),u=s.redMul(o),d=a.redMul(c),h=s.redMul(c),l=o.redMul(a);return this.curve.point(u,d,l,h)},u.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),s=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(s).redMul(o),c=i.redSub(a),u=i.redAdd(a),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(o),h=n.redMul(c).redMul(d);return this.curve.twisted?(t=n.redMul(u).redMul(o.redSub(this.curve._mulA(s))),r=c.redMul(u)):(t=n.redMul(u).redMul(o.redSub(s)),r=this.curve._mulC(c).redMul(u)),this.curve.point(h,t,r)},u.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},u.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},u.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},u.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add},1591:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},1636:e=>{"use strict";e.exports={rE:"6.6.1"}},1861:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},1911:(e,t,r)=>{"use strict";var n=r(7426),i=r(7766);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(s,i),e.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},2010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5215).__exportStar(r(3093),t)},2063:(e,t,r)=>{"use strict";t.g=void 0;const n=r(8196);t.g=function(){let e,t;try{e=n.getDocumentOrThrow(),t=n.getLocationOrThrow()}catch(e){return null}function r(...t){const r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){const n=r[e],i=["itemprop","property","name"].map((e=>n.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(i.length&&i){const e=n.getAttribute("content");if(e)return e}}return""}const i=function(){let t=r("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:r("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const r=e.getElementsByTagName("link"),n=[];for(let e=0;e<r.length;e++){const i=r[e],s=i.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){const e=i.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{const n=t.pathname.split("/");n.pop(),r+=n.join("/")+"/"+e}n.push(r)}else if(0===e.indexOf("//")){const r=t.protocol+e;n.push(r)}else n.push(e)}}return n}(),name:i}}},2287:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),s=r(6225),o=r(3349),a=n.sum32,c=n.sum32_4,u=n.sum32_5,d=s.ch32,h=s.maj32,l=s.s0_256,f=s.s1_256,p=s.g0_256,m=s.g1_256,g=i.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}n.inherits(b,g),e.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=c(m(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],g=this.h[2],y=this.h[3],b=this.h[4],v=this.h[5],w=this.h[6],A=this.h[7];for(o(this.k.length===r.length),n=0;n<r.length;n++){var E=u(A,f(b),d(b,v,w),this.k[n],r[n]),x=a(l(i),h(i,s,g));A=w,w=v,v=b,b=a(y,E),y=g,g=s,s=i,i=a(E,x)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],b),this.h[5]=a(this.h[5],v),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],A)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},2566:(e,t)=>{var r;r=function(e){e.version="1.2.2";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}(),r=function(e){var t=0,r=0,n=0,i="undefined"!=typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)i[n]=e[n];for(n=0;256!=n;++n)for(r=e[n],t=256+n;t<4096;t+=256)r=i[t]=r>>>8^e[255&r];var s=[];for(n=1;16!=n;++n)s[n-1]="undefined"!=typeof Int32Array?i.subarray(256*n,256*n+256):i.slice(256*n,256*n+256);return s}(t),n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],c=r[5],u=r[6],d=r[7],h=r[8],l=r[9],f=r[10],p=r[11],m=r[12],g=r[13],y=r[14];e.table=t,e.bstr=function(e,r){for(var n=~r,i=0,s=e.length;i<s;)n=n>>>8^t[255&(n^e.charCodeAt(i++))];return~n},e.buf=function(e,r){for(var b=~r,v=e.length-15,w=0;w<v;)b=y[e[w++]^255&b]^g[e[w++]^b>>8&255]^m[e[w++]^b>>16&255]^p[e[w++]^b>>>24]^f[e[w++]]^l[e[w++]]^h[e[w++]]^d[e[w++]]^u[e[w++]]^c[e[w++]]^a[e[w++]]^o[e[w++]]^s[e[w++]]^i[e[w++]]^n[e[w++]]^t[e[w++]];for(v+=15;w<v;)b=b>>>8^t[255&(b^e[w++])];return~b},e.str=function(e,r){for(var n=~r,i=0,s=e.length,o=0,a=0;i<s;)(o=e.charCodeAt(i++))<128?n=n>>>8^t[255&(n^o)]:o<2048?n=(n=n>>>8^t[255&(n^(192|o>>6&31))])>>>8^t[255&(n^(128|63&o))]:o>=55296&&o<57344?(o=64+(1023&o),a=1023&e.charCodeAt(i++),n=(n=(n=(n=n>>>8^t[255&(n^(240|o>>8&7))])>>>8^t[255&(n^(128|o>>2&63))])>>>8^t[255&(n^(128|a>>6&15|(3&o)<<4))])>>>8^t[255&(n^(128|63&a))]):n=(n=(n=n>>>8^t[255&(n^(224|o>>12&15))])>>>8^t[255&(n^(128|o>>6&63))])>>>8^t[255&(n^(128|63&o))];return~n}},"undefined"==typeof DO_NOT_EXPORT_CRC?r(t):r({})},2723:(e,t,r)=>{"use strict";var n=r(7952),i=r(4367),s=r(3349);function o(e){if(!(this instanceof o))return new o(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),r=i.toArray(e.nonce,e.nonceEnc||"hex"),n=i.toArray(e.pers,e.persEnc||"hex");s(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}e.exports=o,o.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},o.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=i.toArray(e,t),r=i.toArray(r,n),s(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},o.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,i.encode(o,t)}},2791:function(e,t,r){!function(e){"use strict";if(!e.setImmediate){var t,r,n,i,s,o=1,a={},c=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?t=function(e){process.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(i="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&l(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),t=function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((n=new MessageChannel).port1.onmessage=function(e){l(e.data)},t=function(e){n.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,t=function(e){var t=u.createElement("script");t.onreadystatechange=function(){l(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):t=function(e){setTimeout(l,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var r=new Array(arguments.length-1),n=0;n<r.length;n++)r[n]=arguments[n+1];var i={callback:e,args:r};return a[o]=i,t(o),o++},d.clearImmediate=h}function h(e){delete a[e]}function l(e){if(c)setTimeout(l,0,e);else{var t=a[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===r.g?this:r.g:self)},2985:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},3093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0,t.IWatch=class{}},3349:e=>{function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},3776:()=>{},3917:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),s=r(6225),o=n.rotl32,a=n.sum32,c=n.sum32_5,u=s.ft_1,d=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(l,d),e.exports=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=o(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],d=this.h[2],l=this.h[3],f=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),m=c(o(i,5),u(p,s,d,l),f,r[n],h[p]);f=l,l=d,d=o(s,30),s=i,i=m}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],d),this.h[3]=a(this.h[3],l),this.h[4]=a(this.h[4],f)},l.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},4011:e=>{e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},4367:(e,t)=>{"use strict";var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),s=i>>8,o=255&i;s?r.push(s,o):r.push(o)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}},4874:(e,t,r)=>{"use strict";const n=r(793);e.exports=o;const i=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},s={mapHttpRequest:l,mapHttpResponse:l,wrapRequestSerializer:f,wrapResponseSerializer:f,wrapErrorSerializer:f,req:l,res:l,err:function(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function o(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||i;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},s=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,n);let l=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(l=!1),"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const f=e.level||"info",m=Object.create(r);m.log||(m.log=p),Object.defineProperty(m,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(m,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,a(g,m,"error","log"),a(g,m,"fatal","error"),a(g,m,"warn","error"),a(g,m,"info","log"),a(g,m,"debug","log"),a(g,m,"trace","log")}});const g={transmit:t,serialize:s,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:h(e)};return m.levels=o.levels,m.level=f,m.setMaxListeners=m.getMaxListeners=m.emit=m.addListener=m.on=m.prependListener=m.once=m.prependOnceListener=m.removeListener=m.removeAllListeners=m.listeners=m.listenerCount=m.eventNames=m.write=m.flush=p,m.serializers=n,m._serialize=s,m._stdErrSerialize=l,m.child=function(r,i){if(!r)throw new Error("missing bindings for child Pino");i=i||{},s&&r.serializers&&(i.serializers=r.serializers);const o=i.serializers;if(s&&o){var a=Object.assign({},n,o),h=!0===e.browser.serialize?Object.keys(a):s;delete r.serializers,c([r],h,a,this._stdErrSerialize)}function l(e){this._childLevel=1+(0|e._childLevel),this.error=u(e,r,"error"),this.fatal=u(e,r,"fatal"),this.warn=u(e,r,"warn"),this.info=u(e,r,"info"),this.debug=u(e,r,"debug"),this.trace=u(e,r,"trace"),a&&(this.serializers=a,this._serialize=h),t&&(this._logEvent=d([].concat(e._logEvent.bindings,r)))}return l.prototype=this,new l(this)},t&&(m._logEvent=d()),m}function a(e,t,r,s){const a=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?p:a[r]?a[r]:i[r]||i[s]||p,function(e,t,r){var s;(e.transmit||t[r]!==p)&&(t[r]=(s=t[r],function(){const a=e.timestamp(),u=new Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var l=0;l<u.length;l++)u[l]=arguments[l];if(e.serialize&&!e.asObject&&c(u,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?s.call(h,function(e,t,r,i){e._serialize&&c(r,e._serialize,e.serializers,e._stdErrSerialize);const s=r.slice();let a=s[0];const u={};i&&(u.time=i),u.level=o.levels.values[t];let d=1+(0|e._childLevel);if(d<1&&(d=1),null!==a&&"object"==typeof a){for(;d--&&"object"==typeof s[0];)Object.assign(u,s.shift());a=s.length?n(s.shift(),s):void 0}else"string"==typeof a&&(a=n(s.shift(),s));return void 0!==a&&(u.msg=a),u}(this,r,u,a)):s.apply(h,u),e.transmit){const n=e.transmit.level||t.level,i=o.levels.values[n],s=o.levels.values[r];if(s<i)return;!function(e,t,r){const n=t.send,i=t.ts,s=t.methodLevel,o=t.methodValue,a=t.val,u=e._logEvent.bindings;c(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return-1===u.indexOf(e)})),e._logEvent.level.label=s,e._logEvent.level.value=o,n(s,e._logEvent,a),e._logEvent=d(u)}(this,{ts:a,methodLevel:r,methodValue:s,transmitLevel:n,transmitValue:o.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},u)}}))}(e,t,r)}function c(e,t,r,n){for(const i in e)if(n&&e[i]instanceof Error)e[i]=o.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i]))for(const n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function u(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return e[r].apply(this,n)}}function d(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function h(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?m:g}function l(){return{}}function f(e){return e}function p(){}function m(){return!1}function g(){return Date.now()}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=s,o.stdTimeFunctions=Object.assign({},{nullTime:m,epochTime:g,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},4945:(e,t,r)=>{var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},i="URLSearchParams"in n,s="Symbol"in n&&"iterator"in Symbol,o="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in n,c="ArrayBuffer"in n;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return s&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function g(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=g(t);return t.readAsArrayBuffer(e),r}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&o&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||d(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return m(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(o)return this.blob().then(y);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,i,s=m(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,r=g(t=new FileReader),i=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,i),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=h(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[h(e)]},p.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},p.prototype.set=function(e,t){this.map[h(e)]=l(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},s&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function A(e,t){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,s=(t=t||{}).body;if(e instanceof A){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),w.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function E(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function x(e,t){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})},v.call(A.prototype),v.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var I=[301,302,303,307,308];x.redirect=function(e,t){if(-1===I.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function _(e,r){return new Promise((function(i,s){var a=new A(e,r);if(a.signal&&a.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function d(){u.abort()}if(u.onload=function(){var e,t,r={statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();try{t.append(n,i)}catch(e){console.warn("Response "+e.message)}}})),t)};0===a.url.indexOf("file://")&&(u.status<200||u.status>599)?r.status=200:r.status=u.status,r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;setTimeout((function(){i(new x(n,r))}),0)},u.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request timed out"))}),0)},u.onabort=function(){setTimeout((function(){s(new t.DOMException("Aborted","AbortError"))}),0)},u.open(a.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&(o?u.responseType="blob":c&&(u.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof p||n.Headers&&r.headers instanceof n.Headers)){var f=[];Object.getOwnPropertyNames(r.headers).forEach((function(e){f.push(h(e)),u.setRequestHeader(e,l(r.headers[e]))})),a.headers.forEach((function(e,t){-1===f.indexOf(t)&&u.setRequestHeader(t,e)}))}else a.headers.forEach((function(e,t){u.setRequestHeader(t,e)}));a.signal&&(a.signal.addEventListener("abort",d),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",d)}),u.send(void 0===a._bodyInit?null:a._bodyInit)}))}_.polyfill=!0,n.fetch||(n.fetch=_,n.Headers=p,n.Request=A,n.Response=x),t.Headers=p,t.Request=A,t.Response=x,t.fetch=_,Object.defineProperty(t,"__esModule",{value:!0})}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=n.fetch?n:i;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},5037:(e,t,r)=>{var n;function i(e){this.rand=e}if(e.exports=function(e){return n||(n=new i(null)),n.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var s=r(3776);if("function"!=typeof s.randomBytes)throw new Error("Not supported");i.prototype._rand=function(e){return s.randomBytes(e)}}catch(e){}},5215:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>w,__asyncGenerator:()=>v,__asyncValues:()=>A,__await:()=>b,__awaiter:()=>d,__classPrivateFieldGet:()=>_,__classPrivateFieldSet:()=>S,__createBinding:()=>l,__decorate:()=>a,__exportStar:()=>f,__extends:()=>i,__generator:()=>h,__importDefault:()=>I,__importStar:()=>x,__makeTemplateObject:()=>E,__metadata:()=>u,__param:()=>c,__read:()=>m,__rest:()=>o,__spread:()=>g,__spreadArrays:()=>y,__values:()=>p});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function l(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,u):d(s[0][2],r)}catch(e){d(s[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function d(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function A(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function S(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},5682:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(7173),t),n.__exportStar(r(1089),t)},5924:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>l,Fc:()=>u,Id:()=>h,O8:()=>o,qv:()=>c,po:()=>p,Ow:()=>a,ZJ:()=>d,DH:()=>s,ld:()=>f});const n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(9999);function s(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}const c=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function u(e){for(let r=0;r<e.length;r++)e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function d(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),(0,i.DO)(e),e}function h(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];(0,i.DO)(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}class l{clone(){return this._cloneInto()}}function f(e){const t=t=>e().update(d(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function p(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"==typeof n.randomBytes)return n.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}},6166:(e,t,r)=>{"use strict";var n=r(7426),i=r(3349);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=s,s.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},s.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},s.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n}},6225:(e,t,r)=>{"use strict";var n=r(7426).rotr32;function i(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}function o(e,t,r){return e^t^r}t.ft_1=function(e,t,r,n){return 0===e?i(t,r,n):1===e||3===e?o(t,r,n):2===e?s(t,r,n):void 0},t.ch32=i,t.maj32=s,t.p32=o,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},6229:(e,t,r)=>{"use strict";t.sha1=r(3917),t.sha224=r(7714),t.sha256=r(2287),t.sha384=r(1911),t.sha512=r(7766)},6289:(e,t)=>{"use strict";function r(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function n(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return a(function(e){let t="";for(let r=0;r<e.length;r++)t+=o[e[r]];return t}(e))}function i(e,t){if(e<56)return Uint8Array.from([e+t]);const r=d(e),n=d(t+55+r.length/2);return Uint8Array.from(c(n+r))}function s(e){let t,i,o,a,c;const u=[],d=e[0];if(d<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(d<=183){if(t=d-127,o=128===d?Uint8Array.from([]):r(e,1,t),2===t&&o[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:o,remainder:e.slice(t)}}if(d<=191){if(i=d-182,e.length-1<i)throw new Error("invalid RLP: not enough bytes for string length");if(t=n(r(e,1,i)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return o=r(e,i,t+i),{data:o,remainder:e.slice(t+i)}}if(d<=247){for(t=d-191,a=r(e,1,t);a.length;)c=s(a),u.push(c.data),a=c.remainder;return{data:u,remainder:e.slice(t)}}{if(i=d-246,t=n(r(e,1,i)),t<56)throw new Error("invalid RLP: encoded list too short");const o=i+t;if(o>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=r(e,i,o);a.length;)c=s(a),u.push(c.data),a=c.remainder;return{data:u,remainder:e.slice(o)}}}t.Tj=void 0;const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function a(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function c(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=a(e.slice(n,n+2))}return t}function u(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}function d(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function h(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function l(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return h(e)?c((r="string"!=typeof(n=e)?n:h(n)?n.slice(2):n).length%2?`0${r}`:r):(t=e,(new TextEncoder).encode(t));var t,r,n;if("number"==typeof e||"bigint"==typeof e)return e?c(d(e)):Uint8Array.from([]);if(null==e)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}t.Tj={encode:function e(t){if(Array.isArray(t)){const r=[];let n=0;for(let i=0;i<t.length;i++){const s=e(t[i]);r.push(s),n+=s.length}return u(i(n,192),...r)}const r=l(t);return 1===r.length&&r[0]<128?r:u(i(r.length,128),r)},decode:function(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=s(l(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}}},6661:(e,t,r)=>{"use strict";var n=r(7011),i=n.assert,s=n.parseBytes,o=n.cachedProperty;function a(e,t){this.eddsa=e,this._secret=s(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=s(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},o(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),o(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),o(a,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),o(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),o(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),o(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},a.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},e.exports=a},6677:(e,t,r)=>{"use strict";var n=r(9404),i=r(7011),s=i.getNAF,o=i.getJSF,a=i.assert;function c(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){a(e.precomputed);var r=e._getDoubles(),n=s(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,c,u=[];for(o=0;o<n.length;o+=r.step){c=0;for(var d=o+r.step-1;d>=o;d--)c=(c<<1)+n[d];u.push(c)}for(var h=this.jpoint(null,null,null),l=this.jpoint(null,null,null),f=i;f>0;f--){for(o=0;o<u.length;o++)(c=u[o])===f?l=l.mixedAdd(r.points[o]):c===-f&&(l=l.mixedAdd(r.points[o].neg()));h=h.add(l)}return h.toP()},c.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=s(t,r,this._bitLength),c=this.jpoint(null,null,null),u=o.length-1;u>=0;u--){for(var d=0;u>=0&&0===o[u];u--)d++;if(u>=0&&d++,c=c.dblp(d),u<0)break;var h=o[u];a(0!==h),c="affine"===e.type?h>0?c.mixedAdd(i[h-1>>1]):c.mixedAdd(i[-h-1>>1].neg()):h>0?c.add(i[h-1>>1]):c.add(i[-h-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,r,n,i){var a,c,u,d=this._wnafT1,h=this._wnafT2,l=this._wnafT3,f=0;for(a=0;a<n;a++){var p=(u=t[a])._getNAFPoints(e);d[a]=p.wnd,h[a]=p.points}for(a=n-1;a>=1;a-=2){var m=a-1,g=a;if(1===d[m]&&1===d[g]){var y=[t[m],null,null,t[g]];0===t[m].y.cmp(t[g].y)?(y[1]=t[m].add(t[g]),y[2]=t[m].toJ().mixedAdd(t[g].neg())):0===t[m].y.cmp(t[g].y.redNeg())?(y[1]=t[m].toJ().mixedAdd(t[g]),y[2]=t[m].add(t[g].neg())):(y[1]=t[m].toJ().mixedAdd(t[g]),y[2]=t[m].toJ().mixedAdd(t[g].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],v=o(r[m],r[g]);for(f=Math.max(v[0].length,f),l[m]=new Array(f),l[g]=new Array(f),c=0;c<f;c++){var w=0|v[0][c],A=0|v[1][c];l[m][c]=b[3*(w+1)+(A+1)],l[g][c]=0,h[m]=y}}else l[m]=s(r[m],d[m],this._bitLength),l[g]=s(r[g],d[g],this._bitLength),f=Math.max(l[m].length,f),f=Math.max(l[g].length,f)}var E=this.jpoint(null,null,null),x=this._wnafT4;for(a=f;a>=0;a--){for(var I=0;a>=0;){var _=!0;for(c=0;c<n;c++)x[c]=0|l[c][a],0!==x[c]&&(_=!1);if(!_)break;I++,a--}if(a>=0&&I++,E=E.dblp(I),a<0)break;for(c=0;c<n;c++){var S=x[c];0!==S&&(S>0?u=h[c][S-1>>1]:S<0&&(u=h[c][-S-1>>1].neg()),E="affine"===u.type?E.mixedAdd(u):E.add(u))}}for(a=0;a<n;a++)h[a]=null;return i?E:E.toP()},c.BasePoint=u,u.prototype.eq=function(){throw new Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},u.prototype.encodeCompressed=function(e){return this.encode(e,!0)},u.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},u.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},u.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},u.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},u.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var s=0;s<e;s++)n=n.dbl();r.push(n)}return{step:e,points:r}},u.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},6698:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},6729:(e,t,r)=>{"use strict";var n=t;n.version=r(1636).rE,n.utils=r(7011),n.rand=r(5037),n.curve=r(894),n.curves=r(480),n.ec=r(7447),n.eddsa=r(8650)},6784:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),s=n.rotl32,o=n.sum32,a=n.sum32_3,c=n.sum32_4,u=i.BlockHash;function d(){if(!(this instanceof d))return new d;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function l(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(d,u),t.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],u=this.h[3],d=this.h[4],b=r,v=n,w=i,A=u,E=d,x=0;x<80;x++){var I=o(s(c(r,h(x,n,i,u),e[p[x]+t],l(x)),g[x]),d);r=d,d=u,u=s(i,10),i=n,n=I,I=o(s(c(b,h(79-x,v,w,A),e[m[x]+t],f(x)),y[x]),E),b=E,E=A,A=s(w,10),w=v,v=I}I=a(this.h[1],i,A),this.h[1]=a(this.h[2],u,E),this.h[2]=a(this.h[3],d,b),this.h[3]=a(this.h[4],r,v),this.h[4]=a(this.h[0],n,w),this.h[0]=I},d.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},7007:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}m(e,t,s,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var i,s,o,u;if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=o.length,u=d,console&&console.warn&&console.warn(u)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function l(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var u=c.length,d=p(c,u);for(r=0;r<u;++r)n(d[r],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,s,o;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return l(this,e,!0)},s.prototype.rawListeners=function(e){return l(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7011:(e,t,r)=>{"use strict";var n=t,i=r(9404),s=r(3349),o=r(4367);n.assert=s,n.toArray=o.toArray,n.zero2=o.zero2,n.toHex=o.toHex,n.encode=o.encode,n.getNAF=function(e,t,r){var n,i=new Array(Math.max(e.bitLength(),r)+1);for(n=0;n<i.length;n+=1)i[n]=0;var s=1<<t+1,o=e.clone();for(n=0;n<i.length;n++){var a,c=o.andln(s-1);o.isOdd()?(a=c>(s>>1)-1?(s>>1)-c:c,o.isubn(a)):a=0,i[n]=a,o.iushrn(1)}return i},n.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,s=0;e.cmpn(-i)>0||t.cmpn(-s)>0;){var o,a,c=e.andln(3)+i&3,u=t.andln(3)+s&3;3===c&&(c=-1),3===u&&(u=-1),o=1&c?3!=(n=e.andln(7)+i&7)&&5!==n||2!==u?c:-c:0,r[0].push(o),a=1&u?3!=(n=t.andln(7)+s&7)&&5!==n||2!==c?u:-u:0,r[1].push(a),2*i===o+1&&(i=1-i),2*s===a+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return r},n.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(e){return"string"==typeof e?n.toArray(e,"hex"):e},n.intFromLE=function(e){return new i(e,"hex","le")}},7173:(e,t,r)=>{"use strict";function n(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function i(){const e=n();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=n,t.getSubtleCrypto=i,t.isBrowserCryptoAvailable=function(){return!!n()&&!!i()}},7426:(e,t,r)=>{"use strict";var n=r(3349),i=r(6698);function s(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function o(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):s(e,i)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=a(e[r].toString(16));return t},t.htonl=o,t.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=o(i)),r+=c(i.toString(16))}return r},t.zero2=a,t.zero8=c,t.join32=function(e,t,r,i){var s=r-t;n(s%4==0);for(var o=new Array(s/4),a=0,c=t;a<o.length;a++,c+=4){var u;u="big"===i?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],o[a]=u>>>0}return o},t.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];"big"===t?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},t.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},t.sum64=function(e,t,r,n){var i=e[t],s=n+e[t+1]>>>0,o=(s<n?1:0)+r+i;e[t]=o>>>0,e[t+1]=s},t.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,n){return t+n>>>0},t.sum64_4_hi=function(e,t,r,n,i,s,o,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+s>>>0)<s?1:0,e+r+i+o+(c+=(u=u+a>>>0)<a?1:0)>>>0},t.sum64_4_lo=function(e,t,r,n,i,s,o,a){return t+n+s+a>>>0},t.sum64_5_hi=function(e,t,r,n,i,s,o,a,c,u){var d=0,h=t;return d+=(h=h+n>>>0)<t?1:0,d+=(h=h+s>>>0)<s?1:0,d+=(h=h+a>>>0)<a?1:0,e+r+i+o+c+(d+=(h=h+u>>>0)<u?1:0)>>>0},t.sum64_5_lo=function(e,t,r,n,i,s,o,a,c,u){return t+n+s+a+u>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},7447:(e,t,r)=>{"use strict";var n=r(9404),i=r(2723),s=r(7011),o=r(480),a=r(5037),c=s.assert,u=r(1200),d=r(8545);function h(e){if(!(this instanceof h))return new h(e);"string"==typeof e&&(c(Object.prototype.hasOwnProperty.call(o,e),"Unknown curve "+e),e=o[e]),e instanceof o.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=h,h.prototype.keyPair=function(e){return new u(this,e)},h.prototype.keyFromPrivate=function(e,t){return u.fromPrivate(this,e,t)},h.prototype.keyFromPublic=function(e,t){return u.fromPublic(this,e,t)},h.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),s=this.n.sub(new n(2));;){var o=new n(t.generate(r));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}},h.prototype._truncateToN=function(e,t,r){var i;if(n.isBN(e)||"number"==typeof e)i=(e=new n(e,16)).byteLength();else if("object"==typeof e)i=e.length,e=new n(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new n(s,16)}"number"!=typeof r&&(r=8*i);var o=r-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},h.prototype.sign=function(e,t,r,s){if("object"==typeof r&&(s=r,r=null),s||(s={}),"string"!=typeof e&&"number"!=typeof e&&!n.isBN(e)){c("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),c(e.length>>>0===e.length);for(var o=0;o<e.length;o++)c((255&e[o])===e[o])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,s.msgBitLength),c(!e.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),u=t.getPrivate().toArray("be",a),h=e.toArray("be",a);c(new n(h).eq(e),"Can not sign message");for(var l=new i({hash:this.hash,entropy:u,nonce:h,pers:s.pers,persEnc:s.persEnc||"utf8"}),f=this.n.sub(new n(1)),p=0;;p++){var m=s.k?s.k(p):new n(l.generate(this.n.byteLength()));if(!((m=this._truncateToN(m,!0)).cmpn(1)<=0||m.cmp(f)>=0)){var g=this.g.mul(m);if(!g.isInfinity()){var y=g.getX(),b=y.umod(this.n);if(0!==b.cmpn(0)){var v=m.invm(this.n).mul(b.mul(t.getPrivate()).iadd(e));if(0!==(v=v.umod(this.n)).cmpn(0)){var w=(g.getY().isOdd()?1:0)|(0!==y.cmp(b)?2:0);return s.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),w^=1),new d({r:b,s:v,recoveryParam:w})}}}}}},h.prototype.verify=function(e,t,r,n,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),r=this.keyFromPublic(r,n);var s=(t=new d(t,"hex")).r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,c=o.invm(this.n),u=c.mul(e).umod(this.n),h=c.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),h)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(u,r.getPublic(),h)).isInfinity()&&0===a.getX().umod(this.n).cmp(s)},h.prototype.recoverPubKey=function(e,t,r,i){c((3&r)===r,"The recovery param is more than two bits"),t=new d(t,i);var s=this.n,o=new n(e),a=t.r,u=t.s,h=1&r,l=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");a=l?this.curve.pointFromX(a.add(this.curve.n),h):this.curve.pointFromX(a,h);var f=t.r.invm(s),p=s.sub(o).mul(f).umod(s),m=u.mul(f).umod(s);return this.g.mulAdd(p,a,m)},h.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new d(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},7714:(e,t,r)=>{"use strict";var n=r(7426),i=r(2287);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(s,i),e.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},7766:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),s=r(3349),o=n.rotr64_hi,a=n.rotr64_lo,c=n.shr64_hi,u=n.shr64_lo,d=n.sum64,h=n.sum64_hi,l=n.sum64_lo,f=n.sum64_4_hi,p=n.sum64_4_lo,m=n.sum64_5_hi,g=n.sum64_5_lo,y=i.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}function w(e,t,r,n,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function A(e,t,r,n,i,s){var o=t&n^~t&s;return o<0&&(o+=4294967296),o}function E(e,t,r,n,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function x(e,t,r,n,i,s){var o=t&n^t&s^n&s;return o<0&&(o+=4294967296),o}function I(e,t){var r=o(e,t,28)^o(t,e,2)^o(t,e,7);return r<0&&(r+=4294967296),r}function _(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function S(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}function P(e,t){var r=o(e,t,1)^o(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r}function O(e,t){var r=a(e,t,1)^a(e,t,8)^u(e,t,7);return r<0&&(r+=4294967296),r}function k(e,t){var r=a(e,t,19)^a(t,e,29)^u(e,t,6);return r<0&&(r+=4294967296),r}n.inherits(v,y),e.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=(g=r[n-4],y=r[n-3],b=void 0,(b=o(g,y,19)^o(y,g,29)^c(g,y,6))<0&&(b+=4294967296),b),s=k(r[n-4],r[n-3]),a=r[n-14],u=r[n-13],d=P(r[n-30],r[n-29]),h=O(r[n-30],r[n-29]),l=r[n-32],m=r[n-31];r[n]=f(i,s,a,u,d,h,l,m),r[n+1]=p(i,s,a,u,d,h,l,m)}var g,y,b},v.prototype._update=function(e,t){this._prepareBlock(e,t);var r,n,i,a=this.W,c=this.h[0],u=this.h[1],f=this.h[2],p=this.h[3],y=this.h[4],b=this.h[5],v=this.h[6],P=this.h[7],O=this.h[8],k=this.h[9],T=this.h[10],C=this.h[11],M=this.h[12],R=this.h[13],N=this.h[14],B=this.h[15];s(this.k.length===a.length);for(var L=0;L<a.length;L+=2){var j=N,D=B,F=(i=void 0,(i=o(r=O,n=k,14)^o(r,n,18)^o(n,r,9))<0&&(i+=4294967296),i),U=S(O,k),q=w(O,0,T,0,M),H=A(0,k,0,C,0,R),z=this.k[L],$=this.k[L+1],G=a[L],V=a[L+1],K=m(j,D,F,U,q,H,z,$,G,V),W=g(j,D,F,U,q,H,z,$,G,V);j=I(c,u),D=_(c,u),F=E(c,0,f,0,y),U=x(0,u,0,p,0,b);var Q=h(j,D,F,U),Z=l(j,D,F,U);N=M,B=R,M=T,R=C,T=O,C=k,O=h(v,P,K,W),k=l(P,P,K,W),v=y,P=b,y=f,b=p,f=c,p=u,c=h(K,W,Q,Z),u=l(K,W,Q,Z)}d(this.h,0,c,u),d(this.h,2,f,p),d(this.h,4,y,b),d(this.h,6,v,P),d(this.h,8,O,k),d(this.h,10,T,C),d(this.h,12,M,R),d(this.h,14,N,B)},v.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},7790:()=>{},7952:(e,t,r)=>{var n=t;n.utils=r(7426),n.common=r(6166),n.sha=r(6229),n.ripemd=r(6784),n.hmac=r(8948),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},8196:(e,t)=>{"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function n(e){const t=r(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=n,t.getDocumentOrThrow=function(){return n("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return n("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return n("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return n("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return n("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},8545:(e,t,r)=>{"use strict";var n=r(9404),i=r(7011),s=i.assert;function o(e,t){if(e instanceof o)return e;this._importDER(e,t)||(s(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function c(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var i=0,s=0,o=t.place;s<n;s++,o++)i<<=8,i|=e[o],i>>>=0;return!(i<=127)&&(t.place=o,i)}function u(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function d(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}e.exports=o,o.prototype._importDER=function(e,t){e=i.toArray(e,t);var r=new a;if(48!==e[r.place++])return!1;var s=c(e,r);if(!1===s)return!1;if(s+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var o=c(e,r);if(!1===o)return!1;if(128&e[r.place])return!1;var u=e.slice(r.place,o+r.place);if(r.place+=o,2!==e[r.place++])return!1;var d=c(e,r);if(!1===d)return!1;if(e.length!==d+r.place)return!1;if(128&e[r.place])return!1;var h=e.slice(r.place,d+r.place);if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new n(u),this.s=new n(h),this.recoveryParam=null,!0},o.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=u(t),r=u(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];d(n,t.length),(n=n.concat(t)).push(2),d(n,r.length);var s=n.concat(r),o=[48];return d(o,s.length),o=o.concat(s),i.encode(o,e)}},8650:(e,t,r)=>{"use strict";var n=r(7952),i=r(480),s=r(7011),o=s.assert,a=s.parseBytes,c=r(6661),u=r(220);function d(e){if(o("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof d))return new d(e);e=i[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}e.exports=d,d.prototype.sign=function(e,t){e=a(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),s=this.encodePoint(i),o=this.hashInt(s,r.pubBytes(),e).mul(r.priv()),c=n.add(o).umod(this.curve.n);return this.makeSignature({R:i,S:c,Rencoded:s})},d.prototype.verify=function(e,t,r){if(e=a(e),(t=this.makeSignature(t)).S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),s=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(s)},d.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return s.intFromLE(e.digest()).umod(this.curve.n)},d.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},d.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},d.prototype.makeSignature=function(e){return e instanceof u?e:new u(this,e)},d.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},d.prototype.decodePoint=function(e){var t=(e=s.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=!!(128&e[t]),i=s.intFromLE(r);return this.curve.pointFromY(i,n)},d.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},d.prototype.decodeInt=function(e){return s.intFromLE(e)},d.prototype.isPoint=function(e){return e instanceof this.pointClass}},8900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(9606),t),n.__exportStar(r(9883),t),n.__exportStar(r(2010),t),n.__exportStar(r(9026),t)},8948:(e,t,r)=>{"use strict";var n=r(7426),i=r(3349);function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=s,s.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},s.prototype.update=function(e,t){return this.inner.update(e,t),this},s.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},9026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(9244),t),n.__exportStar(r(1861),t)},9094:(e,t,r)=>{var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},i="URLSearchParams"in n,s="Symbol"in n&&"iterator"in Symbol,o="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in n,c="ArrayBuffer"in n;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return s&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function g(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=g(t);return t.readAsArrayBuffer(e),r}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&o&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||d(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return m(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(o)return this.blob().then(y);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,i,s=m(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,r=g(t=new FileReader),i=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,i),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=h(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[h(e)]},p.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},p.prototype.set=function(e,t){this.map[h(e)]=l(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},s&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function A(e,t){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,s=(t=t||{}).body;if(e instanceof A){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),w.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function E(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function x(e,t){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})},v.call(A.prototype),v.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var I=[301,302,303,307,308];x.redirect=function(e,t){if(-1===I.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function _(e,r){return new Promise((function(i,s){var a=new A(e,r);if(a.signal&&a.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function d(){u.abort()}if(u.onload=function(){var e,t,r={statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();try{t.append(n,i)}catch(e){console.warn("Response "+e.message)}}})),t)};0===a.url.indexOf("file://")&&(u.status<200||u.status>599)?r.status=200:r.status=u.status,r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;setTimeout((function(){i(new x(n,r))}),0)},u.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request timed out"))}),0)},u.onabort=function(){setTimeout((function(){s(new t.DOMException("Aborted","AbortError"))}),0)},u.open(a.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&(o?u.responseType="blob":c&&(u.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof p||n.Headers&&r.headers instanceof n.Headers)){var f=[];Object.getOwnPropertyNames(r.headers).forEach((function(e){f.push(h(e)),u.setRequestHeader(e,l(r.headers[e]))})),a.headers.forEach((function(e,t){-1===f.indexOf(t)&&u.setRequestHeader(t,e)}))}else a.headers.forEach((function(e,t){u.setRequestHeader(t,e)}));a.signal&&(a.signal.addEventListener("abort",d),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",d)}),u.send(void 0===a._bodyInit?null:a._bodyInit)}))}_.polyfill=!0,n.fetch||(n.fetch=_,n.Headers=p,n.Request=A,n.Response=x),t.Headers=p,t.Request=A,t.Response=x,t.fetch=_}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=n.fetch?n:i;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},9188:(e,t,r)=>{"use strict";var n=r(7011),i=r(9404),s=r(6698),o=r(6677),a=n.assert;function c(e){o.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function u(e,t,r,n){o.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function d(e,t,r,n){o.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(c,o),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new i(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))?r=s[0]:(r=s[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(r)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),r=new i(2).toRed(t).redInvm(),n=r.redNeg(),s=new i(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(s).fromRed(),n.redSub(s).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,r,n,s,o,a,c,u,d,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,f=this.n.clone(),p=new i(1),m=new i(0),g=new i(0),y=new i(1),b=0;0!==l.cmpn(0);){var v=f.div(l);u=f.sub(v.mul(l)),d=g.sub(v.mul(p));var w=y.sub(v.mul(m));if(!n&&u.cmp(h)<0)t=c.neg(),r=p,n=u.neg(),s=d;else if(n&&2==++b)break;c=u,f=l,l=u,g=p,p=d,y=m,m=w}o=u.neg(),a=d;var A=n.sqr().add(s.sqr());return o.sqr().add(a.sqr()).cmp(A)>=0&&(o=t,a=r),n.negative&&(n=n.neg(),s=s.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:s},{a:o,b:a}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),a=s.mul(n.a),c=i.mul(r.b),u=s.mul(n.b);return{k1:e.sub(o).sub(a),k2:c.add(u).neg()}},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var s=n.fromRed().isOdd();return(t&&!s||!t&&s)&&(n=n.redNeg()),this.point(e,n)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),n[2*s]=a,n[2*s+1]=c,i[2*s]=o.k1,i[2*s+1]=o.k2}for(var u=this._wnafMulAdd(1,n,i,2*s,r),d=0;d<2*s;d++)n[d]=null,i[d]=null;return u},s(u,o.BasePoint),c.prototype.point=function(e,t,r){return new u(this,e,t,r)},c.prototype.pointFromJSON=function(e,t){return u.fromJSON(this,e,t)},u.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var s=t[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},u.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},u.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},u.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},u.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(d,o.BasePoint),c.prototype.jpoint=function(e,t,r){return new d(this,e,t,r)},d.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},d.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},d.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=s.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),d=u.redMul(a),h=n.redMul(u),l=c.redSqr().redIAdd(d).redISub(h).redISub(h),f=c.redMul(h.redISub(l)).redISub(s.redMul(d)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(l,f,p)},d.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,s=e.y.redMul(t).redMul(this.z),o=r.redSub(n),a=i.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),u=c.redMul(o),d=r.redMul(c),h=a.redSqr().redIAdd(u).redISub(d).redISub(d),l=a.redMul(d.redISub(h)).redISub(i.redMul(u)),f=this.z.redMul(o);return this.curve.jpoint(h,l,f)},d.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),u=o.redAdd(o);for(t=0;t<e;t++){var d=s.redSqr(),h=u.redSqr(),l=h.redSqr(),f=d.redAdd(d).redIAdd(d).redIAdd(n.redMul(c)),p=s.redMul(h),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=f.redMul(g);y=y.redIAdd(y).redISub(l);var b=u.redMul(a);t+1<e&&(c=c.redMul(l)),s=m,a=b,u=y}return this.curve.jpoint(s,u.redMul(i),a)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},d.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(o).redISub(o),u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),h=this.y.redSqr(),l=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(d).redISub(l);f=f.redIAdd(f);var p=d.redAdd(d).redIAdd(d),m=p.redSqr(),g=l.redIAdd(l);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},d.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),h=this.y.redSqr(),l=this.x.redMul(h),f=this.x.redSub(d).redMul(this.x.redAdd(d));f=f.redAdd(f).redIAdd(f);var p=l.redIAdd(l),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(d);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},d.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=t.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(i)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(o),d=a.redSqr().redISub(u.redAdd(u)),h=u.redISub(d),l=o.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=a.redMul(h).redISub(l),p=r.redAdd(r).redMul(n);return this.curve.jpoint(d,f,p)},d.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),s=i.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(c),d=t.redMul(u);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.x.redMul(a).redISub(d);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(a)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,l,f)},d.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},d.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},d.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},d.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},9244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},9404:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(7790).Buffer}catch(e){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function u(e,t,r,n){for(var i=0,s=Math.min(e.length,r),o=t;o<s;o++){var a=e.charCodeAt(o)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this.strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var s=e.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,d=r;d<a;d+=n)c=u(e,d,d+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=u(e,d,e.length,t),d=0;d<o;d++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var d=c>>>26,h=67108863&c,l=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=l;f++){var p=u-f|0;d+=(o=(i=0|e.words[p])*(s=0|t.words[f])+h)/67108864|0,h=67108863&o}r.words[u]=0|h,c=0|d}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}for(0!==s&&(r=s.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=h[e],f=l[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);r=(p=p.idivn(f)).isZero()?m+r:d[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return n(void 0!==o),this.toArrayLike(o,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0"),this.strip();var o,a,c="le"===t,u=new e(s),d=this.clone();if(c){for(a=0;!d.isZero();a++)o=d.andln(255),d.iushrn(8),u[a]=o;for(;a<s;a++)u[a]=0}else{for(a=0;a<s-i;a++)u[a]=0;for(a=0;!d.isZero();a++)o=d.andln(255),d.iushrn(8),u[s-a-1]=o}return u},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return n(!(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return n(!(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return n(!(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)t=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<r.length;s++)t=(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var s=0,o=0;o<n.length;o++)s=(t=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<r.length;o++)s=(t=(0|r.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,s,o=e.words,a=t.words,c=r.words,u=0,d=0|o[0],h=8191&d,l=d>>>13,f=0|o[1],p=8191&f,m=f>>>13,g=0|o[2],y=8191&g,b=g>>>13,v=0|o[3],w=8191&v,A=v>>>13,E=0|o[4],x=8191&E,I=E>>>13,_=0|o[5],S=8191&_,P=_>>>13,O=0|o[6],k=8191&O,T=O>>>13,C=0|o[7],M=8191&C,R=C>>>13,N=0|o[8],B=8191&N,L=N>>>13,j=0|o[9],D=8191&j,F=j>>>13,U=0|a[0],q=8191&U,H=U>>>13,z=0|a[1],$=8191&z,G=z>>>13,V=0|a[2],K=8191&V,W=V>>>13,Q=0|a[3],Z=8191&Q,J=Q>>>13,Y=0|a[4],X=8191&Y,ee=Y>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,de=0|a[8],he=8191&de,le=de>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(u+(n=Math.imul(h,q))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(l,q)|0))<<13)|0;u=((s=Math.imul(l,H))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,q),i=(i=Math.imul(p,H))+Math.imul(m,q)|0,s=Math.imul(m,H);var ye=(u+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(l,$)|0))<<13)|0;u=((s=s+Math.imul(l,G)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,q),i=(i=Math.imul(y,H))+Math.imul(b,q)|0,s=Math.imul(b,H),n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(m,$)|0,s=s+Math.imul(m,G)|0;var be=(u+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,W)|0)+Math.imul(l,K)|0))<<13)|0;u=((s=s+Math.imul(l,W)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,q),i=(i=Math.imul(w,H))+Math.imul(A,q)|0,s=Math.imul(A,H),n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(b,$)|0,s=s+Math.imul(b,G)|0,n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,W)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,W)|0;var ve=(u+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(l,Z)|0))<<13)|0;u=((s=s+Math.imul(l,J)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(x,q),i=(i=Math.imul(x,H))+Math.imul(I,q)|0,s=Math.imul(I,H),n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,G)|0)+Math.imul(A,$)|0,s=s+Math.imul(A,G)|0,n=n+Math.imul(y,K)|0,i=(i=i+Math.imul(y,W)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,W)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,Z)|0,s=s+Math.imul(m,J)|0;var we=(u+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(l,X)|0))<<13)|0;u=((s=s+Math.imul(l,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(S,q),i=(i=Math.imul(S,H))+Math.imul(P,q)|0,s=Math.imul(P,H),n=n+Math.imul(x,$)|0,i=(i=i+Math.imul(x,G)|0)+Math.imul(I,$)|0,s=s+Math.imul(I,G)|0,n=n+Math.imul(w,K)|0,i=(i=i+Math.imul(w,W)|0)+Math.imul(A,K)|0,s=s+Math.imul(A,W)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(b,Z)|0,s=s+Math.imul(b,J)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,X)|0,s=s+Math.imul(m,ee)|0;var Ae=(u+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(l,re)|0))<<13)|0;u=((s=s+Math.imul(l,ne)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(k,q),i=(i=Math.imul(k,H))+Math.imul(T,q)|0,s=Math.imul(T,H),n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(P,$)|0,s=s+Math.imul(P,G)|0,n=n+Math.imul(x,K)|0,i=(i=i+Math.imul(x,W)|0)+Math.imul(I,K)|0,s=s+Math.imul(I,W)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(A,Z)|0,s=s+Math.imul(A,J)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(b,X)|0,s=s+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(m,re)|0,s=s+Math.imul(m,ne)|0;var Ee=(u+(n=n+Math.imul(h,se)|0)|0)+((8191&(i=(i=i+Math.imul(h,oe)|0)+Math.imul(l,se)|0))<<13)|0;u=((s=s+Math.imul(l,oe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(M,q),i=(i=Math.imul(M,H))+Math.imul(R,q)|0,s=Math.imul(R,H),n=n+Math.imul(k,$)|0,i=(i=i+Math.imul(k,G)|0)+Math.imul(T,$)|0,s=s+Math.imul(T,G)|0,n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,W)|0)+Math.imul(P,K)|0,s=s+Math.imul(P,W)|0,n=n+Math.imul(x,Z)|0,i=(i=i+Math.imul(x,J)|0)+Math.imul(I,Z)|0,s=s+Math.imul(I,J)|0,n=n+Math.imul(w,X)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(A,X)|0,s=s+Math.imul(A,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(b,re)|0,s=s+Math.imul(b,ne)|0,n=n+Math.imul(p,se)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(m,se)|0,s=s+Math.imul(m,oe)|0;var xe=(u+(n=n+Math.imul(h,ce)|0)|0)+((8191&(i=(i=i+Math.imul(h,ue)|0)+Math.imul(l,ce)|0))<<13)|0;u=((s=s+Math.imul(l,ue)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(B,q),i=(i=Math.imul(B,H))+Math.imul(L,q)|0,s=Math.imul(L,H),n=n+Math.imul(M,$)|0,i=(i=i+Math.imul(M,G)|0)+Math.imul(R,$)|0,s=s+Math.imul(R,G)|0,n=n+Math.imul(k,K)|0,i=(i=i+Math.imul(k,W)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,W)|0,n=n+Math.imul(S,Z)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(P,Z)|0,s=s+Math.imul(P,J)|0,n=n+Math.imul(x,X)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(I,X)|0,s=s+Math.imul(I,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(A,re)|0,s=s+Math.imul(A,ne)|0,n=n+Math.imul(y,se)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(b,se)|0,s=s+Math.imul(b,oe)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,s=s+Math.imul(m,ue)|0;var Ie=(u+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,le)|0)+Math.imul(l,he)|0))<<13)|0;u=((s=s+Math.imul(l,le)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(D,q),i=(i=Math.imul(D,H))+Math.imul(F,q)|0,s=Math.imul(F,H),n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,G)|0)+Math.imul(L,$)|0,s=s+Math.imul(L,G)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,W)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,W)|0,n=n+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,J)|0)+Math.imul(T,Z)|0,s=s+Math.imul(T,J)|0,n=n+Math.imul(S,X)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(P,X)|0,s=s+Math.imul(P,ee)|0,n=n+Math.imul(x,re)|0,i=(i=i+Math.imul(x,ne)|0)+Math.imul(I,re)|0,s=s+Math.imul(I,ne)|0,n=n+Math.imul(w,se)|0,i=(i=i+Math.imul(w,oe)|0)+Math.imul(A,se)|0,s=s+Math.imul(A,oe)|0,n=n+Math.imul(y,ce)|0,i=(i=i+Math.imul(y,ue)|0)+Math.imul(b,ce)|0,s=s+Math.imul(b,ue)|0,n=n+Math.imul(p,he)|0,i=(i=i+Math.imul(p,le)|0)+Math.imul(m,he)|0,s=s+Math.imul(m,le)|0;var _e=(u+(n=n+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(l,pe)|0))<<13)|0;u=((s=s+Math.imul(l,me)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(D,$),i=(i=Math.imul(D,G))+Math.imul(F,$)|0,s=Math.imul(F,G),n=n+Math.imul(B,K)|0,i=(i=i+Math.imul(B,W)|0)+Math.imul(L,K)|0,s=s+Math.imul(L,W)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(R,Z)|0,s=s+Math.imul(R,J)|0,n=n+Math.imul(k,X)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(T,X)|0,s=s+Math.imul(T,ee)|0,n=n+Math.imul(S,re)|0,i=(i=i+Math.imul(S,ne)|0)+Math.imul(P,re)|0,s=s+Math.imul(P,ne)|0,n=n+Math.imul(x,se)|0,i=(i=i+Math.imul(x,oe)|0)+Math.imul(I,se)|0,s=s+Math.imul(I,oe)|0,n=n+Math.imul(w,ce)|0,i=(i=i+Math.imul(w,ue)|0)+Math.imul(A,ce)|0,s=s+Math.imul(A,ue)|0,n=n+Math.imul(y,he)|0,i=(i=i+Math.imul(y,le)|0)+Math.imul(b,he)|0,s=s+Math.imul(b,le)|0;var Se=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((s=s+Math.imul(m,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,W))+Math.imul(F,K)|0,s=Math.imul(F,W),n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(L,Z)|0,s=s+Math.imul(L,J)|0,n=n+Math.imul(M,X)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(R,X)|0,s=s+Math.imul(R,ee)|0,n=n+Math.imul(k,re)|0,i=(i=i+Math.imul(k,ne)|0)+Math.imul(T,re)|0,s=s+Math.imul(T,ne)|0,n=n+Math.imul(S,se)|0,i=(i=i+Math.imul(S,oe)|0)+Math.imul(P,se)|0,s=s+Math.imul(P,oe)|0,n=n+Math.imul(x,ce)|0,i=(i=i+Math.imul(x,ue)|0)+Math.imul(I,ce)|0,s=s+Math.imul(I,ue)|0,n=n+Math.imul(w,he)|0,i=(i=i+Math.imul(w,le)|0)+Math.imul(A,he)|0,s=s+Math.imul(A,le)|0;var Pe=(u+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((s=s+Math.imul(b,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,J))+Math.imul(F,Z)|0,s=Math.imul(F,J),n=n+Math.imul(B,X)|0,i=(i=i+Math.imul(B,ee)|0)+Math.imul(L,X)|0,s=s+Math.imul(L,ee)|0,n=n+Math.imul(M,re)|0,i=(i=i+Math.imul(M,ne)|0)+Math.imul(R,re)|0,s=s+Math.imul(R,ne)|0,n=n+Math.imul(k,se)|0,i=(i=i+Math.imul(k,oe)|0)+Math.imul(T,se)|0,s=s+Math.imul(T,oe)|0,n=n+Math.imul(S,ce)|0,i=(i=i+Math.imul(S,ue)|0)+Math.imul(P,ce)|0,s=s+Math.imul(P,ue)|0,n=n+Math.imul(x,he)|0,i=(i=i+Math.imul(x,le)|0)+Math.imul(I,he)|0,s=s+Math.imul(I,le)|0;var Oe=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(A,pe)|0))<<13)|0;u=((s=s+Math.imul(A,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(D,X),i=(i=Math.imul(D,ee))+Math.imul(F,X)|0,s=Math.imul(F,ee),n=n+Math.imul(B,re)|0,i=(i=i+Math.imul(B,ne)|0)+Math.imul(L,re)|0,s=s+Math.imul(L,ne)|0,n=n+Math.imul(M,se)|0,i=(i=i+Math.imul(M,oe)|0)+Math.imul(R,se)|0,s=s+Math.imul(R,oe)|0,n=n+Math.imul(k,ce)|0,i=(i=i+Math.imul(k,ue)|0)+Math.imul(T,ce)|0,s=s+Math.imul(T,ue)|0,n=n+Math.imul(S,he)|0,i=(i=i+Math.imul(S,le)|0)+Math.imul(P,he)|0,s=s+Math.imul(P,le)|0;var ke=(u+(n=n+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,me)|0)+Math.imul(I,pe)|0))<<13)|0;u=((s=s+Math.imul(I,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(D,re),i=(i=Math.imul(D,ne))+Math.imul(F,re)|0,s=Math.imul(F,ne),n=n+Math.imul(B,se)|0,i=(i=i+Math.imul(B,oe)|0)+Math.imul(L,se)|0,s=s+Math.imul(L,oe)|0,n=n+Math.imul(M,ce)|0,i=(i=i+Math.imul(M,ue)|0)+Math.imul(R,ce)|0,s=s+Math.imul(R,ue)|0,n=n+Math.imul(k,he)|0,i=(i=i+Math.imul(k,le)|0)+Math.imul(T,he)|0,s=s+Math.imul(T,le)|0;var Te=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(P,pe)|0))<<13)|0;u=((s=s+Math.imul(P,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(D,se),i=(i=Math.imul(D,oe))+Math.imul(F,se)|0,s=Math.imul(F,oe),n=n+Math.imul(B,ce)|0,i=(i=i+Math.imul(B,ue)|0)+Math.imul(L,ce)|0,s=s+Math.imul(L,ue)|0,n=n+Math.imul(M,he)|0,i=(i=i+Math.imul(M,le)|0)+Math.imul(R,he)|0,s=s+Math.imul(R,le)|0;var Ce=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,me)|0)+Math.imul(T,pe)|0))<<13)|0;u=((s=s+Math.imul(T,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(D,ce),i=(i=Math.imul(D,ue))+Math.imul(F,ce)|0,s=Math.imul(F,ue),n=n+Math.imul(B,he)|0,i=(i=i+Math.imul(B,le)|0)+Math.imul(L,he)|0,s=s+Math.imul(L,le)|0;var Me=(u+(n=n+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((s=s+Math.imul(R,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(D,he),i=(i=Math.imul(D,le))+Math.imul(F,he)|0,s=Math.imul(F,le);var Re=(u+(n=n+Math.imul(B,pe)|0)|0)+((8191&(i=(i=i+Math.imul(B,me)|0)+Math.imul(L,pe)|0))<<13)|0;u=((s=s+Math.imul(L,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Ne=(u+(n=Math.imul(D,pe))|0)+((8191&(i=(i=Math.imul(D,me))+Math.imul(F,pe)|0))<<13)|0;return u=((s=Math.imul(F,me))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,c[0]=ge,c[1]=ye,c[2]=be,c[3]=ve,c[4]=we,c[5]=Ae,c[6]=Ee,c[7]=xe,c[8]=Ie,c[9]=_e,c[10]=Se,c[11]=Pe,c[12]=Oe,c[13]=ke,c[14]=Te,c[15]=Ce,c[16]=Me,c[17]=Re,c[18]=Ne,0!==u&&(c[19]=u,r.length++),r};function m(e,t,r){return(new g).mulp(e,t,r)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),s.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?p(this,e,t):n<63?f(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,t.length-1),u=Math.max(0,s-e.length+1);u<=c;u++){var d=s-u,h=(0|e.words[d])*(0|t.words[u]),l=67108863&h;a=67108863&(l=l+a|0),i+=(o=(o=o+(h/67108864|0)|0)+(l>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r.strip()}(this,e,t):m(this,e,t),r},g.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},g.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},g.prototype.permute=function(e,t,r,n,i,s){for(var o=0;o<s;o++)n[o]=t[e[o]],i[o]=r[e[o]]},g.prototype.transform=function(e,t,r,n,i,s){this.permute(s,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),d=0;d<i;d+=a)for(var h=c,l=u,f=0;f<o;f++){var p=r[d+f],m=n[d+f],g=r[d+f+o],y=n[d+f+o],b=h*g-l*y;y=h*y+l*g,g=b,r[d+f]=p+g,n[d+f]=m+y,r[d+f+o]=p-g,n[d+f+o]=m-y,f!==a&&(b=c*h-u*l,l=c*l+u*h,h=b)}},g.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},g.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},g.prototype.convert13b=function(e,t,r,i){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===s),n(!(-8192&s))},g.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},g.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),d=new Array(n),h=new Array(n),l=r.words;l.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,u,n),this.transform(o,s,a,c,n,i),this.transform(u,s,d,h,n,i);for(var f=0;f<n;f++){var p=a[f]*d[f]-c[f]*h[f];c[f]=a[f]*h[f]+c[f]*d[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,l,s,n,i),this.conjugate(l,s,n),this.normalize13b(l,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),m(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,s=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=s>>>26,this.words[r]=67108863&s}return 0!==t&&(this.words[r]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<r;this.words[t]=c|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var d=0;for(u=this.length-1;u>=0&&(0!==d||u>=i);u--){var h=0|this.words[u];this.words[u]=d<<26-s|h>>>s,d=h&a}return c&&0!==d&&(c.words[c.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},s.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var i,s,o=e.length+r;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;a=((s-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)a=(s=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&s;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var d=n.clone()._ishlnsubmul(i,1,c);0===d.negative&&(n=d,a&&(a.words[c]=1));for(var h=c-1;h>=0;h--){var l=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(l=Math.min(l/o|0,67108863),n._ishlnsubmul(i,l,h);0!==n.negative;)l--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=l)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):this.negative&e.negative?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},s.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var d=r.clone(),h=t.clone();!t.isZero();){for(var l=0,f=1;!(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(d),o.isub(h)),i.iushrn(1),o.iushrn(1);for(var p=0,m=1;!(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(d),c.isub(h)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),o.isub(c)):(r.isub(t),a.isub(i),c.isub(o))}return{a,b:c,gcd:r.iushln(u)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new s(1),a=new s(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,d=1;!(t.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(t.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var h=0,l=1;!(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return(i=0===t.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var s=t;t=r,r=s}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new x(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},i(v,b),v.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,b),i(A,b),i(E,b),E.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new w;else if("p192"===e)t=new A;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return y[e]=t,t},x.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){n(!(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new s(2*d*d).toRed(this);0!==this.pow(d,u).cmp(c);)d.redIAdd(c);for(var h=this.pow(d,i),l=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new s(1).iushln(p-g-1));l=l.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return l},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],d=c-1;d>=0;d--){var h=u>>d&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==o?(o<<=1,o|=h,(4==++a||0===n&&0===d)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}c=26}return i},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new I(e)},i(I,x),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},I.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},9606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(2985),t),n.__exportStar(r(221),t)},9883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r},9999:(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function i(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{CC:()=>o,DO:()=>i,Fe:()=>n,Ht:()=>a,sd:()=>s})}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={id:e,loaded:!1,exports:{}};return r[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=r,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>e+"-bundle.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="walletconnect-webpack:",i.l=(r,n,s,o)=>{if(e[r])e[r].push(n);else{var a,c;if(void 0!==s)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var h=u[d];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[n];var l=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(l.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=l.bind(null,a.onerror),a.onload=l.bind(null,a.onload),c&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={754:0};i.f.j=(t,r)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=s);var o=i.p+i.u(t),a=new Error;i.l(o,(r=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,s,[o,a,c]=r,u=0;if(o.some((t=>0!==e[t]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);c&&c(i)}for(t&&t(r);u<o.length;u++)s=o[u],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkwalletconnect_webpack=self.webpackChunkwalletconnect_webpack||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};i.r(e),i.d(e,{identity:()=>fi});var t={};i.r(t),i.d(t,{base2:()=>pi});var r={};i.r(r),i.d(r,{base8:()=>mi});var n={};i.r(n),i.d(n,{base10:()=>gi});var s={};i.r(s),i.d(s,{base16:()=>yi,base16upper:()=>bi});var o={};i.r(o),i.d(o,{base32:()=>vi,base32hex:()=>xi,base32hexpad:()=>_i,base32hexpadupper:()=>Si,base32hexupper:()=>Ii,base32pad:()=>Ai,base32padupper:()=>Ei,base32upper:()=>wi,base32z:()=>Pi});var a={};i.r(a),i.d(a,{base36:()=>Oi,base36upper:()=>ki});var c={};i.r(c),i.d(c,{base58btc:()=>Ti,base58flickr:()=>Ci});var u={};i.r(u),i.d(u,{base64:()=>Mi,base64pad:()=>Ri,base64url:()=>Ni,base64urlpad:()=>Bi});var d={};i.r(d),i.d(d,{base256emoji:()=>Fi});var h={};i.r(h),i.d(h,{sha256:()=>as,sha512:()=>cs});var l={};i.r(l),i.d(l,{identity:()=>ds});var f={};i.r(f),i.d(f,{code:()=>ls,decode:()=>ps,encode:()=>fs,name:()=>hs});var p={};i.r(p),i.d(p,{code:()=>bs,decode:()=>ws,encode:()=>vs,name:()=>ys});var m={};i.r(m),i.d(m,{abiSchemaToJsonSchema:()=>oI,codePointToInt:()=>dI,ensureIfUint8Array:()=>bI,ethAbiToJsonSchema:()=>aI,fetchArrayElement:()=>cI,hexToNumber:()=>hI,hexToUint8Array:()=>yI,numberToHex:()=>lI,padLeft:()=>fI,parseBaseType:()=>iI,transformJsonDataToAbiFormat:()=>uI,uint8ArrayToHexString:()=>pI});var g={};i.r(g),i.d(g,{isBatchRequest:()=>kS,isBatchResponse:()=>IS,isResponseRpcError:()=>yS,isResponseWithError:()=>vS,isResponseWithNotification:()=>wS,isResponseWithResult:()=>bS,isSubscriptionResult:()=>AS,isValidResponse:()=>xS,setRequestIdStart:()=>SS,toBatchPayload:()=>OS,toPayload:()=>PS,validateResponse:()=>ES});var y={};i.r(y),i.d(y,{ChunkResponseParser:()=>RS,Eip1193Provider:()=>BS,EventEmitter:()=>w_,SocketProvider:()=>DS,Web3DeferredPromise:()=>MS,asciiToHex:()=>a_,bytesToHex:()=>KI,bytesToUint8Array:()=>GI,checkAddressCheckSum:()=>x_,compareBlockNumbers:()=>C_,convert:()=>K_,convertScalarValue:()=>G_,encodePacked:()=>nS,ethUnitMap:()=>zI,format:()=>W_,fromAscii:()=>c_,fromDecimal:()=>YI,fromTwosComplement:()=>q_,fromUtf8:()=>t_,fromWei:()=>p_,getStorageSlotNumForLongString:()=>oS,hexToAscii:()=>u_,hexToBytes:()=>WI,hexToNumber:()=>QI,hexToNumberString:()=>XI,hexToString:()=>o_,hexToUtf8:()=>n_,isAddress:()=>I_,isBatchRequest:()=>kS,isBatchResponse:()=>IS,isBloom:()=>__,isContractAddressInBloom:()=>O_,isContractInitOptions:()=>M_,isDataFormat:()=>z_,isHex:()=>E_,isHexStrict:()=>A_,isInBloom:()=>S_,isNullish:()=>R_,isPromise:()=>dS,isResponseRpcError:()=>yS,isResponseWithError:()=>vS,isResponseWithNotification:()=>wS,isResponseWithResult:()=>bS,isSubscriptionResult:()=>AS,isTopic:()=>k_,isTopicInBloom:()=>T_,isUint8Array:()=>UI,isUserEthereumAddressInBloom:()=>P_,isValidResponse:()=>xS,jsonRpc:()=>g,keccak256:()=>Z_,keccak256Wrapper:()=>Z_,leftPad:()=>F_,mergeDeep:()=>B_,numberToHex:()=>JI,padLeft:()=>L_,padRight:()=>j_,pollTillDefined:()=>fS,pollTillDefinedAndReturnIntervalId:()=>lS,processSolidityEncodePackedArgs:()=>rS,randomBytes:()=>aS,randomHex:()=>cS,rejectIfConditionAtInterval:()=>mS,rejectIfTimeout:()=>pS,rightPad:()=>D_,setRequestIdStart:()=>SS,sha3:()=>J_,sha3Raw:()=>Y_,soliditySha3:()=>iS,soliditySha3Raw:()=>sS,stringToHex:()=>r_,toAscii:()=>d_,toBatchPayload:()=>OS,toBigInt:()=>f_,toBool:()=>y_,toChecksumAddress:()=>g_,toDecimal:()=>ZI,toHex:()=>h_,toNumber:()=>l_,toPayload:()=>PS,toTwosComplement:()=>U_,toUtf8:()=>i_,toWei:()=>m_,uint8ArrayConcat:()=>qI,uint8ArrayEquals:()=>HI,utf8ToBytes:()=>s_,utf8ToHex:()=>e_,uuidV4:()=>gS,validateResponse:()=>ES,waitWithTimeout:()=>hS});var b={};i.r(b),i.d(b,{DO:()=>LP,OG:()=>QP,My:()=>DP,Ph:()=>zP,lX:()=>$P,Id:()=>WP,fg:()=>YP,qj:()=>KP,aT:()=>HP,aY:()=>BP,lq:()=>GP,z:()=>VP,Q5:()=>eO});var v={};i.r(v),i.d(v,{secp256k1:()=>RO});var w=i(7007),A=i.n(w),E=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},x=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},I=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},_=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},S=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},P=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},O=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,k=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],T=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function C(e){var t=function(e){return""!==e&&k.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]}),!1)}(e);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new S;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=E(E([],i,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-i.length),!0)):i=[];var s=i.join("."),o=function(e){for(var t=0,r=T.length;t<r;t++){var n=T[t],i=n[0];if(n[1].exec(e))return i}return null}(e),a=O.exec(e);return a&&a[1]?new _(r,s,o,a[1]):new x(r,s,o)}var M=i(8900),R=i(8196),N=i(2063);const B="2.23.2";let L=({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,j=`viem@${B}`;class D extends Error{constructor(e,t={}){const r=t.cause instanceof D?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof D&&t.cause.docsPath||t.docsPath,i=L?.({...t,docsPath:n});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...j?[`Version: ${j}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=B}walk(e){return F(this,e)}}function F(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?F(e.cause,t):t?null:e}function U(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}class q extends D{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function H(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;const n=e.replace("0x","");if(n.length>2*r)throw new q({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new q({size:e.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s="right"===t;n[s?i:r-i-1]=e[s?i:e.length-i-1]}return n}(e,{dir:t,size:r})}class z extends D{constructor({max:e,min:t,signed:r,size:n,value:i}){super(`Number "${i}" is not in safe ${n?`${8*n}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class $ extends D{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function G(e){return U(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function V(e,{size:t}){if(G(e)>t)throw new $({givenSize:G(e),maxSize:t})}function K(e,t={}){const{signed:r}=t;t.size&&V(e,{size:t.size});const n=BigInt(e);if(!r)return n;const i=(e.length-2)/2;return n<=(1n<<8n*BigInt(i)-1n)-1n?n:n-BigInt(`0x${"f".padStart(2*i,"f")}`)-1n}const W=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Q(e,t={}){return"number"==typeof e||"bigint"==typeof e?J(e,t):"string"==typeof e?function(e,t={}){return Z(Y.encode(e),t)}(e,t):"boolean"==typeof e?function(e,t={}){const r=`0x${Number(e)}`;return"number"==typeof t.size?(V(r,{size:t.size}),H(r,{size:t.size})):r}(e,t):Z(e,t)}function Z(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=W[e[t]];const n=`0x${r}`;return"number"==typeof t.size?(V(n,{size:t.size}),H(n,{dir:"right",size:t.size})):n}function J(e,t={}){const{signed:r,size:n}=t,i=BigInt(e);let s;n?s=r?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof s&&r?-s-1n:0;if(s&&i>s||i<o){const t="bigint"==typeof e?"n":"";throw new z({max:s?`${s}${t}`:void 0,min:`${o}${t}`,signed:r,size:n,value:`${e}${t}`})}const a=`0x${(r&&i<0?(1n<<BigInt(8*n))+BigInt(i):i).toString(16)}`;return n?H(a,{size:n}):a}const Y=new TextEncoder,X=new TextEncoder;const ee={zero:48,nine:57,A:65,F:70,a:97,f:102};function te(e){return e>=ee.zero&&e<=ee.nine?e-ee.zero:e>=ee.A&&e<=ee.F?e-(ee.A-10):e>=ee.a&&e<=ee.f?e-(ee.a-10):void 0}function re(e,t={}){let r=e;t.size&&(V(r,{size:t.size}),r=H(r,{dir:"right",size:t.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let e=0,t=0;e<i;e++){const r=te(n.charCodeAt(t++)),i=te(n.charCodeAt(t++));if(void 0===r||void 0===i)throw new D(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`);s[e]=16*r+i}return s}function ne(e,t={}){const r=X.encode(e);return"number"==typeof t.size?(V(r,{size:t.size}),H(r,{dir:"right",size:t.size})):r}var ie=i(9999);const se=BigInt(2**32-1),oe=BigInt(32);function ae(e,t=!1){return t?{h:Number(e&se),l:Number(e>>oe&se)}:{h:0|Number(e>>oe&se),l:0|Number(e&se)}}function ce(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=ae(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}var ue=i(5924);const de=[],he=[],le=[],fe=BigInt(0),pe=BigInt(1),me=BigInt(2),ge=BigInt(7),ye=BigInt(256),be=BigInt(113);for(let e=0,t=pe,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],de.push(2*(5*n+r)),he.push((e+1)*(e+2)/2%64);let i=fe;for(let e=0;e<7;e++)t=(t<<pe^(t>>ge)*be)%ye,t&me&&(i^=pe<<(pe<<BigInt(e))-pe);le.push(i)}const[ve,we]=ce(le,!0),Ae=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),Ee=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class xe extends ue.Vw{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,ie.Fe)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,ue.DH)(this.state)}keccak(){ue.qv||(0,ue.Fc)(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=Ae(s,o,1)^r[n],c=Ee(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=he[r],s=Ae(t,i,n),o=Ee(t,i,n),a=de[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=ve[n],e[1]^=we[n]}r.fill(0)}(this.state32,this.rounds),ue.qv||(0,ue.Fc)(this.state32),this.posOut=0,this.pos=0}update(e){(0,ie.CC)(this);const{blockLen:t,state:r}=this,n=(e=(0,ue.ZJ)(e)).length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,ie.CC)(this,!1),(0,ie.DO)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,ie.Fe)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,ie.Ht)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new xe(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const Ie=((e,t,r)=>(0,ue.ld)((()=>new xe(t,e,r))))(1,136,32);function _e(e,t){const r=t||"hex",n=Ie(U(e,{strict:!1})?function(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){return re(J(e,t))}(e,t):"boolean"==typeof e?function(e,t={}){const r=new Uint8Array(1);return r[0]=Number(e),"number"==typeof t.size?(V(r,{size:t.size}),H(r,{size:t.size})):r}(e,t):U(e)?re(e,t):ne(e,t)}(e):e);return"bytes"===r?n:Q(n)}class Se extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const Pe=new Se(8192);function Oe(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function ke({hash:e,signature:t}){return r=await async function({hash:e,signature:t}){const r=U(e)?e:Q(e),{secp256k1:n}=await i.e(641).then(i.bind(i,4641)),s=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){const{r:e,s:r,v:i,yParity:s}=t,o=Oe(Number(s??i));return new n.Signature(K(e),K(r)).addRecoveryBit(o)}const e=U(t)?t:Q(t),r=Oe(function(e,t={}){return Number(K(e,t))}(`0x${e.slice(130)}`));return n.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(r)})();return`0x${s.recoverPublicKey(r.substring(2)).toHex(!1)}`}({hash:e,signature:t}),function(e,t){if(Pe.has(`${e}.${t}`))return Pe.get(`${e}.${t}`);const r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=_e(ne(r),"bytes"),i=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&i[e]&&(i[e]=i[e].toUpperCase()),(15&n[e>>1])>=8&&i[e+1]&&(i[e+1]=i[e+1].toUpperCase());const s=`0x${i.join("")}`;return Pe.set(`${e}.${t}`,s),s}(`0x${_e(`0x${r.substring(4)}`).substring(26)}`);var r}const Te=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){const n=e.charAt(r),i=n.charCodeAt(0);if(255!==t[i])throw new TypeError(n+" is ambiguous");t[i]=r}const r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,o=0,a=0;for(;e[s]===n;)o++,s++;const c=(e.length-s)*i+1>>>0,u=new Uint8Array(c);for(;s<e.length;){const n=e.charCodeAt(s);if(n>255)return;let i=t[n];if(255===i)return;let o=0;for(let e=c-1;(0!==i||o<a)&&-1!==e;e--,o++)i+=r*u[e]>>>0,u[e]=i%256>>>0,i=i/256>>>0;if(0!==i)throw new Error("Non-zero carry");a=o,s++}let d=c-a;for(;d!==c&&0===u[d];)d++;const h=new Uint8Array(o+(c-d));let l=o;for(;d!==c;)h[l++]=u[d++];return h}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,o=0,a=0;const c=t.length;for(;a!==c&&0===t[a];)a++,i++;const u=(c-a)*s+1>>>0,d=new Uint8Array(u);for(;a!==c;){let e=t[a],n=0;for(let t=u-1;(0!==e||n<o)&&-1!==t;t--,n++)e+=256*d[t]>>>0,d[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw new Error("Non-zero carry");o=n,a++}let h=u-o;for(;h!==u&&0===d[h];)h++;let l=n.repeat(i);for(;h<u;++h)l+=e.charAt(d[h]);return l},decodeUnsafe:o,decode:function(e){const t=o(e);if(t)return t;throw new Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function Ce(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return(e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))})(e)}catch(t){return e}}function Me(e){return"string"==typeof e?e:(t=e,JSON.stringify(t,((e,t)=>"bigint"==typeof t?t.toString()+"n":t))||"");var t}function Re(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ne(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const Be="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Le=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function je(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),Re(e),e}class De{clone(){return this._cloneInto()}}function Fe(e=32){if(Be&&"function"==typeof Be.getRandomValues)return Be.getRandomValues(new Uint8Array(e));if(Be&&"function"==typeof Be.randomBytes)return Be.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}class Ue extends De{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Le(this.buffer)}update(e){Ne(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=je(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Le(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ne(this),function(e,t){Re(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)})(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=Le(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const qe=BigInt(2**32-1),He=BigInt(32);function ze(e,t=!1){return t?{h:Number(e&qe),l:Number(e>>He&qe)}:{h:0|Number(e>>He&qe),l:0|Number(e&qe)}}const $e=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=ze(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]},Ge=(e,t,r)=>e>>>r,Ve=(e,t,r)=>e<<32-r|t>>>r,Ke=(e,t,r)=>e>>>r|t<<32-r,We=(e,t,r)=>e<<32-r|t>>>r,Qe=(e,t,r)=>e<<64-r|t>>>r-32,Ze=(e,t,r)=>e>>>r-32|t<<64-r,Je=function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},Ye=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Xe=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,et=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),tt=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,rt=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,nt=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),[it,st]=$e(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),ot=new Uint32Array(80),at=new Uint32Array(80);class ct extends Ue{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:d,Fl:h,Gh:l,Gl:f,Hh:p,Hl:m}=this;return[e,t,r,n,i,s,o,a,c,u,d,h,l,f,p,m]}set(e,t,r,n,i,s,o,a,c,u,d,h,l,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|d,this.Fl=0|h,this.Gh=0|l,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)ot[r]=e.getUint32(t),at[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|ot[e-15],r=0|at[e-15],n=Ke(t,r,1)^Ke(t,r,8)^Ge(t,r,7),i=We(t,r,1)^We(t,r,8)^Ve(t,r,7),s=0|ot[e-2],o=0|at[e-2],a=Ke(s,o,19)^Qe(s,o,61)^Ge(s,o,6),c=We(s,o,19)^Ze(s,o,61)^Ve(s,o,6),u=et(i,c,at[e-7],at[e-16]),d=tt(u,n,a,ot[e-7],ot[e-16]);ot[e]=0|d,at[e]=0|u}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:u,Eh:d,El:h,Fh:l,Fl:f,Gh:p,Gl:m,Hh:g,Hl:y}=this;for(let e=0;e<80;e++){const t=Ke(d,h,14)^Ke(d,h,18)^Qe(d,h,41),b=We(d,h,14)^We(d,h,18)^Ze(d,h,41),v=d&l^~d&p,w=nt(y,b,h&f^~h&m,st[e],at[e]),A=rt(w,g,t,v,it[e],ot[e]),E=0|w,x=Ke(r,n,28)^Qe(r,n,34)^Qe(r,n,39),I=We(r,n,28)^Ze(r,n,34)^Ze(r,n,39),_=r&i^r&o^i&o,S=n&s^n&a^s&a;g=0|p,y=0|m,p=0|l,m=0|f,l=0|d,f=0|h,({h:d,l:h}=Je(0|c,0|u,0|A,0|E)),c=0|o,u=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const P=Ye(E,I,S);r=Xe(P,A,x,_),n=0|P}({h:r,l:n}=Je(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=Je(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=Je(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:u}=Je(0|this.Dh,0|this.Dl,0|c,0|u)),({h:d,l:h}=Je(0|this.Eh,0|this.El,0|d,0|h)),({h:l,l:f}=Je(0|this.Fh,0|this.Fl,0|l,0|f)),({h:p,l:m}=Je(0|this.Gh,0|this.Gl,0|p,0|m)),({h:g,l:y}=Je(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(r,n,i,s,o,a,c,u,d,h,l,f,p,m,g,y)}roundClean(){ot.fill(0),at.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ut=function(e){const t=t=>e().update(je(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}((()=>new ct)),dt=BigInt(0),ht=BigInt(1),lt=BigInt(2);function ft(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function pt(e){if(!ft(e))throw new Error("Uint8Array expected")}function mt(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const gt=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function yt(e){pt(e);let t="";for(let r=0;r<e.length;r++)t+=gt[e[r]];return t}function bt(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?dt:BigInt("0x"+e)}function vt(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function wt(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=vt(e.charCodeAt(i)),s=vt(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function At(e){return pt(e),bt(yt(Uint8Array.from(e).reverse()))}function Et(e,t){return wt(e.toString(16).padStart(2*t,"0"))}function xt(e,t){return Et(e,t).reverse()}function It(e,t,r){let n;if("string"==typeof t)try{n=wt(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!ft(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function _t(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];pt(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const St=e=>"bigint"==typeof e&&dt<=e;function Pt(e,t,r,n){if(!function(e,t,r){return St(e)&&St(t)&&St(r)&&t<=e&&e<r}(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}const Ot=e=>(lt<<BigInt(e-1))-ht,kt={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||ft(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Tt(e,t,r={}){const n=(t,r,n)=>{const i=kt[r];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function Ct(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const s=e(r,...n);return t.set(r,s),s}}const Mt=BigInt(0),Rt=BigInt(1),Nt=BigInt(2),Bt=BigInt(3),Lt=BigInt(4),jt=BigInt(5),Dt=BigInt(8);function Ft(e,t){const r=e%t;return r>=Mt?r:t+r}function Ut(e,t,r){if(t<Mt)throw new Error("invalid exponent, negatives unsupported");if(r<=Mt)throw new Error("invalid modulus");if(r===Rt)return Mt;let n=Rt;for(;t>Mt;)t&Rt&&(n=n*e%r),e=e*e%r,t>>=Rt;return n}function qt(e,t,r){let n=e;for(;t-- >Mt;)n*=n,n%=r;return n}function Ht(e,t){if(e===Mt)throw new Error("invert: expected non-zero number");if(t<=Mt)throw new Error("invert: expected positive modulus, got "+t);let r=Ft(e,t),n=t,i=Mt,s=Rt;for(;r!==Mt;){const e=n%r,t=i-s*(n/r);n=r,r=e,i=s,s=t}if(n!==Rt)throw new Error("invert: does not exist");return Ft(i,t)}const zt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $t(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Gt(e,t,r=!1,n={}){if(e<=Mt)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=$t(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:s,MASK:Ot(i),ZERO:Mt,ONE:Rt,create:t=>Ft(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return Mt<=t&&t<e},is0:e=>e===Mt,isOdd:e=>(e&Rt)===Rt,neg:t=>Ft(-t,e),eql:(e,t)=>e===t,sqr:t=>Ft(t*t,e),add:(t,r)=>Ft(t+r,e),sub:(t,r)=>Ft(t-r,e),mul:(t,r)=>Ft(t*r,e),pow:(e,t)=>function(e,t,r){if(r<Mt)throw new Error("invalid exponent, negatives unsupported");if(r===Mt)return e.ONE;if(r===Rt)return t;let n=e.ONE,i=t;for(;r>Mt;)r&Rt&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Rt;return n}(a,e,t),div:(t,r)=>Ft(t*Ht(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ht(t,e),sqrt:n.sqrt||(t=>(o||(o=function(e){if(e%Lt===Bt){const t=(e+Rt)/Lt;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%Dt===jt){const t=(e-jt)/Dt;return function(e,r){const n=e.mul(r,Nt),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,Nt),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Rt)/Nt;let r,n,i;for(r=e-Rt,n=0;r%Nt===Mt;r/=Nt,n++);for(i=Nt;i<e&&Ut(i,t,e)!==e-Rt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+Rt)/Lt;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+Rt)/Nt;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(o,s),d=e.pow(o,r);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,Rt<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),d=e.mul(d,c),a=t}return u}}(e)}(e)),o(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?xt(e,s):Et(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?At(e):function(e){return bt(yt(e))}(e)}});return Object.freeze(a)}const Vt=BigInt(0),Kt=BigInt(1);function Wt(e,t){const r=t.negate();return e?r:t}function Qt(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Zt(e,t){return Qt(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const Jt=new WeakMap,Yt=new WeakMap;function Xt(e){return Yt.get(e)||1}const er=BigInt(0),tr=BigInt(1),rr=BigInt(2),nr=BigInt(8),ir={zip215:!0};BigInt(0),BigInt(1);const sr=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),or=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ar=BigInt(1),cr=BigInt(2);BigInt(3);const ur=BigInt(5),dr=BigInt(8);const hr=Gt(sr,void 0,!0),lr=function(e){const t=function(e){const t=function(e){return function(e){Tt(e,zt.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),Tt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...$t(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}(e);return Tt(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=t,u=rr<<BigInt(8*a)-tr,d=r.create,h=Gt(t.n,t.nBitLength),l=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch{return{isValid:!1,value:er}}}),f=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if(mt("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function m(e,t){Pt("coordinate "+e,t,er,u)}function g(e){if(!(e instanceof v))throw new Error("ExtendedPoint expected")}const y=Ct(((e,t)=>{const{ex:n,ey:i,ez:s}=e,o=e.is0();null==t&&(t=o?nr:r.inv(s));const a=d(n*t),c=d(i*t),u=d(s*t);if(o)return{x:er,y:tr};if(u!==tr)throw new Error("invZ was invalid");return{x:a,y:c}})),b=Ct((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:s,ez:o,et:a}=e,c=d(i*i),u=d(s*s),h=d(o*o),l=d(h*h),f=d(c*r);if(d(h*d(f+u))!==d(l+d(n*d(c*u))))throw new Error("bad point: equation left != right (1)");if(d(i*s)!==d(o*a))throw new Error("bad point: equation left != right (2)");return!0}));class v{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,m("x",e),m("y",t),m("z",r),m("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof v)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return m("x",t),m("y",r),new v(t,r,tr,d(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(v.fromAffine)}static msm(e,t){return function(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=function(e){let t;for(t=0;e>dt;e>>=ht,t+=1);return t}(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i);let u=i;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){c.fill(i);for(let t=0;t<n.length;t++){const i=n[t],s=Number(i>>BigInt(e)&BigInt(a));c[s]=c[s].add(r[t])}let t=i;for(let e=c.length-1,r=i;e>0;e--)r=r.add(c[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<o;e++)u=u.double()}return u}(v,h,e,t)}_setWindowSize(e){E.setWindowSize(this,e)}assertValidity(){b(this)}equals(e){g(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:s,ez:o}=e,a=d(t*o),c=d(i*n),u=d(r*o),h=d(s*n);return a===c&&u===h}is0(){return this.equals(v.ZERO)}negate(){return new v(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,s=d(r*r),o=d(n*n),a=d(rr*d(i*i)),c=d(e*s),u=r+n,h=d(d(u*u)-s-o),l=c+o,f=l-a,p=c-o,m=d(h*f),g=d(l*p),y=d(h*p),b=d(f*l);return new v(m,g,b,y)}add(e){g(e);const{a:r,d:n}=t,{ex:i,ey:s,ez:o,et:a}=this,{ex:c,ey:u,ez:h,et:l}=e;if(r===BigInt(-1)){const e=d((s-i)*(u+c)),t=d((s+i)*(u-c)),r=d(t-e);if(r===er)return this.double();const n=d(o*rr*l),f=d(a*rr*h),p=f+n,m=t+e,g=f-n,y=d(p*r),b=d(m*g),w=d(p*g),A=d(r*m);return new v(y,b,A,w)}const f=d(i*c),p=d(s*u),m=d(a*n*l),y=d(o*h),b=d((i+s)*(c+u)-f-p),w=y-m,A=y+m,E=d(p-r*f),x=d(b*w),I=d(A*E),_=d(b*E),S=d(w*A);return new v(x,I,S,_)}subtract(e){return this.add(e.negate())}wNAF(e){return E.wNAFCached(this,e,v.normalizeZ)}multiply(e){const t=e;Pt("scalar",t,tr,n);const{p:r,f:i}=this.wNAF(t);return v.normalizeZ([r,i])[0]}multiplyUnsafe(e,t=v.ZERO){const r=e;return Pt("scalar",r,er,n),r===er?A:this.is0()||r===tr?this:E.wNAFCachedUnsafe(this,r,v.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return E.unsafeLadder(this,n).is0()}toAffine(e){return y(this,e)}clearCofactor(){const{h:e}=t;return e===tr?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:s}=t,o=r.BYTES;e=It("pointHex",e,o),mt("zip215",n);const a=e.slice(),c=e[o-1];a[o-1]=-129&c;const h=At(a),f=n?u:r.ORDER;Pt("pointHex.y",h,er,f);const p=d(h*h),m=d(p-tr),g=d(i*p-s);let{isValid:y,value:b}=l(m,g);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const w=(b&tr)===tr,A=!!(128&c);if(!n&&b===er&&A)throw new Error("Point.fromHex: x=0 and x_0=1");return A!==w&&(b=d(-b)),v.fromAffine({x:b,y:h})}static fromPrivateKey(e){return _(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=xt(t,r.BYTES);return n[n.length-1]|=e&tr?128:0,n}toHex(){return yt(this.toRawBytes())}}v.BASE=new v(t.Gx,t.Gy,tr,d(t.Gx*t.Gy)),v.ZERO=new v(er,tr,tr,er);const{BASE:w,ZERO:A}=v,E=function(e,t){return{constTimeNegate:Wt,hasPrecomputes:e=>1!==Xt(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>Vt;)r&Kt&&(n=n.add(i)),i=i.double(),r>>=Kt;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=Zt(r,t),s=[];let o=e,a=o;for(let e=0;e<n;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,n,i){const{windows:s,windowSize:o}=Zt(r,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**r-1),d=2**r,h=BigInt(r);for(let e=0;e<s;e++){const t=e*o;let r=Number(i&u);i>>=h,r>o&&(r-=d,i+=Kt);const s=t,l=t+Math.abs(r)-1,f=e%2!=0,p=r<0;0===r?c=c.add(Wt(f,n[s])):a=a.add(Wt(p,n[l]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=e.ZERO){const{windows:o,windowSize:a}=Zt(r,t),c=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(i===Vt)break;let r=Number(i&c);if(i>>=d,r>a&&(r-=u,i+=Kt),0===r)continue;let o=n[t+Math.abs(r)-1];r<0&&(o=o.negate()),s=s.add(o)}return s},getPrecomputes(e,t,r){let n=Jt.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&Jt.set(t,r(n))),n},wNAFCached(e,t,r){const n=Xt(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=Xt(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){Qt(r,t),Yt.set(e,r),Jt.delete(e)}}}(v,8*a);function x(e){return Ft(e,n)}function I(e){return x(At(e))}function _(e){const t=r.BYTES;e=It("private key",e,t);const n=It("hashed private key",s(e),2*t),i=f(n.slice(0,t)),o=n.slice(t,2*t),a=I(i),c=w.multiply(a),u=c.toRawBytes();return{head:i,prefix:o,scalar:a,point:c,pointBytes:u}}function S(e=new Uint8Array,...t){const r=_t(...t);return I(s(p(r,It("context",e),!!i)))}const P=ir;return w._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return _(e).pointBytes},sign:function(e,t,s={}){e=It("message",e),i&&(e=i(e));const{prefix:o,scalar:a,pointBytes:c}=_(t),u=S(s.context,o,e),d=w.multiply(u).toRawBytes(),h=x(u+S(s.context,d,c,e)*a);return Pt("signature.s",h,er,n),It("result",_t(d,xt(h,r.BYTES)),2*r.BYTES)},verify:function(e,t,n,s=P){const{context:o,zip215:a}=s,c=r.BYTES;e=It("signature",e,2*c),t=It("message",t),n=It("publicKey",n,c),void 0!==a&&mt("zip215",a),i&&(t=i(t));const u=At(e.slice(c,2*c));let d,h,l;try{d=v.fromHex(n,a),h=v.fromHex(e.slice(0,c),a),l=w.multiplyUnsafe(u)}catch{return!1}if(!a&&d.isSmallOrder())return!1;const f=S(o,h.toRawBytes(),d.toRawBytes(),t);return h.add(d.multiplyUnsafe(f)).subtract(l).clearCofactor().equals(v.ZERO)},ExtendedPoint:v,utils:{getExtendedPublicKey:_,randomPrivateKey:()=>o(r.BYTES),precompute:(e=8,t=v.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:hr,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:dr,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ut,randomBytes:Fe,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){const r=sr,n=Ft(t*t*t,r),i=function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=sr,o=e*e%s*e%s,a=qt(o,cr,s)*o%s,c=qt(a,ar,s)*e%s,u=qt(c,ur,s)*c%s,d=qt(u,t,s)*u%s,h=qt(d,r,s)*d%s,l=qt(h,n,s)*h%s,f=qt(l,i,s)*l%s,p=qt(f,i,s)*l%s,m=qt(p,t,s)*u%s;return{pow_p_5_8:qt(m,cr,s)*e%s,b2:o}}(e*Ft(n*n*t,r)).pow_p_5_8;let s=Ft(e*n*i,r);const o=Ft(t*s*s,r),a=s,c=Ft(s*or,r),u=o===e,d=o===Ft(-e,r),h=o===Ft(-e*or,r);return u&&(s=a),(d||h)&&(s=c),((e,t)=>(Ft(e,t)&Rt)===Rt)(s,r)&&(s=Ft(-s,r)),{isValid:u||d,value:s}}}),fr=".",pr="base64url",mr="utf8",gr="utf8",yr="did",br="key",vr="base58btc";function wr(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Ar(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?wr(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Er(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=Ar(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return wr(r)}var xr=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var d=r[e.charCodeAt(t)];if(255===d)return;for(var h=0,l=s-1;(0!==d||h<i)&&-1!==l;l--,h++)d+=a*o[l]>>>0,o[l]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),m=n;f!==s;)p[m++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*d+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],l=0,f=o-1;(0!==h||l<n)&&-1!==f;f--,l++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=l,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var m=c.repeat(r);p<o;++p)m+=e.charAt(u[p]);return m},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const Ir=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class _r{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Sr{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Or(this,e)}}class Pr{constructor(e){this.decoders=e}or(e){return Or(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Or=(e,t)=>new Pr({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class kr{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new _r(e,t,r),this.decoder=new Sr(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Tr=({name:e,prefix:t,encode:r,decode:n})=>new kr(e,t,r,n),Cr=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=xr(r,t);return Tr({prefix:e,name:t,encode:n,decode:e=>Ir(i(e))})},Mr=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Tr({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),Rr=Tr({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var Nr=Object.freeze({__proto__:null,identity:Rr});const Br=Mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Lr=Object.freeze({__proto__:null,base2:Br});const jr=Mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Dr=Object.freeze({__proto__:null,base8:jr});const Fr=Cr({prefix:"9",name:"base10",alphabet:"0123456789"});var Ur=Object.freeze({__proto__:null,base10:Fr});const qr=Mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Hr=Mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var zr=Object.freeze({__proto__:null,base16:qr,base16upper:Hr});const $r=Mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Gr=Mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Vr=Mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Kr=Mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Wr=Mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Qr=Mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Zr=Mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Jr=Mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Yr=Mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Xr=Object.freeze({__proto__:null,base32:$r,base32upper:Gr,base32pad:Vr,base32padupper:Kr,base32hex:Wr,base32hexupper:Qr,base32hexpad:Zr,base32hexpadupper:Jr,base32z:Yr});const en=Cr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tn=Cr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rn=Object.freeze({__proto__:null,base36:en,base36upper:tn});const nn=Cr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),sn=Cr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var on=Object.freeze({__proto__:null,base58btc:nn,base58flickr:sn});const an=Mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cn=Mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),un=Mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dn=Mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var hn=Object.freeze({__proto__:null,base64:an,base64pad:cn,base64url:un,base64urlpad:dn});const ln=Array.from(""),fn=ln.reduce(((e,t,r)=>(e[r]=t,e)),[]),pn=ln.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),mn=Tr({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+fn[t]),"")},decode:function(e){const t=[];for(const r of e){const e=pn[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var gn=Object.freeze({__proto__:null,base256emoji:mn}),yn=128,bn=-128,vn=Math.pow(2,31),wn=Math.pow(2,7),An=Math.pow(2,14),En=Math.pow(2,21),xn=Math.pow(2,28),In=Math.pow(2,35),_n=Math.pow(2,42),Sn=Math.pow(2,49),Pn=Math.pow(2,56),On=Math.pow(2,63),kn=function e(t,r,n){r=r||[];for(var i=n=n||0;t>=vn;)r[n++]=255&t|yn,t/=128;for(;t&bn;)r[n++]=255&t|yn,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},Tn=function(e){return e<wn?1:e<An?2:e<En?3:e<xn?4:e<In?5:e<_n?6:e<Sn?7:e<Pn?8:e<On?9:10};const Cn=(e,t,r=0)=>(kn(e,t,r),t),Mn=e=>Tn(e),Rn=(e,t)=>{const r=t.byteLength,n=Mn(e),i=n+Mn(r),s=new Uint8Array(i+r);return Cn(e,s,0),Cn(r,s,n),s.set(t,i),new Nn(e,r,t,s)};class Nn{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Bn=({name:e,code:t,encode:r})=>new Ln(e,t,r);class Ln{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Rn(this.code,t):t.then((e=>Rn(this.code,e)))}throw Error("Unknown type, must be binary type")}}const jn=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Dn=Bn({name:"sha2-256",code:18,encode:jn("SHA-256")}),Fn=Bn({name:"sha2-512",code:19,encode:jn("SHA-512")});Object.freeze({__proto__:null,sha256:Dn,sha512:Fn});const Un=Ir,qn={code:0,name:"identity",encode:Un,digest:e=>Rn(0,Un(e))};Object.freeze({__proto__:null,identity:qn}),new TextEncoder,new TextDecoder;const Hn={...Nr,...Lr,...Dr,...Ur,...zr,...Xr,...rn,...on,...hn,...gn};function zn(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const $n=zn("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Gn=zn("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=Ar((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Vn={utf8:$n,"utf-8":$n,hex:Hn.base16,latin1:Gn,ascii:Gn,binary:Gn,...Hn};function Kn(e,t="utf8"){const r=Vn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Wn(e,t="utf8"){const r=Vn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):wr(globalThis.Buffer.from(e,"utf-8"))}function Qn(e){return Ce(Kn(Wn(e,pr),mr))}function Zn(e){return Kn(Wn(Me(e),mr),pr)}function Jn(e){const t="z"+Kn(Er([Wn("K36",vr),e]),vr);return[yr,br,t].join(":")}function Yn(e){return Kn(e,pr)}function Xn(e){const t=e.split(fr),r=Qn(t[0]),n=Qn(t[1]),i=function(e){return Wn(e,pr)}(t[2]);return{header:r,payload:n,signature:i,data:Wn(t.slice(0,2).join(fr),gr)}}function ei(e=Fe(32)){const t=lr.getPublicKey(e);return{secretKey:Er([e,t]),publicKey:t}}function ti(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function ri(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=ti(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}const ni=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var d=r[e.charCodeAt(t)];if(255===d)return;for(var h=0,l=s-1;(0!==d||h<i)&&-1!==l;l--,h++)d+=a*o[l]>>>0,o[l]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),m=n;f!==s;)p[m++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*d+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],l=0,f=o-1;(0!==h||l<n)&&-1!==f;f--,l++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=l,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var m=c.repeat(r);p<o;++p)m+=e.charAt(u[p]);return m},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}},ii=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class si{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class oi{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return ci(this,e)}}class ai{constructor(e){this.decoders=e}or(e){return ci(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ci=(e,t)=>new ai({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class ui{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new si(e,t,r),this.decoder=new oi(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const di=({name:e,prefix:t,encode:r,decode:n})=>new ui(e,t,r,n),hi=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=ni(r,t);return di({prefix:e,name:t,encode:n,decode:e=>ii(i(e))})},li=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>di({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),fi=di({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),pi=li({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),mi=li({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),gi=hi({prefix:"9",name:"base10",alphabet:"0123456789"}),yi=li({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),bi=li({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),vi=li({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),wi=li({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ai=li({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ei=li({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xi=li({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ii=li({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_i=li({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Si=li({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Pi=li({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Oi=hi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ki=hi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ti=hi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ci=hi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Mi=li({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ri=li({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ni=li({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Bi=li({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Li=Array.from(""),ji=Li.reduce(((e,t,r)=>(e[r]=t,e)),[]),Di=Li.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Fi=di({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+ji[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Di[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var Ui=128,qi=-128,Hi=Math.pow(2,31),zi=Math.pow(2,7),$i=Math.pow(2,14),Gi=Math.pow(2,21),Vi=Math.pow(2,28),Ki=Math.pow(2,35),Wi=Math.pow(2,42),Qi=Math.pow(2,49),Zi=Math.pow(2,56),Ji=Math.pow(2,63);const Yi=function e(t,r,n){r=r||[];for(var i=n=n||0;t>=Hi;)r[n++]=255&t|Ui,t/=128;for(;t&qi;)r[n++]=255&t|Ui,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},Xi=function(e){return e<zi?1:e<$i?2:e<Gi?3:e<Vi?4:e<Ki?5:e<Wi?6:e<Qi?7:e<Zi?8:e<Ji?9:10},es=(e,t,r=0)=>(Yi(e,t,r),t),ts=e=>Xi(e),rs=(e,t)=>{const r=t.byteLength,n=ts(e),i=n+ts(r),s=new Uint8Array(i+r);return es(e,s,0),es(r,s,n),s.set(t,i),new ns(e,r,t,s)};class ns{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const is=({name:e,code:t,encode:r})=>new ss(e,t,r);class ss{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?rs(this.code,t):t.then((e=>rs(this.code,e)))}throw Error("Unknown type, must be binary type")}}const os=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),as=is({name:"sha2-256",code:18,encode:os("SHA-256")}),cs=is({name:"sha2-512",code:19,encode:os("SHA-512")}),us=ii,ds={code:0,name:"identity",encode:us,digest:e=>rs(0,us(e))},hs="raw",ls=85,fs=e=>ii(e),ps=e=>ii(e),ms=new TextEncoder,gs=new TextDecoder,ys="json",bs=512,vs=e=>ms.encode(JSON.stringify(e)),ws=e=>JSON.parse(gs.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const As={...e,...t,...r,...n,...s,...o,...a,...c,...u,...d};function Es(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const xs=Es("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Is=Es("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=ti((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),_s={utf8:xs,"utf-8":xs,hex:As.base16,latin1:Is,ascii:Is,binary:Is,...As};function Ss(e,t="utf8"){const r=_s[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}function Ps(e,t="utf8"){const r=_s[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}var Os=i(6729);const ks={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};function Ts(e){const[t,r]=e.split(":");return{namespace:t,reference:r}}function Cs(e,t=[]){const r=[];return Object.keys(e).forEach((n=>{if(t.length&&!t.includes(n))return;const i=e[n];r.push(...i.accounts)})),r}function Ms(e,t){return e.includes(":")?[e]:t.chains||[]}const Rs="react-native",Ns="browser",Bs="js";function Ls(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function js(){return!(0,R.getDocument)()&&!!(0,R.getNavigator)()&&"ReactNative"===navigator.product}function Ds(){return!Ls()&&!!(0,R.getNavigator)()&&!!(0,R.getDocument)()}function Fs(){return js()?Rs:Ls()?"node":Ds()?Ns:"unknown"}function Us(){var e;try{return js()&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Application)<"u"?null==(e=i.g.Application)?void 0:e.applicationId:void 0}catch{return}}function qs(){return(0,N.g)()||{name:"",description:"",url:"",icons:[""]}}function Hs(e,t,r){const n=function(){if(Fs()===Rs&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Platform)<"u"){const{OS:e,Version:t}=i.g.Platform;return[e,t].join("-")}const e=t?C(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new P:"undefined"!=typeof navigator?C(navigator.userAgent):"undefined"!=typeof process&&process.version?new I(process.version.slice(1)):null;var t;if(null===e)return"unknown";const r=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[r,e.name,e.version].join("-"):[r,e.version].join("-")}(),s=function(){var e;const t=Fs();return t===Ns?[t,(null==(e=(0,R.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[Bs,r].join("-"),n,s].join("/")}function zs(e,t){return e.filter((e=>t.includes(e))).length===e.length}function $s(e){return Object.fromEntries(e.entries())}function Gs(e){return new Map(Object.entries(e))}function Vs(e=M.FIVE_MINUTES,t){const r=(0,M.toMiliseconds)(e||M.FIVE_MINUTES);let n,i,s,o;return{resolve:e=>{s&&n&&(clearTimeout(s),n(e),o=Promise.resolve(e))},reject:e=>{s&&i&&(clearTimeout(s),i(e))},done:()=>new Promise(((e,a)=>{if(o)return e(o);s=setTimeout((()=>{const e=new Error(t);o=Promise.reject(e),a(e)}),r),n=e,i=a}))}}function Ks(e,t,r){return new Promise((async(n,i)=>{const s=setTimeout((()=>i(new Error(r))),t);try{n(await e)}catch(e){i(e)}clearTimeout(s)}))}function Ws(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Qs(e){const[t,r]=e.split(":"),n={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)n.topic=r;else{if("id"!==t||!Number.isInteger(Number(r)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);n.id=Number(r)}return n}function Zs(e,t){return(0,M.fromMiliseconds)((t||Date.now())+(0,M.toMiliseconds)(e))}function Js(e){return Date.now()>=(0,M.toMiliseconds)(e)}function Ys(e,t){return`${e}${t?`:${t}`:""}`}function Xs(e=[],t=[]){return[...new Set([...e,...t])]}function eo(e,t){if(!e.includes(t))return null;const r=e.split(/([&,?,=])/),n=r.indexOf(t);return r[n+2]}function to(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function ro(){return typeof process<"u"&&"true"===process.env.IS_VITEST}function no(e){return Buffer.from(e,"base64").toString("utf-8")}function io(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function so(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function oo(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");io(e.outputLen),io(e.blockLen)}function ao(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function co(e,t){so(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const uo=BigInt(2**32-1),ho=BigInt(32);function lo(e,t=!1){return t?{h:Number(e&uo),l:Number(e>>ho&uo)}:{h:0|Number(e>>ho&uo),l:0|Number(e&uo)}}const fo="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function po(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function mo(e,t){return e<<32-t|e>>>t}const go=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function yo(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function bo(e){for(let t=0;t<e.length;t++)e[t]=yo(e[t])}function vo(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),so(e),e}class wo{clone(){return this._cloneInto()}}function Ao(e){const t=t=>e().update(vo(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Eo(e=32){if(fo&&"function"==typeof fo.getRandomValues)return fo.getRandomValues(new Uint8Array(e));if(fo&&"function"==typeof fo.randomBytes)return fo.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const xo=[],Io=[],_o=[],So=BigInt(0),Po=BigInt(1),Oo=BigInt(2),ko=BigInt(7),To=BigInt(256),Co=BigInt(113);for(let e=0,t=Po,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],xo.push(2*(5*n+r)),Io.push((e+1)*(e+2)/2%64);let i=So;for(let e=0;e<7;e++)t=(t<<Po^(t>>ko)*Co)%To,t&Oo&&(i^=Po<<(Po<<BigInt(e))-Po);_o.push(i)}const[Mo,Ro]=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=lo(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}(_o,!0),No=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),Bo=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class Lo extends wo{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,io(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var s;this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){go||bo(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=No(s,o,1)^r[n],c=Bo(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=Io[r],s=No(t,i,n),o=Bo(t,i,n),a=xo[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=Mo[n],e[1]^=Ro[n]}r.fill(0)}(this.state32,this.rounds),go||bo(this.state32),this.posOut=0,this.pos=0}update(e){ao(this);const{blockLen:t,state:r}=this,n=(e=vo(e)).length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,!!(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){ao(this,!1),so(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return io(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(co(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new Lo(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const jo=Ao((()=>new Lo(136,1,32)));function Do(e){const t=`Ethereum Signed Message:\n${e.length}`,r=(new TextEncoder).encode(t+e);return"0x"+Buffer.from(jo(r)).toString("hex")}var Fo=Object.defineProperty,Uo=Object.defineProperties,qo=Object.getOwnPropertyDescriptors,Ho=Object.getOwnPropertySymbols,zo=Object.prototype.hasOwnProperty,$o=Object.prototype.propertyIsEnumerable,Go=(e,t,r)=>t in e?Fo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Vo=e=>e?.split(":"),Ko=e=>{const t=e&&Vo(e);if(t)return t[2]+":"+t[3]},Wo=e=>{const t=e&&Vo(e);if(t)return t.pop()};async function Qo(e){const{cacao:t,projectId:r}=e,{s:n,p:i}=t,s=Zo(i,i.iss),o=Wo(i.iss);return await async function(e,t,r,n,i,s){switch(r.t){case"eip191":return await async function(e,t,r){return(await ke({hash:Do(t),signature:r})).toLowerCase()===e.toLowerCase()}(e,t,r.s);case"eip1271":return await async function(e,t,r,n,i,s){const o=Ts(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const o="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),d=o+Do(t).substring(2)+a+c+u,h=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:d},"latest"]})}),{result:l}=await h.json();return!!l&&l.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}(e,t,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}(o,s,n,Ko(i.iss),r)}const Zo=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,n=Wo(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${(e=>{const t=e&&Vo(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]})(t)}`,c=`Nonce: ${e.nonce}`,u=`Issued At: ${e.iat}`,d=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,l=e.requestId?`Request ID: ${e.requestId}`:void 0,f=e.resources?`Resources:${e.resources.map((e=>`\n- ${e}`)).join("")}`:void 0,p=ia(e.resources);return p&&(i=function(e="",t){Jo(t);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;const n=[];let i=0;return Object.keys(t.att).forEach((e=>{const r=Object.keys(t.att[e]).map((e=>({ability:e.split("/")[0],action:e.split("/")[1]})));r.sort(((e,t)=>e.action.localeCompare(t.action)));const s={};r.forEach((e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)}));const o=Object.keys(s).map((t=>(i++,`(${i}) '${t}': '${s[t].join("', '")}' for '${e}'.`)));n.push(o.join(", ").replace(".,","."))})),`${e?e+" ":""}${r}${n.join(" ")}`}(i,ea(p))),[r,n,"",i,"",s,o,a,c,u,d,h,l,f].filter((e=>null!=e)).join("\n")};function Jo(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach((t=>{const r=e.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if("object"!=typeof r)throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach((e=>{const t=r[e];if(!Array.isArray(t))throw new Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw new Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach((t=>{if("object"!=typeof t)throw new Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)}))}))}))}function Yo(e,t,r={}){t=t?.sort(((e,t)=>e.localeCompare(t)));const n=t.map((t=>({[`${e}/${t}`]:[r]})));return Object.assign({},...n)}function Xo(e){return Jo(e),`urn:recap:${function(e){return Buffer.from(JSON.stringify(e)).toString("base64")}(e).replace(/=/g,"")}`}function ea(e){const t=function(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}(e.replace("urn:recap:",""));return Jo(t),t}function ta(e,t){const r=function(e,t){Jo(e),Jo(t);const r=Object.keys(e.att).concat(Object.keys(t.att)).sort(((e,t)=>e.localeCompare(t))),n={att:{}};return r.forEach((r=>{var i,s;Object.keys((null==(i=e.att)?void 0:i[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort(((e,t)=>e.localeCompare(t))).forEach((i=>{var s,o;n.att[r]=((e,t)=>Uo(e,qo(t)))(((e,t)=>{for(var r in t||(t={}))zo.call(t,r)&&Go(e,r,t[r]);if(Ho)for(var r of Ho(t))$o.call(t,r)&&Go(e,r,t[r]);return e})({},n.att[r]),{[i]:(null==(s=e.att[r])?void 0:s[i])||(null==(o=t.att[r])?void 0:o[i])})}))})),n}(ea(e),ea(t));return Xo(r)}function ra(e){var t;const r=ea(e);Jo(r);const n=null==(t=r.att)?void 0:t.eip155;return n?Object.keys(n).map((e=>e.split("/")[1])):[]}function na(e){const t=ea(e);Jo(t);const r=[];return Object.values(t.att).forEach((e=>{Object.values(e).forEach((e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)}))})),[...new Set(r.flat())]}function ia(e){if(!e)return;const t=e?.[e.length-1];return function(e){return e&&e.includes("urn:recap:")}(t)?t:void 0}function sa(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function oa(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function aa(e,...t){if(!oa(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ca(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ua(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}const da=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function ha(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!oa(e))throw new Error("Uint8Array expected, got "+typeof e);e=pa(e)}return e}function la(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(r&&!function(e){return e.byteOffset%4==0}(t))throw new Error("invalid output, must be aligned");return t}function fa(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}function pa(e){return Uint8Array.from(e)}function ma(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const ga=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),ya=ga("expand 16-byte k"),ba=ga("expand 32-byte k"),va=da(ya),wa=da(ba);function Aa(e,t){return e<<t|e>>>32-t}function Ea(e){return e.byteOffset%4==0}const xa=2**32-1,Ia=new Uint32Array,_a=(e,t)=>255&e[t++]|(255&e[t++])<<8;class Sa{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,aa(e=ha(e),32);const t=_a(e,0),r=_a(e,2),n=_a(e,4),i=_a(e,6),s=_a(e,8),o=_a(e,10),a=_a(e,12),c=_a(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|n<<6),this.r[3]=8191&(n>>>7|i<<9),this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|o<<2),this.r[7]=8065&(o>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let t=0;t<8;t++)this.pad[t]=_a(e,16+2*t)}process(e,t,r=!1){const n=r?0:2048,{h:i,r:s}=this,o=s[0],a=s[1],c=s[2],u=s[3],d=s[4],h=s[5],l=s[6],f=s[7],p=s[8],m=s[9],g=_a(e,t+0),y=_a(e,t+2),b=_a(e,t+4),v=_a(e,t+6),w=_a(e,t+8),A=_a(e,t+10),E=_a(e,t+12),x=_a(e,t+14);let I=i[0]+(8191&g),_=i[1]+(8191&(g>>>13|y<<3)),S=i[2]+(8191&(y>>>10|b<<6)),P=i[3]+(8191&(b>>>7|v<<9)),O=i[4]+(8191&(v>>>4|w<<12)),k=i[5]+(w>>>1&8191),T=i[6]+(8191&(w>>>14|A<<2)),C=i[7]+(8191&(A>>>11|E<<5)),M=i[8]+(8191&(E>>>8|x<<8)),R=i[9]+(x>>>5|n),N=0,B=N+I*o+_*(5*m)+S*(5*p)+P*(5*f)+O*(5*l);N=B>>>13,B&=8191,B+=k*(5*h)+T*(5*d)+C*(5*u)+M*(5*c)+R*(5*a),N+=B>>>13,B&=8191;let L=N+I*a+_*o+S*(5*m)+P*(5*p)+O*(5*f);N=L>>>13,L&=8191,L+=k*(5*l)+T*(5*h)+C*(5*d)+M*(5*u)+R*(5*c),N+=L>>>13,L&=8191;let j=N+I*c+_*a+S*o+P*(5*m)+O*(5*p);N=j>>>13,j&=8191,j+=k*(5*f)+T*(5*l)+C*(5*h)+M*(5*d)+R*(5*u),N+=j>>>13,j&=8191;let D=N+I*u+_*c+S*a+P*o+O*(5*m);N=D>>>13,D&=8191,D+=k*(5*p)+T*(5*f)+C*(5*l)+M*(5*h)+R*(5*d),N+=D>>>13,D&=8191;let F=N+I*d+_*u+S*c+P*a+O*o;N=F>>>13,F&=8191,F+=k*(5*m)+T*(5*p)+C*(5*f)+M*(5*l)+R*(5*h),N+=F>>>13,F&=8191;let U=N+I*h+_*d+S*u+P*c+O*a;N=U>>>13,U&=8191,U+=k*o+T*(5*m)+C*(5*p)+M*(5*f)+R*(5*l),N+=U>>>13,U&=8191;let q=N+I*l+_*h+S*d+P*u+O*c;N=q>>>13,q&=8191,q+=k*a+T*o+C*(5*m)+M*(5*p)+R*(5*f),N+=q>>>13,q&=8191;let H=N+I*f+_*l+S*h+P*d+O*u;N=H>>>13,H&=8191,H+=k*c+T*a+C*o+M*(5*m)+R*(5*p),N+=H>>>13,H&=8191;let z=N+I*p+_*f+S*l+P*h+O*d;N=z>>>13,z&=8191,z+=k*u+T*c+C*a+M*o+R*(5*m),N+=z>>>13,z&=8191;let $=N+I*m+_*p+S*f+P*l+O*h;N=$>>>13,$&=8191,$+=k*d+T*u+C*c+M*a+R*o,N+=$>>>13,$&=8191,N=(N<<2)+N|0,N=N+B|0,B=8191&N,N>>>=13,L+=N,i[0]=B,i[1]=L,i[2]=j,i[3]=D,i[4]=F,i[5]=U,i[6]=q,i[7]=H,i[8]=z,i[9]=$}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let n=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=n,n=e[t]>>>13,e[t]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+n,n=r[t]>>>13,r[t]&=8191;r[9]-=8192;let i=(1^n)-1;for(let e=0;e<10;e++)r[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|r[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;ma(r)}update(e){ca(this);const{buffer:t,blockLen:r}=this,n=(e=ha(e)).length;for(let i=0;i<n;){const s=Math.min(r-this.pos,n-i);if(s!==r)t.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=n-i;i+=r)this.process(e,i)}return this}destroy(){ma(this.h,this.r,this.buffer,this.pad)}digestInto(e){ca(this),function(e,t){aa(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let t=0;t<8;t++)e[i++]=r[t]>>>0,e[i++]=r[t]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}const Pa=function(e){const t=(t,r)=>e(r).update(ha(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}((e=>new Sa(e))),Oa=function(e){const{allowShortKeys:t,extendNonceFn:r,counterLength:n,counterRight:i,rounds:s}=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t)}(0,{counterRight:!1,counterLength:4,allowShortKeys:!1});return sa(n),sa(s),ua(i),ua(t),(o,a,c,u,d=0)=>{aa(o),aa(a),aa(c);const h=c.length;if(void 0===u&&(u=new Uint8Array(h)),aa(u),sa(d),d<0||d>=xa)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const l=[];let f,p,m=o.length;if(32===m)l.push(f=pa(o)),p=wa;else{if(16!==m||!t)throw new Error(`arx: invalid 32-byte key, got length=${m}`);f=new Uint8Array(32),f.set(o),f.set(o,16),p=va,l.push(f)}Ea(a)||l.push(a=pa(a));const g=da(f);if(r){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");r(p,g,da(a.subarray(0,16)),g),a=a.subarray(16)}const y=16-n;if(y!==a.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){const e=new Uint8Array(12);e.set(a,i?0:12-a.length),a=e,l.push(a)}const b=da(a);return function(e,t,r,n,i,s,o,a){const c=i.length,u=new Uint8Array(64),d=da(u),h=Ea(i)&&Ea(s),l=h?da(i):Ia,f=h?da(s):Ia;for(let p=0;p<c;o++){if(e(t,r,n,d,o,a),o>=xa)throw new Error("arx: counter overflow");const m=Math.min(64,c-p);if(h&&64===m){const e=p/4;if(p%4!=0)throw new Error("arx: invalid block position");for(let t,r=0;r<16;r++)t=e+r,f[t]=l[t]^d[r];p+=64}else{for(let e,t=0;t<m;t++)e=p+t,s[e]=i[e]^u[t];p+=m}}}(e,p,g,b,c,u,d,s),ma(...l),u}}((function(e,t,r,n,i,s=20){let o=e[0],a=e[1],c=e[2],u=e[3],d=t[0],h=t[1],l=t[2],f=t[3],p=t[4],m=t[5],g=t[6],y=t[7],b=i,v=r[0],w=r[1],A=r[2],E=o,x=a,I=c,_=u,S=d,P=h,O=l,k=f,T=p,C=m,M=g,R=y,N=b,B=v,L=w,j=A;for(let e=0;e<s;e+=2)E=E+S|0,N=Aa(N^E,16),T=T+N|0,S=Aa(S^T,12),E=E+S|0,N=Aa(N^E,8),T=T+N|0,S=Aa(S^T,7),x=x+P|0,B=Aa(B^x,16),C=C+B|0,P=Aa(P^C,12),x=x+P|0,B=Aa(B^x,8),C=C+B|0,P=Aa(P^C,7),I=I+O|0,L=Aa(L^I,16),M=M+L|0,O=Aa(O^M,12),I=I+O|0,L=Aa(L^I,8),M=M+L|0,O=Aa(O^M,7),_=_+k|0,j=Aa(j^_,16),R=R+j|0,k=Aa(k^R,12),_=_+k|0,j=Aa(j^_,8),R=R+j|0,k=Aa(k^R,7),E=E+P|0,j=Aa(j^E,16),M=M+j|0,P=Aa(P^M,12),E=E+P|0,j=Aa(j^E,8),M=M+j|0,P=Aa(P^M,7),x=x+O|0,N=Aa(N^x,16),R=R+N|0,O=Aa(O^R,12),x=x+O|0,N=Aa(N^x,8),R=R+N|0,O=Aa(O^R,7),I=I+k|0,B=Aa(B^I,16),T=T+B|0,k=Aa(k^T,12),I=I+k|0,B=Aa(B^I,8),T=T+B|0,k=Aa(k^T,7),_=_+S|0,L=Aa(L^_,16),C=C+L|0,S=Aa(S^C,12),_=_+S|0,L=Aa(L^_,8),C=C+L|0,S=Aa(S^C,7);let D=0;n[D++]=o+E|0,n[D++]=a+x|0,n[D++]=c+I|0,n[D++]=u+_|0,n[D++]=d+S|0,n[D++]=h+P|0,n[D++]=l+O|0,n[D++]=f+k|0,n[D++]=p+T|0,n[D++]=m+C|0,n[D++]=g+M|0,n[D++]=y+R|0,n[D++]=b+N|0,n[D++]=v+B|0,n[D++]=w+L|0,n[D++]=A+j|0})),ka=new Uint8Array(16),Ta=(e,t)=>{e.update(t);const r=t.length%16;r&&e.update(ka.subarray(r))},Ca=new Uint8Array(32);function Ma(e,t,r,n,i){const s=e(t,r,Ca),o=Pa.create(s);i&&Ta(o,i),Ta(o,n);const a=new Uint8Array(16),c=(e=>new DataView(e.buffer,e.byteOffset,e.byteLength))(a);fa(c,0,BigInt(i?i.length:0),!0),fa(c,8,BigInt(n.length),!0),o.update(a);const u=o.digest();return ma(s,a),u}const Ra=((e,t)=>{function r(r,...n){if(aa(r),void 0!==e.nonceLength){const t=n[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?aa(t):aa(t,e.nonceLength)}const i=e.tagLength;i&&void 0!==n[1]&&aa(n[1]);const s=t(r,...n),o=(e,t)=>{if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");aa(t)}};let a=!1;return{encrypt(e,t){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,aa(e),o(s.encrypt.length,t),s.encrypt(e,t)},decrypt(e,t){if(aa(e),i&&e.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return o(s.decrypt.length,t),s.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(Na=Oa,(e,t,r)=>({encrypt(n,i){const s=n.length;(i=la(s+16,i,!1)).set(n);const o=i.subarray(0,-16);Na(e,t,o,o,1);const a=Ma(Na,e,t,o,r);return i.set(a,s),ma(a),i},decrypt(n,i){i=la(n.length-16,i,!1);const s=n.subarray(0,-16),o=n.subarray(-16),a=Ma(Na,e,t,s,r);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(o,a))throw new Error("invalid tag");return i.set(n.subarray(0,-16)),Na(e,t,i,i,1),ma(a),i}})));var Na;class Ba extends wo{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,oo(e);const r=vo(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return ao(this),this.iHash.update(e),this}digestInto(e){ao(this),so(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const La=(e,t,r)=>new Ba(e,t).update(r).digest();La.create=(e,t)=>new Ba(e,t);const ja=new Uint8Array([0]),Da=new Uint8Array;function Fa(e,t,r){return e&t^~e&r}function Ua(e,t,r){return e&t^e&r^t&r}class qa extends wo{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=po(this.buffer)}update(e){ao(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=vo(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=po(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){ao(this),co(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)})(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=po(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const Ha=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),za=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$a=new Uint32Array(64);class Ga extends qa{constructor(){super(64,32,8,!1),this.A=0|za[0],this.B=0|za[1],this.C=0|za[2],this.D=0|za[3],this.E=0|za[4],this.F=0|za[5],this.G=0|za[6],this.H=0|za[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)$a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=$a[e-15],r=$a[e-2],n=mo(t,7)^mo(t,18)^t>>>3,i=mo(r,17)^mo(r,19)^r>>>10;$a[e]=i+$a[e-7]+n+$a[e-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(mo(o,6)^mo(o,11)^mo(o,25))+Fa(o,a,c)+Ha[e]+$a[e]|0,d=(mo(r,2)^mo(r,13)^mo(r,22))+Ua(r,n,i)|0;u=c,c=a,a=o,o=s+t|0,s=i,i=n,n=r,r=t+d|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,s,o,a,c,u)}roundClean(){$a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Va=Ao((()=>new Ga)),Ka=BigInt(0);function Wa(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Qa(e){if(!Wa(e))throw new Error("Uint8Array expected")}const Za=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Ja(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function Ya(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=Ja(e.charCodeAt(i)),s=Ja(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function Xa(e){return Qa(e),function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Ka:BigInt("0x"+e)}(function(e){Qa(e);let t="";for(let r=0;r<e.length;r++)t+=Za[e[r]];return t}(Uint8Array.from(e).reverse()))}function ec(e,t,r){let n;if("string"==typeof t)try{n=Ya(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!Wa(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}const tc=e=>"bigint"==typeof e&&Ka<=e;function rc(e,t,r,n){if(!function(e,t,r){return tc(e)&&tc(t)&&tc(r)&&t<=e&&e<r}(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}const nc={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Wa(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)},ic=BigInt(0),sc=BigInt(1);function oc(e,t){const r=e%t;return r>=ic?r:t+r}function ac(e,t,r){let n=e;for(;t-- >ic;)n*=n,n%=r;return n}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const cc=BigInt(0),uc=BigInt(1);const dc=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const hc=BigInt(1),lc=BigInt(2),fc=BigInt(3),pc=BigInt(5);BigInt(8);const mc=function(e){const t=function(e){return function(e,t,r={}){const n=(t,r,n)=>{const i=nc[r];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0)}(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})}(e),{P:r}=t,n=e=>oc(e,r),i=t.montgomeryBits,s=Math.ceil(i/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),c=t.powPminus2||(e=>function(e,t,r){if(t<ic)throw new Error("invalid exponent, negatives unsupported");if(r<=ic)throw new Error("invalid modulus");if(r===sc)return ic;let n=sc;for(;t>ic;)t&sc&&(n=n*e%r),e=e*e%r,t>>=sc;return n}(e,r-BigInt(2),r));function u(e,t,r){const i=n(e*(t-r));return[t=n(t-i),r=n(r+i)]}const d=(t.a-BigInt(2))/BigInt(4);function h(e){return function(e,t){return function(e,t){return Ya(e.toString(16).padStart(2*t,"0"))}(e,t).reverse()}(n(e),s)}function l(e,t){const l=function(e){const t=ec("u coordinate",e,s);return 32===o&&(t[31]&=127),Xa(t)}(t),f=function(e){const t=ec("scalar",e),r=t.length;if(r!==s&&r!==o)throw new Error("invalid scalar, expected "+s+" or "+o+" bytes, got "+r);return Xa(a(t))}(e),p=function(e,t){rc("u",e,cc,r),rc("scalar",t,cc,r);const s=t,o=e;let a,h=uc,l=cc,f=e,p=uc,m=cc;for(let e=BigInt(i-1);e>=cc;e--){const t=s>>e&uc;m^=t,a=u(m,h,f),h=a[0],f=a[1],a=u(m,l,p),l=a[0],p=a[1],m=t;const r=h+l,i=n(r*r),c=h-l,g=n(c*c),y=i-g,b=f+p,v=n((f-p)*r),w=n(b*c),A=v+w,E=v-w;f=n(A*A),p=n(o*n(E*E)),h=n(i*g),l=n(y*(i+n(d*y)))}a=u(m,h,f),h=a[0],f=a[1],a=u(m,l,p),l=a[0],p=a[1];const g=c(l);return n(h*g)}(l,f);if(p===cc)throw new Error("invalid private or public key received");return h(p)}const f=h(t.Gu);function p(e){return l(e,f)}return{scalarMult:l,scalarMultBase:p,getSharedSecret:(e,t)=>l(e,t),getPublicKey:e=>p(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:f}}({P:dc,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=dc,{pow_p_5_8:r,b2:n}=function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=dc,o=e*e%s*e%s,a=ac(o,lc,s)*o%s,c=ac(a,hc,s)*e%s,u=ac(c,pc,s)*c%s,d=ac(u,t,s)*u%s,h=ac(d,r,s)*d%s,l=ac(h,n,s)*h%s,f=ac(l,i,s)*l%s,p=ac(f,i,s)*l%s,m=ac(p,t,s)*u%s;return{pow_p_5_8:ac(m,lc,s)*e%s,b2:o}}(e);return oc(ac(r,fc,t)*n,t)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:Eo}),gc="base10",yc="base16",bc="base64pad",vc="base64url",wc="utf8";function Ac(){return Ps(Eo(32),yc)}function Ec(e){return Ps(Va(Ss(e,yc)),yc)}function xc(e){return Ps(Va(Ss(e,wc)),yc)}function Ic(e){return Ss(`${e}`,gc)}function _c(e){return Number(Ps(e,gc))}function Sc(e){const{encoding:t=bc}=e;if(2===_c(e.type))return Ps(ri([e.type,e.sealed]),t);if(1===_c(e.type)){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ps(ri([e.type,e.senderPublicKey,e.iv,e.sealed]),t)}return Ps(ri([e.type,e.iv,e.sealed]),t)}function Pc(e){const{encoded:t,encoding:r=bc}=e,n=Ss(t,r),i=n.slice(0,1);if(1===_c(i)){const e=33,t=e+12,r=n.slice(1,e),s=n.slice(e,t);return{type:i,sealed:n.slice(t),iv:s,senderPublicKey:r}}if(2===_c(i))return{type:i,sealed:n.slice(1),iv:Eo(12)};const s=n.slice(1,13);return{type:i,sealed:n.slice(13),iv:s}}function Oc(e){const t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function kc(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function Tc(e){return 2===e.type}function Cc(e){return e?.relay||{protocol:"irn"}}function Mc(e){const t=ks[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function Rc(e,t="-"){const r={},n="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(n)){const i=t.replace(n,""),s=e[t];r[i]=s}})),r}function Nc(e){if(!e.includes("wc:")){const t=no(e);null!=t&&t.includes("wc:")&&(e=t)}const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,t),i=e.substring(t+1,r).split("@"),s=typeof r<"u"?e.substring(r):"",o=new URLSearchParams(s),a={};o.forEach(((e,t)=>{a[t]=e}));const c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:n,topic:Bc(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:Rc(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Bc(e){return e.startsWith("//")?e.substring(2):e}function Lc(e){const t=new URLSearchParams,r=function(e,t="-"){const r={};return Object.keys(e).forEach((n=>{const i=n,s="relay"+t+i;e[i]&&(r[s]=e[i])})),r}(e.relay);Object.keys(r).sort().forEach((e=>{t.set(e,r[e])})),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const n=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${n}`}function jc(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}function Dc(e){const t=[];return e.forEach((e=>{const[r,n]=e.split(":");t.push(`${r}:${n}`)})),t}function Fc(e){return e.includes(":")}function Uc(e){return Fc(e)?e.split(":")[0]:e}function qc(e,t){const r=function(e){const t={};return e?.forEach((e=>{var r;const[n,i]=e.split(":");t[n]||(t[n]={accounts:[],chains:[],events:[],methods:[]}),t[n].accounts.push(e),null==(r=t[n].chains)||r.push(`${n}:${i}`)})),t}(t=t.map((e=>e.replace("did:pkh:",""))));for(const[t,n]of Object.entries(r))n.methods?n.methods=Xs(n.methods,e):n.methods=e,n.events=["chainChanged","accountsChanged"];return r}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const Hc={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},zc={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function $c(e,t){const{message:r,code:n}=zc[e];return{message:t?`${r} ${t}`:r,code:n}}function Gc(e,t){const{message:r,code:n}=Hc[e];return{message:t?`${r} ${t}`:r,code:n}}function Vc(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function Kc(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Wc(e){return typeof e>"u"}function Qc(e,t){return!(!t||!Wc(e))||"string"==typeof e&&!!e.trim().length}function Zc(e,t){return!(!t||!Wc(e))||"number"==typeof e&&!isNaN(e)}function Jc(e){return!(!Qc(e,!1)||!e.includes(":"))&&2===e.split(":").length}function Yc(e){let t=!0;return Vc(e)?e.length&&(t=e.every((e=>Qc(e,!1)))):t=!1,t}function Xc(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return Yc(e?.methods)?Yc(e?.events)||(r=Gc("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Gc("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}(e,`${t}, namespace`);n&&(r=n)})),r}function eu(e,t){let r=null;if(e&&Kc(e)){const n=Xc(e,t);n&&(r=n);const i=function(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return Vc(e)?e.forEach((e=>{r||function(e){if(Qc(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&Jc(e)}}return!1}(e)||(r=Gc("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):r=Gc("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}(e?.accounts,`${t} namespace`);n&&(r=n)})),r}(e,t);i&&(r=i)}else r=$c("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function tu(e){return Qc(e.protocol,!0)}function ru(e){return typeof e<"u"&&null!==typeof e}function nu(e,t){return!(!Jc(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...Dc(e.accounts))})),t}(e).includes(t))}function iu(e,t,r){let n=null;const i=function(e){const t={};return Object.keys(e).forEach((r=>{var n;r.includes(":")?t[r]=e[r]:null==(n=e[r].chains)||n.forEach((n=>{t[n]={methods:e[r].methods,events:e[r].events}}))})),t}(e),s=function(e){const t={};return Object.keys(e).forEach((r=>{if(r.includes(":"))t[r]=e[r];else{const n=Dc(e[r].accounts);n?.forEach((n=>{t[n]={accounts:e[r].accounts.filter((e=>e.includes(`${n}:`))),methods:e[r].methods,events:e[r].events}}))}})),t}(t),o=Object.keys(i),a=Object.keys(s),c=su(Object.keys(e)),u=su(Object.keys(t)),d=c.filter((e=>!u.includes(e)));return d.length&&(n=$c("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${d.toString()}\n      Received: ${Object.keys(t).toString()}`)),zs(o,a)||(n=$c("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||n)return;const i=Dc(t[e].accounts);i.includes(e)||(n=$c("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${i.toString()}`))})),o.forEach((e=>{n||(zs(i[e].methods,s[e].methods)?zs(i[e].events,s[e].events)||(n=$c("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):n=$c("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))})),n}function su(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function ou(){const e=Fs();return new Promise((t=>{switch(e){case Ns:t(Ds()&&navigator?.onLine);break;case Rs:t(async function(){if(js()&&typeof i.g<"u"&&null!=i.g&&i.g.NetInfo){const e=await(null==i.g?void 0:i.g.NetInfo.fetch());return e?.isConnected}return!0}());break;default:t(!0)}}))}const au={};class cu{static get(e){return au[e]}static set(e,t){au[e]=t}static delete(e){delete au[e]}}class uu{}class du extends uu{constructor(e){super()}}const hu=M.FIVE_SECONDS,lu="heartbeat_pulse";class fu extends du{constructor(e){super(e),this.events=new w.EventEmitter,this.interval=hu,this.interval=e?.interval||hu}static async init(e){const t=new fu(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval((()=>this.pulse()),(0,M.toMiliseconds)(this.interval))}pulse(){this.events.emit(lu)}}const pu=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,mu=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,gu=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function yu(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function bu(e,t={}){if("string"!=typeof e)return e;const r=e.trim();if('"'===e[0]&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const e=r.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!gu.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(pu.test(e)||mu.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,yu)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function vu(e,...t){try{return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}var r}function wu(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return wu(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Au="base64:";function Eu(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function xu(...e){return Eu(e.join(":"))}function Iu(e){return(e=Eu(e))?e+":":""}const _u=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function Su(e={}){const t={mounts:{"":e.driver||_u()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},n=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),i=(e,r)=>{if(t.watching){r=Eu(r);for(const n of t.watchListeners)n(e,r)}},s=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},o=(e,t,n)=>{const i=new Map,s=e=>{let t=i.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},i.set(e.base,t)),t};for(const n of e){const e="string"==typeof n,i=Eu(e?n:n.key),o=e?void 0:n.value,a=e||!n.options?t:{...t,...n.options},c=r(i);s(c).items.push({key:i,value:o,relativeKey:c.relativeKey,options:a})}return Promise.all([...i.values()].map((e=>n(e)))).then((e=>e.flat()))},a={hasItem(e,t={}){e=Eu(e);const{relativeKey:n,driver:i}=r(e);return vu(i.hasItem,n,t)},getItem(e,t={}){e=Eu(e);const{relativeKey:n,driver:i}=r(e);return vu(i.getItem,n,t).then((e=>bu(e)))},getItems:(e,t={})=>o(e,t,(e=>e.driver.getItems?vu(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:xu(e.base,t.key),value:bu(t.value)}))))):Promise.all(e.items.map((t=>vu(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:bu(e)})))))))),getItemRaw(e,t={}){e=Eu(e);const{relativeKey:n,driver:i}=r(e);return i.getItemRaw?vu(i.getItemRaw,n,t):vu(i.getItem,n,t).then((e=>function(e){return"string"!=typeof e?e:e.startsWith(Au)?(t=e.slice(7),globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),(e=>e.codePointAt(0)))):e;var t}(e)))},async setItem(e,t,n={}){if(void 0===t)return a.removeItem(e);e=Eu(e);const{relativeKey:s,driver:o}=r(e);o.setItem&&(await vu(o.setItem,s,wu(t),n),o.watch||i("update",e))},async setItems(e,t){await o(e,t,(async e=>{if(e.driver.setItems)return vu(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:wu(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>vu(e.driver.setItem,t.relativeKey,wu(t.value),t.options))))}))},async setItemRaw(e,t,n={}){if(void 0===t)return a.removeItem(e,n);e=Eu(e);const{relativeKey:s,driver:o}=r(e);if(o.setItemRaw)await vu(o.setItemRaw,s,t,n);else{if(!o.setItem)return;await vu(o.setItem,s,function(e){return"string"==typeof e?e:Au+(t=e,globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t)));var t}(t),n)}o.watch||i("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=Eu(e);const{relativeKey:n,driver:s}=r(e);s.removeItem&&(await vu(s.removeItem,n,t),(t.removeMeta||t.removeMata)&&await vu(s.removeItem,n+"$",t),s.watch||i("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=Eu(e);const{relativeKey:n,driver:i}=r(e),s=Object.create(null);if(i.getMeta&&Object.assign(s,await vu(i.getMeta,n,t)),!t.nativeOnly){const e=await vu(i.getItem,n+"$",t).then((e=>bu(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=Iu(e);const r=n(e,!0);let i=[];const s=[];let o=!0;for(const e of r){e.driver.flags?.maxDepth||(o=!1);const r=await vu(e.driver.getKeys,e.relativeBase,t);for(const t of r){const r=e.mountpoint+Eu(t);i.some((e=>r.startsWith(e)))||s.push(r)}i=[e.mountpoint,...i.filter((t=>!t.startsWith(e.mountpoint)))]}const a=void 0!==t.maxDepth&&!o;return s.filter((r=>(!a||function(e,t){if(void 0===t)return!0;let r=0,n=e.indexOf(":");for(;n>-1;)r++,n=e.indexOf(":",n+1);return r<=t}(r,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(r,e)))},async clear(e,t={}){e=Iu(e),await Promise.all(n(e,!1).map((async e=>{if(e.driver.clear)return vu(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>Ou(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await Pu(t.mounts[e],i,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await s()}),async unwatch(){t.watchListeners=[],await s()},mount(e,r){if((e=Iu(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=r,t.watching&&Promise.resolve(Pu(r,i,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),a},async unmount(e,r=!0){(e=Iu(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await Ou(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=Eu(e)+":";const t=r(e);return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>(e=Eu(e),n(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))),keys:(e,t={})=>a.getKeys(e,t),get:(e,t={})=>a.getItem(e,t),set:(e,t,r={})=>a.setItem(e,t,r),has:(e,t={})=>a.hasItem(e,t),del:(e,t={})=>a.removeItem(e,t),remove:(e,t={})=>a.removeItem(e,t)};return a}function Pu(e,t,r){return e.watch?e.watch(((e,n)=>t(e,r+n))):()=>{}}async function Ou(e){"function"==typeof e.dispose&&await vu(e.dispose)}function ku(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function Tu(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=ku(r);return(e,r)=>n.then((n=>r(n.transaction(t,e).objectStore(t))))}let Cu;function Mu(){return Cu||(Cu=Tu("keyval-store","keyval")),Cu}function Ru(e,t=Mu()){return t("readonly",(t=>ku(t.get(e))))}var Nu=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=e=>t+e;let n;return e.dbName&&e.storeName&&(n=Tu(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await Ru(r(e),n)>"u"),getItem:async e=>await Ru(r(e),n)??null,setItem:(e,t)=>function(e,t,r=Mu()){return r("readwrite",(r=>(r.put(t,e),ku(r.transaction))))}(r(e),t,n),removeItem:e=>function(e,t=Mu()){return t("readwrite",(t=>(t.delete(e),ku(t.transaction))))}(r(e),n),getKeys:()=>function(e=Mu()){return e("readonly",(e=>{if(e.getAllKeys)return ku(e.getAllKeys());const t=[];return function(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},ku(e.transaction)}(e,(e=>t.push(e.key))).then((()=>t))}))}(n),clear:()=>function(e=Mu()){return e("readwrite",(e=>(e.clear(),ku(e.transaction))))}(n)}};class Bu{constructor(){this.indexedDb=Su({driver:Nu({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e=>[e.key,e.value]))}async getItem(e){const t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,Me(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof i.g<"u"?i.g:typeof self<"u"?self:{},ju={exports:{}};function Du(e){var t;return[e[0],Ce(null!=(t=e[1])?t:"")]}!function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(t){e[t]=void 0,delete e[t]}))},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof Lu<"u"&&Lu.localStorage?ju.exports=Lu.localStorage:typeof window<"u"&&window.localStorage?ju.exports=window.localStorage:ju.exports=new t}();class Fu{constructor(){this.localStorage=ju.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Du)}async getItem(e){const t=this.localStorage.getItem(e);if(null!==t)return Ce(t)}async setItem(e,t){this.localStorage.setItem(e,Me(t))}async removeItem(e){this.localStorage.removeItem(e)}}class Uu{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const e=new Fu;this.storage=e;try{(async(e,t,r)=>{const n="wc_storage_version",i=await t.getItem(n);if(i&&i>=1)return void r(t);const s=await e.getKeys();if(!s.length)return void r(t);const o=[];for(;s.length;){const r=s.shift();if(!r)continue;const n=r.toLowerCase();if(n.includes("wc@")||n.includes("walletconnect")||n.includes("wc_")||n.includes("wallet_connect")){const n=await e.getItem(r);await t.setItem(r,n),o.push(r)}}await t.setItem(n,1),r(t),(async(e,t)=>{t.length&&t.forEach((async t=>{await e.removeItem(t)}))})(e,o)})(e,new Bu,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise((e=>{const t=setInterval((()=>{this.initialized&&(clearInterval(t),e())}),20)}))}}var qu=i(4874),Hu=i.n(qu);const zu="custom_context";class $u{constructor(e){this.nodeValue=e,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class Gu{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new $u(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}}class Vu{constructor(e,t=1024e3){this.level=e??"error",this.levelValue=qu.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new Gu(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===qu.levels.values.error?console.error(e):t===qu.levels.values.warn?console.warn(e):t===qu.levels.values.debug?console.debug(e):t===qu.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Me({timestamp:(new Date).toISOString(),log:e}));const t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new Gu(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(Me({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class Ku{constructor(e,t=1024e3){this.baseChunkLogger=new Vu(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class Wu{constructor(e,t=1024e3){this.baseChunkLogger=new Vu(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var Qu=Object.defineProperty,Zu=Object.defineProperties,Ju=Object.getOwnPropertyDescriptors,Yu=Object.getOwnPropertySymbols,Xu=Object.prototype.hasOwnProperty,ed=Object.prototype.propertyIsEnumerable,td=(e,t,r)=>t in e?Qu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rd=(e,t)=>{for(var r in t||(t={}))Xu.call(t,r)&&td(e,r,t[r]);if(Yu)for(var r of Yu(t))ed.call(t,r)&&td(e,r,t[r]);return e},nd=(e,t)=>Zu(e,Ju(t));function id(e){return nd(rd({},e),{level:e?.level||"info"})}function sd(e,t=zu){let r="";return r=typeof e.bindings>"u"?function(e,t=zu){return e[t]||""}(e,t):e.bindings().context||"",r}function od(e,t,r=zu){const n=function(e,t,r=zu){const n=sd(e,r);return n.trim()?`${n}/${t}`:t}(e,t,r);return function(e,t,r=zu){return e[r]=t,e}(e.child({context:n}),n,r)}function ad(e){return typeof e.loggerOverride<"u"&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?function(e){var t,r;const n=new Ku(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:Hu()(nd(rd({},e.opts),{level:"trace",browser:nd(rd({},null==(r=e.opts)?void 0:r.browser),{write:e=>n.write(e)})})),chunkLoggerController:n}}(e):function(e){var t;const r=new Wu(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:Hu()(nd(rd({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}(e)}var cd=Object.defineProperty,ud=(e,t,r)=>((e,t,r)=>t in e?cd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class dd extends uu{constructor(e){super(),this.opts=e,ud(this,"protocol","wc"),ud(this,"version",2)}}var hd=Object.defineProperty;class ld extends uu{constructor(e,t){super(),this.core=e,this.logger=t,((e,t,r)=>{((e,t,r)=>{t in e?hd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"records",new Map)}}class fd{constructor(e,t){this.logger=e,this.core=t}}class pd extends uu{constructor(e,t){super(),this.relayer=e,this.logger=t}}class md extends uu{constructor(e){super()}}class gd{constructor(e,t,r,n){this.core=e,this.logger=t,this.name=r}}Object.defineProperty;class yd extends uu{constructor(e,t){super(),this.relayer=e,this.logger=t}}class bd extends uu{constructor(e,t){super(),this.core=e,this.logger=t}}class vd{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class wd{constructor(e,t){this.projectId=e,this.logger=t}}class Ad{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}var Ed=Object.defineProperty,xd=(e,t,r)=>((e,t,r)=>t in e?Ed(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);A();class Id{constructor(e){this.opts=e,xd(this,"protocol","wc"),xd(this,"version",2)}}w.EventEmitter;class _d{constructor(e){this.client=e}}const Sd="PARSE_ERROR",Pd="INVALID_REQUEST",Od="METHOD_NOT_FOUND",kd="INVALID_PARAMS",Td="INTERNAL_ERROR",Cd="SERVER_ERROR",Md=[-32700,-32600,-32601,-32602,-32603],Rd={[Sd]:{code:-32700,message:"Parse error"},[Pd]:{code:-32600,message:"Invalid Request"},[Od]:{code:-32601,message:"Method not found"},[kd]:{code:-32602,message:"Invalid params"},[Td]:{code:-32603,message:"Internal error"},[Cd]:{code:-32e3,message:"Server error"}},Nd=Cd;function Bd(e){return Object.keys(Rd).includes(e)?Rd[e]:Rd[Nd]}function Ld(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var jd=i(5682);function Dd(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function Fd(e=6){return BigInt(Dd(e))}function Ud(e,t,r){return{id:r||Dd(),jsonrpc:"2.0",method:e,params:t}}function qd(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Hd(e,t,r){return{id:e,jsonrpc:"2.0",error:zd(t,r)}}function zd(e,t){return void 0===e?Bd(Td):("string"==typeof e&&(e=Object.assign(Object.assign({},Bd(Cd)),{message:e})),void 0!==t&&(e.data=t),r=e.code,Md.includes(r)&&(e=function(e){const t=Object.values(Rd).find((t=>t.code===e));return t||Rd[Nd]}(e.code)),e);var r}class $d{}class Gd extends $d{constructor(){super()}}class Vd extends Gd{constructor(e){super()}}function Kd(e,t){const r=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}function Wd(e){return Kd(e,"^https?:")}function Qd(e){return Kd(e,"^wss?:")}function Zd(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function Jd(e){return Zd(e)&&"method"in e}function Yd(e){return Zd(e)&&(Xd(e)||eh(e))}function Xd(e){return"result"in e}function eh(e){return"error"in e}class th extends Vd{constructor(e){super(e),this.events=new w.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Ud(e.method,e.params||[],e.id||Fd().toString()),t)}async requestStrict(e,t){return new Promise((async(r,n)=>{if(!this.connection.connected)try{await this.open()}catch(e){n(e)}this.events.on(`${e.id}`,(e=>{eh(e)?n(e.error):r(e.result)}));try{await this.connection.send(e,t)}catch(e){n(e)}}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Yd(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const rh=e=>e.split("?")[0],nh=typeof WebSocket<"u"?WebSocket:typeof i.g<"u"&&typeof i.g.WebSocket<"u"?i.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:i(1591);class ih{constructor(e){if(this.url=e,this.events=new w.EventEmitter,this.registering=!1,!Qd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Me(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!Qd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(new Error("WebSocket connection is missing or invalid"));e(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,r)=>{const n=(0,jd.isReactNative)()?void 0:{rejectUnauthorized:(o=e,!new RegExp("wss?://localhost(:d{2,5})?").test(o))},s=new nh(e,[],n);var o;typeof WebSocket<"u"||typeof i.g<"u"&&typeof i.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?s.onerror=e=>{const t=e;r(this.emitError(t.error))}:s.on("error",(e=>{r(this.emitError(e))})),s.onopen=()=>{this.onOpen(s),t(s)}}))}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?Ce(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=Hd(e,r.message||r.toString());this.events.emit("payload",n)}parseError(e,t=this.url){return Ld(e,rh(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${rh(this.url)}`));return this.events.emit("register_error",t),t}}const sh="core",oh=`wc@2:${sh}:`,ah={database:":memory:"},ch="client_ed25519_seed",uh=M.ONE_DAY,dh=M.SIX_HOURS,hh="wss://relay.walletconnect.org",lh="relayer_message",fh="relayer_message_ack",ph="relayer_connection_stalled",mh="relayer_publish",gh="payload",yh="connect",bh="disconnect",vh="error",wh="2.19.1",Ah={link_mode:"link_mode",relay:"relay"},Eh="inbound",xh="WALLETCONNECT_LINK_MODE_APPS",Ih="subscription_created",_h="subscription_deleted",Sh=(M.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:M.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:M.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:M.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:M.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:M.ONE_DAY,prompt:!1,tag:0},res:{ttl:M.ONE_DAY,prompt:!1,tag:0}}}),Ph="pairing_create",Oh="pairing_delete",kh="history_created",Th="history_updated",Ch="history_deleted",Mh="expirer_created",Rh="expirer_deleted",Nh="expirer_expired",Bh="https://verify.walletconnect.org",Lh=Bh,jh=`${Lh}/v3`,Dh=["https://verify.walletconnect.com",Bh],Fh="malformed_pairing_uri",Uh="session_approve_started";var qh=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var d=r[e.charCodeAt(t)];if(255===d)return;for(var h=0,l=s-1;(0!==d||h<i)&&-1!==l;l--,h++)d+=a*o[l]>>>0,o[l]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(n+(s-f)),m=n;f!==s;)p[m++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*d+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],l=0,f=o-1;(0!==h||l<n)&&-1!==f;f--,l++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=l,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var m=c.repeat(r);p<o;++p)m+=e.charAt(u[p]);return m},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const Hh=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class zh{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class $h{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Vh(this,e)}}class Gh{constructor(e){this.decoders=e}or(e){return Vh(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Vh=(e,t)=>new Gh({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Kh{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new zh(e,t,r),this.decoder=new $h(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Wh=({name:e,prefix:t,encode:r,decode:n})=>new Kh(e,t,r,n),Qh=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=qh(r,t);return Wh({prefix:e,name:t,encode:n,decode:e=>Hh(i(e))})},Zh=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Wh({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),Jh=Wh({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var Yh=Object.freeze({__proto__:null,identity:Jh});const Xh=Zh({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var el=Object.freeze({__proto__:null,base2:Xh});const tl=Zh({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var rl=Object.freeze({__proto__:null,base8:tl});const nl=Qh({prefix:"9",name:"base10",alphabet:"0123456789"});var il=Object.freeze({__proto__:null,base10:nl});const sl=Zh({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ol=Zh({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var al=Object.freeze({__proto__:null,base16:sl,base16upper:ol});const cl=Zh({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ul=Zh({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dl=Zh({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hl=Zh({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ll=Zh({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),fl=Zh({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),pl=Zh({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ml=Zh({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gl=Zh({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var yl=Object.freeze({__proto__:null,base32:cl,base32upper:ul,base32pad:dl,base32padupper:hl,base32hex:ll,base32hexupper:fl,base32hexpad:pl,base32hexpadupper:ml,base32z:gl});const bl=Qh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),vl=Qh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var wl=Object.freeze({__proto__:null,base36:bl,base36upper:vl});const Al=Qh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),El=Qh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var xl=Object.freeze({__proto__:null,base58btc:Al,base58flickr:El});const Il=Zh({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_l=Zh({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Sl=Zh({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Pl=Zh({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ol=Object.freeze({__proto__:null,base64:Il,base64pad:_l,base64url:Sl,base64urlpad:Pl});const kl=Array.from(""),Tl=kl.reduce(((e,t,r)=>(e[r]=t,e)),[]),Cl=kl.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Ml=Wh({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+Tl[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Cl[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var Rl=Object.freeze({__proto__:null,base256emoji:Ml}),Nl=128,Bl=-128,Ll=Math.pow(2,31),jl=128,Dl=127,Fl=Math.pow(2,7),Ul=Math.pow(2,14),ql=Math.pow(2,21),Hl=Math.pow(2,28),zl=Math.pow(2,35),$l=Math.pow(2,42),Gl=Math.pow(2,49),Vl=Math.pow(2,56),Kl=Math.pow(2,63),Wl={encode:function e(t,r,n){r=r||[];for(var i=n=n||0;t>=Ll;)r[n++]=255&t|Nl,t/=128;for(;t&Bl;)r[n++]=255&t|Nl,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},decode:function e(t,r){var n,i=0,s=(r=r||0,0),o=r,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&Dl)<<s:(n&Dl)*Math.pow(2,s),s+=7}while(n>=jl);return e.bytes=o-r,i},encodingLength:function(e){return e<Fl?1:e<Ul?2:e<ql?3:e<Hl?4:e<zl?5:e<$l?6:e<Gl?7:e<Vl?8:e<Kl?9:10}},Ql=Wl;const Zl=(e,t,r=0)=>(Ql.encode(e,t,r),t),Jl=e=>Ql.encodingLength(e),Yl=(e,t)=>{const r=t.byteLength,n=Jl(e),i=n+Jl(r),s=new Uint8Array(i+r);return Zl(e,s,0),Zl(r,s,n),s.set(t,i),new Xl(e,r,t,s)};class Xl{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const ef=({name:e,code:t,encode:r})=>new tf(e,t,r);class tf{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Yl(this.code,t):t.then((e=>Yl(this.code,e)))}throw Error("Unknown type, must be binary type")}}const rf=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),nf=ef({name:"sha2-256",code:18,encode:rf("SHA-256")}),sf=ef({name:"sha2-512",code:19,encode:rf("SHA-512")});Object.freeze({__proto__:null,sha256:nf,sha512:sf});const of=Hh,af={code:0,name:"identity",encode:of,digest:e=>Yl(0,of(e))};Object.freeze({__proto__:null,identity:af}),new TextEncoder,new TextDecoder;const cf={...Yh,...el,...rl,...il,...al,...yl,...wl,...xl,...Ol,...Rl};function uf(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const df=uf("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),hf=uf("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),lf={utf8:df,"utf-8":df,hex:cf.base16,latin1:hf,ascii:hf,binary:hf,...cf};var ff=Object.defineProperty,pf=(e,t,r)=>((e,t,r)=>t in e?ff(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class mf{constructor(e,t){this.core=e,this.logger=t,pf(this,"keychain",new Map),pf(this,"name","keychain"),pf(this,"version","0.3"),pf(this,"initialized",!1),pf(this,"storagePrefix",oh),pf(this,"init",(async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}})),pf(this,"has",(e=>(this.isInitialized(),this.keychain.has(e)))),pf(this,"set",(async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()})),pf(this,"get",(e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=$c("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t})),pf(this,"del",(async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()})),this.core=e,this.logger=od(t,this.name)}get context(){return sd(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,$s(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Gs(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=$c("NOT_INITIALIZED",this.name);throw new Error(e)}}}var gf=Object.defineProperty,yf=(e,t,r)=>((e,t,r)=>t in e?gf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class bf{constructor(e,t,r){this.core=e,this.logger=t,yf(this,"name","crypto"),yf(this,"keychain"),yf(this,"randomSessionIdentifier",Ac()),yf(this,"initialized",!1),yf(this,"init",(async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)})),yf(this,"hasKeys",(e=>(this.isInitialized(),this.keychain.has(e)))),yf(this,"getClientId",(async()=>(this.isInitialized(),Jn(ei(await this.getClientSeed()).publicKey)))),yf(this,"generateKeyPair",(()=>{this.isInitialized();const e=function(){const e=mc.utils.randomPrivateKey(),t=mc.getPublicKey(e);return{privateKey:Ps(e,yc),publicKey:Ps(t,yc)}}();return this.setPrivateKey(e.publicKey,e.privateKey)})),yf(this,"signJWT",(async e=>{this.isInitialized();const t=ei(await this.getClientSeed()),r=this.randomSessionIdentifier,n=uh;return await async function(e,t,r,n,i=(0,M.fromMiliseconds)(Date.now())){const s={alg:"EdDSA",typ:"JWT"},o={iss:Jn(n.publicKey),sub:e,aud:t,iat:i,exp:i+r},a=function(e){return Wn([Zn(e.header),Zn(e.payload)].join(fr),gr)}({header:s,payload:o});return function(e){return[Zn(e.header),Zn(e.payload),Yn(e.signature)].join(fr)}({header:s,payload:o,signature:lr.sign(a,n.secretKey.slice(0,32))})}(r,e,n,t)})),yf(this,"generateSharedKey",((e,t,r)=>{this.isInitialized();const n=function(e,t){const r=mc.getSharedSecret(Ss(e,yc),Ss(t,yc));return Ps(((e,t,r,n,i)=>function(e,t,r,n=32){if(oo(e),io(n),n>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/e.outputLen);void 0===r&&(r=Da);const s=new Uint8Array(i*e.outputLen),o=La.create(e,t),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let t=0;t<i;t++)ja[0]=t+1,a.update(0===t?Da:c).update(r).update(ja).digestInto(c),s.set(c,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),ja.fill(0),s.slice(0,n)}(e,function(e,t,r){return oo(e),void 0===r&&(r=new Uint8Array(e.outputLen)),La(e,vo(r),vo(t))}(e,t,r),n,i))(Va,r,void 0,void 0,32),yc)}(this.getPrivateKey(e),t);return this.setSymKey(n,r)})),yf(this,"setSymKey",(async(e,t)=>{this.isInitialized();const r=t||Ec(e);return await this.keychain.set(r,e),r})),yf(this,"deleteKeyPair",(async e=>{this.isInitialized(),await this.keychain.del(e)})),yf(this,"deleteSymKey",(async e=>{this.isInitialized(),await this.keychain.del(e)})),yf(this,"encode",(async(e,t,r)=>{this.isInitialized();const n=Oc(r),i=Me(t);if(Tc(n))return function(e,t){const r=Ic(2),n=Eo(12);return Sc({type:r,sealed:Ss(e,wc),iv:n,encoding:t})}(i,r?.encoding);if(kc(n)){const t=n.senderPublicKey,r=n.receiverPublicKey;e=await this.generateSharedKey(t,r)}const s=this.getSymKey(e),{type:o,senderPublicKey:a}=n;return function(e){const t=Ic(typeof e.type<"u"?e.type:0);if(1===_c(t)&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?Ss(e.senderPublicKey,yc):void 0,n=typeof e.iv<"u"?Ss(e.iv,yc):Eo(12),i=Ss(e.symKey,yc);return Sc({type:t,sealed:Ra(i,n).encrypt(Ss(e.message,wc)),iv:n,senderPublicKey:r,encoding:e.encoding})}({type:o,symKey:s,message:i,senderPublicKey:a,encoding:r?.encoding})})),yf(this,"decode",(async(e,t,r)=>{this.isInitialized();const n=function(e,t){const r=Pc({encoded:e,encoding:t?.encoding});return Oc({type:_c(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Ps(r.senderPublicKey,yc):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(Tc(n)){const e=function(e,t){const{sealed:r}=Pc({encoded:e,encoding:t});return Ps(r,wc)}(t,r?.encoding);return Ce(e)}if(kc(n)){const t=n.receiverPublicKey,r=n.senderPublicKey;e=await this.generateSharedKey(t,r)}try{const n=function(e){const t=Ss(e.symKey,yc),{sealed:r,iv:n}=Pc(e),i=Ra(t,n).decrypt(r);if(null===i)throw new Error("Failed to decrypt");return Ps(i,wc)}({symKey:this.getSymKey(e),encoded:t,encoding:r?.encoding});return Ce(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}})),yf(this,"getPayloadType",((e,t=bc)=>_c(Pc({encoded:e,encoding:t}).type))),yf(this,"getPayloadSenderPublicKey",((e,t=bc)=>{const r=Pc({encoded:e,encoding:t});return r.senderPublicKey?Ps(r.senderPublicKey,yc):void 0})),this.core=e,this.logger=od(t,this.name),this.keychain=r||new mf(this.core,this.logger)}get context(){return sd(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ch)}catch{e=Ac(),await this.keychain.set(ch,e)}return function(e,t="utf8"){const r=lf[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=$c("NOT_INITIALIZED",this.name);throw new Error(e)}}}var vf=Object.defineProperty,wf=Object.defineProperties,Af=Object.getOwnPropertyDescriptors,Ef=Object.getOwnPropertySymbols,xf=Object.prototype.hasOwnProperty,If=Object.prototype.propertyIsEnumerable,_f=(e,t,r)=>t in e?vf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Sf=(e,t,r)=>_f(e,"symbol"!=typeof t?t+"":t,r);class Pf extends fd{constructor(e,t){super(e,t),this.logger=e,this.core=t,Sf(this,"messages",new Map),Sf(this,"messagesWithoutClientAck",new Map),Sf(this,"name","messages"),Sf(this,"version","0.3"),Sf(this,"initialized",!1),Sf(this,"storagePrefix",oh),Sf(this,"init",(async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e);const t=await this.getRelayerMessagesWithoutClientAck();typeof t<"u"&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}})),Sf(this,"set",(async(e,t,r)=>{this.isInitialized();const n=xc(t);let i=this.messages.get(e);if(typeof i>"u"&&(i={}),typeof i[n]<"u")return n;if(i[n]=t,this.messages.set(e,i),r===Eh){const r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,((e,t)=>wf(e,Af(t)))(((e,t)=>{for(var r in t||(t={}))xf.call(t,r)&&_f(e,r,t[r]);if(Ef)for(var r of Ef(t))If.call(t,r)&&_f(e,r,t[r]);return e})({},r),{[n]:t}))}return await this.persist(),n})),Sf(this,"get",(e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t})),Sf(this,"getWithoutAck",(e=>{this.isInitialized();const t={};for(const r of e){const e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t})),Sf(this,"has",((e,t)=>(this.isInitialized(),typeof this.get(e)[xc(t)]<"u"))),Sf(this,"ack",(async(e,t)=>{this.isInitialized();const r=this.messagesWithoutClientAck.get(e);typeof r>"u"||(delete r[xc(t)],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist())})),Sf(this,"del",(async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()})),this.logger=od(e,this.name),this.core=t}get context(){return sd(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,$s(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,$s(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Gs(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Gs(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=$c("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Of=Object.defineProperty,kf=Object.defineProperties,Tf=Object.getOwnPropertyDescriptors,Cf=Object.getOwnPropertySymbols,Mf=Object.prototype.hasOwnProperty,Rf=Object.prototype.propertyIsEnumerable,Nf=(e,t,r)=>t in e?Of(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Bf=(e,t)=>{for(var r in t||(t={}))Mf.call(t,r)&&Nf(e,r,t[r]);if(Cf)for(var r of Cf(t))Rf.call(t,r)&&Nf(e,r,t[r]);return e},Lf=(e,t)=>kf(e,Tf(t)),jf=(e,t,r)=>Nf(e,"symbol"!=typeof t?t+"":t,r);class Df extends pd{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,jf(this,"events",new w.EventEmitter),jf(this,"name","publisher"),jf(this,"queue",new Map),jf(this,"publishTimeout",(0,M.toMiliseconds)(M.ONE_MINUTE)),jf(this,"initialPublishTimeout",(0,M.toMiliseconds)(15*M.ONE_SECOND)),jf(this,"needsTransportRestart",!1),jf(this,"publish",(async(e,t,r)=>{var n;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});const i=r?.ttl||dh,s=Cc(r),o=r?.prompt||!1,a=r?.tag||0,c=r?.id||Fd().toString(),u={topic:e,message:t,opts:{ttl:i,relay:s,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}},d=`Failed to publish payload, please try again. id:${c} tag:${a}`;try{const n=new Promise((async n=>{const s=({id:e})=>{u.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(mh,s),n(u))};this.relayer.events.on(mh,s);const d=Ks(new Promise(((n,s)=>{this.rpcPublish({topic:e,message:t,ttl:i,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}).then(n).catch((e=>{this.logger.warn(e,e?.message),s(e)}))})),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${a}`);try{await d,this.events.removeListener(mh,s)}catch(e){this.queue.set(c,Lf(Bf({},u),{attempt:1})),this.logger.warn(e,e?.message)}}));this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:r}}),await Ks(n,this.publishTimeout,d)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(n=r?.internal)&&n.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}})),jf(this,"on",((e,t)=>{this.events.on(e,t)})),jf(this,"once",((e,t)=>{this.events.once(e,t)})),jf(this,"off",((e,t)=>{this.events.off(e,t)})),jf(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.relayer=e,this.logger=od(t,this.name),this.registerEventListeners()}get context(){return sd(this.logger)}async rpcPublish(e){var t,r,n,i;const{topic:s,message:o,ttl:a=dh,prompt:c,tag:u,id:d,attestation:h,tvf:l}=e,f={method:Mc(Cc().protocol).publish,params:Bf({topic:s,message:o,ttl:a,prompt:c,tag:u,attestation:h},l),id:d};Wc(null==(t=f.params)?void 0:t.prompt)&&(null==(r=f.params)||delete r.prompt),Wc(null==(n=f.params)?void 0:n.tag)&&(null==(i=f.params)||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f});const p=await this.relayer.request(f);return this.relayer.events.emit(mh,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async(e,t)=>{const r=e.attempt+1;this.queue.set(t,Lf(Bf({},e),{attempt:r}));const{topic:n,message:i,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Lf(Bf({},e),{topic:n,message:i,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o,tvf:s.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)}))}registerEventListeners(){this.relayer.core.heartbeat.on(lu,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(ph);this.checkQueue()})),this.relayer.on(fh,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}var Ff=Object.defineProperty,Uf=(e,t,r)=>((e,t,r)=>t in e?Ff(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class qf{constructor(){Uf(this,"map",new Map),Uf(this,"set",((e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])})),Uf(this,"get",(e=>this.map.get(e)||[])),Uf(this,"exists",((e,t)=>this.get(e).includes(t))),Uf(this,"delete",((e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const n=r.filter((e=>e!==t));n.length?this.map.set(e,n):this.map.delete(e)})),Uf(this,"clear",(()=>{this.map.clear()}))}get topics(){return Array.from(this.map.keys())}}var Hf=Object.defineProperty,zf=Object.defineProperties,$f=Object.getOwnPropertyDescriptors,Gf=Object.getOwnPropertySymbols,Vf=Object.prototype.hasOwnProperty,Kf=Object.prototype.propertyIsEnumerable,Wf=(e,t,r)=>t in e?Hf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qf=(e,t)=>{for(var r in t||(t={}))Vf.call(t,r)&&Wf(e,r,t[r]);if(Gf)for(var r of Gf(t))Kf.call(t,r)&&Wf(e,r,t[r]);return e},Zf=(e,t)=>zf(e,$f(t)),Jf=(e,t,r)=>Wf(e,"symbol"!=typeof t?t+"":t,r);class Yf extends yd{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Jf(this,"subscriptions",new Map),Jf(this,"topicMap",new qf),Jf(this,"events",new w.EventEmitter),Jf(this,"name","subscription"),Jf(this,"version","0.3"),Jf(this,"pending",new Map),Jf(this,"cached",[]),Jf(this,"initialized",!1),Jf(this,"storagePrefix",oh),Jf(this,"subscribeTimeout",(0,M.toMiliseconds)(M.ONE_MINUTE)),Jf(this,"initialSubscribeTimeout",(0,M.toMiliseconds)(15*M.ONE_SECOND)),Jf(this,"clientId"),Jf(this,"batchSubscribeTopicsLimit",500),Jf(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0})),Jf(this,"subscribe",(async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const r=Cc(t),n={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,n);const i=await this.rpcSubscribe(e,r,t);return"string"==typeof i&&(this.onSubscribe(i,n),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),i}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}})),Jf(this,"unsubscribe",(async(e,t)=>{this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)})),Jf(this,"isSubscribed",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e))})))),Jf(this,"isKnownTopic",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some((t=>t.topic===e)))})))),Jf(this,"on",((e,t)=>{this.events.on(e,t)})),Jf(this,"once",((e,t)=>{this.events.once(e,t)})),Jf(this,"off",((e,t)=>{this.events.off(e,t)})),Jf(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),Jf(this,"start",(async()=>{await this.onConnect()})),Jf(this,"stop",(async()=>{await this.onDisconnect()})),Jf(this,"restart",(async()=>{await this.restore(),await this.onRestart()})),Jf(this,"checkPending",(async()=>{if(!(0!==this.pending.size||this.initialized&&this.relayer.connected))return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)})),Jf(this,"registerEventListeners",(()=>{this.relayer.core.heartbeat.on(lu,(async()=>{await this.checkPending()})),this.events.on(Ih,(async e=>{const t=Ih;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(_h,(async e=>{const t=_h;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))})),this.relayer=e,this.logger=od(t,this.name),this.clientId=""}get context(){return sd(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map((async r=>await this.unsubscribeById(e,r,t))))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const n=Cc(r);await this.restartToComplete({topic:e,id:t,relay:n}),await this.rpcUnsubscribe(e,t,n);const i=Gc("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var n;(!r||r?.transportType===Ah.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const i={method:Mc(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const s=null==(n=r?.internal)?void 0:n.throwOnFailedPublish;try{const t=await this.getSubscriptionId(e);if(r?.transportType===Ah.link_mode)return setTimeout((()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch((e=>this.logger.warn(e)))}),(0,M.toMiliseconds)(M.ONE_SECOND)),t;const n=new Promise((async t=>{const r=n=>{n.topic===e&&(this.events.removeListener(Ih,r),t(n.id))};this.events.on(Ih,r);try{const n=await Ks(new Promise(((e,t)=>{this.relayer.request(i).catch((e=>{this.logger.warn(e,e?.message),t(e)})).then(e)})),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ih,r),t(n)}catch{}})),o=await Ks(n,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!o&&s)throw new Error(`Subscribing to ${e} failed, please try again`);return o?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ph),s)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t={method:Mc(e[0].relay.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await Ks(new Promise((e=>{this.relayer.request(t).catch((e=>this.logger.warn(e))).then(e)})),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(ph)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t={method:Mc(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map((e=>e.topic))}};let r;this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{r=await await Ks(new Promise(((e,r)=>{this.relayer.request(t).catch((e=>{this.logger.warn(e),r(e)})).then(e)})),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(ph)}return r}rpcUnsubscribe(e,t,r){const n={method:Mc(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,t){this.setSubscription(e,Zf(Qf({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,Qf({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Qf({},t)),this.topicMap.set(t.topic,e),this.events.emit(Ih,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=$c("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(_h,Zf(Qf({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit("subscription_sync")}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit("subscription_resubscribed")}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=$c("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map((async e=>Zf(Qf({},e),{id:await this.getSubscriptionId(e.topic)}))))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await function(e){return new Promise((t=>setTimeout(t,e)))}((0,M.toMiliseconds)(M.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=$c("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return xc(e+await this.getClientId())}}var Xf=Object.defineProperty,ep=Object.getOwnPropertySymbols,tp=Object.prototype.hasOwnProperty,rp=Object.prototype.propertyIsEnumerable,np=(e,t,r)=>t in e?Xf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ip=(e,t)=>{for(var r in t||(t={}))tp.call(t,r)&&np(e,r,t[r]);if(ep)for(var r of ep(t))rp.call(t,r)&&np(e,r,t[r]);return e},sp=(e,t,r)=>np(e,"symbol"!=typeof t?t+"":t,r);class op extends md{constructor(e){super(e),sp(this,"protocol","wc"),sp(this,"version",2),sp(this,"core"),sp(this,"logger"),sp(this,"events",new w.EventEmitter),sp(this,"provider"),sp(this,"messages"),sp(this,"subscriber"),sp(this,"publisher"),sp(this,"name","relayer"),sp(this,"transportExplicitlyClosed",!1),sp(this,"initialized",!1),sp(this,"connectionAttemptInProgress",!1),sp(this,"relayUrl"),sp(this,"projectId"),sp(this,"packageName"),sp(this,"bundleId"),sp(this,"hasExperiencedNetworkDisruption",!1),sp(this,"pingTimeout"),sp(this,"heartBeatTimeout",(0,M.toMiliseconds)(M.THIRTY_SECONDS+M.FIVE_SECONDS)),sp(this,"reconnectTimeout"),sp(this,"connectPromise"),sp(this,"reconnectInProgress",!1),sp(this,"requestsInFlight",[]),sp(this,"connectTimeout",(0,M.toMiliseconds)(15*M.ONE_SECOND)),sp(this,"request",(async e=>{var t,r;this.logger.debug("Publishing Request Payload");const n=e.id||Fd().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");const i=`${n}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(i);const s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter((e=>e!==i)),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${n}`),e}})),sp(this,"resetPingTimeout",(()=>{Ls()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var e,t,r,n;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(n=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||n.call(r)}catch(e){this.logger.warn(e,e?.message)}}),this.heartBeatTimeout))})),sp(this,"onPayloadHandler",(e=>{this.onProviderPayload(e),this.resetPingTimeout()})),sp(this,"onConnectHandler",(()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit("relayer_connect")})),sp(this,"onDisconnectHandler",(()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()})),sp(this,"onProviderErrorHandler",(e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit("relayer_error",e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()})),sp(this,"registerProviderListeners",(()=>{this.provider.on(gh,this.onPayloadHandler),this.provider.on(yh,this.onConnectHandler),this.provider.on(bh,this.onDisconnectHandler),this.provider.on(vh,this.onProviderErrorHandler)})),this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?od(e.logger,this.name):Hu()(id({level:e.logger||"error"})),this.messages=new Pf(this.logger,e.core),this.subscriber=new Yf(this,this.logger),this.publisher=new Df(this,this.logger),this.relayUrl=e?.relayUrl||hh,this.projectId=e.projectId,js()&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Platform)<"u"&&"android"===(null==i.g?void 0:i.g.Platform.OS)?this.packageName=Us():js()&&typeof i.g<"u"&&typeof(null==i.g?void 0:i.g.Platform)<"u"&&"ios"===(null==i.g?void 0:i.g.Platform.OS)&&(this.bundleId=Us()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return sd(this.logger)}get connected(){var e,t,r;return 1===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||!1}get connecting(){var e,t,r;return 0===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||void 0!==this.connectPromise||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:Ah.relay},"outbound")}async subscribe(e,t){var r,n,i;this.isInitialized(),(null==t||!t.transportType||"relay"===t?.transportType)&&await this.toEstablishConnection();const s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(n=t?.internal)?void 0:n.throwOnFailedPublish);let o,a=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"";const c=t=>{t.topic===e&&(this.subscriber.off(Ih,c),o())};return await Promise.all([new Promise((e=>{o=e,this.subscriber.on(Ih,c)})),new Promise((async(r,n)=>{a=await this.subscriber.subscribe(e,ip({internal:{throwOnFailedPublish:s}},t)).catch((e=>{s&&n(e)}))||a,r()}))]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Ks(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.subscriber.hasAnyTopics){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise((async(t,r)=>{await this.connect(e).then(t).catch(r).finally((()=>{this.connectPromise=void 0}))})),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}else this.logger.warn("Starting WS connection skipped because the client has no topics to work with.")}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ou())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(0===e?.length)return void this.logger.trace("Batch message events is empty. Ignoring...");const t=e.sort(((e,t)=>e.publishedAt-t.publishedAt));this.logger.debug(`Batch of ${t.length} message events sorted`);for(const e of t)try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const e={topic:r,expiry:Zs(M.FIVE_MINUTES),relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,e)}this.events.emit(lh,e),await this.recordMessageEvent(e,Eh)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(bh,r),await Ks(new Promise(((e,t)=>{this.provider.connect().then(e).catch(t)})),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch((e=>{t(e)})).finally((()=>{this.provider.off(bh,r),clearTimeout(this.reconnectTimeout)})),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(bh,r),await this.subscriber.start().then(e).catch(t).finally((()=>{this.provider.off(bh,r)}))})),this.hasExperiencedNetworkDisruption=!1,e()}))}catch(e){await this.subscriber.stop();const t=e;this.logger.warn({},t.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise((e=>setTimeout(e,(0,M.toMiliseconds)(1*t)))),t++}}startPingTimeout(){var e,t,r,n,i;if(Ls())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(i=null==(n=null==(r=this.provider)?void 0:r.connection)?void 0:n.socket)||i.on("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new th(new ih(function({protocol:e,version:t,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),d={auth:i,ua:Hs(e,t,n),projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},h=function(e,t){const r=new URLSearchParams(e);for(const e of Object.keys(t).sort())if(t.hasOwnProperty(e)){const n=t[e];void 0!==n&&r.set(e,n)}return r.toString()}(u[1]||"",d);return u[0]+"?"+h}({sdkVersion:wh,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:n}=e;await this.messages.set(r,n,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const n=this.messages.has(t,r);return n&&this.logger.warn(`Ignoring duplicate message: ${r}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Jd(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:r,message:n,publishedAt:i,attestation:s}=t.data,o={topic:r,message:n,publishedAt:i,transportType:Ah.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(ip({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else Yd(e)&&this.events.emit(fh,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Eh),this.events.emit(lh,e))}async acknowledgePayload(e){const t=qd(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(gh,this.onPayloadHandler),this.provider.off(yh,this.onConnectHandler),this.provider.off(bh,this.onDisconnectHandler),this.provider.off(vh,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await ou();!function(e){switch(Fs()){case Ns:!function(e){!js()&&Ds()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case Rs:!function(e){js()&&typeof i.g<"u"&&null!=i.g&&i.g.NetInfo&&i.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e)}}((async t=>{e!==t&&(e=t,t?await this.transportOpen().catch((e=>this.logger.error(e,e?.message))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit("relayer_disconnect"),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout((async()=>{await this.transportOpen().catch((e=>this.logger.error(e,e?.message))),this.reconnectTimeout=void 0,this.reconnectInProgress=!1}),(0,M.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){const{message:e}=$c("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function ap(){}function cp(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function up(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function dp(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const hp="[object Arguments]",lp="[object Object]";function fp(e,t,r,n,i,s,o){const a=o(e,t,r,n,i,s);if(void 0!==a)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return pp(e,t,s,o)}return pp(e,t,s,o)}function pp(e,t,r,n){if(Object.is(e,t))return!0;let i=dp(e),s=dp(t);if(i===hp&&(i=lp),s===hp&&(s=lp),i!==s)return!1;switch(i){case"[object String]":return e.toString()===t.toString();case"[object Number]":return function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}(e.valueOf(),t.valueOf());case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(e.valueOf(),t.valueOf());case"[object RegExp]":return e.source===t.source&&e.flags===t.flags;case"[object Function]":return e===t}const o=(r=r??new Map).get(e),a=r.get(t);if(null!=o&&null!=a)return o===t;r.set(e,t),r.set(t,e);try{switch(i){case"[object Map]":if(e.size!==t.size)return!1;for(const[i,s]of e.entries())if(!t.has(i)||!fp(s,t.get(i),i,e,t,r,n))return!1;return!0;case"[object Set]":{if(e.size!==t.size)return!1;const i=Array.from(e.values()),s=Array.from(t.values());for(let o=0;o<i.length;o++){const a=i[o],c=s.findIndex((i=>fp(a,i,void 0,e,t,r,n)));if(-1===c)return!1;s.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!fp(e[i],t[i],i,e,t,r,n))return!1;return!0;case"[object ArrayBuffer]":return e.byteLength===t.byteLength&&pp(new Uint8Array(e),new Uint8Array(t),r,n);case"[object DataView]":return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&pp(new Uint8Array(e),new Uint8Array(t),r,n);case"[object Error]":return e.name===t.name&&e.message===t.message;case lp:{if(!(pp(e.constructor,t.constructor,r,n)||cp(e)&&cp(t)))return!1;const i=[...Object.keys(e),...up(e)],s=[...Object.keys(t),...up(t)];if(i.length!==s.length)return!1;for(let s=0;s<i.length;s++){const o=i[s],a=e[o];if(!Object.hasOwn(t,o))return!1;if(!fp(a,t[o],o,e,t,r,n))return!1}return!0}default:return!1}}finally{r.delete(e),r.delete(t)}}var mp=Object.defineProperty,gp=Object.getOwnPropertySymbols,yp=Object.prototype.hasOwnProperty,bp=Object.prototype.propertyIsEnumerable,vp=(e,t,r)=>t in e?mp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wp=(e,t)=>{for(var r in t||(t={}))yp.call(t,r)&&vp(e,r,t[r]);if(gp)for(var r of gp(t))bp.call(t,r)&&vp(e,r,t[r]);return e},Ap=(e,t,r)=>vp(e,"symbol"!=typeof t?t+"":t,r);class Ep extends gd{constructor(e,t,r,n=oh,i=void 0){super(e,t,r,n),this.core=e,this.logger=t,this.name=r,Ap(this,"map",new Map),Ap(this,"version","0.3"),Ap(this,"cached",[]),Ap(this,"initialized",!1),Ap(this,"getKey"),Ap(this,"storagePrefix",oh),Ap(this,"recentlyDeleted",[]),Ap(this,"recentlyDeletedLimit",200),Ap(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!Wc(e)?this.map.set(this.getKey(e),e):function(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}(e)?this.map.set(e.id,e):function(e){return e?.topic}(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)})),Ap(this,"set",(async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())})),Ap(this,"get",(e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)))),Ap(this,"getAll",(e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((r=>function(e,t){return function(e,t,r){return fp(e,t,void 0,void 0,void 0,void 0,r)}(e,t,ap)}(t[r],e[r]))))):this.values))),Ap(this,"update",(async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const r=wp(wp({},this.getData(e)),t);this.map.set(e,r),await this.persist()})),Ap(this,"delete",(async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())})),this.logger=od(t,this.name),this.storagePrefix=n,this.getKey=i}get context(){return sd(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=$c("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=$c("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=$c("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=$c("NOT_INITIALIZED",this.name);throw new Error(e)}}}var xp=Object.defineProperty,Ip=(e,t,r)=>((e,t,r)=>t in e?xp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class _p{constructor(e,t){this.core=e,this.logger=t,Ip(this,"name","pairing"),Ip(this,"version","0.3"),Ip(this,"events",new(A())),Ip(this,"pairings"),Ip(this,"initialized",!1),Ip(this,"storagePrefix",oh),Ip(this,"ignoredPayloadTypes",[1]),Ip(this,"registeredMethods",[]),Ip(this,"init",(async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))})),Ip(this,"register",(({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]})),Ip(this,"create",(async e=>{this.isInitialized();const t=Ac(),r=await this.core.crypto.setSymKey(t),n=Zs(M.FIVE_MINUTES),i={protocol:"irn"},s={topic:r,expiry:n,relay:i,active:!1,methods:e?.methods},o=Lc({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:i,expiryTimestamp:n,methods:e?.methods});return this.events.emit(Ph,s),this.core.expirer.set(r,n),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}})),Ip(this,"pair",(async e=>{this.isInitialized();const t=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:["pairing_started"]}});this.isValidPair(e,t);const{topic:r,symKey:n,relay:i,expiryTimestamp:s,methods:o}=Nc(e.uri);let a;if(t.props.properties.topic=r,t.addTrace("pairing_uri_validation_success"),t.addTrace("pairing_uri_not_expired"),this.pairings.keys.includes(r)){if(a=this.pairings.get(r),t.addTrace("existing_pairing"),a.active)throw t.setError("active_pairing_already_exists"),new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);t.addTrace("pairing_not_expired")}const c=s||Zs(M.FIVE_MINUTES),u={topic:r,relay:i,expiry:c,active:!1,methods:o};this.core.expirer.set(r,c),await this.pairings.set(r,u),t.addTrace("store_new_pairing"),e.activatePairing&&await this.activate({topic:r}),this.events.emit(Ph,u),t.addTrace("emit_inactive_pairing"),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(n,r),t.addTrace("subscribing_pairing_topic");try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{t.setError("no_internet_connection")}try{await this.core.relayer.subscribe(r,{relay:i})}catch(e){throw t.setError("subscribe_pairing_topic_failure"),e}return t.addTrace("subscribe_pairing_topic_success"),u})),Ip(this,"activate",(async({topic:e})=>{this.isInitialized();const t=Zs(M.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})})),Ip(this,"ping",(async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:n,reject:i}=Vs();this.events.once(Ys("pairing_ping",e),(({error:e})=>{e?i(e):n()})),await r()}})),Ip(this,"updateExpiry",(async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})})),Ip(this,"updateMetadata",(async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})})),Ip(this,"getPairings",(()=>(this.isInitialized(),this.pairings.values))),Ip(this,"disconnect",(async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",Gc("USER_DISCONNECTED")),await this.deletePairing(t))})),Ip(this,"formatUriFromPairing",(e=>{this.isInitialized();const{topic:t,relay:r,expiry:n,methods:i}=e,s=this.core.crypto.keychain.get(t);return Lc({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:n,methods:i})})),Ip(this,"sendRequest",(async(e,t,r)=>{const n=Ud(t,r),i=await this.core.crypto.encode(e,n),s=Sh[t].req;return this.core.history.set(e,n),this.core.relayer.publish(e,i,s),n.id})),Ip(this,"sendResult",(async(e,t,r)=>{const n=qd(e,r),i=await this.core.crypto.encode(t,n),s=(await this.core.history.get(t,e)).request.method,o=Sh[s].res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)})),Ip(this,"sendError",(async(e,t,r)=>{const n=Hd(e,r),i=await this.core.crypto.encode(t,n),s=(await this.core.history.get(t,e)).request.method,o=Sh[s]?Sh[s].res:Sh.unregistered_method.res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)})),Ip(this,"deletePairing",(async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,Gc("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])})),Ip(this,"cleanup",(async()=>{const e=this.pairings.getAll().filter((e=>Js(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))})),Ip(this,"onRelayEventRequest",(async e=>{const{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}})),Ip(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r}=e,n=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===n?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(n)})),Ip(this,"onPairingPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit("pairing_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),Ip(this,"onPairingPingResponse",((e,t)=>{const{id:r}=t;setTimeout((()=>{Xd(t)?this.events.emit(Ys("pairing_ping",r),{}):eh(t)&&this.events.emit(Ys("pairing_ping",r),{error:t.error})}),500)})),Ip(this,"onPairingDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(Oh,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),Ip(this,"onUnknownRpcMethodRequest",(async(e,t)=>{const{id:r,method:n}=t;try{if(this.registeredMethods.includes(n))return;const t=Gc("WC_METHOD_UNSUPPORTED",n);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),Ip(this,"onUnknownRpcMethodResponse",(e=>{this.registeredMethods.includes(e)||this.logger.error(Gc("WC_METHOD_UNSUPPORTED",e))})),Ip(this,"isValidPair",((e,t)=>{var r;if(!ru(e)){const{message:r}=$c("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(Fh),new Error(r)}if(!function(e){function t(e){try{return typeof new URL(e)<"u"}catch{return!1}}try{if(Qc(e,!1))return!!t(e)||t(no(e))}catch{}return!1}(e.uri)){const{message:r}=$c("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(Fh),new Error(r)}const n=Nc(e?.uri);if(null==(r=n?.relay)||!r.protocol){const{message:e}=$c("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(Fh),new Error(e)}if(null==n||!n.symKey){const{message:e}=$c("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(Fh),new Error(e)}if(null!=n&&n.expiryTimestamp&&(0,M.toMiliseconds)(n?.expiryTimestamp)<Date.now()){t.setError("pairing_expired");const{message:e}=$c("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}})),Ip(this,"isValidPing",(async e=>{if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),Ip(this,"isValidDisconnect",(async e=>{if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),Ip(this,"isValidPairingTopic",(async e=>{if(!Qc(e,!1)){const{message:t}=$c("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=$c("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Js(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=$c("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}})),this.core=e,this.logger=od(t,this.name),this.pairings=new Ep(this.core,this.logger,this.name,this.storagePrefix)}get context(){return sd(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=$c("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(lh,(async e=>{const{topic:t,message:r,transportType:n}=e;if(this.pairings.keys.includes(t)&&n!==Ah.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const e=await this.core.crypto.decode(t,r);Jd(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):Yd(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}}))}registerExpirerEvents(){this.core.expirer.on(Nh,(async e=>{const{topic:t}=Qs(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))}))}}var Sp=Object.defineProperty,Pp=(e,t,r)=>((e,t,r)=>t in e?Sp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Op extends ld{constructor(e,t){super(e,t),this.core=e,this.logger=t,Pp(this,"records",new Map),Pp(this,"events",new w.EventEmitter),Pp(this,"name","history"),Pp(this,"version","0.3"),Pp(this,"cached",[]),Pp(this,"initialized",!1),Pp(this,"storagePrefix",oh),Pp(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),Pp(this,"set",((e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;const n={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:Zs(M.THIRTY_DAYS)};this.records.set(n.id,n),this.persist(),this.events.emit(kh,n)})),Pp(this,"resolve",(async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=eh(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(Th,t))})),Pp(this,"get",(async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)))),Pp(this,"delete",((e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((r=>{if(r.topic===e){if(typeof t<"u"&&r.id!==t)return;this.records.delete(r.id),this.events.emit(Ch,r)}})),this.persist()})),Pp(this,"exists",(async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e))),Pp(this,"on",((e,t)=>{this.events.on(e,t)})),Pp(this,"once",((e,t)=>{this.events.once(e,t)})),Pp(this,"off",((e,t)=>{this.events.off(e,t)})),Pp(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=od(t,this.name)}get context(){return sd(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:Ud(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=$c("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit("history_sync")}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=$c("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(kh,(e=>{const t=kh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(Th,(e=>{const t=Th;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(Ch,(e=>{const t=Ch;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.core.heartbeat.on(lu,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach((t=>{(0,M.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Ch,t,!1),e=!0)})),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=$c("NOT_INITIALIZED",this.name);throw new Error(e)}}}var kp=Object.defineProperty,Tp=(e,t,r)=>((e,t,r)=>t in e?kp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Cp extends bd{constructor(e,t){super(e,t),this.core=e,this.logger=t,Tp(this,"expirations",new Map),Tp(this,"events",new w.EventEmitter),Tp(this,"name","expirer"),Tp(this,"version","0.3"),Tp(this,"cached",[]),Tp(this,"initialized",!1),Tp(this,"storagePrefix",oh),Tp(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),Tp(this,"has",(e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}})),Tp(this,"set",((e,t)=>{this.isInitialized();const r=this.formatTarget(e),n={target:r,expiry:t};this.expirations.set(r,n),this.checkExpiry(r,n),this.events.emit(Mh,{target:r,expiration:n})})),Tp(this,"get",(e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)})),Tp(this,"del",(e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(Rh,{target:t,expiration:r})}})),Tp(this,"on",((e,t)=>{this.events.on(e,t)})),Tp(this,"once",((e,t)=>{this.events.once(e,t)})),Tp(this,"off",((e,t)=>{this.events.off(e,t)})),Tp(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=od(t,this.name)}get context(){return sd(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function(e){return Ws("topic",e)}(e);if("number"==typeof e)return function(e){return Ws("id",e)}(e);const{message:t}=$c("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit("expirer_sync")}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=$c("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=$c("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:r}=t;(0,M.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Nh,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(lu,(()=>this.checkExpirations())),this.events.on(Mh,(e=>{const t=Mh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(Nh,(e=>{const t=Nh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(Rh,(e=>{const t=Rh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=$c("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Mp=Object.defineProperty,Rp=(e,t,r)=>((e,t,r)=>t in e?Mp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Np extends vd{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,Rp(this,"name","verify-api"),Rp(this,"abortController"),Rp(this,"isDevEnv"),Rp(this,"verifyUrlV3",jh),Rp(this,"storagePrefix",oh),Rp(this,"version",2),Rp(this,"publicKey"),Rp(this,"fetchPromise"),Rp(this,"init",(async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,M.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))})),Rp(this,"register",(async e=>{if(!Ds()||this.isDevEnv)return;const t=window.location.origin,{id:r,decryptedId:n}=e,i=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${n}`;try{const e=(0,R.getDocument)(),t=this.startAbortTimer(5*M.ONE_SECOND),n=await new Promise(((n,s)=>{const o=()=>{window.removeEventListener("message",c),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);const a=e.createElement("iframe");a.src=i,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});const c=i=>{if(i.data&&"string"==typeof i.data)try{const s=JSON.parse(i.data);if("verify_attestation"===s.type){if(Xn(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",c),n(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})}));return this.logger.debug("jwt attestation",n),n}catch(e){this.logger.warn(e)}return""})),Rp(this,"resolve",(async e=>{if(this.isDevEnv)return"";const{attestationId:t,hash:r,encryptedId:n}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if(Xn(t).payload.id!==n)return;const e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!r)return;const i=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,i)})),Rp(this,"fetchAttestation",(async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);const r=this.startAbortTimer(5*M.ONE_SECOND),n=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===n.status?await n.json():void 0})),Rp(this,"getVerifyUrl",(e=>{let t=e||Lh;return Dh.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${Lh}`),t=Lh),t})),Rp(this,"fetchPublicKey",(async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const e=this.startAbortTimer(M.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}})),Rp(this,"persistPublicKey",(async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e})),Rp(this,"removePublicKey",(async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0})),Rp(this,"isValidJwtAttestation",(async e=>{const t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}const r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}})),Rp(this,"getPublicKey",(async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey())),Rp(this,"fetchAndPersistPublicKey",(async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise((async e=>{const t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))}));const e=await this.fetchPromise;return this.fetchPromise=void 0,e})),Rp(this,"validateAttestation",((e,t)=>{const r=function(e,t){const[r,n,i]=e.split("."),s=function(e){return Buffer.from(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");const r=t.length%4;return r>0&&(t+="=".repeat(4-r)),t}(e),"base64")}(i);if(64!==s.length)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=Va(`${r}.${n}`),u=function(e){return new Os.ec("p256").keyFromPublic({x:Buffer.from(e.x,"base64").toString("hex"),y:Buffer.from(e.y,"base64").toString("hex")},"hex")}(t),d=Ps(c,yc);if(!u.verify(d,{r:o,s:a}))throw new Error("Invalid signature");return Xn(e).payload}(e,t.publicKey),n={hasExpired:(0,M.toMiliseconds)(r.exp)<Date.now(),payload:r};if(n.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:n.payload.origin,isScam:n.payload.isScam,isVerified:n.payload.isVerified}})),this.logger=od(t,this.name),this.abortController=new AbortController,this.isDevEnv=ro(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return sd(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,M.toMiliseconds)(e))}}var Bp=Object.defineProperty,Lp=(e,t,r)=>((e,t,r)=>t in e?Bp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class jp extends wd{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,Lp(this,"context","echo"),Lp(this,"registerDeviceToken",(async e=>{const{clientId:t,token:r,notificationType:n,enableEncrypted:i=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:n,token:r,always_raw:i})})})),this.logger=od(t,this.context)}}var Dp=Object.defineProperty,Fp=Object.getOwnPropertySymbols,Up=Object.prototype.hasOwnProperty,qp=Object.prototype.propertyIsEnumerable,Hp=(e,t,r)=>t in e?Dp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zp=(e,t)=>{for(var r in t||(t={}))Up.call(t,r)&&Hp(e,r,t[r]);if(Fp)for(var r of Fp(t))qp.call(t,r)&&Hp(e,r,t[r]);return e},$p=(e,t,r)=>Hp(e,"symbol"!=typeof t?t+"":t,r);class Gp extends Ad{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,$p(this,"context","event-client"),$p(this,"storagePrefix",oh),$p(this,"storageVersion",.1),$p(this,"events",new Map),$p(this,"shouldPersist",!1),$p(this,"init",(async()=>{if(!ro())try{const e={eventId:to(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Hs(this.core.relayer.protocol,this.core.relayer.version,wh)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}})),$p(this,"createEvent",(e=>{const{event:t="ERROR",type:r="",properties:{topic:n,trace:i}}=e,s=to(),o=this.core.projectId||"",a=Date.now(),c=zp({eventId:s,timestamp:a,props:{event:t,type:r,properties:{topic:n,trace:i}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,c),this.shouldPersist=!0),c})),$p(this,"getEvent",(e=>{const{eventId:t,topic:r}=e;if(t)return this.events.get(t);const n=Array.from(this.events.values()).find((e=>e.props.properties.topic===r));return n?zp(zp({},n),this.setMethods(n.eventId)):void 0})),$p(this,"deleteEvent",(e=>{const{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0})),$p(this,"setEventListeners",(()=>{this.core.heartbeat.on(lu,(async()=>{this.shouldPersist&&await this.persist(),this.events.forEach((e=>{(0,M.fromMiliseconds)(Date.now())-(0,M.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)}))}))})),$p(this,"setMethods",(e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}))),$p(this,"addTrace",((e,t)=>{const r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)})),$p(this,"setError",((e,t)=>{const r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)})),$p(this,"persist",(async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1})),$p(this,"restore",(async()=>{try{const e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach((e=>{this.events.set(e.eventId,zp(zp({},e),this.setMethods(e.eventId)))}))}catch(e){this.logger.warn(e)}})),$p(this,"submit",(async()=>{if(!this.telemetryEnabled||0===this.events.size)return;const e=[];for(const[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(const t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}})),$p(this,"sendEvent",(async e=>{const t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${wh}${t}`,{method:"POST",body:JSON.stringify(e)})})),$p(this,"getAppDomain",(()=>qs().url)),this.logger=od(t,this.context),this.telemetryEnabled=r,r?this.restore().then((async()=>{await this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Vp=Object.defineProperty,Kp=Object.getOwnPropertySymbols,Wp=Object.prototype.hasOwnProperty,Qp=Object.prototype.propertyIsEnumerable,Zp=(e,t,r)=>t in e?Vp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jp=(e,t)=>{for(var r in t||(t={}))Wp.call(t,r)&&Zp(e,r,t[r]);if(Kp)for(var r of Kp(t))Qp.call(t,r)&&Zp(e,r,t[r]);return e},Yp=(e,t,r)=>Zp(e,"symbol"!=typeof t?t+"":t,r);class Xp extends dd{constructor(e){var t;super(e),Yp(this,"protocol","wc"),Yp(this,"version",2),Yp(this,"name",sh),Yp(this,"relayUrl"),Yp(this,"projectId"),Yp(this,"customStoragePrefix"),Yp(this,"events",new w.EventEmitter),Yp(this,"logger"),Yp(this,"heartbeat"),Yp(this,"relayer"),Yp(this,"crypto"),Yp(this,"storage"),Yp(this,"history"),Yp(this,"expirer"),Yp(this,"pairing"),Yp(this,"verify"),Yp(this,"echoClient"),Yp(this,"linkModeSupportedApps"),Yp(this,"eventClient"),Yp(this,"initialized",!1),Yp(this,"logChunkController"),Yp(this,"on",((e,t)=>this.events.on(e,t))),Yp(this,"once",((e,t)=>this.events.once(e,t))),Yp(this,"off",((e,t)=>this.events.off(e,t))),Yp(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),Yp(this,"dispatchEnvelope",(({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;const n={topic:e,message:t,publishedAt:Date.now(),transportType:Ah.link_mode};this.relayer.onLinkMessageEvent(n,{sessionExists:r})})),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||hh,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=id({level:"string"==typeof e?.logger&&e.logger?e.logger:"error",name:sh}),{logger:n,chunkLoggerController:i}=ad({opts:r,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=i,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=od(n,this.name),this.heartbeat=new fu,this.crypto=new bf(this,this.logger,e?.keychain),this.history=new Op(this,this.logger),this.expirer=new Cp(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new Uu(Jp(Jp({},ah),e?.storageOptions)),this.relayer=new op({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new _p(this,this.logger),this.verify=new Np(this,this.logger,this.storage),this.echoClient=new jp(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Gp(this,this.logger,e?.telemetryEnabled)}static async init(e){const t=new Xp(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return sd(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(xh,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(xh)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const em=Xp,tm="client",rm=`wc@2:${tm}:`,nm=tm,im="WALLETCONNECT_DEEPLINK_CHOICE",sm="Proposal expired",om=M.SEVEN_DAYS,am={wc_sessionPropose:{req:{ttl:M.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:M.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:M.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:M.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:M.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:M.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:M.ONE_DAY,prompt:!1,tag:1104},res:{ttl:M.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:M.ONE_DAY,prompt:!1,tag:1106},res:{ttl:M.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:M.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:M.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:M.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:M.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:M.ONE_DAY,prompt:!1,tag:1112},res:{ttl:M.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:M.ONE_DAY,prompt:!1,tag:1114},res:{ttl:M.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:M.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:M.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:M.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:M.FIVE_MINUTES,prompt:!1,tag:1119}}},cm={min:M.FIVE_MINUTES,max:M.SEVEN_DAYS},um="IDLE",dm="ACTIVE",hm={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},lm=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],fm="wc@1.5:auth:",pm=`${fm}:PUB_KEY`;var mm=Object.defineProperty,gm=Object.defineProperties,ym=Object.getOwnPropertyDescriptors,bm=Object.getOwnPropertySymbols,vm=Object.prototype.hasOwnProperty,wm=Object.prototype.propertyIsEnumerable,Am=(e,t,r)=>t in e?mm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Em=(e,t)=>{for(var r in t||(t={}))vm.call(t,r)&&Am(e,r,t[r]);if(bm)for(var r of bm(t))wm.call(t,r)&&Am(e,r,t[r]);return e},xm=(e,t)=>gm(e,ym(t)),Im=(e,t,r)=>Am(e,"symbol"!=typeof t?t+"":t,r);class _m extends _d{constructor(e){super(e),Im(this,"name","engine"),Im(this,"events",new(A())),Im(this,"initialized",!1),Im(this,"requestQueue",{state:um,queue:[]}),Im(this,"sessionRequestQueue",{state:um,queue:[]}),Im(this,"requestQueueDelay",M.ONE_SECOND),Im(this,"expectedPairingMethodMap",new Map),Im(this,"recentlyDeletedMap",new Map),Im(this,"recentlyDeletedLimit",200),Im(this,"relayMessageCache",[]),Im(this,"pendingSessions",new Map),Im(this,"init",(async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(am)}),this.initialized=!0,setTimeout((async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,M.toMiliseconds)(this.requestQueueDelay)))})),Im(this,"connect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const t=xm(Em({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:s,scopedProperties:o,relays:a}=t;let c,u=r,d=!1;try{if(u){const e=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),e}if(!u||!d){const{topic:e,uri:t}=await this.client.core.pairing.create();u=e,c=t}if(!u){const{message:e}=$c("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(e)}const h=await this.client.core.crypto.generateKeyPair(),l=am.wc_sessionPropose.req.ttl||M.FIVE_MINUTES,f=Zs(l),p=xm(Em(Em({requiredNamespaces:n,optionalNamespaces:i,relays:a??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:f,pairingTopic:u},s&&{sessionProperties:s}),o&&{scopedProperties:o}),{id:Dd()}),m=Ys("session_connect",p.id),{reject:g,resolve:y,done:b}=Vs(l,sm),v=({id:e})=>{e===p.id&&(this.client.events.off("proposal_expire",v),this.pendingSessions.delete(p.id),this.events.emit(m,{error:{message:sm,code:0}}))};return this.client.events.on("proposal_expire",v),this.events.once(m,(({error:e,session:t})=>{this.client.events.off("proposal_expire",v),e?g(e):t&&y(t)})),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0,clientRpcId:p.id}),await this.setProposal(p.id,p),{uri:c,approval:b}})),Im(this,"pair",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}})),Im(this,"approve",(async e=>{var t,r,n;const i=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[Uh]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw i.setError("no_internet_connection"),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),i.setError("proposal_not_found"),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),i.setError("session_approve_namespace_validation_failure"),e}const{id:s,relayProtocol:o,namespaces:a,sessionProperties:c,scopedProperties:u,sessionConfig:d}=e,h=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:i.eventId});const{pairingTopic:l,proposer:f,requiredNamespaces:p,optionalNamespaces:m}=h;let g=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:l});g||(g=null==(n=this.client.core.eventClient)?void 0:n.createEvent({type:Uh,properties:{topic:l,trace:[Uh,"session_namespaces_validation_success"]}}));const y=await this.client.core.crypto.generateKeyPair(),b=f.publicKey,v=await this.client.core.crypto.generateSharedKey(y,b),w=Em(Em(Em({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:y,metadata:this.client.metadata},expiry:Zs(om)},c&&{sessionProperties:c}),u&&{scopedProperties:u}),d&&{sessionConfig:d}),A=Ah.relay;g.addTrace("subscribing_session_topic");try{await this.client.core.relayer.subscribe(v,{transportType:A})}catch(e){throw g.setError("subscribe_session_topic_failure"),e}g.addTrace("subscribe_session_topic_success");const E=xm(Em({},w),{topic:v,requiredNamespaces:p,optionalNamespaces:m,pairingTopic:l,acknowledged:!1,self:w.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:y,transportType:Ah.relay});await this.client.session.set(v,E),g.addTrace("store_session");try{g.addTrace("publishing_session_settle"),await this.sendRequest({topic:v,method:"wc_sessionSettle",params:w,throwOnFailedPublish:!0}).catch((e=>{throw g?.setError("session_settle_publish_failure"),e})),g.addTrace("session_settle_publish_success"),g.addTrace("publishing_session_approve"),await this.sendResult({id:s,topic:l,result:{relay:{protocol:o??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch((e=>{throw g?.setError("session_approve_publish_failure"),e})),g.addTrace("session_approve_publish_success")}catch(e){throw this.client.logger.error(e),this.client.session.delete(v,Gc("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(v),e}return this.client.core.eventClient.deleteEvent({eventId:g.eventId}),await this.client.core.pairing.updateMetadata({topic:l,metadata:f.metadata}),await this.client.proposal.delete(s,Gc("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:l}),await this.setExpiry(v,Zs(om)),{topic:v,acknowledged:()=>Promise.resolve(this.client.session.get(v))}})),Im(this,"reject",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}const{id:t,reason:r}=e;let n;try{n=this.client.proposal.get(t).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),e}n&&(await this.sendError({id:t,topic:n,error:r,rpcOpts:am.wc_sessionPropose.reject}),await this.client.proposal.delete(t,Gc("USER_DISCONNECTED")))})),Im(this,"update",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}const{topic:t,namespaces:r}=e,{done:n,resolve:i,reject:s}=Vs(),o=Dd(),a=Fd().toString(),c=this.client.session.get(t).namespaces;return this.events.once(Ys("session_update",o),(({error:e})=>{e?s(e):i()})),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch((e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),s(e)})),{acknowledged:n}})),Im(this,"extend",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}const{topic:t}=e,r=Dd(),{done:n,resolve:i,reject:s}=Vs();return this.events.once(Ys("session_extend",r),(({error:e})=>{e?s(e):i()})),await this.setExpiry(t,Zs(om)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch((e=>{s(e)})),{acknowledged:n}})),Im(this,"request",(async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}const{chainId:t,request:r,topic:n,expiry:s=am.wc_sessionRequest.req.ttl}=e,o=this.client.session.get(n);o?.transportType===Ah.relay&&await this.confirmOnlineStateOrThrow();const a=Dd(),c=Fd().toString(),{done:u,resolve:d,reject:h}=Vs(s,"Request expired. Please try again.");this.events.once(Ys("session_request",a),(({error:e,result:t})=>{e?h(e):d(t)}));const l="wc_sessionRequest",f=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);if(f)return await this.sendRequest({clientRpcId:a,relayRpcId:c,topic:n,method:l,params:{request:xm(Em({},r),{expiryTimestamp:Zs(s)}),chainId:t},expiry:s,throwOnFailedPublish:!0,appLink:f}).catch((e=>h(e))),this.client.events.emit("session_request_sent",{topic:n,request:r,chainId:t,id:a}),await u();const p={request:xm(Em({},r),{expiryTimestamp:Zs(s)}),chainId:t},m=this.shouldSetTVF(l,p);return await Promise.all([new Promise((async e=>{await this.sendRequest(Em({clientRpcId:a,relayRpcId:c,topic:n,method:l,params:p,expiry:s,throwOnFailedPublish:!0},m&&{tvf:this.getTVFParams(a,p)})).catch((e=>h(e))),this.client.events.emit("session_request_sent",{topic:n,request:r,chainId:t,id:a}),e()})),new Promise((async e=>{var t;if(null==(t=o.sessionConfig)||!t.disableDeepLink){const e=await async function(e,t){let r="";try{if(Ds()&&(r=localStorage.getItem(t),r))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}(this.client.core.storage,im);await async function({id:e,topic:t,wcDeepLink:r}){var n;try{if(!r)return;const s="string"==typeof r?JSON.parse(r):r,o=s?.href;if("string"!=typeof o)return;const a=function(e,t,r){const n=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;return i=e.startsWith("https://t.me")?`${i}${e.includes("?")?"&startapp=":"?startapp="}${function(e,t=!1){const r=Buffer.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(n,!0)}`:`${i}/wc?${n}`,i}(o,e,t),c=Fs();if(c===Ns){if(null==(n=(0,R.getDocument)())||!n.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");!function(e){let t="_self";!function(){try{return window.self!==window.top}catch{return!1}}()?(typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"):t="_top",window.open(e,t,"noreferrer noopener")}(a)}else c===Rs&&typeof(null==i.g?void 0:i.g.Linking)<"u"&&await i.g.Linking.openURL(a)}catch(e){console.error(e)}}({id:a,topic:n,wcDeepLink:e})}e()})),u()]).then((e=>e[2]))})),Im(this,"respond",(async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:r}=e,{id:n}=r,i=this.client.session.get(t);i.transportType===Ah.relay&&await this.confirmOnlineStateOrThrow();const s=this.getAppLinkIfEnabled(i.peer.metadata,i.transportType);Xd(r)?await this.sendResult({id:n,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):eh(r)&&await this.sendError({id:n,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)})),Im(this,"ping",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=Dd(),r=Fd().toString(),{done:n,resolve:i,reject:s}=Vs();this.events.once(Ys("session_ping",e),(({error:e})=>{e?s(e):i()})),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),n()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))})),Im(this,"emit",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);const{topic:t,event:r,chainId:n}=e,i=Fd().toString(),s=Dd();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:n},throwOnFailedPublish:!0,relayRpcId:i,clientRpcId:s})})),Im(this,"disconnect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:Gc("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=$c("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}})),Im(this,"find",(e=>(this.isInitialized(),this.client.session.getAll().filter((t=>function(e,t){const{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r);let s=!0;return!!zs(i,n)&&(n.forEach((t=>{const{accounts:n,methods:i,events:o}=e.namespaces[t],a=Dc(n),c=r[t];zs(Ms(t,c),a)&&zs(c.methods,i)&&zs(c.events,o)||(s=!1)})),s)}(t,e)))))),Im(this,"getPendingSessionRequests",(()=>this.client.pendingRequest.getAll())),Im(this,"authenticate",(async(e,t)=>{var r;this.isInitialized(),this.isValidAuthenticate(e);const n=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),i=n?Ah.link_mode:Ah.relay;i===Ah.relay&&await this.confirmOnlineStateOrThrow();const{chains:s,statement:o="",uri:a,domain:c,nonce:u,type:d,exp:h,nbf:l,methods:f=[],expiry:p}=e,m=[...e.resources||[]],{topic:g,uri:y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:i});this.client.logger.info({message:"Generated new pairing",pairing:{topic:g,uri:y}});const b=await this.client.core.crypto.generateKeyPair(),v=Ec(b);if(await Promise.all([this.client.auth.authKeys.set(pm,{responseTopic:v,publicKey:b}),this.client.auth.pairingTopics.set(v,{topic:v,pairingTopic:g})]),await this.client.core.relayer.subscribe(v,{transportType:i}),this.client.logger.info(`sending request to new pairing topic: ${g}`),f.length>0){const{namespace:e}=Ts(s[0]);let t=function(e,t,r){const n=function(e,t,r,n={}){return r?.sort(((e,t)=>e.localeCompare(t))),{att:{[e]:Yo(t,r,n)}}}(e,t,r);return Xo(n)}(e,"request",f);ia(m)&&(t=ta(t,m.pop())),m.push(t)}const w=p&&p>am.wc_sessionAuthenticate.req.ttl?p:am.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:d??"caip122",chains:s,statement:o,aud:a,domain:c,version:"1",nonce:u,iat:(new Date).toISOString(),exp:h,nbf:l,resources:m},requester:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:Zs(w)},E={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:s,methods:[...new Set(["personal_sign",...f])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:g,proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:Zs(am.wc_sessionPropose.req.ttl),id:Dd()},{done:x,resolve:I,reject:_}=Vs(w,"Request expired"),S=Dd(),P=Ys("session_connect",E.id),O=Ys("session_request",S),k=async({error:e,session:t})=>{this.events.off(O,T),e?_(e):t&&I({session:t})},T=async e=>{var r,n,s;if(await this.deletePendingAuthRequest(S,{message:"fulfilled",code:0}),e.error){const t=Gc("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(P,k),_(e.error.message))}await this.deleteProposal(E.id),this.events.off(P,k);const{cacaos:o,responder:a}=e.result,c=[],u=[];for(const e of o){await Qo({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),_(Gc("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:t}=e,r=ia(t.resources),n=[Ko(t.iss)],i=Wo(t.iss);if(r){const e=ra(r),t=na(r);c.push(...e),n.push(...t)}for(const e of n)u.push(`${e}:${i}`)}const d=await this.client.core.crypto.generateSharedKey(b,a.publicKey);let h;c.length>0&&(h={topic:d,acknowledged:!0,self:{publicKey:b,metadata:this.client.metadata},peer:a,controller:a.publicKey,expiry:Zs(om),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:g,namespaces:qc([...new Set(c)],[...new Set(u)]),transportType:i},await this.client.core.relayer.subscribe(d,{transportType:i}),await this.client.session.set(d,h),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:a.metadata}),h=this.client.session.get(d)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(n=a.metadata.redirect)&&n.linkMode&&null!=(s=a.metadata.redirect)&&s.universal&&t&&(this.client.core.addLinkModeSupportedApp(a.metadata.redirect.universal),this.client.session.update(d,{transportType:Ah.link_mode})),I({auths:o,session:h})};let C;this.events.once(P,k),this.events.once(O,T);try{if(n){const e=Ud("wc_sessionAuthenticate",A,S);this.client.core.history.set(g,e);const r=await this.client.core.crypto.encode("",e,{type:2,encoding:vc});C=jc(t,g,r)}else await Promise.all([this.sendRequest({topic:g,method:"wc_sessionAuthenticate",params:A,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:S}),this.sendRequest({topic:g,method:"wc_sessionPropose",params:E,expiry:am.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:E.id})])}catch(e){throw this.events.off(P,k),this.events.off(O,T),e}return await this.setProposal(E.id,E),await this.setAuthRequest(S,{request:xm(Em({},A),{verifyContext:{}}),pairingTopic:g,transportType:i}),{uri:C??y,response:x}})),Im(this,"approveSessionAuthenticate",(async e=>{const{id:t,auths:r}=e,n=this.client.core.eventClient.createEvent({properties:{topic:t.toString(),trace:["authenticated_session_approve_started"]}});try{this.isInitialized()}catch(e){throw n.setError("no_internet_connection"),e}const i=this.getPendingAuthRequest(t);if(!i)throw n.setError("authenticated_session_pending_request_not_found"),new Error(`Could not find pending auth request with id ${t}`);const s=i.transportType||Ah.relay;s===Ah.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Ec(o),u={type:1,receiverPublicKey:o,senderPublicKey:a},d=[],h=[];for(const e of r){if(!await Qo({cacao:e,projectId:this.client.core.projectId})){n.setError("invalid_cacao");const e=Gc("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:t,topic:c,error:e,encodeOpts:u}),new Error(e.message)}n.addTrace("cacaos_verified");const{p:r}=e,i=ia(r.resources),s=[Ko(r.iss)],o=Wo(r.iss);if(i){const e=ra(i),t=na(i);d.push(...e),s.push(...t)}for(const e of s)h.push(`${e}:${o}`)}const l=await this.client.core.crypto.generateSharedKey(a,o);let f;if(n.addTrace("create_authenticated_session_topic"),d?.length>0){f={topic:l,acknowledged:!0,self:{publicKey:a,metadata:this.client.metadata},peer:{publicKey:o,metadata:i.requester.metadata},controller:o,expiry:Zs(om),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:i.pairingTopic,namespaces:qc([...new Set(d)],[...new Set(h)]),transportType:s},n.addTrace("subscribing_authenticated_session_topic");try{await this.client.core.relayer.subscribe(l,{transportType:s})}catch(e){throw n.setError("subscribe_authenticated_session_topic_failure"),e}n.addTrace("subscribe_authenticated_session_topic_success"),await this.client.session.set(l,f),n.addTrace("store_authenticated_session"),await this.client.core.pairing.updateMetadata({topic:i.pairingTopic,metadata:i.requester.metadata})}n.addTrace("publishing_authenticated_session_approve");try{await this.sendResult({topic:c,id:t,result:{cacaos:r,responder:{publicKey:a,metadata:this.client.metadata}},encodeOpts:u,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(i.requester.metadata,s)})}catch(e){throw n.setError("authenticated_session_approve_publish_failure"),e}return await this.client.auth.requests.delete(t,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:i.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:f}})),Im(this,"rejectSessionAuthenticate",(async e=>{this.isInitialized();const{id:t,reason:r}=e,n=this.getPendingAuthRequest(t);if(!n)throw new Error(`Could not find pending auth request with id ${t}`);n.transportType===Ah.relay&&await this.confirmOnlineStateOrThrow();const i=n.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=Ec(i),a={type:1,receiverPublicKey:i,senderPublicKey:s};await this.sendError({id:t,topic:o,error:r,encodeOpts:a,rpcOpts:am.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(n.requester.metadata,n.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,Gc("USER_DISCONNECTED"))})),Im(this,"formatAuthMessage",(e=>{this.isInitialized();const{request:t,iss:r}=e;return Zo(t,r)})),Im(this,"processRelayMessageCache",(()=>{setTimeout((async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}}),50)})),Im(this,"cleanupDuplicatePairings",(async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter((r=>{var n,i;return(null==(n=r.peerMetadata)?void 0:n.url)&&(null==(i=r.peerMetadata)?void 0:i.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic}));if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}})),Im(this,"deleteSession",(async e=>{var t;const{topic:r,expirerHasDeleted:n=!1,emitEvent:i=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,Gc("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(im).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,Gc("USER_DISCONNECTED"))})),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=um),i&&this.client.events.emit("session_delete",{id:s,topic:r})})),Im(this,"deleteProposal",(async(e,t)=>{if(t)try{const t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError("proposal_expired")}catch{}await Promise.all([this.client.proposal.delete(e,Gc("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")})),Im(this,"deletePendingSessionRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),r&&(this.sessionRequestQueue.state=um,this.client.events.emit("session_request_expire",{id:e}))})),Im(this,"deletePendingAuthRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])})),Im(this,"setExpiry",(async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))})),Im(this,"setProposal",(async(e,t)=>{this.client.core.expirer.set(e,Zs(am.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)})),Im(this,"setAuthRequest",(async(e,t)=>{const{request:r,pairingTopic:n,transportType:i=Ah.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:n,verifyContext:r.verifyContext,transportType:i})})),Im(this,"setPendingSessionRequest",(async e=>{const{id:t,topic:r,params:n,verifyContext:i}=e,s=n.request.expiryTimestamp||Zs(am.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:n,verifyContext:i})})),Im(this,"sendRequest",(async e=>{const{topic:t,method:r,params:n,expiry:s,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c,appLink:u,tvf:d}=e,h=Ud(r,n,a);let l;const f=!!u;try{const e=f?vc:bc;l=await this.client.core.crypto.encode(t,h,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),e}let p;if(lm.includes(r)){const e=xc(JSON.stringify(h)),t=xc(l);p=await this.client.core.verify.register({id:t,decryptedId:e})}const m=am[r].req;if(m.attestation=p,s&&(m.ttl=s),o&&(m.id=o),this.client.core.history.set(t,h),f){const e=jc(u,t,l);await i.g.Linking.openURL(e,this.client.name)}else{const e=am[r].req;s&&(e.ttl=s),o&&(e.id=o),e.tvf=xm(Em({},d),{correlationId:h.id}),c?(e.internal=xm(Em({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,l,e)):this.client.core.relayer.publish(t,l,e).catch((e=>this.client.logger.error(e)))}return h.id})),Im(this,"sendResult",(async e=>{const{id:t,topic:r,result:n,throwOnFailedPublish:s,encodeOpts:o,appLink:a}=e,c=qd(t,n);let u;const d=a&&typeof(null==i.g?void 0:i.g.Linking)<"u";try{const e=d?vc:bc;u=await this.client.core.crypto.encode(r,c,xm(Em({},o||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${r} failed`),e}let h,l;try{h=await this.client.core.history.get(r,t);const e=h.request;try{this.shouldSetTVF(e.method,e.params)&&(l=this.getTVFParams(t,e.params,n))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${r}, ${t}) failed`),e}if(d){const e=jc(a,r,u);await i.g.Linking.openURL(e,this.client.name)}else{const e=h.request.method,n=am[e].res;n.tvf=xm(Em({},l),{correlationId:t}),s?(n.internal=xm(Em({},n.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,u,n)):this.client.core.relayer.publish(r,u,n).catch((e=>this.client.logger.error(e)))}await this.client.core.history.resolve(c)})),Im(this,"sendError",(async e=>{const{id:t,topic:r,error:n,encodeOpts:s,rpcOpts:o,appLink:a}=e,c=Hd(t,n);let u;const d=a&&typeof(null==i.g?void 0:i.g.Linking)<"u";try{const e=d?vc:bc;u=await this.client.core.crypto.encode(r,c,xm(Em({},s||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${r} failed`),e}let h;try{h=await this.client.core.history.get(r,t)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${r}, ${t}) failed`),e}if(d){const e=jc(a,r,u);await i.g.Linking.openURL(e,this.client.name)}else{const e=h.request.method,t=o||am[e].res;this.client.core.relayer.publish(r,u,t)}await this.client.core.history.resolve(c)})),Im(this,"cleanup",(async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let r=!1;Js(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{Js(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])})),Im(this,"onProviderMessageEvent",(async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)})),Im(this,"onRelayEventRequest",(async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()})),Im(this,"processRequestsQueue",(async()=>{if(this.requestQueue.state!==dm){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=dm;const e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=um}else this.client.logger.info("Request queue already active, skipping...")})),Im(this,"processRequest",(async e=>{const{topic:t,payload:r,attestation:n,transportType:i,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:n,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});default:return this.client.logger.info(`Unsupported request method ${o}`)}})),Im(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r,transportType:n}=e,i=(await this.client.core.history.get(t,r.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,n);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${i}`)}})),Im(this,"onRelayEventUnknownPayload",(e=>{const{topic:t}=e,{message:r}=$c("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)})),Im(this,"shouldIgnorePairingRequest",(e=>{const{topic:t,requestMethod:r}=e,n=this.expectedPairingMethodMap.get(t);return!(!n||n.includes(r)||!(n.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0))})),Im(this,"onSessionProposeRequest",(async e=>{const{topic:t,payload:r,attestation:n,encryptedId:i}=e,{params:s,id:o}=r;try{const e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError("proposal_listener_not_found")),this.isValidConnect(Em({},r.params));const a=s.expiryTimestamp||Zs(am.wc_sessionPropose.req.ttl),c=Em({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,c);const u=await this.getVerifyContext({attestationId:n,hash:xc(JSON.stringify(r)),encryptedId:i,metadata:c.proposer.metadata});e?.addTrace("emit_session_proposal"),this.client.events.emit("session_proposal",{id:o,params:c,verifyContext:u})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:am.wc_sessionPropose.autoReject}),this.client.logger.error(e)}})),Im(this,"onSessionProposeResponse",(async(e,t,r)=>{const{id:n}=t;if(Xd(t)){const{result:i}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const s=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});const o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const a=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(n,{sessionTopic:c,pairingTopic:e,proposalId:n,publicKey:o});const u=await this.client.core.relayer.subscribe(c,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:u}),await this.client.core.pairing.activate({topic:e})}else if(eh(t)){await this.client.proposal.delete(n,Gc("USER_DISCONNECTED"));const e=Ys("session_connect",n);if(0===this.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}})),Im(this,"onSessionSettleRequest",(async(e,t)=>{const{id:r,params:n}=t;try{this.isValidSessionSettleRequest(n);const{relay:r,controller:i,expiry:s,namespaces:o,sessionProperties:a,scopedProperties:c,sessionConfig:u}=t.params,d=[...this.pendingSessions.values()].find((t=>t.sessionTopic===e));if(!d)return this.client.logger.error(`Pending session not found for topic ${e}`);const h=this.client.proposal.get(d.proposalId),l=xm(Em(Em(Em({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:d.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:i.publicKey,self:{publicKey:d.publicKey,metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},a&&{sessionProperties:a}),c&&{scopedProperties:c}),u&&{sessionConfig:u}),{transportType:Ah.relay});await this.client.session.set(l.topic,l),await this.setExpiry(l.topic,l.expiry),await this.client.core.pairing.updateMetadata({topic:d.pairingTopic,metadata:l.peer.metadata}),this.client.events.emit("session_connect",{session:l}),this.events.emit(Ys("session_connect",d.proposalId),{session:l}),this.pendingSessions.delete(d.proposalId),this.deleteProposal(d.proposalId,!1),this.cleanupDuplicatePairings(l),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),Im(this,"onSessionSettleResponse",(async(e,t)=>{const{id:r}=t;Xd(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(Ys("session_approve",r),{})):eh(t)&&(await this.client.session.delete(e,Gc("USER_DISCONNECTED")),this.events.emit(Ys("session_approve",r),{error:t.error}))})),Im(this,"onSessionUpdateRequest",(async(e,t)=>{const{params:r,id:n}=t;try{const t=`${e}_session_update`,i=cu.get(t);if(i&&this.isRequestOutOfSync(i,n))return this.client.logger.warn(`Discarding out of sync request - ${n}`),void this.sendError({id:n,topic:e,error:Gc("INVALID_UPDATE_REQUEST")});this.isValidUpdate(Em({topic:e},r));try{cu.set(t,n),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw cu.delete(t),e}this.client.events.emit("session_update",{id:n,topic:e,params:r})}catch(t){await this.sendError({id:n,topic:e,error:t}),this.client.logger.error(t)}})),Im(this,"isRequestOutOfSync",((e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3))),Im(this,"onSessionUpdateResponse",((e,t)=>{const{id:r}=t,n=Ys("session_update",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);Xd(t)?this.events.emit(Ys("session_update",r),{}):eh(t)&&this.events.emit(Ys("session_update",r),{error:t.error})})),Im(this,"onSessionExtendRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,Zs(om)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),Im(this,"onSessionExtendResponse",((e,t)=>{const{id:r}=t,n=Ys("session_extend",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);Xd(t)?this.events.emit(Ys("session_extend",r),{}):eh(t)&&this.events.emit(Ys("session_extend",r),{error:t.error})})),Im(this,"onSessionPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),Im(this,"onSessionPingResponse",((e,t)=>{const{id:r}=t,n=Ys("session_ping",r);setTimeout((()=>{if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners 2176`);Xd(t)?this.events.emit(Ys("session_ping",r),{}):eh(t)&&this.events.emit(Ys("session_ping",r),{error:t.error})}),500)})),Im(this,"onSessionDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise((t=>{this.client.core.relayer.once(mh,(async()=>{t(await this.deleteSession({topic:e,id:r}))}))})),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:Gc("USER_DISCONNECTED")})]).catch((e=>this.client.logger.error(e)))}catch(e){this.client.logger.error(e)}})),Im(this,"onSessionRequest",(async e=>{var t,r,n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=e,{id:u,params:d}=s;try{await this.isValidRequest(Em({topic:i},d));const e=this.client.session.get(i),s={id:u,topic:i,params:d,verifyContext:await this.getVerifyContext({attestationId:o,hash:xc(JSON.stringify(Ud("wc_sessionRequest",d,u))),encryptedId:a,metadata:e.peer.metadata,transportType:c})};await this.setPendingSessionRequest(s),c===Ah.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(n=this.client.signConfig)&&n.disableRequestQueue?this.emitSessionRequest(s):(this.addSessionRequestToSessionRequestQueue(s),this.processSessionRequestQueue())}catch(e){await this.sendError({id:u,topic:i,error:e}),this.client.logger.error(e)}})),Im(this,"onSessionRequestResponse",((e,t)=>{const{id:r}=t,n=Ys("session_request",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);Xd(t)?this.events.emit(Ys("session_request",r),{result:t.result}):eh(t)&&this.events.emit(Ys("session_request",r),{error:t.error})})),Im(this,"onSessionEventRequest",(async(e,t)=>{const{id:r,params:n}=t;try{const t=`${e}_session_event_${n.event.name}`,i=cu.get(t);if(i&&this.isRequestOutOfSync(i,r))return void this.client.logger.info(`Discarding out of sync request - ${r}`);this.isValidEmit(Em({topic:e},n)),this.client.events.emit("session_event",{id:r,topic:e,params:n}),cu.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),Im(this,"onSessionAuthenticateResponse",((e,t)=>{const{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),Xd(t)?this.events.emit(Ys("session_request",r),{result:t.result}):eh(t)&&this.events.emit(Ys("session_request",r),{error:t.error})})),Im(this,"onSessionAuthenticateRequest",(async e=>{var t;const{topic:r,payload:n,attestation:i,encryptedId:s,transportType:o}=e;try{const{requester:e,authPayload:a,expiryTimestamp:c}=n.params,u=await this.getVerifyContext({attestationId:i,hash:xc(JSON.stringify(n)),encryptedId:s,metadata:e.metadata,transportType:o}),d={requester:e,pairingTopic:r,id:n.id,authPayload:a,verifyContext:u,expiryTimestamp:c};await this.setAuthRequest(n.id,{request:d,pairingTopic:r,transportType:o}),o===Ah.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:n.params,id:n.id,verifyContext:u})}catch(e){this.client.logger.error(e);const t=n.params.requester.publicKey,i=await this.client.core.crypto.generateKeyPair(),s=this.getAppLinkIfEnabled(n.params.requester.metadata,o),a={type:1,receiverPublicKey:t,senderPublicKey:i};await this.sendError({id:n.id,topic:r,error:e,encodeOpts:a,rpcOpts:am.wc_sessionAuthenticate.autoReject,appLink:s})}})),Im(this,"addSessionRequestToSessionRequestQueue",(e=>{this.sessionRequestQueue.queue.push(e)})),Im(this,"cleanupAfterResponse",(e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=um,this.processSessionRequestQueue()}),(0,M.toMiliseconds)(this.requestQueueDelay))})),Im(this,"cleanupPendingSentRequestsForTopic",(({topic:e,error:t})=>{const r=this.client.core.history.pending;r.length>0&&r.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{const r=Ys("session_request",e.request.id);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);this.events.emit(Ys("session_request",e.request.id),{error:t})}))})),Im(this,"processSessionRequestQueue",(()=>{if(this.sessionRequestQueue.state===dm)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=dm,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}else this.client.logger.info("session request queue is empty.")})),Im(this,"emitSessionRequest",(e=>{this.client.events.emit("session_request",e)})),Im(this,"onPairingCreated",(e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest({topic:e.topic,payload:Ud("wc_sessionPropose",xm(Em({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})})),Im(this,"isValidConnect",(async e=>{if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:r,optionalNamespaces:n,sessionProperties:i,scopedProperties:s,relays:o}=e;if(Wc(t)||await this.isValidPairingTopic(t),!function(e){let t=!1;return e?e&&Vc(e)&&e.length&&e.forEach((e=>{t=tu(e)})):t=!0,t}(o)){const{message:e}=$c("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(e)}if(!Wc(r)&&0!==Kc(r)&&this.validateNamespaces(r,"requiredNamespaces"),!Wc(n)&&0!==Kc(n)&&this.validateNamespaces(n,"optionalNamespaces"),Wc(i)||this.validateSessionProps(i,"sessionProperties"),!Wc(s)){this.validateSessionProps(s,"scopedProperties");const e=Object.keys(r||{}).concat(Object.keys(n||{}));if(!Object.keys(s).every((t=>e.includes(t))))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(s)}, required/optional namespaces: ${JSON.stringify(e)}`)}})),Im(this,"validateNamespaces",((e,t)=>{const r=function(e,t,r){let n=null;if(e&&Kc(e)){const i=Xc(e,t);i&&(n=i);const s=function(e,t,r){let n=null;return Object.entries(e).forEach((([e,i])=>{if(n)return;const s=function(e,t,r){let n=null;return Vc(t)&&t.length?t.forEach((e=>{n||Jc(e)||(n=Gc("UNSUPPORTED_CHAINS",`${r}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):Jc(e)||(n=Gc("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}(e,Ms(e,i),`${t} ${r}`);s&&(n=s)})),n}(e,t,r);s&&(n=s)}else n=$c("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}(e,"connect()",t);if(r)throw new Error(r.message)})),Im(this,"isValidApprove",(async e=>{if(!ru(e))throw new Error($c("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:r,relayProtocol:n,sessionProperties:i,scopedProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const o=this.client.proposal.get(t),a=eu(r,"approve()");if(a)throw new Error(a.message);const c=iu(o.requiredNamespaces,r,"approve()");if(c)throw new Error(c.message);if(!Qc(n,!0)){const{message:e}=$c("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(e)}if(Wc(i)||this.validateSessionProps(i,"sessionProperties"),!Wc(s)){this.validateSessionProps(s,"scopedProperties");const e=new Set(Object.keys(r));if(!Object.keys(s).every((t=>e.has(t))))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(s)}, approved namespaces: ${Array.from(e).join(", ")}`)}})),Im(this,"isValidReject",(async e=>{if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!function(e){return!!(e&&"object"==typeof e&&e.code&&Zc(e.code,!1)&&e.message&&Qc(e.message,!1))}(r)){const{message:e}=$c("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(e)}})),Im(this,"isValidSessionSettleRequest",(e=>{if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:r,namespaces:n,expiry:i}=e;if(!tu(t)){const{message:e}=$c("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const s=function(e){let t=null;return Qc(e?.publicKey,!1)||(t=$c("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t}(r);if(s)throw new Error(s.message);const o=eu(n,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(Js(i)){const{message:e}=$c("EXPIRED","onSessionSettleRequest()");throw new Error(e)}})),Im(this,"isValidUpdate",(async e=>{if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const n=this.client.session.get(t),i=eu(r,"update()");if(i)throw new Error(i.message);const s=iu(n.requiredNamespaces,r,"update()");if(s)throw new Error(s.message)})),Im(this,"isValidExtend",(async e=>{if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)})),Im(this,"isValidRequest",(async e=>{if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:r,chainId:n,expiry:i}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:s}=this.client.session.get(t);if(!nu(s,n)){const{message:e}=$c("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(Wc(e)||!Qc(e.method,!1))}(r)){const{message:e}=$c("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!Qc(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{Dc(e.accounts).includes(t)&&r.push(...e.methods)})),r}(e,t).includes(r)}(s,n,r.method)){const{message:e}=$c("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(e)}if(i&&!function(e,t){return Zc(e,!1)&&e<=t.max&&e>=t.min}(i,cm)){const{message:e}=$c("MISSING_OR_INVALID",`request() expiry: ${i}. Expiry must be a number (in seconds) between ${cm.min} and ${cm.max}`);throw new Error(e)}})),Im(this,"isValidRespond",(async e=>{var t;if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:r,response:n}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(!function(e){return!(Wc(e)||Wc(e.result)&&Wc(e.error)||!Zc(e.id,!1)||!Qc(e.jsonrpc,!1))}(n)){const{message:e}=$c("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(e)}})),Im(this,"isValidPing",(async e=>{if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),Im(this,"isValidEmit",(async e=>{if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:r,chainId:n}=e;await this.isValidSessionTopic(t);const{namespaces:i}=this.client.session.get(t);if(!nu(i,n)){const{message:e}=$c("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(Wc(e)||!Qc(e.name,!1))}(r)){const{message:e}=$c("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!Qc(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{Dc(e.accounts).includes(t)&&r.push(...e.events)})),r}(e,t).includes(r)}(i,n,r.name)){const{message:e}=$c("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}})),Im(this,"isValidDisconnect",(async e=>{if(!ru(e)){const{message:t}=$c("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),Im(this,"isValidAuthenticate",(e=>{const{chains:t,uri:r,domain:n,nonce:i}=e;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!Qc(r,!1))throw new Error("uri is required parameter");if(!Qc(n,!1))throw new Error("domain is required parameter");if(!Qc(i,!1))throw new Error("nonce is required parameter");if([...new Set(t.map((e=>Ts(e).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:s}=Ts(t[0]);if("eip155"!==s)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")})),Im(this,"getVerifyContext",(async e=>{const{attestationId:t,hash:r,encryptedId:n,metadata:i,transportType:s}=e,o={verified:{verifyUrl:i.verifyUrl||Lh,validation:"UNKNOWN",origin:i.url||""}};try{if(s===Ah.link_mode){const e=this.getAppLinkIfEnabled(i,s);return o.verified.validation=e&&new URL(e).origin===new URL(i.url).origin?"VALID":"INVALID",o}const e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:n,verifyUrl:i.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o})),Im(this,"validateSessionProps",((e,t)=>{Object.values(e).forEach(((r,n)=>{if(null==r){const{message:i}=$c("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[n]}`);throw new Error(i)}}))})),Im(this,"getPendingAuthRequest",(e=>{const t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0})),Im(this,"addToRecentlyDeleted",((e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}})),Im(this,"checkRecentlyDeleted",(e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:r}=$c("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(r)}})),Im(this,"isLinkModeEnabled",((e,t)=>{var r,n,s,o,a,c,u,d,h;return!(!e||t!==Ah.link_mode)&&!0===(null==(n=null==(r=this.client.metadata)?void 0:r.redirect)?void 0:n.linkMode)&&void 0!==(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)&&""!==(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)&&void 0!==(null==(u=e?.redirect)?void 0:u.universal)&&""!==(null==(d=e?.redirect)?void 0:d.universal)&&!0===(null==(h=e?.redirect)?void 0:h.linkMode)&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(null==i.g?void 0:i.g.Linking)<"u"})),Im(this,"getAppLinkIfEnabled",((e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0})),Im(this,"handleLinkModeMessage",(({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;const t=eo(e,"topic")||"",r=decodeURIComponent(eo(e,"wc_ev")||""),n=this.client.session.keys.includes(t);n&&this.client.session.update(t,{transportType:Ah.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:n})})),Im(this,"registerLinkModeListeners",(async()=>{var e;if(ro()||js()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){const e=null==i.g?void 0:i.g.Linking;if(typeof e<"u"){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);const t=await e.getInitialURL();t&&setTimeout((()=>{this.handleLinkModeMessage({url:t})}),50)}}})),Im(this,"shouldSetTVF",((e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;const{request:r}=t;return Object.keys(hm).includes(r.method)})),Im(this,"getTVFParams",((e,t,r)=>{var n,i;try{const s=t.request.method,o=this.extractTxHashesFromResult(s,r);return xm(Em({correlationId:e,rpcMethods:[s],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(i=null==(n=t.request.params)?void 0:n[0])?void 0:i.to]}),{txHashes:o})}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}})),Im(this,"isValidContractData",(e=>{var t;if(!e)return!1;try{const r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;const n=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(n)&&n.length%2==0}catch{}return!1})),Im(this,"extractTxHashesFromResult",((e,t)=>{try{if("string"==typeof t)return[t];const r=t[hm[e].key];if(Vc(r))return"solana_signAllTransactions"===e?r.map((e=>function(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);const n=r[0];if(0===n)throw new Error("No signatures found");const i=1+64*n;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(e,"base64").slice(1,65);return Te.encode(s)}(e))):r;if("string"==typeof r)return[r]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]}))}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[e,r]of Object.entries(t))for(const t of r)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=$c("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(lh,(e=>{this.onProviderMessageEvent(e)}))}async onRelayMessage(e){const{topic:t,message:r,attestation:n,transportType:i}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(pm)?this.client.auth.authKeys.get(pm):{responseTopic:void 0,publicKey:void 0};try{const e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:i===Ah.link_mode?vc:bc});Jd(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:n,transportType:i,encryptedId:xc(r)})):Yd(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:i}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:i}),await this.client.core.relayer.messages.ack(t,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(Nh,(async e=>{const{topic:t,id:r}=Qs(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,$c("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,$c("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))}))}registerPairingEvents(){this.client.core.pairing.events.on(Ph,(e=>this.onPairingCreated(e))),this.client.core.pairing.events.on(Oh,(e=>{this.addToRecentlyDeleted(e.topic,"pairing")}))}isValidPairingTopic(e){if(!Qc(e,!1)){const{message:t}=$c("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=$c("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Js(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=$c("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Qc(e,!1)){const{message:t}=$c("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=$c("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Js(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=$c("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=$c("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(Qc(e,!1)){const{message:t}=$c("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=$c("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if(!function(e){return"number"==typeof e}(e)){const{message:t}=$c("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=$c("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Js(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=$c("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class Sm extends Ep{constructor(e,t){super(e,t,"proposal",rm),this.core=e,this.logger=t}}class Pm extends Ep{constructor(e,t){super(e,t,"session",rm),this.core=e,this.logger=t}}class Om extends Ep{constructor(e,t){super(e,t,"request",rm,(e=>e.id)),this.core=e,this.logger=t}}class km extends Ep{constructor(e,t){super(e,t,"authKeys",fm,(()=>pm)),this.core=e,this.logger=t}}class Tm extends Ep{constructor(e,t){super(e,t,"pairingTopics",fm),this.core=e,this.logger=t}}class Cm extends Ep{constructor(e,t){super(e,t,"requests",fm,(e=>e.id)),this.core=e,this.logger=t}}var Mm=Object.defineProperty,Rm=(e,t,r)=>((e,t,r)=>t in e?Mm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Nm{constructor(e,t){this.core=e,this.logger=t,Rm(this,"authKeys"),Rm(this,"pairingTopics"),Rm(this,"requests"),this.authKeys=new km(this.core,this.logger),this.pairingTopics=new Tm(this.core,this.logger),this.requests=new Cm(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Bm=Object.defineProperty,Lm=(e,t,r)=>((e,t,r)=>t in e?Bm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class jm extends Id{constructor(e){super(e),Lm(this,"protocol","wc"),Lm(this,"version",2),Lm(this,"name",nm),Lm(this,"metadata"),Lm(this,"core"),Lm(this,"logger"),Lm(this,"events",new w.EventEmitter),Lm(this,"engine"),Lm(this,"session"),Lm(this,"proposal"),Lm(this,"pendingRequest"),Lm(this,"auth"),Lm(this,"signConfig"),Lm(this,"on",((e,t)=>this.events.on(e,t))),Lm(this,"once",((e,t)=>this.events.once(e,t))),Lm(this,"off",((e,t)=>this.events.off(e,t))),Lm(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),Lm(this,"removeAllListeners",(e=>this.events.removeAllListeners(e))),Lm(this,"connect",(async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"pair",(async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"approve",(async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"reject",(async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"update",(async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"extend",(async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"request",(async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"respond",(async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"ping",(async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"emit",(async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"disconnect",(async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"find",(e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"getPendingSessionRequests",(()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"authenticate",(async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"formatAuthMessage",(e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"approveSessionAuthenticate",(async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),Lm(this,"rejectSessionAuthenticate",(async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),this.name=e?.name||nm,this.metadata=e?.metadata||qs(),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Hu()(id({level:e?.logger||"error"}));this.core=e?.core||new em(e),this.logger=od(t,this.name),this.session=new Pm(this.core,this.logger),this.proposal=new Sm(this.core,this.logger),this.pendingRequest=new Om(this.core,this.logger),this.engine=new _m(this),this.auth=new Nm(this.core,this.logger)}static async init(e){const t=new jm(e);return await t.initialize(),t}get context(){return sd(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout((()=>{this.engine.processRelayMessageCache()}),(0,M.toMiliseconds)(M.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var Dm=i(4945),Fm=i.n(Dm),Um=Object.defineProperty,qm=Object.defineProperties,Hm=Object.getOwnPropertyDescriptors,zm=Object.getOwnPropertySymbols,$m=Object.prototype.hasOwnProperty,Gm=Object.prototype.propertyIsEnumerable,Vm=(e,t,r)=>t in e?Um(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Km=(e,t)=>{for(var r in t||(t={}))$m.call(t,r)&&Vm(e,r,t[r]);if(zm)for(var r of zm(t))Gm.call(t,r)&&Vm(e,r,t[r]);return e},Wm=(e,t)=>qm(e,Hm(t));const Qm={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class Zm{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new w.EventEmitter,this.isAvailable=!1,this.registering=!1,!Wd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=Me(e),r=await(await Fm()(this.url,Wm(Km({},Qm),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!Wd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(new Error("HTTP connection is missing or invalid"));e()}))}))}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Me({id:1,jsonrpc:"2.0",method:"test",params:[]});await Fm()(e,Wm(Km({},Qm),{body:t}))}this.onOpen()}catch(e){const t=this.parseError(e);throw this.events.emit("register_error",t),this.onClose(),t}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?Ce(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=Hd(e,r.message||r.toString());this.events.emit("payload",n)}parseError(e,t=this.url){return Ld(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const Jm="error",Ym="wc@2:universal_provider:",Xm="https://rpc.walletconnect.org/v1/",eg="generic",tg=`${Xm}bundler`,rg="default_chain_changed";function ng(){}function ig(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function sg(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function og(e){return"object"==typeof e&&null!==e}function ag(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function cg(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ug="[object String]",dg="[object Number]",hg="[object Boolean]",lg="[object Arguments]";function fg(e,t,r,n=new Map,i=void 0){const s=i?.(e,t,r,n);if(null!=s)return s;if(ig(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const t=new Array(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=fg(e[s],s,r,n,i);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;n.set(e,t);for(const[s,o]of e)t.set(s,fg(o,s,r,n,i));return t}if(e instanceof Set){const t=new Set;n.set(e,t);for(const s of e)t.add(fg(s,void 0,r,n,i));return t}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(sg(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=fg(e[s],s,r,n,i);return t}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),pg(t,e,r,n,i),t}if(typeof File<"u"&&e instanceof File){const t=new File([e],e.name,{type:e.type});return n.set(e,t),pg(t,e,r,n,i),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return n.set(e,t),pg(t,e,r,n,i),t}if(e instanceof Error){const t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,pg(t,e,r,n,i),t}if("object"==typeof e&&function(e){switch(cg(e)){case lg:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case hg:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case dg:case"[object Object]":case"[object RegExp]":case"[object Set]":case ug:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),pg(t,e,r,n,i),t}return e}function pg(e,t,r=e,n,i){const s=[...Object.keys(t),...ag(t)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(e,a);(null==c||c.writable)&&(e[a]=fg(t[a],a,r,n,i))}}function mg(e){return function(e,t){return function(e,t){return fg(e,void 0,e,new Map,t)}(e,((r,n,i,s)=>{const o=t?.(r,n,i,s);if(null!=o)return o;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case dg:case ug:case hg:{const t=new e.constructor(e?.valueOf());return pg(t,e),t}case lg:{const t={};return pg(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}))}(e)}function gg(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===cg(e)}function yg(e){return sg(e)}function bg(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return!(null==t||!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function vg(e,t,r,n){if(ig(e)&&(e=Object(e)),null==t||"object"!=typeof t)return e;if(n.has(t))return function(e){if(ig(e))return e;if(Array.isArray(e)||sg(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),r=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new r(e);if(e instanceof RegExp){const t=new r(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new r(e.buffer.slice(0));if(e instanceof Error){const t=new r(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}if(typeof File<"u"&&e instanceof File)return new r([e],e.name,{type:e.type,lastModified:e.lastModified});if("object"==typeof e){const r=Object.create(t);return Object.assign(r,e)}return e}(n.get(t));if(n.set(t,e),Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]=t[e]??void 0}const i=[...Object.keys(t),...ag(t)];for(let s=0;s<i.length;s++){const o=i[s];let a=t[o],c=e[o];if(gg(a)&&(a={...a}),gg(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=mg(a)),Array.isArray(a))if("object"==typeof c&&null!=c){const e=[],t=Reflect.ownKeys(c);for(let r=0;r<t.length;r++){const n=t[r];e[n]=c[n]}c=e}else c=[];const u=r(c,a,o,e,t,n);null!=u?e[o]=u:Array.isArray(a)||og(c)&&og(a)?e[o]=vg(c,a,r,n):null==c&&bg(a)?e[o]=vg({},a,r,n):null==c&&yg(a)?e[o]=mg(a):(void 0===c||void 0!==a)&&(e[o]=a)}return e}var wg=Object.defineProperty,Ag=Object.defineProperties,Eg=Object.getOwnPropertyDescriptors,xg=Object.getOwnPropertySymbols,Ig=Object.prototype.hasOwnProperty,_g=Object.prototype.propertyIsEnumerable,Sg=(e,t,r)=>t in e?wg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pg=(e,t)=>{for(var r in t||(t={}))Ig.call(t,r)&&Sg(e,r,t[r]);if(xg)for(var r of xg(t))_g.call(t,r)&&Sg(e,r,t[r]);return e},Og=(e,t)=>Ag(e,Eg(t));function kg(e,t,r){var n;const i=Ts(e);return(null==(n=t.rpcMap)?void 0:n[i.reference])||`${Xm}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function Tg(e){return e.includes(":")?e.split(":")[1]:e}function Cg(e){return e.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))}function Mg(e={},t={}){return function(e,...t){return function(e,...t){const r=t.slice(0,-1),n=t[t.length-1];let i=e;for(let e=0;e<r.length;e++)i=vg(i,r[e],n,new Map);return i}(e,...t,ng)}(Rg(e),Rg(t))}function Rg(e){var t,r,n,i;const s={};if(!Kc(e))return s;for(const[o,a]of Object.entries(e)){const e=Fc(o)?[o]:a.chains,c=a.methods||[],u=a.events||[],d=a.rpcMap||{},h=Uc(o);s[h]=Og(Pg(Pg({},s[h]),a),{chains:Xs(e,null==(t=s[h])?void 0:t.chains),methods:Xs(c,null==(r=s[h])?void 0:r.methods),events:Xs(u,null==(n=s[h])?void 0:n.events),rpcMap:Pg(Pg({},d),null==(i=s[h])?void 0:i.rpcMap)})}return s}function Ng(e){return e.includes(":")?e.split(":")[2]:e}function Bg(e){const t={};for(const[r,n]of Object.entries(e)){const e=n.methods||[],i=n.events||[],s=n.accounts||[],o=Fc(r)?[r]:n.chains?n.chains:Cg(n.accounts);t[r]={chains:o,methods:e,events:i,accounts:s}}return t}function Lg(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const jg={},Dg=e=>jg[e],Fg=(e,t)=>{jg[e]=t};var Ug=Object.defineProperty,qg=(e,t,r)=>((e,t,r)=>t in e?Ug(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Hg{constructor(e){qg(this,"name","polkadot"),qg(this,"client"),qg(this,"httpProviders"),qg(this,"events"),qg(this,"namespace"),qg(this,"chainId"),this.namespace=e.namespace,this.events=Dg("events"),this.client=Dg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(rg,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=Tg(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||kg(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new th(new Zm(r,Dg("disableProviderPing")))}}var zg=Object.defineProperty,$g=Object.defineProperties,Gg=Object.getOwnPropertyDescriptors,Vg=Object.getOwnPropertySymbols,Kg=Object.prototype.hasOwnProperty,Wg=Object.prototype.propertyIsEnumerable,Qg=(e,t,r)=>t in e?zg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zg=(e,t)=>{for(var r in t||(t={}))Kg.call(t,r)&&Qg(e,r,t[r]);if(Vg)for(var r of Vg(t))Wg.call(t,r)&&Qg(e,r,t[r]);return e},Jg=(e,t)=>$g(e,Gg(t)),Yg=(e,t,r)=>Qg(e,"symbol"!=typeof t?t+"":t,r);class Xg{constructor(e){Yg(this,"name","eip155"),Yg(this,"client"),Yg(this,"chainId"),Yg(this,"namespace"),Yg(this,"httpProviders"),Yg(this,"events"),this.namespace=e.namespace,this.events=Dg("events"),this.client=Dg("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(rg,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||kg(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new th(new Zm(r,Dg("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=parseInt(Tg(t));e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let n=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;const i=parseInt(n,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else{if(!this.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:n}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${i}`)}return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,n;const i=null==(r=null==(t=e.request)?void 0:t.params)?void 0:r[0];if(!i)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const s=this.client.session.get(e.topic),o=(null==(n=s?.sessionProperties)?void 0:n.capabilities)||{};if(null!=o&&o[i])return o?.[i];const a=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Jg(Zg({},s.sessionProperties||{}),{capabilities:Jg(Zg({},o||{}),{[i]:a})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return a}async getCallStatus(e){var t,r;const n=this.client.session.get(e.topic),i=null==(t=n.sessionProperties)?void 0:t.bundler_name;if(i){const t=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}const s=null==(r=n.sessionProperties)?void 0:r.bundler_url;if(s)try{return await this.getUserOperationReceipt(s,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,s)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const n=new URL(e),i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ud("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,t){return`${tg}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var ey=Object.defineProperty,ty=(e,t,r)=>((e,t,r)=>t in e?ey(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class ry{constructor(e){ty(this,"name","solana"),ty(this,"client"),ty(this,"httpProviders"),ty(this,"events"),ty(this,"namespace"),ty(this,"chainId"),this.namespace=e.namespace,this.events=Dg("events"),this.client=Dg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(rg,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=Tg(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||kg(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new th(new Zm(r,Dg("disableProviderPing")))}}var ny=Object.defineProperty,iy=(e,t,r)=>((e,t,r)=>t in e?ny(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class sy{constructor(e){iy(this,"name","cosmos"),iy(this,"client"),iy(this,"httpProviders"),iy(this,"events"),iy(this,"namespace"),iy(this,"chainId"),this.namespace=e.namespace,this.events=Dg("events"),this.client=Dg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(rg,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=Tg(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||kg(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new th(new Zm(r,Dg("disableProviderPing")))}}var oy=Object.defineProperty,ay=(e,t,r)=>((e,t,r)=>t in e?oy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class cy{constructor(e){ay(this,"name","algorand"),ay(this,"client"),ay(this,"httpProviders"),ay(this,"events"),ay(this,"namespace"),ay(this,"chainId"),this.namespace=e.namespace,this.events=Dg("events"),this.client=Dg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||kg(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(rg,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||kg(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new th(new Zm(r,Dg("disableProviderPing")))}}var uy=Object.defineProperty,dy=(e,t,r)=>((e,t,r)=>t in e?uy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class hy{constructor(e){dy(this,"name","cip34"),dy(this,"client"),dy(this,"httpProviders"),dy(this,"events"),dy(this,"namespace"),dy(this,"chainId"),this.namespace=e.namespace,this.events=Dg("events"),this.client=Dg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(rg,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const r=this.getCardanoRPCUrl(t),n=Tg(t);e[n]=this.createHttpProvider(n,r)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new th(new Zm(r,Dg("disableProviderPing")))}}var ly=Object.defineProperty,fy=(e,t,r)=>((e,t,r)=>t in e?ly(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class py{constructor(e){fy(this,"name","elrond"),fy(this,"client"),fy(this,"httpProviders"),fy(this,"events"),fy(this,"namespace"),fy(this,"chainId"),this.namespace=e.namespace,this.events=Dg("events"),this.client=Dg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(rg,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=Tg(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||kg(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new th(new Zm(r,Dg("disableProviderPing")))}}var my=Object.defineProperty,gy=(e,t,r)=>((e,t,r)=>t in e?my(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class yy{constructor(e){gy(this,"name","multiversx"),gy(this,"client"),gy(this,"httpProviders"),gy(this,"events"),gy(this,"namespace"),gy(this,"chainId"),this.namespace=e.namespace,this.events=Dg("events"),this.client=Dg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(rg,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=Tg(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||kg(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new th(new Zm(r,Dg("disableProviderPing")))}}var by=Object.defineProperty,vy=(e,t,r)=>((e,t,r)=>t in e?by(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class wy{constructor(e){vy(this,"name","near"),vy(this,"client"),vy(this,"httpProviders"),vy(this,"events"),vy(this,"namespace"),vy(this,"chainId"),this.namespace=e.namespace,this.events=Dg("events"),this.client=Dg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||kg(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(rg,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||kg(e,this.namespace);return typeof r>"u"?void 0:new th(new Zm(r,Dg("disableProviderPing")))}}var Ay=Object.defineProperty,Ey=(e,t,r)=>((e,t,r)=>t in e?Ay(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class xy{constructor(e){Ey(this,"name","tezos"),Ey(this,"client"),Ey(this,"httpProviders"),Ey(this,"events"),Ey(this,"namespace"),Ey(this,"chainId"),this.namespace=e.namespace,this.events=Dg("events"),this.client=Dg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||kg(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(rg,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{e[t]=this.createHttpProvider(t)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||kg(e,this.namespace);return typeof r>"u"?void 0:new th(new Zm(r))}}var Iy=Object.defineProperty,_y=(e,t,r)=>((e,t,r)=>t in e?Iy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Sy{constructor(e){_y(this,"name",eg),_y(this,"client"),_y(this,"httpProviders"),_y(this,"events"),_y(this,"namespace"),_y(this,"chainId"),this.namespace=e.namespace,this.events=Dg("events"),this.client=Dg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(rg,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){var e,t;const r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach((e=>{const t=Ts(e);r[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)})),r}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||kg(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new th(new Zm(r,Dg("disableProviderPing")))}}var Py=Object.defineProperty,Oy=Object.defineProperties,ky=Object.getOwnPropertyDescriptors,Ty=Object.getOwnPropertySymbols,Cy=Object.prototype.hasOwnProperty,My=Object.prototype.propertyIsEnumerable,Ry=(e,t,r)=>t in e?Py(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ny=(e,t)=>{for(var r in t||(t={}))Cy.call(t,r)&&Ry(e,r,t[r]);if(Ty)for(var r of Ty(t))My.call(t,r)&&Ry(e,r,t[r]);return e},By=(e,t)=>Oy(e,ky(t)),Ly=(e,t,r)=>Ry(e,"symbol"!=typeof t?t+"":t,r);class jy{constructor(e){Ly(this,"client"),Ly(this,"namespaces"),Ly(this,"optionalNamespaces"),Ly(this,"sessionProperties"),Ly(this,"scopedProperties"),Ly(this,"events",new(A())),Ly(this,"rpcProviders",{}),Ly(this,"session"),Ly(this,"providerOpts"),Ly(this,"logger"),Ly(this,"uri"),Ly(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:Hu()(id({level:e?.logger||Jm})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new jy(e);return await t.initialize(),t}async request(e,t,r){const[n,i]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:Ny({},e),chainId:`${n}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,n){const i=(new Date).getTime();this.request(e,r,n).then((e=>t(null,qd(i,e)))).catch((e=>t(e,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:Gc("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:n}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();if(this.session=i.session,this.session){const e=Bg(this.session.namespaces);this.namespaces=Mg(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const n=await r();this.session=n;const i=Bg(n.namespaces);return this.namespaces=Mg(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,n]=this.validateChain(e),i=this.getProvider(r);i.name===eg?i.setDefaultChain(`${r}:${n}`,t):i.setDefaultChain(n,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Vc(t)){for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await jm.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Jm,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{const e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map((e=>Uc(e))))];Fg("client",this.client),Fg("events",this.events),Fg("disableProviderPing",this.disableProviderPing),e.forEach((e=>{if(!this.session)return;const t=function(e,t){const r=Object.keys(t.namespaces).filter((t=>t.includes(e)));if(!r.length)return[];const n=[];return r.forEach((e=>{const r=t.namespaces[e].accounts;n.push(...r)})),n}(e,this.session),r=Cg(t),n=Mg(this.namespaces,this.optionalNamespaces),i=By(Ny({},n[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new Xg({namespace:i});break;case"algorand":this.rpcProviders[e]=new cy({namespace:i});break;case"solana":this.rpcProviders[e]=new ry({namespace:i});break;case"cosmos":this.rpcProviders[e]=new sy({namespace:i});break;case"polkadot":this.rpcProviders[e]=new Hg({namespace:i});break;case"cip34":this.rpcProviders[e]=new hy({namespace:i});break;case"elrond":this.rpcProviders[e]=new py({namespace:i});break;case"multiversx":this.rpcProviders[e]=new yy({namespace:i});break;case"near":this.rpcProviders[e]=new wy({namespace:i});break;case"tezos":this.rpcProviders[e]=new xy({namespace:i});break;default:this.rpcProviders[eg]?this.rpcProviders[eg].updateNamespace(i):this.rpcProviders[eg]=new Sy({namespace:i})}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(e=>{var t;const{topic:r}=e;r===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)})),this.client.on("session_event",(e=>{var t;const{params:r,topic:n}=e;if(n!==(null==(t=this.session)?void 0:t.topic))return;const{event:i}=r;if("accountsChanged"===i.name){const e=i.data;e&&Vc(e)&&this.events.emit("accountsChanged",e.map(Ng))}else if("chainChanged"===i.name){const e=r.chainId,t=r.event.data,n=Uc(e),i=Lg(e)!==Lg(t)?`${n}:${Lg(t)}`:e;this.onChainChanged(i)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)})),this.client.on("session_update",(({topic:e,params:t})=>{var r,n;if(e!==(null==(r=this.session)?void 0:r.topic))return;const{namespaces:i}=t,s=null==(n=this.client)?void 0:n.session.get(e);this.session=By(Ny({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})})),this.client.on("session_delete",(async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",By(Ny({},Gc("USER_DISCONNECTED")),{data:e.topic})))})),this.on(rg,(e=>{this.onChainChanged(e,!0)}))}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[eg]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])}))}setNamespaces(e){const{namespaces:t,optionalNamespaces:r,sessionProperties:n,scopedProperties:i}=e;t&&Object.keys(t).length&&(this.namespaces=t),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=n,this.scopedProperties=i}validateChain(e){const[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map((e=>Uc(e))).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const n=Uc(Object.keys(this.namespaces)[0]);return[n,this.rpcProviders[n].getDefaultChain()]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[r,n]=this.validateChain(e);n&&(t||this.getProvider(r).setDefaultChain(n),this.namespaces[r]?this.namespaces[r].defaultChain=n:this.namespaces[`${r}:${n}`]?this.namespaces[`${r}:${n}`].defaultChain=n:this.namespaces[`${r}:${n}`]={defaultChain:n},this.events.emit("chainChanged",n),await this.persist("namespaces",this.namespaces))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const n=(null==(r=this.session)?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Ym}/${e}${n}`,t)}async getFromStore(e){var t;const r=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${Ym}/${e}${r}`)}async deleteFromStore(e){var t;const r=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${Ym}/${e}${r}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const e of t)e.startsWith(Ym)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn("Failed to cleanup storage",e)}}}const Dy=jy,Fy=["eth_sendTransaction","personal_sign"],Uy=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],qy=["chainChanged","accountsChanged"],Hy=["chainChanged","accountsChanged","message","disconnect","connect"];var zy=Object.defineProperty,$y=Object.defineProperties,Gy=Object.getOwnPropertyDescriptors,Vy=Object.getOwnPropertySymbols,Ky=Object.prototype.hasOwnProperty,Wy=Object.prototype.propertyIsEnumerable,Qy=(e,t,r)=>t in e?zy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zy=(e,t)=>{for(var r in t||(t={}))Ky.call(t,r)&&Qy(e,r,t[r]);if(Vy)for(var r of Vy(t))Wy.call(t,r)&&Qy(e,r,t[r]);return e},Jy=(e,t)=>$y(e,Gy(t)),Yy=(e,t,r)=>Qy(e,"symbol"!=typeof t?t+"":t,r);function Xy(e){return Number(e[0].split(":")[1])}function eb(e){return`0x${e.toString(16)}`}class tb{constructor(){Yy(this,"events",new w.EventEmitter),Yy(this,"namespace","eip155"),Yy(this,"accounts",[]),Yy(this,"signer"),Yy(this,"chainId",1),Yy(this,"modal"),Yy(this,"rpc"),Yy(this,"STORAGE_KEY","wc@2:ethereum_provider:"),Yy(this,"on",((e,t)=>(this.events.on(e,t),this))),Yy(this,"once",((e,t)=>(this.events.once(e,t),this))),Yy(this,"removeListener",((e,t)=>(this.events.removeListener(e,t),this))),Yy(this,"off",((e,t)=>(this.events.off(e,t),this))),Yy(this,"parseAccount",(e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e)),this.signer={},this.rpc={}}static async init(e){const t=new tb;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,r){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),r)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:r}=function(e){const{chains:t,optionalChains:r,methods:n,optionalMethods:i,events:s,optionalEvents:o,rpcMap:a}=e;if(!Vc(t))throw new Error("Invalid chains");const c={chains:t,methods:n||Fy,events:s||qy,rpcMap:Zy({},t.length?{[Xy(t)]:a[Xy(t)]}:{})},u=s?.filter((e=>!qy.includes(e))),d=n?.filter((e=>!Fy.includes(e)));if(!(r||o||i||null!=u&&u.length||null!=d&&d.length))return{required:t.length?c:void 0};const h={chains:[...new Set(u?.length&&d?.length||!r?c.chains.concat(r||[]):r)],methods:[...new Set(c.methods.concat(null!=i&&i.length?i:Uy))],events:[...new Set(c.events.concat(null!=o&&o.length?o:Hy))],rpcMap:a};return{required:t.length?c:void 0,optional:r.length?h:void 0}}(this.rpc);try{const n=await new Promise((async(n,i)=>{var s;this.rpc.showQrModal&&(null==(s=this.modal)||s.subscribeModal((e=>{!e.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),i(new Error("Connection request reset. Please try again.")))})));const o=null!=e&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(Jy(Zy({namespaces:Zy({},t&&{[this.namespace]:t})},r&&{optionalNamespaces:{[this.namespace]:r}}),{pairingTopic:e?.pairingTopic,scopedProperties:o})).then((e=>{n(e)})).catch((e=>{i(new Error(e.message))}))}));if(!n)return;const i=Cs(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:i),this.setAccounts(i),this.events.emit("connect",{chainId:eb(this.chainId)})}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{const r=await new Promise((async(r,n)=>{var i;this.rpc.showQrModal&&(null==(i=this.modal)||i.subscribeModal((e=>{!e.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),n(new Error("Connection request reset. Please try again.")))}))),await this.signer.authenticate(Jy(Zy({},e),{chains:this.rpc.chains}),t).then((e=>{r(e)})).catch((e=>{n(new Error(e.message))}))})),n=r.session;if(n){const e=Cs(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:e),this.setAccounts(e),this.events.emit("connect",{chainId:eb(this.chainId)})}return r}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",(e=>{const{params:t}=e,{event:r}=t;"accountsChanged"===r.name?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===r.name?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)})),this.signer.on("chainChanged",(e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",eb(this.chainId)),this.persist()})),this.signer.on("session_update",(e=>{this.events.emit("session_update",e)})),this.signer.on("session_delete",(e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Jy(Zy({},Gc("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))})),this.signer.on("display_uri",(e=>{var t,r;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(r=this.modal)||r.openModal({uri:e})),this.events.emit("display_uri",e)}))}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter((e=>this.isCompatibleChainId(e))).map((e=>this.parseChainId(e)));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",eb(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,r,n]=e.split(":");return{chainId:`${t}:${r}`,address:n}}setAccounts(e){this.accounts=e.filter((e=>this.parseChainId(this.parseAccountId(e).chainId)===this.chainId)).map((e=>this.parseAccountId(e).address)),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;const n=null!=(t=e?.chains)?t:[],i=null!=(r=e?.optionalChains)?r:[],s=n.concat(i);if(!s.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const o=n.length?e?.methods||Fy:[],a=n.length?e?.events||qy:[],c=e?.optionalMethods||[],u=e?.optionalEvents||[],d=e?.rpcMap||this.buildRpcMap(s,e.projectId),h=e?.qrModalOptions||void 0;return{chains:n?.map((e=>this.formatChainId(e))),optionalChains:i.map((e=>this.formatChainId(e))),methods:o,events:a,optionalMethods:c,optionalEvents:u,rpcMap:d,showQrModal:!(null==e||!e.showQrModal),qrModalOptions:h,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const r={};return e.forEach((e=>{r[e]=this.getRpcUrl(e,t)})),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Xy(this.rpc.chains):Xy(this.rpc.optionalChains),this.signer=await Dy.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{const{WalletConnectModal:t}=await i.e(940).then(i.bind(i,940));e=t}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(e)try{this.modal=new e(Zy({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(e){throw this.signer.logger.error(e),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:r,rpcMap:n}=e;t&&Vc(t)&&(this.rpc.chains=t.map((e=>this.formatChainId(e))),t.forEach((e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)}))),r&&Vc(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map((e=>this.formatChainId(e))),r.forEach((e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)})))}getRpcUrl(e,t){var r;return(null==(r=this.rpc.rpcMap)?void 0:r[e])||`https://rpc.walletconnect.org/v1/?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch((e=>this.signer.logger.warn(e)))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map((e=>this.parseAccount(e)))}}const rb=tb;var nb,ib;!function(e){e.NUMBER="NUMBER_NUMBER",e.HEX="NUMBER_HEX",e.STR="NUMBER_STR",e.BIGINT="NUMBER_BIGINT"}(nb||(nb={})),function(e){e.HEX="BYTES_HEX",e.UINT8ARRAY="BYTES_UINT8ARRAY"}(ib||(ib={}));const sb={number:nb.BIGINT,bytes:ib.HEX},ob={number:nb.HEX,bytes:ib.HEX};var ab,cb,ub;(ub=ab||(ab={})).EARLIEST="earliest",ub.LATEST="latest",ub.PENDING="pending",ub.SAFE="safe",ub.FINALIZED="finalized",ub.COMMITTED="committed",function(e){e.chainstart="chainstart",e.frontier="frontier",e.homestead="homestead",e.dao="dao",e.tangerineWhistle="tangerineWhistle",e.spuriousDragon="spuriousDragon",e.byzantium="byzantium",e.constantinople="constantinople",e.petersburg="petersburg",e.istanbul="istanbul",e.muirGlacier="muirGlacier",e.berlin="berlin",e.london="london",e.altair="altair",e.arrowGlacier="arrowGlacier",e.grayGlacier="grayGlacier",e.bellatrix="bellatrix",e.merge="merge",e.capella="capella",e.shanghai="shanghai"}(cb||(cb={}));const db=Object.getPrototypeOf(Uint8Array);var hb=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const lb=Symbol.for("web3/base-provider");class fb{static isWeb3Provider(e){return e instanceof fb||Boolean(e&&e[lb])}get[lb](){return!0}send(e,t){this.request(e).then((e=>{t(null,e)})).catch((e=>{t(e)}))}sendAsync(e){return hb(this,void 0,void 0,(function*(){return this.request(e)}))}asEIP1193Provider(){const e=Object.create(this),t=e.request;return e.request=function(e){return hb(this,void 0,void 0,(function*(){return(yield t(e)).result}))},e.asEIP1193Provider=void 0,e}}class pb extends Array{constructor(e){super(),this._accountProvider=e}}const mb=4001,gb=4100,yb=4200,bb=4900,vb=4901,wb=-32700,Ab=-32600,Eb=-32601,xb=-32602,Ib=-32603,_b=-32e3,Sb=-32001,Pb=-32002,Ob=-32003,kb=-32004,Tb=-32005,Cb=-32006;class Mb extends Error{get innerError(){return this.cause instanceof Rb?this.cause.errors:this.cause}set innerError(e){Array.isArray(e)?this.cause=new Rb(e):this.cause=e}constructor(e,t){super(e),Array.isArray(t)?this.cause=new Rb(t):this.cause=t,this.name=this.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(new.target.constructor):this.stack=(new Error).stack}static convertToString(e,t=!1){if(null==e)return"undefined";const r=JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t));return t&&["bigint","string"].includes(typeof e)?r.replace(/['\\"]+/g,""):r}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:this.cause,innerError:this.cause}}}class Rb extends Mb{constructor(e){super(`Multiple errors occurred: [${e.map((e=>e.message)).join("], [")}]`),this.code=208,this.errors=e}}class Nb extends Mb{constructor(e,t){super(`Invalid value given "${Mb.convertToString(e,!0)}". Error: ${t}.`),this.name=this.constructor.name}}class Bb extends Mb{constructor(){super("Private key must be 32 bytes."),this.code=701}}class Lb extends Mb{constructor(){super("Invalid Private Key, Not a valid string or uint8Array"),this.code=702}}class jb extends Mb{constructor(e){super(`"${e}"`),this.code=802}}class Db extends Mb{constructor(){super("Invalid key derivation function"),this.code=703}}class Fb extends Mb{constructor(){super("Key derivation failed - possibly wrong password"),this.code=704}}class Ub extends Mb{constructor(){super("Unsupported key store version"),this.code=705}}class qb extends Mb{constructor(){super("Password cannot be empty"),this.code=706}}class Hb extends Mb{constructor(){super("Initialization vector must be 16 bytes"),this.code=707}}class zb extends Mb{constructor(){super("c > 1000, pbkdf2 is less secure with less iterations"),this.code=709}}class $b extends Mb{constructor(e,t){super(e),this.code=500,t&&(this.errorCode=t.code,this.errorReason=t.reason)}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{errorCode:this.errorCode,errorReason:this.errorReason})}}class Gb extends $b{constructor(e){super("Connection not open",e),this.code=503}}class Vb extends $b{constructor(e){super(`Maximum number of reconnect attempts reached! (${e})`),this.code=505}}class Kb extends $b{constructor(){super("CONNECTION ERROR: Provider started to reconnect before the response got received!"),this.code=506}}class Wb extends $b{constructor(e){super(`Request already sent with following id: ${e}`),this.code=507}}class Qb extends Mb{constructor(e,t){super(e),this.code=300,this.receipt=t}}class Zb extends Mb{constructor(e,t){super(`The resolver at ${e} does not implement requested method: "${t}".`),this.address=e,this.name=t,this.code=301}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{address:this.address,name:this.name})}}class Jb extends Qb{constructor(e){if(super(e.message||"Error"),this.name="name"in e&&e.name||this.constructor.name,this.stack="stack"in e&&e.stack||void 0,this.code=e.code,"object"==typeof e.data){let t;t=e.data&&"originalError"in e.data?e.data.originalError:e.data,this.data=t.data,this.cause=new Jb(t)}else this.data=e.data}setDecodedProperties(e,t,r){this.errorName=e,this.errorSignature=t,this.errorArgs=r}toJSON(){let e=Object.assign(Object.assign({},super.toJSON()),{data:this.data});return this.errorName&&(e=Object.assign(Object.assign({},e),{errorName:this.errorName,errorSignature:this.errorSignature,errorArgs:this.errorArgs})),e}}class Yb extends Qb{constructor(e){super("Error happened while trying to execute a function inside a smart contract"),this.code=310,this.cause=new Jb(e)}}class Xb extends Nb{constructor(e){var t,r;super(`data: ${null!==(t=e.data)&&void 0!==t?t:"undefined"}, input: ${null!==(r=e.input)&&void 0!==r?r:"undefined"}`,'You can\'t have "data" and "input" as properties of a contract at the same time, please use either "data" or "input" instead.'),this.code=311}}class ev extends Mb{constructor(e){super(`ENS is not supported on network ${e}`),this.code=902}}class tv extends Mb{constructor(){super("Network not synced"),this.code=903}}class rv extends Mb{constructor(e){super(`Invalid parameters passed. "${void 0!==e?e:""}"`),this.hint=e,this.code=207}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{hint:this.hint})}}class nv extends Mb{constructor(){super(...arguments),this.code=201}}class iv extends Mb{constructor(){super("The method you're trying to call is not implemented."),this.code=202}}class sv extends Mb{constructor(){super(...arguments),this.code=203}}class ov extends Mb{constructor(){super(...arguments),this.code=204}}class av extends Mb{constructor(e,t){super(e),this.code=205,this.props=null!=t?t:{}}}class cv extends Mb{constructor(e){super(`A plugin with the namespace: ${e} has already been registered.`),this.code=206}}class uv extends Mb{constructor(){super(...arguments),this.code=600}}class dv extends Mb{constructor(e){super(`Client URL "${e}" is invalid.`),this.code=602}}class hv extends Mb{constructor(){super(...arguments),this.code=603}}class lv extends Mb{constructor(){super(...arguments),this.code=604}}class fv extends Nb{constructor(){super(...arguments),this.code=801}}class pv extends Mb{constructor(e,t){super(e),this.receipt=t,this.code=400}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{receipt:this.receipt})}}class mv extends Mb{constructor(e,t,r,n){super("Transaction has been reverted by the EVM"+(void 0===r?"":`:\n ${Mb.convertToString(r)}`)),this.reason=e,this.signature=t,this.receipt=r,this.data=n,this.code=402}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,signature:this.signature,receipt:this.receipt,data:this.data})}}class gv extends mv{constructor(e,t,r,n,i,s,o){super(e),this.reason=e,this.customErrorName=t,this.customErrorDecodedSignature=r,this.customErrorArguments=n,this.signature=i,this.receipt=s,this.data=o,this.code=438}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,customErrorName:this.customErrorName,customErrorDecodedSignature:this.customErrorDecodedSignature,customErrorArguments:this.customErrorArguments,signature:this.signature,receipt:this.receipt,data:this.data})}}class yv extends pv{constructor(e){super("Transaction has been reverted by the EVM"+(void 0===e?"":`:\n ${Mb.convertToString(e)}`),e),this.code=405}}class bv extends pv{constructor(){super("Raw transaction undefined"),this.code=407}}class vv extends pv{constructor(){super("Transaction not found"),this.code=430}}class wv extends Nb{constructor(e){super(e,"invalid transaction with invalid sender"),this.code=408}}class Av extends Nb{constructor(e){super(e,"invalid transaction with invalid receiver"),this.code=437}}class Ev extends Nb{constructor(){super("MissingCustomChainError","If tx.common is provided it must have tx.common.customChain"),this.code=410}}class xv extends Nb{constructor(){super("MissingCustomChainIdError","If tx.common is provided it must have tx.common.customChain and tx.common.customChain.chainId"),this.code=411}}class Iv extends Nb{constructor(e){super(JSON.stringify(e),"Chain Id doesnt match in tx.chainId tx.common.customChain.chainId"),this.code=412}}class _v extends Nb{constructor(e){super(JSON.stringify(e),"Chain doesnt match in tx.chain tx.common.basechain"),this.code=435}}class Sv extends Nb{constructor(e){super(JSON.stringify(e),"hardfork doesnt match in tx.hardfork tx.common.hardfork"),this.code=436}}class Pv extends Nb{constructor(){super("CommonOrChainAndHardforkError","Please provide the common object or the chain and hardfork property but not all together."),this.code=413}}class Ov extends Nb{constructor(e){var t,r;super("MissingChainOrHardforkError",`When specifying chain and hardfork, both values must be defined. Received "chain": ${null!==(t=e.chain)&&void 0!==t?t:"undefined"}, "hardfork": ${null!==(r=e.hardfork)&&void 0!==r?r:"undefined"}`),this.code=414}}class kv extends Mb{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions'),this.code=440}}class Tv extends Nb{constructor(e){var t,r,n,i;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(r=e.gasPrice)&&void 0!==r?r:"undefined"}, maxPriorityFeePerGas: ${null!==(n=e.maxPriorityFeePerGas)&&void 0!==n?n:"undefined"}, maxFeePerGas: ${null!==(i=e.maxFeePerGas)&&void 0!==i?i:"undefined"}`,'"gas" is missing'),this.code=415,this.cause=new kv}}class Cv extends Mb{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions, not both'),this.code=441}}class Mv extends Nb{constructor(e){var t,r,n,i;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(r=e.gasPrice)&&void 0!==r?r:"undefined"}, maxPriorityFeePerGas: ${null!==(n=e.maxPriorityFeePerGas)&&void 0!==n?n:"undefined"}, maxFeePerGas: ${null!==(i=e.maxFeePerGas)&&void 0!==i?i:"undefined"}`,"transaction must specify legacy or fee market gas properties, not both"),this.code=434,this.cause=new Cv}}class Rv extends Nb{constructor(e){var t,r;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(r=e.gasPrice)&&void 0!==r?r:"undefined"}`,"Gas or gasPrice is lower than 0"),this.code=416}}class Nv extends Nb{constructor(e){var t,r;super(`maxPriorityFeePerGas: ${null!==(t=e.maxPriorityFeePerGas)&&void 0!==t?t:"undefined"}, maxFeePerGas: ${null!==(r=e.maxFeePerGas)&&void 0!==r?r:"undefined"}`,"maxPriorityFeePerGas or maxFeePerGas is lower than 0"),this.code=417}}class Bv extends Nb{constructor(e){super(e,"eip-1559 transactions don't support gasPrice"),this.code=418}}class Lv extends Nb{constructor(e){var t,r;super(`maxPriorityFeePerGas: ${null!==(t=e.maxPriorityFeePerGas)&&void 0!==t?t:"undefined"}, maxFeePerGas: ${null!==(r=e.maxFeePerGas)&&void 0!==r?r:"undefined"}`,"pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas"),this.code=419}}class jv extends Nb{constructor(e){super(e,"invalid transaction object"),this.code=420}}class Dv extends Nb{constructor(e){var t,r;super(`nonce: ${null!==(t=e.nonce)&&void 0!==t?t:"undefined"}, chainId: ${null!==(r=e.chainId)&&void 0!==r?r:"undefined"}`,"Nonce or chainId is lower than 0"),this.code=421}}class Fv extends Nb{constructor(){super("UnableToPopulateNonceError","unable to populate nonce, no from address available"),this.code=422}}class Uv extends Nb{constructor(){super("Eip1559NotSupportedError","Network doesn't support eip-1559"),this.code=423}}class qv extends Nb{constructor(e){super(e,"unsupported transaction type"),this.code=424}}class Hv extends Nb{constructor(e){var t,r;super(`data: ${null!==(t=e.data)&&void 0!==t?t:"undefined"}, input: ${null!==(r=e.input)&&void 0!==r?r:"undefined"}`,'You can\'t have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.'),this.code=425}}class zv extends Mb{constructor(e){super(`The connected Ethereum Node did not respond within ${e.numberOfSeconds} seconds, please make sure your transaction was properly sent and you are connected to a healthy Node. Be aware that transaction might still be pending or mined!\n\tTransaction Hash: ${e.transactionHash?e.transactionHash.toString():"not available"}`),this.code=431}}function $v(e){return`Please make sure your transaction was properly sent and there are no previous pending transaction for the same account. However, be aware that it might still be mined!\n\tTransaction Hash: ${e?e.toString():"not available"}`}class Gv extends Mb{constructor(e){super(`Transaction was not mined within ${e.numberOfSeconds} seconds. ${$v(e.transactionHash)}`),this.code=426}}class Vv extends Mb{constructor(e){super(`Transaction started at ${e.starterBlockNumber} but was not mined within ${e.numberOfBlocks} blocks. ${$v(e.transactionHash)}`),this.code=432}}class Kv extends Nb{constructor(e){var t,r;super(`receipt: ${JSON.stringify(e.receipt)}, blockHash: ${null===(t=e.blockHash)||void 0===t?void 0:t.toString()}, transactionHash: ${null===(r=e.transactionHash)||void 0===r?void 0:r.toString()}`,"Receipt missing or blockHash null"),this.code=427}}class Wv extends Nb{constructor(e){super(`receipt: ${JSON.stringify(e.receipt)}`,"Receipt missing block number"),this.code=428}}class Qv extends Mb{constructor(e){super(`Invalid signature. "${e}"`),this.code=433}}class Zv extends Nb{constructor(){super("LocalWalletNotAvailableError","Attempted to index account in local wallet, but no wallet is available"),this.code=429}}class Jv extends Mb{constructor(e,t){const r=[];e.forEach((e=>r.push(e.keyword))),super(`The following properties are invalid for the transaction type ${t}: ${r.join(", ")}`),this.code=439}}class Yv extends Nb{constructor(e){super(e,"can not parse as byte data"),this.code=1002}}class Xv extends Nb{constructor(e){super(e,"can not parse as number data"),this.code=1003}}class ew extends Nb{constructor(e){super(e,"invalid ethereum address"),this.code=1005}}class tw extends Nb{constructor(e){super(e,"not a valid string"),this.code=1001}}class rw extends Nb{constructor(e){super(e,"invalid unit"),this.code=1004}}class nw extends Nb{constructor(e){super(e,"not a valid unit. Must be a positive integer"),this.code=1015}}class iw extends Nb{constructor(e){super(e,"can not be converted to hex"),this.code=1006}}class sw extends Nb{constructor(e){super(e,"value greater than the nibble width"),this.code=1014}}class ow extends Nb{constructor(e){super(e,"not a valid boolean."),this.code=1008}}class aw extends Nb{constructor(e){super(e,"not a valid unsigned integer."),this.code=1009}}class cw extends Nb{constructor(e){super(e,"invalid size given."),this.code=1010}}class uw extends Nb{constructor(e){super(e,"value is larger than size."),this.code=1011}}class dw extends Nb{constructor(e){super(e,"invalid string given"),this.code=1012}}const hw=e=>(e=>!(Array.isArray(e)||"2.0"!==e.jsonrpc||!e||void 0!==e.result&&null!==e.result||!("error"in e)||"number"!=typeof e.id&&"string"!=typeof e.id))(e)?e.error.message:"";class lw extends Mb{constructor(e,t,r,n){var i;let s;super(null!=t?t:`Returned error: ${Array.isArray(e)?e.map((e=>hw(e))).join(","):hw(e)}`),this.code=100,t||(this.data=Array.isArray(e)?e.map((e=>{var t;return null===(t=e.error)||void 0===t?void 0:t.data})):null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.data),this.statusCode=n,this.request=r,"error"in e?s=e.error:e instanceof Array&&(s=e.filter((e=>e.error)).map((e=>e.error))),Array.isArray(s)&&s.length>0?this.cause=new Rb(s):this.cause=s}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{data:this.data,request:this.request,statusCode:this.statusCode})}}class fw extends lw{constructor(e,t){let r;super(e,void 0,t),this.code=101,"error"in e?r=e.error:e instanceof Array&&(r=e.map((e=>e.error))),Array.isArray(r)?this.cause=new Rb(r):this.cause=r}}class pw extends Mb{constructor(e,t){super(`Web3Config hardfork doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=1101}}class mw extends Mb{constructor(e,t){super(`Web3Config chain doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=1101}}const gw="An Rpc error has occured with a code of *code*",yw={[wb]:{message:"Parse error",description:"Invalid JSON"},[Ab]:{message:"Invalid request",description:"JSON is not a valid request object\t"},[Eb]:{message:"Method not found",description:"Method does not exist\t"},[xb]:{message:"Invalid params",description:"Invalid method parameters"},[Ib]:{message:"Internal error",description:"Internal JSON-RPC error"},[_b]:{message:"Invalid input",description:"Missing or invalid parameters"},[Sb]:{message:"Resource not found",description:"Requested resource not found"},[Pb]:{message:"Resource unavailable",description:"Requested resource not available"},[Ob]:{message:"Transaction rejected",description:"Transaction creation failed"},[kb]:{message:"Method not supported",description:"Method is not implemented"},[Tb]:{message:"Limit exceeded",description:"Request exceeds defined limit"},[Cb]:{message:"JSON-RPC version not supported",description:"Version of JSON-RPC protocol is not supported"},[mb]:{name:"User Rejected Request",message:"The user rejected the request."},[gb]:{name:"Unauthorized",message:"The requested method and/or account has not been authorized by the user."},[yb]:{name:"Unsupported Method",message:"The Provider does not support the requested method."},[bb]:{name:"Disconnected",message:"The Provider is disconnected from all chains."},[vb]:{name:"Chain Disconnected",message:"The Provider is not connected to the requested chain."},"0-999":{name:"",message:"Not used."},1e3:{name:"Normal Closure",message:"The connection successfully completed the purpose for which it was created."},1001:{name:"Going Away",message:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{name:"Protocol error",message:"The endpoint is terminating the connection due to a protocol error."},1003:{name:"Unsupported Data",message:"The connection is being terminated because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)"},1004:{name:"Reserved",message:"Reserved. A meaning might be defined in the future."},1005:{name:"No Status Rcvd",message:"Reserved. Indicates that no status code was provided even though one was expected."},1006:{name:"Abnormal Closure",message:"Reserved. Indicates that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{name:"Invalid frame payload data",message:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{name:"Policy Violation",message:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{name:"Message Too Big",message:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{name:"Mandatory Ext.",message:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{name:"Internal Error",message:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{name:"Service Restart",message:"The server is terminating the connection because it is restarting."},1013:{name:"Try Again Later",message:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{name:"Bad Gateway",message:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{name:"TLS handshake",message:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},"1016-2999":{name:"",message:"For definition by future revisions of the WebSocket Protocol specification, and for definition by extension specifications."},"3000-3999":{name:"",message:"For use by libraries, frameworks, and applications. These status codes are registered directly with IANA. The interpretation of these codes is undefined by the WebSocket protocol."},"4000-4999":{name:"",message:"For private use, and thus can't be registered. Such codes can be used by prior agreements between WebSocket applications. The interpretation of these codes is undefined by the WebSocket protocol."}};class bw extends Mb{constructor(e,t){super(null!=t?t:gw.replace("*code*",e.error.code.toString())),this.code=e.error.code,this.id=e.id,this.jsonrpc=e.jsonrpc,this.jsonRpcError=e.error}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{error:this.jsonRpcError,id:this.id,jsonRpc:this.jsonrpc})}}class vw extends Mb{constructor(e,t){var r,n,i,s;if(e)if(null===(r=yw[e])||void 0===r?void 0:r.message)super(yw[e].message);else{const t=Object.keys(yw).find((t=>"string"==typeof t&&e>=parseInt(t.split("-")[0],10)&&e<=parseInt(t.split("-")[1],10)));super(null!==(i=null===(n=yw[null!=t?t:""])||void 0===n?void 0:n.message)&&void 0!==i?i:gw.replace("*code*",null!==(s=null==e?void 0:e.toString())&&void 0!==s?s:'""'))}else super();this.code=e,this.data=t}}const ww=new Map;ww.set(wb,{error:class extends bw{constructor(e){super(e,yw[-32700].message),this.code=wb}}}),ww.set(Ab,{error:class extends bw{constructor(e){super(e,yw[-32600].message),this.code=Ab}}}),ww.set(Eb,{error:class extends bw{constructor(e){super(e,yw[-32601].message),this.code=Eb}}}),ww.set(xb,{error:class extends bw{constructor(e){super(e,yw[-32602].message),this.code=xb}}}),ww.set(Ib,{error:class extends bw{constructor(e){super(e,yw[-32603].message),this.code=Ib}}}),ww.set(_b,{error:class extends bw{constructor(e){super(e,yw[-32e3].message),this.code=_b}}}),ww.set(kb,{error:class extends bw{constructor(e){super(e,yw[-32004].message),this.code=kb}}}),ww.set(Pb,{error:class extends bw{constructor(e){super(e,yw[-32002].message),this.code=Pb}}}),ww.set(Ob,{error:class extends bw{constructor(e){super(e,yw[-32003].message),this.code=Ob}}}),ww.set(Sb,{error:class extends bw{constructor(e){super(e,yw[-32001].message),this.code=Sb}}}),ww.set(Cb,{error:class extends bw{constructor(e){super(e,yw[-32006].message),this.code=Cb}}}),ww.set(Tb,{error:class extends bw{constructor(e){super(e,yw[-32005].message),this.code=Tb}}});class Aw extends Mb{constructor(e){super(`Format for the type ${e} is unsupported`),this.type=e,this.code=1200}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}function Ew(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function xw(e,...t){if(!((r=e)instanceof Uint8Array||null!=r&&"object"==typeof r&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Iw(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Ew(e.outputLen),Ew(e.blockLen)}function _w(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Sw(e,t){xw(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const Pw={number:Ew,bool:function(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)},bytes:xw,hash:Iw,exists:_w,output:Sw},Ow=BigInt(2**32-1),kw=BigInt(32);function Tw(e,t=!1){return t?{h:Number(e&Ow),l:Number(e>>kw&Ow)}:{h:0|Number(e>>kw&Ow),l:0|Number(e&Ow)}}function Cw(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=Tw(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}const Mw=(e,t,r)=>e<<r|t>>>32-r,Rw=(e,t,r)=>t<<r|e>>>32-r,Nw=(e,t,r)=>t<<r-32|e>>>64-r,Bw=(e,t,r)=>e<<r-32|t>>>64-r,Lw={fromBig:Tw,split:Cw,toBig:(e,t)=>BigInt(e>>>0)<<kw|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:Mw,rotlSL:Rw,rotlBH:Nw,rotlBL:Bw,add:function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},jw=Lw,Dw="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Fw=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Uw=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),qw=(e,t)=>e<<32-t|e>>>t,Hw=(e,t)=>e<<t|e>>>32-t>>>0,zw=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function $w(e){for(let r=0;r<e.length;r++)e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function Gw(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function Vw(e){return"string"==typeof e&&(e=Gw(e)),xw(e),e}function Kw(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];xw(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}class Ww{clone(){return this._cloneInto()}}const Qw={}.toString;function Zw(e,t){if(void 0!==t&&"[object Object]"!==Qw.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)}function Jw(e){const t=t=>e().update(Vw(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Yw(e=32){if(Dw&&"function"==typeof Dw.getRandomValues)return Dw.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const Xw=[],eA=[],tA=[],rA=BigInt(0),nA=BigInt(1),iA=BigInt(2),sA=BigInt(7),oA=BigInt(256),aA=BigInt(113);for(let e=0,t=nA,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],Xw.push(2*(5*n+r)),eA.push((e+1)*(e+2)/2%64);let i=rA;for(let e=0;e<7;e++)t=(t<<nA^(t>>sA)*aA)%oA,t&iA&&(i^=nA<<(nA<<BigInt(e))-nA);tA.push(i)}const[cA,uA]=Cw(tA,!0),dA=(e,t,r)=>r>32?Nw(e,t,r):Mw(e,t,r),hA=(e,t,r)=>r>32?Bw(e,t,r):Rw(e,t,r);class lA extends Ww{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ew(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Fw(this.state)}keccak(){zw||$w(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=dA(s,o,1)^r[n],c=hA(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=eA[r],s=dA(t,i,n),o=hA(t,i,n),a=Xw[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=cA[n],e[1]^=uA[n]}r.fill(0)}(this.state32,this.rounds),zw||$w(this.state32),this.posOut=0,this.pos=0}update(e){_w(this);const{blockLen:t,state:r}=this,n=(e=Vw(e)).length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){_w(this,!1),xw(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ew(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Sw(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new lA(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const fA=(e,t,r)=>Jw((()=>new lA(t,e,r))),pA=fA(1,144,28),mA=fA(1,136,32),gA=fA(1,104,48),yA=fA(1,72,64),bA=(Pw.bool,Pw.bytes);function vA(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)}function wA(e){return t=>(Pw.bytes(t),e(t))}(()=>{const e="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,t="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);t&&!e&&t("crypto")})(),wA(pA);const AA=(()=>{const e=wA(mA);return e.create=mA.create,e})();var EA,xA;wA(gA),wA(yA),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(EA||(EA={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(xA||(xA={}));const IA=EA.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_A=e=>{switch(typeof e){case"undefined":return IA.undefined;case"string":return IA.string;case"number":return isNaN(e)?IA.nan:IA.number;case"boolean":return IA.boolean;case"function":return IA.function;case"bigint":return IA.bigint;case"symbol":return IA.symbol;case"object":return Array.isArray(e)?IA.array:null===e?IA.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?IA.promise:"undefined"!=typeof Map&&e instanceof Map?IA.map:"undefined"!=typeof Set&&e instanceof Set?IA.set:"undefined"!=typeof Date&&e instanceof Date?IA.date:IA.object;default:return IA.unknown}},SA=EA.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class PA extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof PA))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,EA.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}PA.create=e=>new PA(e);const OA=(e,t)=>{let r;switch(e.code){case SA.invalid_type:r=e.received===IA.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case SA.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,EA.jsonStringifyReplacer)}`;break;case SA.unrecognized_keys:r=`Unrecognized key(s) in object: ${EA.joinValues(e.keys,", ")}`;break;case SA.invalid_union:r="Invalid input";break;case SA.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${EA.joinValues(e.options)}`;break;case SA.invalid_enum_value:r=`Invalid enum value. Expected ${EA.joinValues(e.options)}, received '${e.received}'`;break;case SA.invalid_arguments:r="Invalid function arguments";break;case SA.invalid_return_type:r="Invalid function return type";break;case SA.invalid_date:r="Invalid date";break;case SA.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:EA.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case SA.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case SA.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case SA.custom:r="Invalid input";break;case SA.invalid_intersection_types:r="Intersection results could not be merged";break;case SA.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case SA.not_finite:r="Number must be finite";break;default:r=t.defaultError,EA.assertNever(e)}return{message:r}};let kA=OA;function TA(){return kA}const CA=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let a="";const c=n.filter((e=>!!e)).slice().reverse();for(const e of c)a=e(o,{data:t,defaultError:a}).message;return{...i,path:s,message:a}};function MA(e,t){const r=TA(),n=CA({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===OA?void 0:OA].filter((e=>!!e))});e.common.issues.push(n)}class RA{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return NA;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t){const t=await e.key,n=await e.value;r.push({key:t,value:n})}return RA.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return NA;if("aborted"===i.status)return NA;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const NA=Object.freeze({status:"aborted"}),BA=e=>({status:"dirty",value:e}),LA=e=>({status:"valid",value:e}),jA=e=>"aborted"===e.status,DA=e=>"dirty"===e.status,FA=e=>"valid"===e.status,UA=e=>"undefined"!=typeof Promise&&e instanceof Promise;function qA(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function HA(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}var zA,$A,GA;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(zA||(zA={}));class VA{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const KA=(e,t)=>{if(FA(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new PA(e.common.issues);return this._error=t,this._error}}};function WA(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var s,o;const{message:a}=e;return"invalid_enum_value"===t.code?{message:null!=a?a:i.defaultError}:void 0===i.data?{message:null!==(s=null!=a?a:n)&&void 0!==s?s:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(o=null!=a?a:r)&&void 0!==o?o:i.defaultError}},description:i}}class QA{get description(){return this._def.description}_getType(e){return _A(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:_A(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new RA,ctx:{common:e.parent.common,data:e.data,parsedType:_A(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(UA(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_A(e)},i=this._parseSync({data:e,path:n.path,parent:n});return KA(n,i)}"~validate"(e){var t,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_A(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:n});return FA(t)?{value:t.value}:{issues:n.common.issues}}catch(e){(null===(r=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===r?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then((e=>FA(e)?{value:e.value}:{issues:n.common.issues}))}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_A(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(UA(n)?n:Promise.resolve(n));return KA(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),s=()=>n.addIssue({code:SA.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new ZE({schema:this,typeName:ux.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return JE.create(this,this._def)}nullable(){return YE.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return CE.create(this)}promise(){return QE.create(this,this._def)}or(e){return NE.create([this,e],this._def)}and(e){return DE.create(this,e,this._def)}transform(e){return new ZE({...WA(this._def),schema:this,typeName:ux.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new XE({...WA(this._def),innerType:this,defaultValue:t,typeName:ux.ZodDefault})}brand(){return new nx({typeName:ux.ZodBranded,type:this,...WA(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ex({...WA(this._def),innerType:this,catchValue:t,typeName:ux.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ix.create(this,e)}readonly(){return sx.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ZA=/^c[^\s-]{8,}$/i,JA=/^[0-9a-z]+$/,YA=/^[0-9A-HJKMNP-TV-Z]{26}$/i,XA=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,eE=/^[a-z0-9_-]{21}$/i,tE=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rE=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,nE=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let iE;const sE=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oE=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,aE=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,cE=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,uE=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dE=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,hE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",lE=new RegExp(`^${hE}$`);function fE(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function pE(e){let t=`${hE}T${fE(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function mE(e,t){return!("v4"!==t&&t||!sE.test(e))||!("v6"!==t&&t||!aE.test(e))}function gE(e,t){if(!tE.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!("object"!=typeof i||null===i||!i.typ||!i.alg||t&&i.alg!==t)}catch(e){return!1}}function yE(e,t){return!("v4"!==t&&t||!oE.test(e))||!("v6"!==t&&t||!cE.test(e))}class bE extends QA{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==IA.string){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.string,received:t.parsedType}),NA}const t=new RA;let r;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),MA(r,{code:SA.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),MA(r,{code:SA.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("length"===n.kind){const i=e.data.length>n.value,s=e.data.length<n.value;(i||s)&&(r=this._getOrReturnCtx(e,r),i?MA(r,{code:SA.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):s&&MA(r,{code:SA.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),t.dirty())}else if("email"===n.kind)nE.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"email",code:SA.invalid_string,message:n.message}),t.dirty());else if("emoji"===n.kind)iE||(iE=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),iE.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"emoji",code:SA.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)XA.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"uuid",code:SA.invalid_string,message:n.message}),t.dirty());else if("nanoid"===n.kind)eE.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"nanoid",code:SA.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)ZA.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"cuid",code:SA.invalid_string,message:n.message}),t.dirty());else if("cuid2"===n.kind)JA.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"cuid2",code:SA.invalid_string,message:n.message}),t.dirty());else if("ulid"===n.kind)YA.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"ulid",code:SA.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch(i){r=this._getOrReturnCtx(e,r),MA(r,{validation:"url",code:SA.invalid_string,message:n.message}),t.dirty()}else"regex"===n.kind?(n.regex.lastIndex=0,n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"regex",code:SA.invalid_string,message:n.message}),t.dirty())):"trim"===n.kind?e.data=e.data.trim():"includes"===n.kind?e.data.includes(n.value,n.position)||(r=this._getOrReturnCtx(e,r),MA(r,{code:SA.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),t.dirty()):"toLowerCase"===n.kind?e.data=e.data.toLowerCase():"toUpperCase"===n.kind?e.data=e.data.toUpperCase():"startsWith"===n.kind?e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),MA(r,{code:SA.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty()):"endsWith"===n.kind?e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),MA(r,{code:SA.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty()):"datetime"===n.kind?pE(n).test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{code:SA.invalid_string,validation:"datetime",message:n.message}),t.dirty()):"date"===n.kind?lE.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{code:SA.invalid_string,validation:"date",message:n.message}),t.dirty()):"time"===n.kind?new RegExp(`^${fE(n)}$`).test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{code:SA.invalid_string,validation:"time",message:n.message}),t.dirty()):"duration"===n.kind?rE.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"duration",code:SA.invalid_string,message:n.message}),t.dirty()):"ip"===n.kind?mE(e.data,n.version)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"ip",code:SA.invalid_string,message:n.message}),t.dirty()):"jwt"===n.kind?gE(e.data,n.alg)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"jwt",code:SA.invalid_string,message:n.message}),t.dirty()):"cidr"===n.kind?yE(e.data,n.version)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"cidr",code:SA.invalid_string,message:n.message}),t.dirty()):"base64"===n.kind?uE.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"base64",code:SA.invalid_string,message:n.message}),t.dirty()):"base64url"===n.kind?dE.test(e.data)||(r=this._getOrReturnCtx(e,r),MA(r,{validation:"base64url",code:SA.invalid_string,message:n.message}),t.dirty()):EA.assertNever(n);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:SA.invalid_string,...zA.errToObj(r)})}_addCheck(e){return new bE({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...zA.errToObj(e)})}url(e){return this._addCheck({kind:"url",...zA.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...zA.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...zA.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...zA.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...zA.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...zA.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...zA.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...zA.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...zA.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...zA.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...zA.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...zA.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...zA.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...zA.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...zA.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...zA.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...zA.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...zA.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...zA.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...zA.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...zA.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...zA.errToObj(t)})}nonempty(e){return this.min(1,zA.errToObj(e))}trim(){return new bE({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new bE({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new bE({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function vE(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}bE.create=e=>{var t;return new bE({checks:[],typeName:ux.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...WA(e)})};class wE extends QA{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==IA.number){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.number,received:t.parsedType}),NA}let t;const r=new RA;for(const n of this._def.checks)"int"===n.kind?EA.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),MA(t,{code:SA.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),MA(t,{code:SA.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),MA(t,{code:SA.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==vE(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),MA(t,{code:SA.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),MA(t,{code:SA.not_finite,message:n.message}),r.dirty()):EA.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,zA.toString(t))}gt(e,t){return this.setLimit("min",e,!1,zA.toString(t))}lte(e,t){return this.setLimit("max",e,!0,zA.toString(t))}lt(e,t){return this.setLimit("max",e,!1,zA.toString(t))}setLimit(e,t,r,n){return new wE({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:zA.toString(n)}]})}_addCheck(e){return new wE({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:zA.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:zA.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:zA.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:zA.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:zA.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:zA.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:zA.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:zA.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:zA.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&EA.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}wE.create=e=>new wE({checks:[],typeName:ux.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...WA(e)});class AE extends QA{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==IA.bigint)return this._getInvalidInput(e);let t;const r=new RA;for(const n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),MA(t,{code:SA.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),MA(t,{code:SA.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),MA(t,{code:SA.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):EA.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.bigint,received:t.parsedType}),NA}gte(e,t){return this.setLimit("min",e,!0,zA.toString(t))}gt(e,t){return this.setLimit("min",e,!1,zA.toString(t))}lte(e,t){return this.setLimit("max",e,!0,zA.toString(t))}lt(e,t){return this.setLimit("max",e,!1,zA.toString(t))}setLimit(e,t,r,n){return new AE({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:zA.toString(n)}]})}_addCheck(e){return new AE({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:zA.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:zA.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:zA.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:zA.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:zA.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}AE.create=e=>{var t;return new AE({checks:[],typeName:ux.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...WA(e)})};class EE extends QA{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==IA.boolean){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.boolean,received:t.parsedType}),NA}return LA(e.data)}}EE.create=e=>new EE({typeName:ux.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...WA(e)});class xE extends QA{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==IA.date){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.date,received:t.parsedType}),NA}if(isNaN(e.data.getTime()))return MA(this._getOrReturnCtx(e),{code:SA.invalid_date}),NA;const t=new RA;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),MA(r,{code:SA.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),MA(r,{code:SA.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):EA.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new xE({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:zA.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:zA.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}xE.create=e=>new xE({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:ux.ZodDate,...WA(e)});class IE extends QA{_parse(e){if(this._getType(e)!==IA.symbol){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.symbol,received:t.parsedType}),NA}return LA(e.data)}}IE.create=e=>new IE({typeName:ux.ZodSymbol,...WA(e)});class _E extends QA{_parse(e){if(this._getType(e)!==IA.undefined){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.undefined,received:t.parsedType}),NA}return LA(e.data)}}_E.create=e=>new _E({typeName:ux.ZodUndefined,...WA(e)});class SE extends QA{_parse(e){if(this._getType(e)!==IA.null){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.null,received:t.parsedType}),NA}return LA(e.data)}}SE.create=e=>new SE({typeName:ux.ZodNull,...WA(e)});class PE extends QA{constructor(){super(...arguments),this._any=!0}_parse(e){return LA(e.data)}}PE.create=e=>new PE({typeName:ux.ZodAny,...WA(e)});class OE extends QA{constructor(){super(...arguments),this._unknown=!0}_parse(e){return LA(e.data)}}OE.create=e=>new OE({typeName:ux.ZodUnknown,...WA(e)});class kE extends QA{_parse(e){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.never,received:t.parsedType}),NA}}kE.create=e=>new kE({typeName:ux.ZodNever,...WA(e)});class TE extends QA{_parse(e){if(this._getType(e)!==IA.undefined){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.void,received:t.parsedType}),NA}return LA(e.data)}}TE.create=e=>new TE({typeName:ux.ZodVoid,...WA(e)});class CE extends QA{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==IA.array)return MA(t,{code:SA.invalid_type,expected:IA.array,received:t.parsedType}),NA;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(MA(t,{code:e?SA.too_big:SA.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(MA(t,{code:SA.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(MA(t,{code:SA.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new VA(t,e,t.path,r))))).then((e=>RA.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new VA(t,e,t.path,r))));return RA.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new CE({...this._def,minLength:{value:e,message:zA.toString(t)}})}max(e,t){return new CE({...this._def,maxLength:{value:e,message:zA.toString(t)}})}length(e,t){return new CE({...this._def,exactLength:{value:e,message:zA.toString(t)}})}nonempty(e){return this.min(1,e)}}function ME(e){if(e instanceof RE){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=JE.create(ME(n))}return new RE({...e._def,shape:()=>t})}return e instanceof CE?new CE({...e._def,type:ME(e.element)}):e instanceof JE?JE.create(ME(e.unwrap())):e instanceof YE?YE.create(ME(e.unwrap())):e instanceof FE?FE.create(e.items.map((e=>ME(e)))):e}CE.create=(e,t)=>new CE({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ux.ZodArray,...WA(t)});class RE extends QA{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=EA.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==IA.object){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.object,received:t.parsedType}),NA}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof kE&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||s.push(e);const o=[];for(const e of i){const t=n[e],i=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new VA(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof kE){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(MA(r,{code:SA.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new VA(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e})).then((e=>RA.mergeObjectSync(t,e))):RA.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return zA.errToObj,new RE({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,o;const a=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=zA.errToObj(e).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new RE({...this._def,unknownKeys:"strip"})}passthrough(){return new RE({...this._def,unknownKeys:"passthrough"})}extend(e){return new RE({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new RE({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ux.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new RE({...this._def,catchall:e})}pick(e){const t={};return EA.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new RE({...this._def,shape:()=>t})}omit(e){const t={};return EA.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new RE({...this._def,shape:()=>t})}deepPartial(){return ME(this)}partial(e){const t={};return EA.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new RE({...this._def,shape:()=>t})}required(e){const t={};return EA.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof JE;)e=e._def.innerType;t[r]=e}})),new RE({...this._def,shape:()=>t})}keyof(){return VE(EA.objectKeys(this.shape))}}RE.create=(e,t)=>new RE({shape:()=>e,unknownKeys:"strip",catchall:kE.create(),typeName:ux.ZodObject,...WA(t)}),RE.strictCreate=(e,t)=>new RE({shape:()=>e,unknownKeys:"strict",catchall:kE.create(),typeName:ux.ZodObject,...WA(t)}),RE.lazycreate=(e,t)=>new RE({shape:e,unknownKeys:"strip",catchall:kE.create(),typeName:ux.ZodObject,...WA(t)});class NE extends QA{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new PA(e.ctx.common.issues)));return MA(t,{code:SA.invalid_union,unionErrors:r}),NA}));{let e;const n=[];for(const i of r){const r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new PA(e)));return MA(t,{code:SA.invalid_union,unionErrors:i}),NA}}get options(){return this._def.options}}NE.create=(e,t)=>new NE({options:e,typeName:ux.ZodUnion,...WA(t)});const BE=e=>e instanceof $E?BE(e.schema):e instanceof ZE?BE(e.innerType()):e instanceof GE?[e.value]:e instanceof KE?e.options:e instanceof WE?EA.objectValues(e.enum):e instanceof XE?BE(e._def.innerType):e instanceof _E?[void 0]:e instanceof SE?[null]:e instanceof JE?[void 0,...BE(e.unwrap())]:e instanceof YE?[null,...BE(e.unwrap())]:e instanceof nx||e instanceof sx?BE(e.unwrap()):e instanceof ex?BE(e._def.innerType):[];class LE extends QA{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==IA.object)return MA(t,{code:SA.invalid_type,expected:IA.object,received:t.parsedType}),NA;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(MA(t,{code:SA.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),NA)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const r of t){const t=BE(r.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(n.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new LE({typeName:ux.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...WA(r)})}}function jE(e,t){const r=_A(e),n=_A(t);if(e===t)return{valid:!0,data:e};if(r===IA.object&&n===IA.object){const r=EA.objectKeys(t),n=EA.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of n){const n=jE(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===IA.array&&n===IA.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=jE(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===IA.date&&n===IA.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class DE extends QA{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(jA(e)||jA(n))return NA;const i=jE(e.value,n.value);return i.valid?((DA(e)||DA(n))&&t.dirty(),{status:t.value,value:i.data}):(MA(r,{code:SA.invalid_intersection_types}),NA)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}DE.create=(e,t,r)=>new DE({left:e,right:t,typeName:ux.ZodIntersection,...WA(r)});class FE extends QA{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==IA.array)return MA(r,{code:SA.invalid_type,expected:IA.array,received:r.parsedType}),NA;if(r.data.length<this._def.items.length)return MA(r,{code:SA.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),NA;!this._def.rest&&r.data.length>this._def.items.length&&(MA(r,{code:SA.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new VA(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>RA.mergeArray(t,e))):RA.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new FE({...this._def,rest:e})}}FE.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new FE({items:e,typeName:ux.ZodTuple,rest:null,...WA(t)})};class UE extends QA{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==IA.object)return MA(r,{code:SA.invalid_type,expected:IA.object,received:r.parsedType}),NA;const n=[],i=this._def.keyType,s=this._def.valueType;for(const e in r.data)n.push({key:i._parse(new VA(r,e,r.path,e)),value:s._parse(new VA(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?RA.mergeObjectAsync(t,n):RA.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new UE(t instanceof QA?{keyType:e,valueType:t,typeName:ux.ZodRecord,...WA(r)}:{keyType:bE.create(),valueType:e,typeName:ux.ZodRecord,...WA(t)})}}class qE extends QA{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==IA.map)return MA(r,{code:SA.invalid_type,expected:IA.map,received:r.parsedType}),NA;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map((([e,t],s)=>({key:n._parse(new VA(r,e,r.path,[s,"key"])),value:i._parse(new VA(r,t,r.path,[s,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of s){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return NA;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of s){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return NA;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}qE.create=(e,t,r)=>new qE({valueType:t,keyType:e,typeName:ux.ZodMap,...WA(r)});class HE extends QA{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==IA.set)return MA(r,{code:SA.invalid_type,expected:IA.set,received:r.parsedType}),NA;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(MA(r,{code:SA.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(MA(r,{code:SA.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return NA;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const o=[...r.data.values()].map(((e,t)=>i._parse(new VA(r,e,r.path,t))));return r.common.async?Promise.all(o).then((e=>s(e))):s(o)}min(e,t){return new HE({...this._def,minSize:{value:e,message:zA.toString(t)}})}max(e,t){return new HE({...this._def,maxSize:{value:e,message:zA.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}HE.create=(e,t)=>new HE({valueType:e,minSize:null,maxSize:null,typeName:ux.ZodSet,...WA(t)});class zE extends QA{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==IA.function)return MA(t,{code:SA.invalid_type,expected:IA.function,received:t.parsedType}),NA;function r(e,r){return CA({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,TA(),OA].filter((e=>!!e)),issueData:{code:SA.invalid_arguments,argumentsError:r}})}function n(e,r){return CA({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,TA(),OA].filter((e=>!!e)),issueData:{code:SA.invalid_return_type,returnTypeError:r}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof QE){const e=this;return LA((async function(...t){const o=new PA([]),a=await e._def.args.parseAsync(t,i).catch((e=>{throw o.addIssue(r(t,e)),o})),c=await Reflect.apply(s,this,a),u=await e._def.returns._def.type.parseAsync(c,i).catch((e=>{throw o.addIssue(n(c,e)),o}));return u}))}{const e=this;return LA((function(...t){const o=e._def.args.safeParse(t,i);if(!o.success)throw new PA([r(t,o.error)]);const a=Reflect.apply(s,this,o.data),c=e._def.returns.safeParse(a,i);if(!c.success)throw new PA([n(a,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new zE({...this._def,args:FE.create(e).rest(OE.create())})}returns(e){return new zE({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new zE({args:e||FE.create([]).rest(OE.create()),returns:t||OE.create(),typeName:ux.ZodFunction,...WA(r)})}}class $E extends QA{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}$E.create=(e,t)=>new $E({getter:e,typeName:ux.ZodLazy,...WA(t)});class GE extends QA{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return MA(t,{received:t.data,code:SA.invalid_literal,expected:this._def.value}),NA}return{status:"valid",value:e.data}}get value(){return this._def.value}}function VE(e,t){return new KE({values:e,typeName:ux.ZodEnum,...WA(t)})}GE.create=(e,t)=>new GE({value:e,typeName:ux.ZodLiteral,...WA(t)});class KE extends QA{constructor(){super(...arguments),$A.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return MA(t,{expected:EA.joinValues(r),received:t.parsedType,code:SA.invalid_type}),NA}if(qA(this,$A,"f")||HA(this,$A,new Set(this._def.values),"f"),!qA(this,$A,"f").has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return MA(t,{received:t.data,code:SA.invalid_enum_value,options:r}),NA}return LA(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return KE.create(e,{...this._def,...t})}exclude(e,t=this._def){return KE.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}$A=new WeakMap,KE.create=VE;class WE extends QA{constructor(){super(...arguments),GA.set(this,void 0)}_parse(e){const t=EA.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==IA.string&&r.parsedType!==IA.number){const e=EA.objectValues(t);return MA(r,{expected:EA.joinValues(e),received:r.parsedType,code:SA.invalid_type}),NA}if(qA(this,GA,"f")||HA(this,GA,new Set(EA.getValidEnumValues(this._def.values)),"f"),!qA(this,GA,"f").has(e.data)){const e=EA.objectValues(t);return MA(r,{received:r.data,code:SA.invalid_enum_value,options:e}),NA}return LA(e.data)}get enum(){return this._def.values}}GA=new WeakMap,WE.create=(e,t)=>new WE({values:e,typeName:ux.ZodNativeEnum,...WA(t)});class QE extends QA{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==IA.promise&&!1===t.common.async)return MA(t,{code:SA.invalid_type,expected:IA.promise,received:t.parsedType}),NA;const r=t.parsedType===IA.promise?t.data:Promise.resolve(t.data);return LA(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}QE.create=(e,t)=>new QE({type:e,typeName:ux.ZodPromise,...WA(t)});class ZE extends QA{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ux.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{MA(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return NA;const n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?NA:"dirty"===n.status||"dirty"===t.value?BA(n.value):n}));{if("aborted"===t.value)return NA;const n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?NA:"dirty"===n.status||"dirty"===t.value?BA(n.value):n}}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?NA:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?NA:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!FA(e))return e;const s=n.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>FA(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}EA.assertNever(n)}}ZE.create=(e,t,r)=>new ZE({schema:e,typeName:ux.ZodEffects,effect:t,...WA(r)}),ZE.createWithPreprocess=(e,t,r)=>new ZE({schema:t,effect:{type:"preprocess",transform:e},typeName:ux.ZodEffects,...WA(r)});class JE extends QA{_parse(e){return this._getType(e)===IA.undefined?LA(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}JE.create=(e,t)=>new JE({innerType:e,typeName:ux.ZodOptional,...WA(t)});class YE extends QA{_parse(e){return this._getType(e)===IA.null?LA(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}YE.create=(e,t)=>new YE({innerType:e,typeName:ux.ZodNullable,...WA(t)});class XE extends QA{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===IA.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}XE.create=(e,t)=>new XE({innerType:e,typeName:ux.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...WA(t)});class ex extends QA{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return UA(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new PA(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new PA(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ex.create=(e,t)=>new ex({innerType:e,typeName:ux.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...WA(t)});class tx extends QA{_parse(e){if(this._getType(e)!==IA.nan){const t=this._getOrReturnCtx(e);return MA(t,{code:SA.invalid_type,expected:IA.nan,received:t.parsedType}),NA}return{status:"valid",value:e.data}}}tx.create=e=>new tx({typeName:ux.ZodNaN,...WA(e)});const rx=Symbol("zod_brand");class nx extends QA{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class ix extends QA{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?NA:"dirty"===e.status?(t.dirty(),BA(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?NA:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new ix({in:e,out:t,typeName:ux.ZodPipeline})}}class sx extends QA{_parse(e){const t=this._def.innerType._parse(e),r=e=>(FA(e)&&(e.value=Object.freeze(e.value)),e);return UA(t)?t.then((e=>r(e))):r(t)}unwrap(){return this._def.innerType}}function ox(e,t){const r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function ax(e,t={},r){return e?PE.create().superRefine(((n,i)=>{var s,o;const a=e(n);if(a instanceof Promise)return a.then((e=>{var s,o;if(!e){const e=ox(t,n),a=null===(o=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===o||o;i.addIssue({code:"custom",...e,fatal:a})}}));if(!a){const e=ox(t,n),a=null===(o=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===o||o;i.addIssue({code:"custom",...e,fatal:a})}})):PE.create()}sx.create=(e,t)=>new sx({innerType:e,typeName:ux.ZodReadonly,...WA(t)});const cx={object:RE.lazycreate};var ux;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(ux||(ux={}));const dx=bE.create,hx=wE.create,lx=tx.create,fx=AE.create,px=EE.create,mx=xE.create,gx=IE.create,yx=_E.create,bx=SE.create,vx=PE.create,wx=OE.create,Ax=kE.create,Ex=TE.create,xx=CE.create,Ix=RE.create,_x=RE.strictCreate,Sx=NE.create,Px=LE.create,Ox=DE.create,kx=FE.create,Tx=UE.create,Cx=qE.create,Mx=HE.create,Rx=zE.create,Nx=$E.create,Bx=GE.create,Lx=KE.create,jx=WE.create,Dx=QE.create,Fx=ZE.create,Ux=JE.create,qx=YE.create,Hx=ZE.createWithPreprocess,zx=ix.create,$x={string:e=>bE.create({...e,coerce:!0}),number:e=>wE.create({...e,coerce:!0}),boolean:e=>EE.create({...e,coerce:!0}),bigint:e=>AE.create({...e,coerce:!0}),date:e=>xE.create({...e,coerce:!0})},Gx=NA;var Vx=Object.freeze({__proto__:null,defaultErrorMap:OA,setErrorMap:function(e){kA=e},getErrorMap:TA,makeIssue:CA,EMPTY_PATH:[],addIssueToContext:MA,ParseStatus:RA,INVALID:NA,DIRTY:BA,OK:LA,isAborted:jA,isDirty:DA,isValid:FA,isAsync:UA,get util(){return EA},get objectUtil(){return xA},ZodParsedType:IA,getParsedType:_A,ZodType:QA,datetimeRegex:pE,ZodString:bE,ZodNumber:wE,ZodBigInt:AE,ZodBoolean:EE,ZodDate:xE,ZodSymbol:IE,ZodUndefined:_E,ZodNull:SE,ZodAny:PE,ZodUnknown:OE,ZodNever:kE,ZodVoid:TE,ZodArray:CE,ZodObject:RE,ZodUnion:NE,ZodDiscriminatedUnion:LE,ZodIntersection:DE,ZodTuple:FE,ZodRecord:UE,ZodMap:qE,ZodSet:HE,ZodFunction:zE,ZodLazy:$E,ZodLiteral:GE,ZodEnum:KE,ZodNativeEnum:WE,ZodPromise:QE,ZodEffects:ZE,ZodTransformer:ZE,ZodOptional:JE,ZodNullable:YE,ZodDefault:XE,ZodCatch:ex,ZodNaN:tx,BRAND:rx,ZodBranded:nx,ZodPipeline:ix,ZodReadonly:sx,custom:ax,Schema:QA,ZodSchema:QA,late:cx,get ZodFirstPartyTypeKind(){return ux},coerce:$x,any:vx,array:xx,bigint:fx,boolean:px,date:mx,discriminatedUnion:Px,effect:Fx,enum:Lx,function:Rx,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>ax((t=>t instanceof e),t),intersection:Ox,lazy:Nx,literal:Bx,map:Cx,nan:lx,nativeEnum:jx,never:Ax,null:bx,nullable:qx,number:hx,object:Ix,oboolean:()=>px().optional(),onumber:()=>hx().optional(),optional:Ux,ostring:()=>dx().optional(),pipeline:zx,preprocess:Hx,promise:Dx,record:Tx,set:Mx,strictObject:_x,string:dx,symbol:gx,transformer:Fx,tuple:kx,undefined:yx,union:Sx,unknown:wx,void:Ex,NEVER:Gx,ZodIssueCode:SA,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:PA});const Kx=e=>e.message?e.message:"unspecified error";class Wx extends Mb{constructor(e){super(),this.code=1100,this.errors=e,super.message=`Web3 validator found ${e.length} error[s]:\n${this._compileErrors().join("\n")}`}_compileErrors(){return this.errors.map(Kx)}}const Qx=["bool","int","uint","bytes","string","address","tuple"],Zx=e=>"object"==typeof e&&"type"in e&&"name"in e,Jx=e=>"string"==typeof e,Yx=e=>"string"==typeof e&&/^((-)?0x[0-9a-f]+|(0x))$/i.test(e);function Xx(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||void 0!==t&&t>0&&e.length!==2+2*t)}const eI=e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e&&/^((-0x|0x|-)?[0-9a-f]+|(0x))$/i.test(e);function tI(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return e.startsWith("0x")}const rI=function(e){for(const[t,r]of Object.entries(e))if(void 0!==r&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString()}`)},nI=["hex","number","blockNumber","blockNumberOrTag","filter","bloom"],iI=e=>{let t,r=e.replace(/ /,""),n=!1,i=[];if(e.includes("[")&&(r=r.slice(0,r.indexOf("[")),i=[...e.matchAll(/(?:\[(\d*)\])/g)].map((e=>parseInt(e[1],10))).map((e=>Number.isNaN(e)?-1:e)),n=i.length>0),Qx.includes(r))return{baseType:r,isArray:n,baseTypeSize:t,arraySizes:i};if(r.startsWith("int"))t=parseInt(r.substring(3),10),r="int";else if(r.startsWith("uint"))t=parseInt(e.substring(4),10),r="uint";else{if(!r.startsWith("bytes"))return{baseType:void 0,isArray:!1,baseTypeSize:void 0,arraySizes:i};t=parseInt(r.substring(5),10),r="bytes"}return{baseType:r,isArray:n,baseTypeSize:t,arraySizes:i}},sI=(e,t={})=>{if(Object.keys(t).includes("type"))throw new Wx([{keyword:"eth",message:'Either "eth" or "type" can be presented in schema',params:{eth:e},instancePath:"",schemaPath:""}]);const{baseType:r,baseTypeSize:n}=iI(e);if(!r&&!nI.includes(e))throw new Wx([{keyword:"eth",message:`Eth data type "${e}" is not valid`,params:{eth:e},instancePath:"",schemaPath:""}]);if(r){if("tuple"===r)throw new Error('"tuple" type is not implemented directly.');return{format:`${r}${null!=n?n:""}`,required:!0}}return e?{format:e,required:!0}:{}},oI=(e,t="/0")=>{const r={type:"array",items:[],maxItems:e.length,minItems:e.length};for(const[n,i]of e.entries()){let e,s,o=[];Zx(i)?(e=i.type,s=i.name||`${t}/${n}`,o=i.components):"string"==typeof i?(e=i,s=`${t}/${n}`):Array.isArray(i)&&(i[0]&&"string"==typeof i[0]&&i[0].startsWith("tuple")&&!Array.isArray(i[0])&&i[1]&&Array.isArray(i[1])?(e=i[0],s=`${t}/${n}`,o=i[1]):(e="tuple",s=`${t}/${n}`,o=i));const{baseType:a,isArray:c,arraySizes:u}=iI(e);let d,h=r;for(let e=u.length-1;e>0;e-=1)d={type:"array",$id:s,items:[],maxItems:u[e],minItems:u[e]},u[e]<0&&(delete d.maxItems,delete d.minItems),Array.isArray(h.items)?0===h.items.length?h.items=[d]:h.items.push(d):h.items=[h.items,d],h=d;if("tuple"!==a||c)if("tuple"===a&&c){const e=u[0],t=Object.assign({type:"array",$id:s,items:oI(o,s)},e>=0&&{minItems:e,maxItems:e});h.items.push(t)}else if(c){const t=u[0],r=Object.assign({type:"array",$id:s,items:sI(e)},t>=0&&{minItems:t,maxItems:t});h.items.push(r)}else Array.isArray(h.items),h.items.push(Object.assign({$id:s},sI(e)));else{const e=oI(o,s);e.$id=s,h.items.push(e)}h=r}return r},aI=e=>oI(e),cI=(e,t)=>1===t?e:cI(e[0],t-1),uI=(e,t,r)=>{const n=[];for(const[i,s]of e.entries()){let e,o,a=[];Zx(s)?(e=s.type,o=s.name,a=s.components):"string"==typeof s?e=s:Array.isArray(s)&&(s[1]&&Array.isArray(s[1])?(e=s[0],a=s[1]):(e="tuple",a=s));const{baseType:c,isArray:u,arraySizes:d}=iI(e),h=Array.isArray(t)?t[i]:t[o];if("tuple"!==c||u)if("tuple"===c&&u){const e=[];for(const t of h)if(d.length>1){const n=cI(t,d.length-1),i=[];for(const e of n)i.push(uI(a,e,r));e.push(i)}else e.push(uI(a,t,r));n.push(e)}else n.push(h);else n.push(uI(a,h,r))}return(r=null!=r?r:[]).push(...n),r},dI=e=>{if(e>=48&&e<=57)return e-48;if(e>=65&&e<=70)return e-55;if(e>=97&&e<=102)return e-87;throw new Error(`Invalid code point: ${e}`)},hI=e=>{if(!Yx(e))throw new Error("Invalid hex string");const[t,r]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e],n=BigInt(r);return n>Number.MAX_SAFE_INTEGER?t?-n:n:n<Number.MIN_SAFE_INTEGER?n:t?-1*Number(n):Number(n)},lI=e=>{if(("number"==typeof e||"bigint"==typeof e)&&e<0)return`-0x${e.toString(16).slice(1)}`;if(("number"==typeof e||"bigint"==typeof e)&&e>=0)return`0x${e.toString(16)}`;if("string"==typeof e&&Yx(e)){const[t,r]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e];return`${t?"-":""}0x${r.split(/^(-)?0(x|X)/).slice(-1)[0].replace(/^0+/,"").toLowerCase()}`}if("string"==typeof e&&!Yx(e))return lI(BigInt(e));throw new Xv(e)},fI=(e,t,r="0")=>{if("string"==typeof e&&!Yx(e))return e.padStart(t,r);const n="string"==typeof e&&Yx(e)?e:lI(e),[i,s]=n.startsWith("-")?["-0x",n.slice(3)]:["0x",n.slice(2)];return`${i}${s.padStart(t,r)}`};function pI(e){let t="0x";for(const r of e){const e=r.toString(16);t+=1===e.length?`0${e}`:e}return t}const mI={zero:48,nine:57,A:65,F:70,a:97,f:102};function gI(e){return e>=mI.zero&&e<=mI.nine?e-mI.zero:e>=mI.A&&e<=mI.F?e-(mI.A-10):e>=mI.a&&e<=mI.f?e-(mI.a-10):void 0}function yI(e){let t=0;if(!e.startsWith("0")||"x"!==e[1]&&"X"!==e[1]||(t=2),e.length%2!=0)throw new Yv(`hex string has odd length: ${e}`);const r=(e.length-t)/2,n=new Uint8Array(r);for(let i=0,s=t;i<r;i+=1){const t=gI(e.charCodeAt(s++)),r=gI(e.charCodeAt(s++));if(void 0===t||void 0===r)throw new Yv(`Invalid byte sequence ("${e[s-2]}${e[s-1]}" in "${e}").`);n[i]=16*t+r}return n}function bI(e){var t;return e instanceof Uint8Array||"Uint8Array"!==(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)?e:Uint8Array.from(e)}const vI=e=>{var t,r;return e instanceof Uint8Array||"Uint8Array"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)||"Buffer"===(null===(r=null==e?void 0:e.constructor)||void 0===r?void 0:r.name)},wI=(e,t={abiType:"bytes"})=>{if("string"!=typeof e&&!Array.isArray(e)&&!vI(e))return!1;if("string"==typeof e&&Yx(e)&&e.startsWith("-"))return!1;if("string"==typeof e&&!Yx(e))return!1;let r;if("string"==typeof e){if(e.length%2!=0)return!1;r=yI(e)}else if(Array.isArray(e)){if(e.some((e=>e<0||e>255||!Number.isInteger(e))))return!1;r=new Uint8Array(e)}else r=e;if(null==t?void 0:t.abiType){const{baseTypeSize:e}=iI(t.abiType);return!e||r.length===e}return!(null==t?void 0:t.size)||r.length===(null==t?void 0:t.size)},AI=e=>{if(!/^(0x)?[0-9a-f]{40}$/i.test(e))return!1;const t=e.slice(2),r=Gw(t.toLowerCase()),n=pI(AA(bI(r))).slice(2);for(let e=0;e<40;e+=1)if(parseInt(n[e],16)>7&&t[e].toUpperCase()!==t[e]||parseInt(n[e],16)<=7&&t[e].toLowerCase()!==t[e])return!1;return!0},EI=(e,t=!0)=>{if("string"!=typeof e&&!vI(e))return!1;let r;return r=vI(e)?pI(e):"string"!=typeof e||Yx(e)||e.toLowerCase().startsWith("0x")?e:`0x${e}`,!!/^(0x)?[0-9a-f]{40}$/i.test(r)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(r)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(r))||!t||AI(r))},xI=(e,t)=>{if(t===BigInt(0))return BigInt(1);let r=e;for(let n=1;n<t;n+=1)r*=e;return r},II=(e,t={abiType:"uint"})=>{if(!["number","string","bigint"].includes(typeof e)||"string"==typeof e&&0===e.length)return!1;let r;if(null==t?void 0:t.abiType){const{baseTypeSize:e}=iI(t.abiType);e&&(r=e)}else t.bitSize&&(r=t.bitSize);const n=xI(BigInt(2),BigInt(null!=r?r:256))-BigInt(1);try{const t="string"==typeof e&&Yx(e)?BigInt(hI(e)):BigInt(e);return t>=0&&t<=n}catch(e){return!1}},_I=(e,t={abiType:"int"})=>{if(!["number","string","bigint"].includes(typeof e))return!1;if("number"==typeof e&&e>Number.MAX_SAFE_INTEGER)return!1;let r;if(null==t?void 0:t.abiType){const{baseTypeSize:e,baseType:n}=iI(t.abiType);if("int"!==n)return!1;e&&(r=e)}else t.bitSize&&(r=t.bitSize);const n=xI(BigInt(2),BigInt((null!=r?r:256)-1)),i=BigInt(-1)*xI(BigInt(2),BigInt((null!=r?r:256)-1));try{const t="string"==typeof e&&Yx(e)?BigInt(hI(e)):BigInt(e);return t>=i&&t<=n}catch(e){return!1}},SI=e=>!!_I(e)||!("string"!=typeof e||!/[0-9.]/.test(e)||e.indexOf(".")!==e.lastIndexOf("."))||"number"==typeof e,PI=e=>II(e),OI=e=>Object.values(ab).includes(e),kI=e=>OI(e)||PI(e),TI=e=>!("string"!=typeof e||!/^(0x)?[0-9a-f]{512}$/i.test(e)||!/^(0x)?[0-9a-f]{512}$/.test(e)&&!/^(0x)?[0-9A-F]{512}$/.test(e)),CI=(e,t)=>{if("string"==typeof t&&!Yx(t))return!1;if(!TI(e))return!1;const r="string"==typeof t?yI(t):t,n=pI(AA(r)).slice(2);for(let t=0;t<12;t+=4){const r=(parseInt(n.slice(t,t+2),16)<<8)+parseInt(n.slice(t+2,t+4),16)&2047,i=1<<r%4;if((dI(e.charCodeAt(e.length-1-Math.floor(r/4)))&i)!==i)return!1}return!0},MI=e=>null==e,RI=e=>!("object"!=typeof e||MI(e)||Array.isArray(e)||e instanceof db),NI=e=>!("string"!=typeof e||!/^(0x)?[0-9a-f]{64}$/i.test(e)||!/^(0x)?[0-9a-f]{64}$/.test(e)&&!/^(0x)?[0-9A-F]{64}$/.test(e)),BI={address:e=>EI(e),bloom:e=>TI(e),blockNumber:e=>PI(e),blockTag:e=>OI(e),blockNumberOrTag:e=>kI(e),bool:e=>{return!!["number","string","boolean"].includes(typeof(t=e))&&("boolean"==typeof t||("string"!=typeof t||Yx(t)?"string"==typeof t&&Yx(t)?"0x1"===t||"0x0"===t:1===t||0===t:"1"===t||"0"===t));var t},bytes:e=>wI(e),filter:e=>(e=>{const t=["fromBlock","toBlock","address","topics","blockHash"];if(MI(e)||"object"!=typeof e)return!1;if(!Object.keys(e).every((e=>t.includes(e))))return!1;if(!MI(e.fromBlock)&&!kI(e.fromBlock)||!MI(e.toBlock)&&!kI(e.toBlock))return!1;if(!MI(e.address))if(Array.isArray(e.address)){if(!e.address.every((e=>EI(e))))return!1}else if(!EI(e.address))return!1;return!(!MI(e.topics)&&!e.topics.every((e=>!!MI(e)||(Array.isArray(e)?e.every((e=>NI(e))):!!NI(e)))))})(e),hex:e=>Yx(e),uint:e=>II(e),int:e=>_I(e),number:e=>SI(e),string:e=>Jx(e)};for(let e=8;e<=256;e+=8)BI[`int${e}`]=t=>_I(t,{bitSize:e}),BI[`uint${e}`]=t=>II(t,{bitSize:e});for(let e=1;e<=32;e+=1)BI[`bytes${e}`]=t=>wI(t,{size:e});BI.bytes256=BI.bytes;const LI=BI,jI=e=>{if((!(null==e?void 0:e.type)||"object"===(null==e?void 0:e.type))&&(null==e?void 0:e.properties)){const t={};for(const r of Object.keys(e.properties)){const n=jI(e.properties[r]);n&&(t[r]=n)}return Array.isArray(e.required)?Vx.object(t).partial().required(e.required.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:!0})),{})):Vx.object(t).partial()}if("array"===(null==e?void 0:e.type)&&(null==e?void 0:e.items)){if(Array.isArray(e.items)&&e.items.length>1&&void 0!==e.maxItems&&new Set(e.items.map((e=>e.$id))).size===e.items.length){const t=[];for(const r of e.items){const e=jI(r);e&&t.push(e)}return Vx.tuple(t)}const t=Array.isArray(e.items)?e.items[0]:e.items;let r=Vx.array(jI(t));return r=void 0!==e.minItems?r.min(e.minItems):r,r=void 0!==e.maxItems?r.max(e.maxItems):r,r}if(e.oneOf&&Array.isArray(e.oneOf))return Vx.union(e.oneOf.map((e=>jI(e))));if(null==e?void 0:e.format){if(!LI[e.format])throw new Aw(e.format);return Vx.any().refine(LI[e.format],(t=>({params:{value:t,format:e.format}})))}return(null==e?void 0:e.type)&&"object"!==(null==e?void 0:e.type)&&"function"==typeof Vx[String(e.type)]?Vx[String(e.type)]():Vx.object({data:Vx.any()}).partial()};class DI{static factory(){return DI.validatorInstance||(DI.validatorInstance=new DI),DI.validatorInstance}validate(e,t,r){var n,i;const s=jI(e).safeParse(t);if(!s.success){const e=this.convertErrors(null!==(i=null===(n=s.error)||void 0===n?void 0:n.issues)&&void 0!==i?i:[]);if(e){if(null==r?void 0:r.silent)return e;throw new Wx(e)}}}convertErrors(e){if(e&&Array.isArray(e)&&e.length>0)return e.map((e=>{var t;let r,n,i,s;s=e.path.join("/");const o=String(e.path[e.path.length-1]),a=e.path.join("/");if(e.code===SA.too_big)n="maxItems",s=`${a}/maxItems`,i={limit:e.maximum},r=`must NOT have more than ${e.maximum} items`;else if(e.code===SA.too_small)n="minItems",s=`${a}/minItems`,i={limit:e.minimum},r=`must NOT have fewer than ${e.minimum} items`;else if(e.code===SA.custom){const{value:n,format:o}=null!==(t=e.params)&&void 0!==t?t:{};r=void 0===n?`value at "/${s}" is required`:`value "${"object"==typeof n?JSON.stringify(n):n}" at "/${s}" must pass "${o}" validation`,i={value:n}}return{keyword:null!=n?n:o,instancePath:a?`/${a}`:"",schemaPath:s?`#${s}`:"#",params:null!=i?i:{value:e.message},message:null!=r?r:e.message}}))}}const FI=new class{constructor(){this._validator=DI.factory()}validateJSONSchema(e,t,r){return this._validator.validate(e,t,r)}validate(e,t,r={silent:!1}){var n,i;const s=aI(e);if(!Array.isArray(s.items)||0!==(null===(n=s.items)||void 0===n?void 0:n.length)||0!==t.length){if(Array.isArray(s.items)&&0===(null===(i=s.items)||void 0===i?void 0:i.length)&&0!==t.length)throw new Wx([{instancePath:"/0",schemaPath:"/",keyword:"required",message:"empty schema against data can not be validated",params:t}]);return this._validator.validate(s,t,r)}}};function UI(e){var t,r;return e instanceof Uint8Array||"Uint8Array"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)||"Buffer"===(null===(r=null==e?void 0:e.constructor)||void 0===r?void 0:r.name)}function qI(...e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}function HI(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r+=1)if(e[r]!==t[r])return!1;return!0}const zI={noether:BigInt(0),wei:BigInt(1),kwei:BigInt(1e3),Kwei:BigInt(1e3),babbage:BigInt(1e3),femtoether:BigInt(1e3),mwei:BigInt(1e6),Mwei:BigInt(1e6),lovelace:BigInt(1e6),picoether:BigInt(1e6),gwei:BigInt(1e9),Gwei:BigInt(1e9),shannon:BigInt(1e9),nanoether:BigInt(1e9),nano:BigInt(1e9),szabo:BigInt(1e12),microether:BigInt(1e12),micro:BigInt(1e12),finney:BigInt(1e15),milliether:BigInt(1e15),milli:BigInt(1e15),ether:BigInt("1000000000000000000"),kether:BigInt("1000000000000000000000"),grand:BigInt("1000000000000000000000"),mether:BigInt("1000000000000000000000000"),gether:BigInt("1000000000000000000000000000"),tether:BigInt("1000000000000000000000000000000")},$I="Warning: Using type `number` with values that are large or contain many decimals may cause loss of precision, it is recommended to use type `string` or `BigInt` when using conversion methods",GI=e=>{if(FI.validate(["bytes"],[e]),UI(e))return e;if(Array.isArray(e))return new Uint8Array(e);if("string"==typeof e)return yI(e);throw new Yv(e)},{uint8ArrayToHexString:VI}=m,KI=e=>VI(GI(e)),WI=e=>"string"==typeof e&&"0x"!==e.slice(0,2).toLowerCase()?GI(`0x${e}`):GI(e),QI=e=>(FI.validate(["hex"],[e]),hI(e)),ZI=QI,JI=(e,t)=>{"bigint"!=typeof e&&FI.validate(["int"],[e]);let r=lI(e);return t&&(r.startsWith("-")||r.length%2!=1?r.length%2==0&&r.startsWith("-")&&(r="-0x0".concat(r.slice(3))):r="0x0".concat(r.slice(2))),r},YI=JI,XI=e=>QI(e).toString(),e_=e=>{FI.validate(["string"],[e]);let t=e.replace(/^(?:\u0000)/,"");return t=t.replace(/(?:\u0000)$/,""),KI((new TextEncoder).encode(t))},t_=e_,r_=e_,n_=e=>vA(WI(e)),i_=e=>"string"==typeof e?n_(e):(FI.validate(["bytes"],[e]),vA(e)),s_=Gw,o_=n_,a_=e=>{FI.validate(["string"],[e]);let t="";for(let r=0;r<e.length;r+=1){const n=e.charCodeAt(r).toString(16);t+=n.length%2!=0?`0${n}`:n}return`0x${t}`},c_=a_,u_=e=>new TextDecoder("ascii").decode(WI(e)),d_=u_,h_=(e,t)=>{if("string"==typeof e&&EI(e))return t?"address":`0x${e.toLowerCase().replace(/^0x/i,"")}`;if("boolean"==typeof e)return t?"bool":e?"0x01":"0x00";if("number"==typeof e)return t?e<0?"int256":"uint256":JI(e);if("bigint"==typeof e)return t?"bigint":JI(e);if(UI(e))return t?"bytes":KI(e);if("object"==typeof e&&e)return t?"string":e_(JSON.stringify(e));if("string"==typeof e){if(e.startsWith("-0x")||e.startsWith("-0X"))return t?"int256":JI(e);if(Yx(e))return t?"bytes":e;if(eI(e)&&!_I(e)&&!II(e))return t?"bytes":`0x${e}`;if(eI(e)&&!_I(e)&&II(e))return t?"uint":JI(e);if(!Number.isFinite(e))return t?"string":e_(e)}throw new iw(e)},l_=e=>{if("number"==typeof e)return e>1e20?(console.warn($I),BigInt(e)):e;if("bigint"==typeof e)return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):e;if("string"==typeof e&&Yx(e))return QI(e);try{return l_(BigInt(e))}catch(t){throw new Xv(e)}},f_=e=>{if("number"==typeof e)return BigInt(e);if("bigint"==typeof e)return e;if("string"==typeof e&&eI(e))return e.startsWith("-")?-BigInt(e.substring(1)):BigInt(e);throw new Xv(e)},p_=(e,t)=>{let r;if("string"==typeof t){if(r=zI[t],!r)throw new rw(t)}else{if(t<0||!Number.isInteger(t))throw new nw(t);r=xI(BigInt(10),BigInt(t))}const n=String(l_(e)),i=r.toString().length-1;if(i<=0)return n.toString();const s=n.padStart(i,"0"),o=s.slice(0,-i),a=s.slice(-i).replace(/\.?0+$/,"");return""===o?a?`0.${a}`:"0":""===a?o:`${o}.${a}`.slice(0,o.length+i+1)},m_=(e,t)=>{let r;if(FI.validate(["number"],[e]),"string"==typeof t){if(r=zI[t],!r)throw new rw(t)}else{if(t<0||!Number.isInteger(t))throw new nw(t);r=xI(BigInt(10),BigInt(t))}let n=e;"number"==typeof n&&(n<1e-15&&console.warn($I),n>1e20?(console.warn($I),n=BigInt(n)):n=n.toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}));const[i,s]=String("string"!=typeof n||Yx(n)?l_(n):n).split(".").concat(""),o=BigInt(`${i}${s}`)*r,a=s.length;return 0===a?o.toString():o.toString().slice(0,-a)},g_=e=>{if(!EI(e,!1))throw new ew(e);const t=e.toLowerCase().replace(/^0x/i,""),r=pI(AA(bI(s_(t))));if(MI(r)||"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"===r)return"";let n="0x";const i=r.replace(/^0x/i,"");for(let e=0;e<t.length;e+=1)parseInt(i[e],16)>7?n+=t[e].toUpperCase():n+=t[e];return n},y_=e=>{if("boolean"==typeof e)return e;if("number"==typeof e&&(0===e||1===e))return Boolean(e);if("bigint"==typeof e&&(e===BigInt(0)||e===BigInt(1)))return Boolean(e);if("string"==typeof e&&!Yx(e)&&("1"===e||"0"===e||"false"===e||"true"===e))return"true"===e||"false"!==e&&Boolean(Number(e));if("string"==typeof e&&Yx(e)&&("0x1"===e||"0x0"===e))return Boolean(l_(e));throw new ow(e)};var b_=i(228);const v_=b_;class w_ extends v_{constructor(){super(...arguments),this.maxListeners=Number.MAX_SAFE_INTEGER}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}}const A_=Yx,E_=eI,x_=AI,I_=EI,__=TI,S_=CI,P_=(e,t)=>{if(!TI(e))return!1;if(!EI(t))return!1;const r=fI(t,64);return CI(e,r)},O_=(e,t)=>!!TI(e)&&!!EI(t)&&CI(e,t),k_=NI,T_=(e,t)=>!!TI(e)&&!!NI(t)&&CI(e,t),C_=(e,t)=>{const r="string"==typeof e&&OI(e),n="string"==typeof t&&OI(t);if(e===t||("earliest"===e||0===e)&&("earliest"===t||0===t))return 0;if("earliest"===e)return-1;if("earliest"===t)return 1;if(r&&n){const r={[ab.EARLIEST]:1,[ab.FINALIZED]:2,[ab.SAFE]:3,[ab.LATEST]:4,[ab.PENDING]:5};return r[e]<r[t]?-1:1}if(r&&!n||!r&&n)throw new dw("Cannot compare blocktag with provided non-blocktag input.");const i=BigInt(e),s=BigInt(t);return i<s?-1:i===s?0:1},M_=e=>"object"==typeof e&&!MI(e)&&0!==Object.keys(e).length&&["input","data","from","gas","gasPrice","gasLimit","address","jsonInterface","syncWithContext","dataInputFill"].some((t=>t in e)),R_=MI,N_=e=>!("object"!=typeof e||MI(e)||Array.isArray(e)||e instanceof db),B_=(e,...t)=>{if(!N_(e))return e;const r=Object.assign({},e);for(const e of t)for(const t in e)N_(e[t])?(r[t]||(r[t]={}),r[t]=B_(r[t],e[t])):!MI(e[t])&&Object.hasOwnProperty.call(e,t)&&(Array.isArray(e[t])||e[t]instanceof db?r[t]=e[t].slice(0):r[t]=e[t]);return r},L_=(e,t,r="0")=>"string"==typeof e?Yx(e)?fI(e,t,r):e.padStart(t,r):(FI.validate(["int"],[e]),fI(e,t,r)),j_=(e,t,r="0")=>{if("string"==typeof e&&!Yx(e))return e.padEnd(t,r);const n="string"==typeof e&&Yx(e)?e:JI(e),i=n.startsWith("-")?3:2;return FI.validate([n.startsWith("-")?"int":"uint"],[e]),n.padEnd(t+i,r)},D_=j_,F_=L_,U_=(e,t=64)=>{FI.validate(["int"],[e]);const r=l_(e);if(r>=0)return L_(h_(r),t);const n=xI(BigInt(2),BigInt(4*t));if(-r>=n)throw new sw(`value: ${e}, nibbleWidth: ${t}`);const i=BigInt(r);return L_(JI(i+n),t)},q_=(e,t=64)=>{FI.validate(["int"],[e]);const r=l_(e);if(r<0)return r;const n=Math.ceil(Math.log(Number(r))/Math.log(2));if(n>4*t)throw new sw(`value: "${e}", nibbleWidth: "${t}"`);if(4*t!==n)return r;const i=xI(BigInt(2),BigInt(t)*BigInt(4));return l_(BigInt(r)-i)},{parseBaseType:H_}=m,z_=e=>"object"==typeof e&&!MI(e)&&"number"in e&&"bytes"in e,$_=(e,t,r=[])=>{let n,i=Object.assign({},e);for(const e of t){if(i.oneOf&&n){const e=n,t=r.find((([t])=>t===e));t&&t[0]===n&&(i=i.oneOf[t[1]])}if(!i.properties&&!i.items)return;i.properties?i=i.properties[e]:i.items&&i.items.properties?i=i.items.properties[e]:i.items&&RI(i.items)?i=i.items:i.items&&Array.isArray(i.items)&&(i=i.items[parseInt(e,10)]),i&&e&&(n=e)}return i},G_=(e,t,r)=>{try{const{baseType:n,baseTypeSize:i}=H_(t);if("int"===n||"uint"===n)switch(r.number){case nb.NUMBER:return Number(f_(e));case nb.HEX:return JI(f_(e));case nb.STR:return f_(e).toString();case nb.BIGINT:return f_(e);default:throw new nv(`Invalid format: ${String(r.number)}`)}if("bytes"===n){let t;switch(i?"string"==typeof e?t=L_(e,2*i):UI(e)&&(t=qI(new Uint8Array(i-e.length),e)):t=e,r.bytes){case ib.HEX:return KI(GI(t));case ib.UINT8ARRAY:return GI(t);default:throw new nv(`Invalid format: ${String(r.bytes)}`)}}if("string"===n)return String(e)}catch(t){return e}return e},V_=({value:e,schemaProp:t,schema:r,object:n,key:i,dataPath:s,format:o,oneOfPath:a=[]})=>{var c,u;if(Array.isArray(e)){let d=t;if(void 0!==(null==t?void 0:t.oneOf)&&t.oneOf.forEach(((r,n)=>{var s,o;!Array.isArray(null==t?void 0:t.items)&&("object"==typeof e[0]&&"object"===(null===(s=null==r?void 0:r.items)||void 0===s?void 0:s.type)||"string"==typeof e[0]&&"object"!==(null===(o=null==r?void 0:r.items)||void 0===o?void 0:o.type))&&(d=r,a.push([i,n]))})),MI(null==d?void 0:d.items))return delete n[i],s.pop(),!0;if(RI(d.items)&&!MI(d.items.format)){for(let t=0;t<e.length;t+=1)n[i][t]=G_(e[t],null===(c=null==d?void 0:d.items)||void 0===c?void 0:c.format,o);return s.pop(),!0}if(!Array.isArray(null==d?void 0:d.items)&&"object"===(null===(u=null==d?void 0:d.items)||void 0===u?void 0:u.type)){for(const t of e)K_(t,r,s,o,a);return s.pop(),!0}if(Array.isArray(null==d?void 0:d.items)){for(let t=0;t<e.length;t+=1)n[i][t]=G_(e[t],d.items[t].format,o);return s.pop(),!0}}return!1},K_=(e,t,r,n,i=[])=>{var s;if(!RI(e)&&!Array.isArray(e))return G_(e,null==t?void 0:t.format,n);const o=e;if(Array.isArray(o)&&"array"===(null==t?void 0:t.type)&&"object"===(null===(s=null==t?void 0:t.items)||void 0===s?void 0:s.type))V_({value:o,schemaProp:t,schema:t,object:o,key:"",dataPath:r,format:n,oneOfPath:i});else for(const[e,s]of Object.entries(o)){r.push(e);let a=$_(t,r,i);if(MI(a))delete o[e],r.pop();else if(RI(s))K_(s,t,r,n,i),r.pop();else if(!V_({value:s,schemaProp:a,schema:t,object:o,key:e,dataPath:r,format:n,oneOfPath:i})){if(void 0===(null==a?void 0:a.format)&&void 0!==(null==a?void 0:a.oneOf))for(const[e,t]of a.oneOf.entries())if(void 0!==(null==t?void 0:t.format)){a=t;break}o[e]=G_(s,a.format,n),r.pop()}}return o},W_=(e,t,r=sb)=>{let n;n=RI(t)?B_({},t):Array.isArray(t)?[...t]:t;const i=RI(e)?e:aI(e);if(!i.properties&&!i.items&&!i.format)throw new nv("Invalid json schema for formatting");return K_(n,i,[],r)},Q_="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",Z_=e=>{let t;return t="bigint"==typeof e||"number"==typeof e?Gw(e.toString()):Array.isArray(e)?new Uint8Array(e):"string"!=typeof e||Yx(e)?GI(e):Gw(e),KI(AA(bI(t)))},J_=e=>{let t;t="string"==typeof e?e.startsWith("0x")&&Yx(e)?WI(e):Gw(e):e;const r=Z_(t);return r===Q_?void 0:r},Y_=e=>{const t=J_(e);return MI(t)?Q_:t},X_=(e,t)=>{const r=/^(\d+).*$/.exec(e.slice(t));return r?parseInt(r[1],10):0},eS=e=>e.toString(2).length,tS=(e,t)=>{const r=t.toString();if("string"===e){if("string"==typeof t)return e_(t);throw new tw(t)}if("bool"===e||"boolean"===e){if("boolean"==typeof t)return t?"01":"00";throw new ow(t)}if("address"===e){if(!EI(r))throw new ew(r);return r}const n=(e=>e.startsWith("int[")?`int256${e.slice(3)}`:"int"===e?"int256":e.startsWith("uint[")?`uint256'${e.slice(4)}`:"uint"===e?"uint256":e)(e);if(e.startsWith("uint")){const e=X_(n,4);if(e%8||e<8||e>256)throw new cw(r);const t=l_(r);if(eS(t)>e)throw new uw(r);if(t<BigInt(0))throw new aw(r);return e?F_(t.toString(16),e/8*2):t.toString(16)}if(e.startsWith("int")){const t=X_(n,3);if(t%8||t<8||t>256)throw new cw(e);const i=l_(r);if(eS(i)>t)throw new uw(r);return i<BigInt(0)?U_(i.toString(),t/8*2):t?F_(i.toString(16),t/4):i.toString(16)}if("bytes"===n){if(r.replace(/^0x/i,"").length%2!=0)throw new Yv(r);return r}if(e.startsWith("bytes")){if(r.replace(/^0x/i,"").length%2!=0)throw new Yv(r);const t=X_(e,5);if(!t||t<1||t>64||t<r.replace(/^0x/i,"").length/2)throw new Yv(r);return D_(r,2*t)}return""},rS=e=>{const[t,r]=(e=>{if(Array.isArray(e))throw new Error("Autodetection of array types is not supported.");let t,r;if("object"==typeof e&&("t"in e||"type"in e)&&("v"in e||"value"in e))t="t"in e?e.t:e.type,r="v"in e?e.v:e.value,t="bigint"===t.toLowerCase()?"int":t;else{if("bigint"==typeof e)return["int",e];t=h_(e,!0),r=h_(e),t.startsWith("int")||t.startsWith("uint")||(t="bytes")}return!t.startsWith("int")&&!t.startsWith("uint")||"string"!=typeof r||/^(-)?0x/i.test(r)||(r=f_(r)),[t,r]})(e);if(Array.isArray(r)){return r.map((e=>tS(t,e).replace("0x",""))).join("")}return tS(t,r).replace("0x","")},nS=(...e)=>`0x${e.map(rS).join("").toLowerCase()}`,iS=(...e)=>J_(nS(...e)),sS=(...e)=>Y_(nS(...e)),oS=e=>J_(`0x${("number"==typeof e?e.toString():e).padStart(64,"0")}`),aS=e=>function(e){return Yw(e)}(e),cS=e=>KI(aS(e));var uS=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function dS(e){return("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}function hS(e,t,r){return uS(this,void 0,void 0,(function*(){let n;const i=yield Promise.race([e instanceof Promise?e:e(),new Promise(((e,i)=>{n=setTimeout((()=>r?i(r):e(void 0)),t)}))]);if(n&&clearTimeout(n),i instanceof Error)throw i;return i}))}function lS(e,t){let r;return[new Promise(((n,i)=>{r=setInterval(function s(){return(()=>{uS(this,void 0,void 0,(function*(){try{const i=yield hS(e,t);MI(i)||(clearInterval(r),n(i))}catch(e){clearInterval(r),i(e)}}))})(),s}(),t)})),r]}function fS(e,t){return uS(this,void 0,void 0,(function*(){return lS(e,t)[0]}))}function pS(e,t){let r;const n=new Promise(((n,i)=>{r=setTimeout((()=>{i(t)}),e)}));return[r,n]}function mS(e,t){let r;const n=new Promise(((n,i)=>{r=setInterval((()=>{(()=>{uS(this,void 0,void 0,(function*(){const t=yield e();t&&(clearInterval(r),i(t))}))})()}),t)}));return[r,n]}const gS=()=>{const e=aS(16);e[6]=15&e[6]|64,e[8]=63&e[8]|128;const t=KI(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")},yS=e=>{const t=e.error.code;return ww.has(t)||t>=-32099&&t<=-32e3},bS=e=>!Array.isArray(e)&&!!e&&"2.0"===e.jsonrpc&&"result"in e&&MI(e.error)&&("number"==typeof e.id||"string"==typeof e.id),vS=e=>!Array.isArray(e)&&"2.0"===e.jsonrpc&&!!e&&MI(e.result)&&"error"in e&&("number"==typeof e.id||"string"==typeof e.id),wS=e=>!(Array.isArray(e)||!e||"2.0"!==e.jsonrpc||MI(e.params)||MI(e.method)),AS=e=>!Array.isArray(e)&&!!e&&"2.0"===e.jsonrpc&&"id"in e&&"result"in e,ES=e=>bS(e)||vS(e),xS=e=>Array.isArray(e)?e.every(ES):ES(e),IS=e=>Array.isArray(e)&&e.length>0&&xS(e);let _S;const SS=e=>{_S=e},PS=e=>{var t,r,n,i;return void 0!==_S&&(_S+=1),{jsonrpc:null!==(t=e.jsonrpc)&&void 0!==t?t:"2.0",id:null!==(n=null!==(r=e.id)&&void 0!==r?r:_S)&&void 0!==n?n:gS(),method:e.method,params:null!==(i=e.params)&&void 0!==i?i:void 0}},OS=e=>e.map((e=>PS(e))),kS=e=>Array.isArray(e)&&e.length>0;var TS,CS=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class MS{constructor({timeout:e,eagerStart:t,timeoutMessage:r}={timeout:0,eagerStart:!1,timeoutMessage:"DeferredPromise timed out"}){this[TS]="Promise",this._state="pending",this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),this._timeoutMessage=r,this._timeoutInterval=e,t&&this.startTimer()}get state(){return this._state}then(e,t){return CS(this,void 0,void 0,(function*(){return this._promise.then(e,t)}))}catch(e){return CS(this,void 0,void 0,(function*(){return this._promise.catch(e)}))}finally(e){return CS(this,void 0,void 0,(function*(){return this._promise.finally(e)}))}resolve(e){this._resolve(e),this._state="fulfilled",this._clearTimeout()}reject(e){this._reject(e),this._state="rejected",this._clearTimeout()}startTimer(){this._timeoutInterval&&this._timeoutInterval>0&&(this._timeoutId=setTimeout(this._checkTimeout.bind(this),this._timeoutInterval))}_checkTimeout(){"pending"===this._state&&this._timeoutId&&this.reject(new sv(this._timeoutMessage))}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}}TS=Symbol.toStringTag;class RS{constructor(e,t){this.eventEmitter=e,this.autoReconnect=t,this.chunkTimeout=15e3}clearQueues(){"function"==typeof this._clearQueues&&this._clearQueues()}onError(e){this._clearQueues=e}parseResponse(e){const t=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((e=>{let r,n=e;this.lastChunk&&(n=this.lastChunk+n);try{r=JSON.parse(n)}catch(e){return this.lastChunk=n,this.lastChunkTimeout&&clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.autoReconnect||(this.clearQueues(),this.eventEmitter.emit("error",new fw({id:1,jsonrpc:"2.0",error:{code:2,message:"Chunk timeout"}})))}),this.chunkTimeout))}clearTimeout(this.lastChunkTimeout),this.lastChunk=void 0,r&&t.push(r)})),t}}var NS=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class BS extends fb{constructor(){super(...arguments),this._eventEmitter=new b_,this._chainId="",this._accounts=[]}_getChainId(){return NS(this,void 0,void 0,(function*(){var e;const t=yield this.request(PS({method:"eth_chainId",params:[]}));return null!==(e=null==t?void 0:t.result)&&void 0!==e?e:""}))}_getAccounts(){return NS(this,void 0,void 0,(function*(){var e;const t=yield this.request(PS({method:"eth_accounts",params:[]}));return null!==(e=null==t?void 0:t.result)&&void 0!==e?e:[]}))}_onConnect(){Promise.all([this._getChainId().then((e=>{e!==this._chainId&&(this._chainId=e,this._eventEmitter.emit("chainChanged",this._chainId))})).catch((e=>{console.error(e)})),this._getAccounts().then((e=>{this._accounts.length===e.length&&e.every((t=>e.includes(t)))||(this._accounts=e,this._onAccountsChanged())})).catch((e=>{console.error(e)}))]).then((()=>this._eventEmitter.emit("connect",{chainId:this._chainId}))).catch((e=>{console.error(e)}))}_onDisconnect(e,t){this._eventEmitter.emit("disconnect",new vw(e,t))}_onAccountsChanged(){this._eventEmitter.emit("accountsChanged",this._accounts)}}var LS=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const jS={autoReconnect:!0,delay:5e3,maxAttempts:5};class DS extends BS{get SocketConnection(){return this._socketConnection}constructor(e,t,r){if(super(),this._connectionStatus="connecting",this._onMessageHandler=this._onMessage.bind(this),this._onOpenHandler=this._onConnect.bind(this),this._onCloseHandler=this._onCloseEvent.bind(this),this._onErrorHandler=this._onError.bind(this),!this._validateProviderPath(e))throw new dv(e);this._socketPath=e,this._socketOptions=t,this._reconnectOptions=Object.assign(Object.assign({},jS),null!=r?r:{}),this._pendingRequestsQueue=new Map,this._sentRequestsQueue=new Map,this._init(),this.connect(),this.chunkResponseParser=new RS(this._eventEmitter,this._reconnectOptions.autoReconnect),this.chunkResponseParser.onError((()=>{this._clearQueues()})),this.isReconnecting=!1}_init(){this._reconnectAttempts=0}connect(){try{this._openSocketConnection(),this._connectionStatus="connecting",this._addSocketListeners()}catch(e){if(!this.isReconnecting)throw this._connectionStatus="disconnected",e&&e.message?new $b(`Error while connecting to ${this._socketPath}. Reason: ${e.message}`):new dv(this._socketPath);setImmediate((()=>{this._reconnect()}))}}_validateProviderPath(e){return!!e}getPendingRequestQueueSize(){return this._pendingRequestsQueue.size}getSentRequestsQueueSize(){return this._sentRequestsQueue.size}supportsSubscriptions(){return!0}on(e,t){this._eventEmitter.on(e,t)}once(e,t){this._eventEmitter.once(e,t)}removeListener(e,t){this._eventEmitter.removeListener(e,t)}_onDisconnect(e,t){this._connectionStatus="disconnected",super._onDisconnect(e,t)}disconnect(e,t){const r=null!=e?e:1e3;this._removeSocketListeners(),"disconnected"!==this.getStatus()&&this._closeSocketConnection(r,t),this._onDisconnect(r,t)}safeDisconnect(e,t){return LS(this,arguments,void 0,(function*(e,t,r=!1,n=1e3){let i=0;yield(()=>LS(this,void 0,void 0,(function*(){return new Promise((e=>{const t=setInterval((()=>{r&&i>=5&&this.clearQueues(),0===this.getPendingRequestQueueSize()&&0===this.getSentRequestsQueueSize()&&(clearInterval(t),e(!0)),i+=1}),n)}))})))(),this.disconnect(e,t)}))}removeAllListeners(e){this._eventEmitter.removeAllListeners(e)}_onError(e){this.isReconnecting?this._reconnect():this._eventEmitter.emit("error",e)}reset(){this._sentRequestsQueue.clear(),this._pendingRequestsQueue.clear(),this._init(),this._removeSocketListeners(),this._addSocketListeners()}_reconnect(){this.isReconnecting||(this.isReconnecting=!0,this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((e,t)=>{e.deferredPromise.reject(new Kb),this._sentRequestsQueue.delete(t)})),this._reconnectAttempts<this._reconnectOptions.maxAttempts?(this._reconnectAttempts+=1,setTimeout((()=>{this._removeSocketListeners(),this.connect(),this.isReconnecting=!1}),this._reconnectOptions.delay)):(this.isReconnecting=!1,this._clearQueues(),this._removeSocketListeners(),this._eventEmitter.emit("error",new Vb(this._reconnectOptions.maxAttempts))))}request(e){return LS(this,void 0,void 0,(function*(){if(R_(this._socketConnection))throw new Error("Connection is undefined");"disconnected"===this.getStatus()&&this.connect();const t=kS(e)?e[0].id:e.id;if(!t)throw new lv("Request Id not defined");if(this._sentRequestsQueue.has(t))throw new Wb(t);const r=new MS;r.catch((e=>{this._eventEmitter.emit("error",e)}));const n={payload:e,deferredPromise:r};if("connecting"===this.getStatus())return this._pendingRequestsQueue.set(t,n),n.deferredPromise;this._sentRequestsQueue.set(t,n);try{this._sendToSocket(n.payload)}catch(e){this._sentRequestsQueue.delete(t),this._eventEmitter.emit("error",e)}return r}))}_onConnect(){this._connectionStatus="connected",this._reconnectAttempts=0,super._onConnect(),this._sendPendingRequests()}_sendPendingRequests(){for(const[e,t]of this._pendingRequestsQueue.entries())try{this._sendToSocket(t.payload),this._pendingRequestsQueue.delete(e),this._sentRequestsQueue.set(e,t)}catch(t){this._pendingRequestsQueue.delete(e),this._eventEmitter.emit("error",t)}}_onMessage(e){const t=this._parseResponses(e);if(!R_(t)&&0!==t.length)for(const e of t){if(wS(e)&&e.method.endsWith("_subscription"))return void this._eventEmitter.emit("message",e);const t=IS(e)?e[0].id:e.id,r=this._sentRequestsQueue.get(t);if(!r)return;(IS(e)||bS(e)||vS(e))&&(this._eventEmitter.emit("message",e),r.deferredPromise.resolve(e)),this._sentRequestsQueue.delete(t)}}clearQueues(e){this._clearQueues(e)}_clearQueues(e){this._pendingRequestsQueue.size>0&&this._pendingRequestsQueue.forEach(((t,r)=>{t.deferredPromise.reject(new Gb(e)),this._pendingRequestsQueue.delete(r)})),this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((t,r)=>{t.deferredPromise.reject(new Gb(e)),this._sentRequestsQueue.delete(r)})),this._removeSocketListeners()}}class FS{constructor(){this._emitter=new w_}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}listenerCount(e){return this._emitter.listenerCount(e)}listeners(e){return this._emitter.listeners(e)}eventNames(){return this._emitter.eventNames()}removeAllListeners(){return this._emitter.removeAllListeners()}setMaxListenerWarningThreshold(e){this._emitter.setMaxListeners(e)}getMaxListeners(){return this._emitter.getMaxListeners()}}var US;!function(e){e.CONFIG_CHANGE="CONFIG_CHANGE"}(US||(US={}));class qS extends FS{constructor(e){super(),this.config={handleRevert:!1,defaultAccount:void 0,defaultBlock:"latest",transactionBlockTimeout:50,transactionConfirmationBlocks:24,transactionPollingInterval:1e3,transactionPollingTimeout:75e4,transactionReceiptPollingInterval:void 0,transactionSendTimeout:75e4,transactionConfirmationPollingInterval:void 0,blockHeaderTimeout:10,maxListenersWarningThreshold:100,contractDataInputFill:"data",defaultNetworkId:void 0,defaultChain:"mainnet",defaultHardfork:"london",defaultCommon:void 0,defaultTransactionType:"0x2",defaultMaxPriorityFeePerGas:h_(25e8),enableExperimentalFeatures:{useSubscriptionWhenCheckingBlockTimeout:!1,useRpcCallSpecification:!1},transactionBuilder:void 0,transactionTypeParser:void 0,customTransactionSchema:void 0,defaultReturnFormat:sb,ignoreGasPricing:!1},this.setConfig(null!=e?e:{})}setConfig(e){const t=Object.keys(e);for(const r of t)this._triggerConfigChange(r,e[r]),R_(e[r])||"number"!=typeof e[r]||"maxListenersWarningThreshold"!==r||this.setMaxListenerWarningThreshold(Number(e[r]));Object.assign(this.config,e)}get handleRevert(){return this.config.handleRevert}set handleRevert(e){this._triggerConfigChange("handleRevert",e),this.config.handleRevert=e}get contractDataInputFill(){return this.config.contractDataInputFill}set contractDataInputFill(e){this._triggerConfigChange("contractDataInputFill",e),this.config.contractDataInputFill=e}get defaultAccount(){return this.config.defaultAccount}set defaultAccount(e){this._triggerConfigChange("defaultAccount",e),this.config.defaultAccount=e}get defaultBlock(){return this.config.defaultBlock}set defaultBlock(e){this._triggerConfigChange("defaultBlock",e),this.config.defaultBlock=e}get transactionSendTimeout(){return this.config.transactionSendTimeout}set transactionSendTimeout(e){this._triggerConfigChange("transactionSendTimeout",e),this.config.transactionSendTimeout=e}get transactionBlockTimeout(){return this.config.transactionBlockTimeout}set transactionBlockTimeout(e){this._triggerConfigChange("transactionBlockTimeout",e),this.config.transactionBlockTimeout=e}get transactionConfirmationBlocks(){return this.config.transactionConfirmationBlocks}set transactionConfirmationBlocks(e){this._triggerConfigChange("transactionConfirmationBlocks",e),this.config.transactionConfirmationBlocks=e}get transactionPollingInterval(){return this.config.transactionPollingInterval}set transactionPollingInterval(e){this._triggerConfigChange("transactionPollingInterval",e),this.config.transactionPollingInterval=e,this.transactionReceiptPollingInterval=e,this.transactionConfirmationPollingInterval=e}get transactionPollingTimeout(){return this.config.transactionPollingTimeout}set transactionPollingTimeout(e){this._triggerConfigChange("transactionPollingTimeout",e),this.config.transactionPollingTimeout=e}get transactionReceiptPollingInterval(){return this.config.transactionReceiptPollingInterval}set transactionReceiptPollingInterval(e){this._triggerConfigChange("transactionReceiptPollingInterval",e),this.config.transactionReceiptPollingInterval=e}get transactionConfirmationPollingInterval(){return this.config.transactionConfirmationPollingInterval}set transactionConfirmationPollingInterval(e){this._triggerConfigChange("transactionConfirmationPollingInterval",e),this.config.transactionConfirmationPollingInterval=e}get blockHeaderTimeout(){return this.config.blockHeaderTimeout}set blockHeaderTimeout(e){this._triggerConfigChange("blockHeaderTimeout",e),this.config.blockHeaderTimeout=e}get enableExperimentalFeatures(){return this.config.enableExperimentalFeatures}set enableExperimentalFeatures(e){this._triggerConfigChange("enableExperimentalFeatures",e),this.config.enableExperimentalFeatures=e}get maxListenersWarningThreshold(){return this.config.maxListenersWarningThreshold}set maxListenersWarningThreshold(e){this._triggerConfigChange("maxListenersWarningThreshold",e),this.setMaxListenerWarningThreshold(e),this.config.maxListenersWarningThreshold=e}get defaultReturnFormat(){return this.config.defaultReturnFormat}set defaultReturnFormat(e){this._triggerConfigChange("defaultReturnFormat",e),this.config.defaultReturnFormat=e}get defaultNetworkId(){return this.config.defaultNetworkId}set defaultNetworkId(e){this._triggerConfigChange("defaultNetworkId",e),this.config.defaultNetworkId=e}get defaultChain(){return this.config.defaultChain}set defaultChain(e){if(!R_(this.config.defaultCommon)&&!R_(this.config.defaultCommon.baseChain)&&e!==this.config.defaultCommon.baseChain)throw new mw(this.config.defaultChain,e);this._triggerConfigChange("defaultChain",e),this.config.defaultChain=e}get defaultHardfork(){return this.config.defaultHardfork}set defaultHardfork(e){if(!R_(this.config.defaultCommon)&&!R_(this.config.defaultCommon.hardfork)&&e!==this.config.defaultCommon.hardfork)throw new pw(this.config.defaultCommon.hardfork,e);this._triggerConfigChange("defaultHardfork",e),this.config.defaultHardfork=e}get defaultCommon(){return this.config.defaultCommon}set defaultCommon(e){if(!R_(this.config.defaultHardfork)&&!R_(e)&&!R_(e.hardfork)&&this.config.defaultHardfork!==e.hardfork)throw new pw(this.config.defaultHardfork,e.hardfork);if(!R_(this.config.defaultChain)&&!R_(e)&&!R_(e.baseChain)&&this.config.defaultChain!==e.baseChain)throw new mw(this.config.defaultChain,e.baseChain);this._triggerConfigChange("defaultCommon",e),this.config.defaultCommon=e}get ignoreGasPricing(){return this.config.ignoreGasPricing}set ignoreGasPricing(e){this._triggerConfigChange("ignoreGasPricing",e),this.config.ignoreGasPricing=e}get defaultTransactionType(){return this.config.defaultTransactionType}set defaultTransactionType(e){this._triggerConfigChange("defaultTransactionType",e),this.config.defaultTransactionType=e}get defaultMaxPriorityFeePerGas(){return this.config.defaultMaxPriorityFeePerGas}set defaultMaxPriorityFeePerGas(e){this._triggerConfigChange("defaultMaxPriorityFeePerGas",e),this.config.defaultMaxPriorityFeePerGas=e}get transactionBuilder(){return this.config.transactionBuilder}set transactionBuilder(e){this._triggerConfigChange("transactionBuilder",e),this.config.transactionBuilder=e}get transactionTypeParser(){return this.config.transactionTypeParser}set transactionTypeParser(e){this._triggerConfigChange("transactionTypeParser",e),this.config.transactionTypeParser=e}get customTransactionSchema(){return this.config.customTransactionSchema}set customTransactionSchema(e){this._triggerConfigChange("customTransactionSchema",e),this.config.customTransactionSchema=e}_triggerConfigChange(e,t){this.emit(US.CONFIG_CHANGE,{name:e,oldValue:this.config[e],newValue:t})}}var HS=i(9094);class zS extends fb{constructor(e,t){if(super(),!zS.validateClientUrl(e))throw new dv(e);this.clientUrl=e,this.httpProviderOptions=t}static validateClientUrl(e){return"string"==typeof e&&/^http(s)?:\/\//i.test(e)}getStatus(){throw new iv}supportsSubscriptions(){return!1}request(e,t){var r;return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},null===(r=this.httpProviderOptions)||void 0===r?void 0:r.providerOptions),t),i=yield HS(this.clientUrl,Object.assign(Object.assign({},n),{method:"POST",headers:Object.assign(Object.assign({},n.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e)}));if(!i.ok)throw new lw(yield i.json(),void 0,void 0,i.status);return yield i.json()}))}on(){throw new iv}removeListener(){throw new iv}once(){throw new iv}removeAllListeners(){throw new iv}connect(){throw new iv}disconnect(){throw new iv}reset(){throw new iv}reconnect(){throw new iv}}var $S=null;"undefined"!=typeof WebSocket?$S=WebSocket:"undefined"!=typeof MozWebSocket?$S=MozWebSocket:void 0!==i.g?$S=i.g.WebSocket||i.g.MozWebSocket:"undefined"!=typeof window?$S=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&($S=self.WebSocket||self.MozWebSocket);const GS=$S;class VS extends DS{constructor(e,t,r){super(e,t,r)}_validateProviderPath(e){return"string"==typeof e&&/^ws(s)?:\/\//i.test(e)}getStatus(){if(this._socketConnection&&!R_(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected";default:return"disconnected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new GS(this._socketPath,void 0,this._socketOptions&&0===Object.keys(this._socketOptions).length?void 0:this._socketOptions)}_closeSocketConnection(e,t){var r;null===(r=this._socketConnection)||void 0===r||r.close(e,t)}_sendToSocket(e){var t;if("disconnected"===this.getStatus())throw new Gb;null===(t=this._socketConnection)||void 0===t||t.send(JSON.stringify(e))}_parseResponses(e){return this.chunkResponseParser.parseResponse(e.data)}_addSocketListeners(){var e,t,r,n;null===(e=this._socketConnection)||void 0===e||e.addEventListener("open",this._onOpenHandler),null===(t=this._socketConnection)||void 0===t||t.addEventListener("message",this._onMessageHandler),null===(r=this._socketConnection)||void 0===r||r.addEventListener("close",(e=>this._onCloseHandler(e))),null===(n=this._socketConnection)||void 0===n||n.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var e,t,r;null===(e=this._socketConnection)||void 0===e||e.removeEventListener("message",this._onMessageHandler),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("open",this._onOpenHandler),null===(r=this._socketConnection)||void 0===r||r.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(e){var t;!this._reconnectOptions.autoReconnect||[1e3,1001].includes(e.code)&&e.wasClean?(this._clearQueues(e),this._removeSocketListeners(),this._onDisconnect(e.code,e.reason),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("error",this._onErrorHandler)):this._reconnect()}}const KS=e=>fb.isWeb3Provider(e),WS=e=>"string"!=typeof e&&"request"in e&&"Function"===e.request.constructor.name,QS=e=>"string"!=typeof e&&"request"in e&&"AsyncFunction"===e.request.constructor.name,ZS=e=>"string"!=typeof e&&"send"in e,JS=e=>"string"!=typeof e&&"sendAsync"in e,YS=e=>e&&(KS(e)||QS(e)||WS(e)||JS(e)||ZS(e));var XS,eP=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};!function(e){e.PROVIDER_CHANGED="PROVIDER_CHANGED",e.BEFORE_PROVIDER_CHANGE="BEFORE_PROVIDER_CHANGE"}(XS||(XS={}));const tP={HttpProvider:zS,WebsocketProvider:VS};class rP extends FS{constructor(e,t,r){super(),R_(e)||this.setProvider(e),this.useRpcCallSpecification=t,R_(r)||(this.middleware=r)}static get providers(){return tP}get provider(){return this._provider}get providers(){return tP}setProvider(e){let t;if(e&&"string"==typeof e&&this.providers)if(/^http(s)?:\/\//i.test(e))t=new this.providers.HttpProvider(e);else{if(!/^ws(s)?:\/\//i.test(e))throw new uv(`Can't autodetect provider for "${e}"`);t=new this.providers.WebsocketProvider(e)}else t=R_(e)?void 0:e;return this.emit(XS.BEFORE_PROVIDER_CHANGE,this._provider),this._provider=t,this.emit(XS.PROVIDER_CHANGED,this._provider),!0}setMiddleware(e){this.middleware=e}send(e){return eP(this,void 0,void 0,(function*(){const t=Object.assign({},e);let r=yield this._sendRequest(t);if(R_(this.middleware)||(r=yield this.middleware.processResponse(r)),bS(r))return r.result;throw new lw(r)}))}sendBatch(e){return eP(this,void 0,void 0,(function*(){return yield this._sendRequest(e)}))}_sendRequest(e){return eP(this,void 0,void 0,(function*(){const{provider:t}=this;if(R_(t))throw new uv("Provider not available. Use `.setProvider` or `.provider=` to initialize the provider.");let r=kS(e)?OS(e):PS(e);if(R_(this.middleware)||(r=yield this.middleware.processRequest(r)),KS(t)){let e;try{e=yield t.request(r)}catch(t){e=t}return this._processJsonRpcResponse(r,e,{legacy:!1,error:!1})}if(QS(t))return t.request(r).then((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!1}))).catch((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!0})));if(WS(t))return new Promise(((e,n)=>{const i=e=>{n(this._processJsonRpcResponse(r,e,{legacy:!0,error:!0}))},s=t=>e(this._processJsonRpcResponse(r,t,{legacy:!0,error:!1})),o=t.request(r,((e,t)=>e?i(e):s(t)));dS(o)&&o.then(s).catch((e=>{try{const t=this._processJsonRpcResponse(r,e,{legacy:!0,error:!0});n(t)}catch(e){n(e)}}))}));if(ZS(t))return new Promise(((e,n)=>{t.send(r,((t,i)=>{if(t)return n(this._processJsonRpcResponse(r,t,{legacy:!0,error:!0}));if(R_(i))throw new lw({},'Got a "nullish" response from provider.');return e(this._processJsonRpcResponse(r,i,{legacy:!0,error:!1}))}))}));if(JS(t))return t.sendAsync(r).then((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!1}))).catch((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!0})));throw new uv("Provider does not have a request or send method to use.")}))}_processJsonRpcResponse(e,t,{legacy:r,error:n}){if(R_(t))return this._buildResponse(e,null,n);if(vS(t)){if(this.useRpcCallSpecification&&yS(t)){const e=t;if(ww.get(e.error.code))throw new(0,ww.get(e.error.code).error)(e);throw new bw(e)}if(!rP._isReverted(t))throw new fw(t,e)}if(bS(t))return t;if(t instanceof Error)throw rP._isReverted(t),t;if(!r&&kS(e)&&IS(t))return t;if(r&&!n&&kS(e))return t;if(r&&n&&kS(e))throw t;if(r&&!vS(t)&&!bS(t))return this._buildResponse(e,t,n);if(kS(e)&&!Array.isArray(t))throw new lw(t,"Got normal response for a batch request.");if(!kS(e)&&Array.isArray(t))throw new lw(t,"Got batch response for a normal request.");throw new lw(t,"Invalid response")}static _isReverted(e){let t;if(vS(e)?t=e.error:e instanceof Error&&(t=e),null==t?void 0:t.message.includes("revert"))throw new Yb(t);return!1}_buildResponse(e,t,r){const n={jsonrpc:"2.0",id:kS(e)?e[0].id:"id"in e?e.id:null};return r?Object.assign(Object.assign({},n),{error:t}):Object.assign(Object.assign({},n),{result:t})}}var nP=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class iP{constructor(e,t,r=!1){this.requestManager=e,this.registeredSubscriptions=t,this.tolerateUnlinkedSubscription=r,this._subscriptions=new Map,this.requestManager.on(XS.BEFORE_PROVIDER_CHANGE,(()=>nP(this,void 0,void 0,(function*(){yield this.unsubscribe()})))),this.requestManager.on(XS.PROVIDER_CHANGED,(()=>{this.clear(),this.listenToProviderEvents()})),this.listenToProviderEvents()}listenToProviderEvents(){const e=this.requestManager.provider;this.requestManager.provider&&("function"!=typeof(null==e?void 0:e.supportsSubscriptions)||(null==e?void 0:e.supportsSubscriptions()))&&"function"==typeof this.requestManager.provider.on&&("function"==typeof this.requestManager.provider.request?this.requestManager.provider.on("message",(e=>this.messageListener(e))):e.on("data",(e=>this.messageListener(e))))}messageListener(e){var t,r,n;if(!e)throw new hv("Should not call messageListener with no data. Type was");const i=(null===(t=e.params)||void 0===t?void 0:t.subscription)||(null===(r=e.data)||void 0===r?void 0:r.subscription)||(null===(n=e.id)||void 0===n?void 0:n.toString(16));if(i){const t=this._subscriptions.get(i);null==t||t.processSubscriptionData(e)}}subscribe(e,t){return nP(this,arguments,void 0,(function*(e,t,r=sb){const n=this.registeredSubscriptions[e];if(!n)throw new hv("Invalid subscription type");const i=new n(null!=t?t:void 0,{subscriptionManager:this,returnFormat:r});return yield this.addSubscription(i),i}))}get subscriptions(){return this._subscriptions}addSubscription(e){return nP(this,void 0,void 0,(function*(){if(!this.requestManager.provider)throw new uv("Provider not available");if(!this.supportsSubscriptions())throw new hv("The current provider does not support subscriptions");if(e.id&&this._subscriptions.has(e.id))throw new hv(`Subscription with id "${e.id}" already exists`);if(yield e.sendSubscriptionRequest(),R_(e.id))throw new hv("Subscription is not subscribed yet.");return this._subscriptions.set(e.id,e),e.id}))}removeSubscription(e){return nP(this,void 0,void 0,(function*(){const{id:t}=e;if(R_(t))throw new hv("Subscription is not subscribed yet. Or, had already been unsubscribed but not through the Subscription Manager.");if(!this._subscriptions.has(t)&&!this.tolerateUnlinkedSubscription)throw new hv(`Subscription with id "${t.toString()}" does not exists`);return yield e.sendUnsubscribeRequest(),this._subscriptions.delete(t),t}))}unsubscribe(e){return nP(this,void 0,void 0,(function*(){const t=[];for(const[r,n]of this.subscriptions.entries())(!e||"function"==typeof e&&e({id:r,sub:n}))&&t.push(this.removeSubscription(n));return Promise.all(t)}))}clear(){this._subscriptions.clear()}supportsSubscriptions(){return!R_(this.requestManager.provider)&&((e=this.requestManager.provider)&&"supportsSubscriptions"in e?e.supportsSubscriptions():!(!e||"string"==typeof e||!("on"in e)));var e}}var sP=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class oP extends FS{constructor(e,t){var r;super(),this.args=e;const{requestManager:n}=t,{subscriptionManager:i}=t;this._subscriptionManager=n?new iP(n,{},!0):i,this._returnFormat=null!==(r=null==t?void 0:t.returnFormat)&&void 0!==r?r:sb}get id(){return this._id}get lastBlock(){return this._lastBlock}subscribe(){return sP(this,void 0,void 0,(function*(){return this._subscriptionManager.addSubscription(this)}))}processSubscriptionData(e){var t,r;(null==e?void 0:e.data)?this._processSubscriptionResult(null!==(r=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.result)&&void 0!==r?r:null==e?void 0:e.data):e&&wS(e)&&this._processSubscriptionResult(null==e?void 0:e.params.result)}sendSubscriptionRequest(){return sP(this,void 0,void 0,(function*(){return this._id=yield this._subscriptionManager.requestManager.send({method:"eth_subscribe",params:this._buildSubscriptionParams()}),this.emit("connected",this._id),this._id}))}get returnFormat(){return this._returnFormat}get subscriptionManager(){return this._subscriptionManager}resubscribe(){return sP(this,void 0,void 0,(function*(){yield this.unsubscribe(),yield this.subscribe()}))}unsubscribe(){return sP(this,void 0,void 0,(function*(){this.id&&(yield this._subscriptionManager.removeSubscription(this))}))}sendUnsubscribeRequest(){return sP(this,void 0,void 0,(function*(){yield this._subscriptionManager.requestManager.send({method:"eth_unsubscribe",params:[this.id]}),this._id=void 0}))}formatSubscriptionResult(e){return e}_processSubscriptionResult(e){this.emit("data",this.formatSubscriptionResult(e))}_processSubscriptionError(e){this.emit("error",e)}_buildSubscriptionParams(){throw new Error("Implement in the child class")}}var aP=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class cP extends pb{constructor(){super(...arguments),this._addressMap=new Map,this._defaultKeyName="web3js_wallet"}static getStorage(){let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return!t||22!==t.code&&1014!==t.code&&"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||MI(e)||0===e.length?void 0:e}}create(e){for(let t=0;t<e;t+=1)this.add(this._accountProvider.create());return this}add(e){var t;if("string"==typeof e)return this.add(this._accountProvider.privateKeyToAccount(e));let r=this.length;return this.get(e.address)&&(console.warn(`Account ${e.address.toLowerCase()} already exists.`),r=null!==(t=this._addressMap.get(e.address.toLowerCase()))&&void 0!==t?t:r),this._addressMap.set(e.address.toLowerCase(),r),this[r]=e,this}get(e){if("string"==typeof e){const t=this._addressMap.get(e.toLowerCase());return MI(t)?void 0:this[t]}return this[e]}remove(e){if("string"==typeof e){const t=this._addressMap.get(e.toLowerCase());return!MI(t)&&(this._addressMap.delete(e.toLowerCase()),this.splice(t,1),!0)}return!!this[e]&&(this.splice(e,1),!0)}clear(){return this._addressMap.clear(),this.length=0,this}encrypt(e,t){return aP(this,void 0,void 0,(function*(){return Promise.all(this.map((r=>aP(this,void 0,void 0,(function*(){return r.encrypt(e,t)})))))}))}decrypt(e,t,r){return aP(this,void 0,void 0,(function*(){const n=yield Promise.all(e.map((e=>aP(this,void 0,void 0,(function*(){return this._accountProvider.decrypt(e,t,r)})))));for(const e of n)this.add(e);return this}))}save(e,t){return aP(this,void 0,void 0,(function*(){const r=cP.getStorage();if(!r)throw new Error("Local storage not available.");return r.setItem(null!=t?t:this._defaultKeyName,JSON.stringify(yield this.encrypt(e))),!0}))}load(e,t){return aP(this,void 0,void 0,(function*(){const r=cP.getStorage();if(!r)throw new Error("Local storage not available.");const n=r.getItem(null!=t?t:this._defaultKeyName);return n&&(yield this.decrypt(JSON.parse(n)||[],e)),this}))}}const uP={web:Dw};function dP(e,t,r){if(!r.startsWith("aes-"))throw new Error(`AES submodule doesn't support mode ${r}`);if(16!==t.length)throw new Error("AES: wrong IV length");if(r.startsWith("aes-128")&&16!==e.length||r.startsWith("aes-256")&&32!==e.length)throw new Error("AES: wrong key length")}async function hP(e,t,r){if(!uP.web)throw new Error("Browser crypto not available.");let n;if(["aes-128-cbc","aes-256-cbc"].includes(e)&&(n="cbc"),["aes-128-ctr","aes-256-ctr"].includes(e)&&(n="ctr"),!n)throw new Error("AES: unsupported mode");return[await uP.web.subtle.importKey("raw",t,{name:`AES-${n.toUpperCase()}`,length:8*t.length},!0,["encrypt","decrypt"]),{name:`aes-${n}`,iv:r,counter:r,length:128}]}async function lP(e,t,r,n="aes-128-ctr",i=!0){if(dP(t,r,n),uP.web){const[s,o]=await hP(n,t,r),a=await uP.web.subtle.encrypt(o,s,e);let c=new Uint8Array(a);return i||"aes-cbc"!==o.name||e.length%16||(c=c.slice(0,-16)),c}if(uP.node){const s=uP.node.createCipheriv(n,t,r);return s.setAutoPadding(i),Kw(s.update(e),s.final())}throw new Error("The environment doesn't have AES module")}class fP extends Ww{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Iw(e);const r=Vw(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return _w(this),this.iHash.update(e),this}digestInto(e){_w(this),xw(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const pP=(e,t,r)=>new fP(e,t).update(r).digest();function mP(e,t,r,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:c}=function(e,t,r,n){Iw(e);const i=Zw({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(Ew(s),Ew(o),Ew(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Vw(t),u=Vw(r),d=new Uint8Array(o),h=pP.create(e,c),l=h._cloneInto().update(u);return{c:s,dkLen:o,asyncTick:a,DK:d,PRF:h,PRFSalt:l}}(e,t,r,n);let u;const d=new Uint8Array(4),h=Uw(d),l=new Uint8Array(a.outputLen);for(let e=1,t=0;t<s;e++,t+=a.outputLen){const r=o.subarray(t,t+a.outputLen);h.setInt32(0,e,!1),(u=c._cloneInto(u)).update(d).digestInto(l),r.set(l.subarray(0,r.length));for(let e=1;e<i;e++){a._cloneInto(u).update(l).digestInto(l);for(let e=0;e<r.length;e++)r[e]^=l[e]}}return function(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}(a,c,o,u,l)}pP.create=(e,t)=>new fP(e,t);const gP=(e,t,r)=>e&t^e&r^t&r;class yP extends Ww{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Uw(this.buffer)}update(e){_w(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=Vw(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Uw(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){_w(this),Sw(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=Uw(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const bP=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vP=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wP=new Uint32Array(64);class AP extends yP{constructor(){super(64,32,8,!1),this.A=0|vP[0],this.B=0|vP[1],this.C=0|vP[2],this.D=0|vP[3],this.E=0|vP[4],this.F=0|vP[5],this.G=0|vP[6],this.H=0|vP[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)wP[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=wP[e-15],r=wP[e-2],n=qw(t,7)^qw(t,18)^t>>>3,i=qw(r,17)^qw(r,19)^r>>>10;wP[e]=i+wP[e-7]+n+wP[e-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(qw(o,6)^qw(o,11)^qw(o,25))+((d=o)&a^~d&c)+bP[e]+wP[e]|0,h=(qw(r,2)^qw(r,13)^qw(r,22))+gP(r,n,i)|0;u=c,c=a,a=o,o=s+t|0,s=i,i=n,n=r,r=t+h|0}var d;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,s,o,a,c,u)}roundClean(){wP.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const EP=Jw((()=>new AP)),[xP,IP]=(()=>jw.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),_P=new Uint32Array(80),SP=new Uint32Array(80);class PP extends yP{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:d,Fl:h,Gh:l,Gl:f,Hh:p,Hl:m}=this;return[e,t,r,n,i,s,o,a,c,u,d,h,l,f,p,m]}set(e,t,r,n,i,s,o,a,c,u,d,h,l,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|d,this.Fl=0|h,this.Gh=0|l,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)_P[r]=e.getUint32(t),SP[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|_P[e-15],r=0|SP[e-15],n=jw.rotrSH(t,r,1)^jw.rotrSH(t,r,8)^jw.shrSH(t,r,7),i=jw.rotrSL(t,r,1)^jw.rotrSL(t,r,8)^jw.shrSL(t,r,7),s=0|_P[e-2],o=0|SP[e-2],a=jw.rotrSH(s,o,19)^jw.rotrBH(s,o,61)^jw.shrSH(s,o,6),c=jw.rotrSL(s,o,19)^jw.rotrBL(s,o,61)^jw.shrSL(s,o,6),u=jw.add4L(i,c,SP[e-7],SP[e-16]),d=jw.add4H(u,n,a,_P[e-7],_P[e-16]);_P[e]=0|d,SP[e]=0|u}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:u,Eh:d,El:h,Fh:l,Fl:f,Gh:p,Gl:m,Hh:g,Hl:y}=this;for(let e=0;e<80;e++){const t=jw.rotrSH(d,h,14)^jw.rotrSH(d,h,18)^jw.rotrBH(d,h,41),b=jw.rotrSL(d,h,14)^jw.rotrSL(d,h,18)^jw.rotrBL(d,h,41),v=d&l^~d&p,w=h&f^~h&m,A=jw.add5L(y,b,w,IP[e],SP[e]),E=jw.add5H(A,g,t,v,xP[e],_P[e]),x=0|A,I=jw.rotrSH(r,n,28)^jw.rotrBH(r,n,34)^jw.rotrBH(r,n,39),_=jw.rotrSL(r,n,28)^jw.rotrBL(r,n,34)^jw.rotrBL(r,n,39),S=r&i^r&o^i&o,P=n&s^n&a^s&a;g=0|p,y=0|m,p=0|l,m=0|f,l=0|d,f=0|h,({h:d,l:h}=jw.add(0|c,0|u,0|E,0|x)),c=0|o,u=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const O=jw.add3L(x,_,P);r=jw.add3H(O,E,I,S),n=0|O}({h:r,l:n}=jw.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=jw.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=jw.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:u}=jw.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:d,l:h}=jw.add(0|this.Eh,0|this.El,0|d,0|h)),({h:l,l:f}=jw.add(0|this.Fh,0|this.Fl,0|l,0|f)),({h:p,l:m}=jw.add(0|this.Gh,0|this.Gl,0|p,0|m)),({h:g,l:y}=jw.add(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(r,n,i,s,o,a,c,u,d,h,l,f,p,m,g,y)}roundClean(){_P.fill(0),SP.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const OP=Jw((()=>new PP));function kP(e,t,r,n,i){if(!["sha256","sha512"].includes(i))throw new Error("Only sha256 and sha512 are supported");return bA(e),bA(t),mP("sha256"===i?EP:OP,e,t,{c:r,dkLen:n})}function TP(e,t,r,n,i,s){let o=e[t++]^r[n++],a=e[t++]^r[n++],c=e[t++]^r[n++],u=e[t++]^r[n++],d=e[t++]^r[n++],h=e[t++]^r[n++],l=e[t++]^r[n++],f=e[t++]^r[n++],p=e[t++]^r[n++],m=e[t++]^r[n++],g=e[t++]^r[n++],y=e[t++]^r[n++],b=e[t++]^r[n++],v=e[t++]^r[n++],w=e[t++]^r[n++],A=e[t++]^r[n++],E=o,x=a,I=c,_=u,S=d,P=h,O=l,k=f,T=p,C=m,M=g,R=y,N=b,B=v,L=w,j=A;for(let e=0;e<8;e+=2)S^=Hw(E+N|0,7),T^=Hw(S+E|0,9),N^=Hw(T+S|0,13),E^=Hw(N+T|0,18),C^=Hw(P+x|0,7),B^=Hw(C+P|0,9),x^=Hw(B+C|0,13),P^=Hw(x+B|0,18),L^=Hw(M+O|0,7),I^=Hw(L+M|0,9),O^=Hw(I+L|0,13),M^=Hw(O+I|0,18),_^=Hw(j+R|0,7),k^=Hw(_+j|0,9),R^=Hw(k+_|0,13),j^=Hw(R+k|0,18),x^=Hw(E+_|0,7),I^=Hw(x+E|0,9),_^=Hw(I+x|0,13),E^=Hw(_+I|0,18),O^=Hw(P+S|0,7),k^=Hw(O+P|0,9),S^=Hw(k+O|0,13),P^=Hw(S+k|0,18),R^=Hw(M+C|0,7),T^=Hw(R+M|0,9),C^=Hw(T+R|0,13),M^=Hw(C+T|0,18),N^=Hw(j+L|0,7),B^=Hw(N+j|0,9),L^=Hw(B+N|0,13),j^=Hw(L+B|0,18);i[s++]=o+E|0,i[s++]=a+x|0,i[s++]=c+I|0,i[s++]=u+_|0,i[s++]=d+S|0,i[s++]=h+P|0,i[s++]=l+O|0,i[s++]=f+k|0,i[s++]=p+T|0,i[s++]=m+C|0,i[s++]=g+M|0,i[s++]=y+R|0,i[s++]=b+N|0,i[s++]=v+B|0,i[s++]=w+L|0,i[s++]=A+j|0}function CP(e,t,r,n,i){let s=n+0,o=n+16*i;for(let n=0;n<16;n++)r[o+n]=e[t+16*(2*i-1)+n];for(let n=0;n<i;n++,s+=16,t+=16)TP(r,o,e,t,r,s),n>0&&(o+=16),TP(r,s,e,t+=16,r,o)}function MP(e,t,r,n,i,s,o){return bA(e),bA(t),function(e,t,r){const{N:n,r:i,p:s,dkLen:o,blockSize32:a,V:c,B32:u,B:d,tmp:h,blockMixCb:l}=function(e,t,r){const n=Zw({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:i,r:s,p:o,dkLen:a,asyncTick:c,maxmem:u,onProgress:d}=n;if(Ew(i),Ew(s),Ew(o),Ew(a),Ew(c),Ew(u),void 0!==d&&"function"!=typeof d)throw new Error("progressCb should be function");const h=128*s,l=h/4;if(i<=1||i&i-1||i>=2**(h/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>137438953440/h)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const f=h*(i+o);if(f>u)throw new Error(`Scrypt: parameters too large, ${f} (128 * r * (N + p)) > ${u} (maxmem)`);const p=mP(EP,e,t,{c:1,dkLen:h*o}),m=Fw(p),g=Fw(new Uint8Array(h*i)),y=Fw(new Uint8Array(h));let b=()=>{};if(d){const e=2*i*o,t=Math.max(Math.floor(e/1e4),1);let r=0;b=()=>{r++,!d||r%t&&r!==e||d(r/e)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:l,V:g,B32:m,B:p,tmp:y,blockMixCb:b,asyncTick:c}}(e,t,r);zw||$w(u);for(let e=0;e<s;e++){const t=a*e;for(let e=0;e<a;e++)c[e]=u[t+e];for(let e=0,t=0;e<n-1;e++)CP(c,t,c,t+=a,i),l();CP(c,(n-1)*a,u,t,i),l();for(let e=0;e<n;e++){const e=u[t+a-16]%n;for(let r=0;r<a;r++)h[r]=u[t+r]^c[e*a+r];CP(h,0,u,t,i),l()}}return zw||$w(u),function(e,t,r,n,i){const s=mP(EP,e,r,{c:1,dkLen:t});return r.fill(0),n.fill(0),i.fill(0),s}(e,o,d,c,h)}(e,t,{N:r,r:i,p:n,dkLen:s,onProgress:o})}const RP=BigInt(1),NP=BigInt(2);function BP(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function LP(e){if(!BP(e))throw new Error("Uint8Array expected")}const jP=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function DP(e){LP(e);let t="";for(let r=0;r<e.length;r++)t+=jP[e[r]];return t}function FP(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const UP={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function qP(e){return e>=UP._0&&e<=UP._9?e-UP._0:e>=UP._A&&e<=UP._F?e-(UP._A-10):e>=UP._a&&e<=UP._f?e-(UP._a-10):void 0}function HP(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=qP(e.charCodeAt(i)),s=qP(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function zP(e){return FP(DP(e))}function $P(e){return LP(e),FP(DP(Uint8Array.from(e).reverse()))}function GP(e,t){return HP(e.toString(16).padStart(2*t,"0"))}function VP(e,t){return GP(e,t).reverse()}function KP(e,t,r){let n;if("string"==typeof t)try{n=HP(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!BP(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function WP(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];LP(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const QP=e=>(NP<<BigInt(e-1))-RP,ZP=e=>new Uint8Array(e),JP=e=>Uint8Array.from(e);function YP(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=ZP(e),i=ZP(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),c=(e=ZP())=>{i=a(JP([0]),e),n=a(),0!==e.length&&(i=a(JP([1]),e),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return WP(...r)};return(e,t)=>{let r;for(o(),c(e);!(r=t(u()));)c();return o(),r}}const XP={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||BP(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function eO(e,t,r={}){const n=(t,r,n)=>{const i=XP[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}const tO=BigInt(0),rO=BigInt(1),nO=BigInt(2),iO=BigInt(3),sO=BigInt(4),oO=BigInt(5),aO=BigInt(8);function cO(e,t){const r=e%t;return r>=tO?r:t+r}function uO(e,t,r){if(r<=tO||t<tO)throw new Error("Expected power/modulo > 0");if(r===rO)return tO;let n=rO;for(;t>tO;)t&rO&&(n=n*e%r),e=e*e%r,t>>=rO;return n}function dO(e,t,r){let n=e;for(;t-- >tO;)n*=n,n%=r;return n}function hO(e,t){if(e===tO||t<=tO)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=cO(e,t),n=t,i=tO,s=rO,o=rO,a=tO;for(;r!==tO;){const e=n/r,t=n%r,c=i-o*e,u=s-a*e;n=r,r=t,i=o,s=a,o=c,a=u}if(n!==rO)throw new Error("invert: does not exist");return cO(i,t)}BigInt(9),BigInt(16);const lO=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fO(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function pO(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function mO(e){const t=pO(e);return t+Math.ceil(t/2)}const gO=BigInt(0),yO=BigInt(1);function bO(e){return eO(e.Fp,lO.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),eO(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...fO(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{Ph:vO,aT:wO}=b,AO={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=AO;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:vO(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=AO,r="string"==typeof e?wO(e):e;LP(r);let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=AO._parseInt(r.subarray(2)),{d:o,l:a}=AO._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,o=i.length/2,a=r(s),c=r(o);return`30${r(o+s+4)}02${c}${i}02${a}${n}`}},EO=BigInt(0),xO=BigInt(1),IO=(BigInt(2),BigInt(3));function _O(e){const t=function(e){const t=bO(e);return eO(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(e){return cO(e,n)}function a(e){return hO(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=function(e){const t=function(e){const t=bO(e);eO(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{const i=t.toAffine();return WP(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){return"bigint"==typeof e&&EO<e&&e<t.n}function a(e){if(!o(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(BP(e)&&(e=DP(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:zP(KP("private key",e,n))}catch(t){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return i&&(o=cO(o,s)),a(o),o}const u=new Map;function d(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?h.ZERO:new h(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(i(KP("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),o=s(e);if(!r.eql(i,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){d(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(s,i)),u=r.eql(r.mul(n,a),r.mul(o,i));return c&&u}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,IO),{px:s,py:o,pz:a}=this;let c=r.ZERO,u=r.ZERO,d=r.ZERO,l=r.mul(s,s),f=r.mul(o,o),p=r.mul(a,a),m=r.mul(s,o);return m=r.add(m,m),d=r.mul(s,a),d=r.add(d,d),c=r.mul(e,d),u=r.mul(i,p),u=r.add(c,u),c=r.sub(f,u),u=r.add(f,u),u=r.mul(c,u),c=r.mul(m,c),d=r.mul(i,d),p=r.mul(e,p),m=r.sub(l,p),m=r.mul(e,m),m=r.add(m,d),d=r.add(l,l),l=r.add(d,l),l=r.add(l,p),l=r.mul(l,m),u=r.add(u,l),p=r.mul(o,a),p=r.add(p,p),l=r.mul(p,m),c=r.sub(c,l),d=r.mul(p,f),d=r.add(d,d),d=r.add(d,d),new h(c,u,d)}add(e){d(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:c}=e;let u=r.ZERO,l=r.ZERO,f=r.ZERO;const p=t.a,m=r.mul(t.b,IO);let g=r.mul(n,o),y=r.mul(i,a),b=r.mul(s,c),v=r.add(n,i),w=r.add(o,a);v=r.mul(v,w),w=r.add(g,y),v=r.sub(v,w),w=r.add(n,s);let A=r.add(o,c);return w=r.mul(w,A),A=r.add(g,b),w=r.sub(w,A),A=r.add(i,s),u=r.add(a,c),A=r.mul(A,u),u=r.add(y,b),A=r.sub(A,u),f=r.mul(p,w),u=r.mul(m,b),f=r.add(u,f),u=r.sub(y,f),f=r.add(y,f),l=r.mul(u,f),y=r.add(g,g),y=r.add(y,g),b=r.mul(p,b),w=r.mul(m,w),y=r.add(y,b),b=r.sub(g,b),b=r.mul(p,b),w=r.add(w,b),g=r.mul(y,w),l=r.add(l,g),g=r.mul(A,w),u=r.mul(v,u),u=r.sub(u,g),g=r.mul(v,y),f=r.mul(A,f),f=r.add(f,g),new h(u,l,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return f.wNAFCached(this,u,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(h.fromAffine)}))}multiplyUnsafe(e){const n=h.ZERO;if(e===EO)return n;if(a(e),e===xO)return this;const{endo:i}=t;if(!i)return f.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:c,k2:u}=i.splitScalar(e),d=n,l=n,p=this;for(;o>EO||u>EO;)o&xO&&(d=d.add(p)),u&xO&&(l=l.add(p)),p=p.double(),o>>=xO,u>>=xO;return s&&(d=d.negate()),c&&(l=l.negate()),l=new h(r.mul(l.px,i.beta),l.py,l.pz),d.add(l)}multiply(e){a(e);let n,i,s=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:c}=o.splitScalar(s);let{p:u,f:d}=this.wNAF(t),{p:l,f:p}=this.wNAF(c);u=f.constTimeNegate(e,u),l=f.constTimeNegate(a,l),l=new h(r.mul(l.px,o.beta),l.py,l.pz),n=u.add(l),i=d.add(p)}else{const{p:e,f:t}=this.wNAF(s);n=e,i=t}return h.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){const n=h.BASE,i=(e,t)=>t!==EO&&t!==xO&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){const{px:t,py:n,pz:i}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(i));const o=r.mul(t,e),a=r.mul(n,e),c=r.mul(i,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===xO)return!0;if(r)return r(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===xO?this:r?r(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(h,this,e)}toHex(e=!0){return DP(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const l=t.nBitLength,f=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>gO;)r&yO&&(n=n.add(i)),i=i.double(),r>>=yO;return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t),s=[];let o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,i,s){const{windows:o,windowSize:a}=n(t);let c=e.ZERO,u=e.BASE;const d=BigInt(2**t-1),h=2**t,l=BigInt(t);for(let e=0;e<o;e++){const t=e*a;let n=Number(s&d);s>>=l,n>a&&(n-=h,s+=yO);const o=t,f=t+Math.abs(n)-1,p=e%2!=0,m=n<0;0===n?u=u.add(r(p,i[o])):c=c.add(r(m,i[f]))}return{p:c,f:u}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,n(s))),this.wNAF(i,s,r)}}}(h,t.endo?Math.ceil(l/2):l);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}({...t,toBytes(e,t,n){const i=t.toAffine(),s=r.toBytes(i.x),o=WP;return n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===s&&4===n)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}{const e=zP(o);if(!(EO<(a=e)&&a<r.ORDER))throw new Error("Point is not on curve");const t=d(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!=((i&xO)===xO)&&(i=r.neg(i)),{x:e,y:i}}var a}}),l=e=>DP(GP(e,t.nByteLength));function f(e){return e>n>>xO}const p=(e,t,r)=>zP(e.slice(t,r));class m{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=KP("compactSignature",e,2*r),new m(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=AO.toSig(KP("DER",e));return new m(t,r)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:s}=this,u=v(KP("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const d=2===s||3===s?n+t.n:n;if(d>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&s?"03":"02",f=c.fromHex(h+l(d)),p=a(d),m=o(-u*p),g=o(i*p),y=c.BASE.multiplyAndAddUnsafe(f,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return HP(this.toDERHex())}toDERHex(){return AO.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return HP(this.toCompactHex())}toCompactHex(){return l(this.r)+l(this.s)}}const g={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=mO(t.n);return function(e,t,r=!1){const n=e.length,i=pO(t),s=mO(t);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=cO(r?zP(e):$P(e),t-rO)+rO;return r?VP(o,i):GP(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=BP(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof c}const b=t.bits2int||function(e){const r=zP(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},v=t.bits2int_modN||function(e){return o(b(e))},w=QP(t.nBitLength);function A(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(EO<=e&&e<w))throw new Error(`bigint expected < 2^${t.nBitLength}`);return GP(e,t.nByteLength)}const E={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(r)},sign:function(e,n,i=E){const{seed:s,k2sig:d}=function(e,n,i=E){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:d}=t;let{lowS:l,prehash:p,extraEntropy:g}=i;null==l&&(l=!0),e=KP("msgHash",e),p&&(e=KP("prehashed msgHash",s(e)));const y=v(e),w=u(n),x=[A(w),A(y)];if(null!=g&&!1!==g){const e=!0===g?d(r.BYTES):g;x.push(KP("extraEntropy",e))}const I=WP(...x),_=y;return{seed:I,k2sig:function(e){const t=b(e);if(!h(t))return;const r=a(t),n=c.BASE.multiply(t).toAffine(),i=o(n.x);if(i===EO)return;const s=o(r*o(_+i*w));if(s===EO)return;let u=(n.x===i?0:2)|Number(n.y&xO),d=s;return l&&f(s)&&(d=function(e){return f(e)?o(-e):e}(s),u^=1),new m(i,d,u)}}}(e,n,i),l=t;return YP(l.hash.outputLen,l.nByteLength,l.hmac)(s,d)},verify:function(e,r,n,i=x){const s=e;if(r=KP("msgHash",r),n=KP("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:d}=i;let h,l;try{if("string"==typeof s||BP(s))try{h=m.fromDER(s)}catch(e){if(!(e instanceof AO.Err))throw e;h=m.fromCompact(s)}else{if("object"!=typeof s||"bigint"!=typeof s.r||"bigint"!=typeof s.s)throw new Error("PARSE");{const{r:e,s:t}=s;h=new m(e,t)}}l=c.fromHex(n)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&h.hasHighS())return!1;d&&(r=t.hash(r));const{r:f,s:p}=h,g=v(r),y=a(p),b=o(g*y),w=o(f*y),A=c.BASE.multiplyAndAddUnsafe(l,b,w)?.toAffine();return!!A&&o(A.x)===f},ProjectivePoint:c,Signature:m,utils:g}}function SO(e){return{hash:e,hmac:(t,...r)=>pP(e,t,Kw(...r)),randomBytes:Yw}}BigInt(4);const PO=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),OO=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),kO=BigInt(1),TO=BigInt(2),CO=(e,t)=>(e+t/TO)/t;const MO=function(e,t,r=!1,n={}){if(e<=tO)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=fO(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=function(e){if(e%sO===iO){const t=(e+rO)/sO;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%aO===oO){const t=(e-oO)/aO;return function(e,r){const n=e.mul(r,nO),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,nO),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-rO)/nO;let r,n,i;for(r=e-rO,n=0;r%nO===tO;r/=nO,n++);for(i=nO;i<e&&uO(i,t,e)!==e-rO;i++);if(1===n){const t=(e+rO)/sO;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+rO)/nO;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(o,s),d=e.pow(o,r);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,rO<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),d=e.mul(d,c),a=t}return u}}(e)}(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:QP(i),ZERO:tO,ONE:rO,create:t=>cO(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return tO<=t&&t<e},is0:e=>e===tO,isOdd:e=>(e&rO)===rO,neg:t=>cO(-t,e),eql:(e,t)=>e===t,sqr:t=>cO(t*t,e),add:(t,r)=>cO(t+r,e),sub:(t,r)=>cO(t-r,e),mul:(t,r)=>cO(t*r,e),pow:(e,t)=>function(e,t,r){if(r<tO)throw new Error("Expected power > 0");if(r===tO)return e.ONE;if(r===rO)return t;let n=e.ONE,i=t;for(;r>tO;)r&rO&&(n=e.mul(n,i)),i=e.sqr(i),r>>=rO;return n}(a,e,t),div:(t,r)=>cO(t*hO(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>hO(t,e),sqrt:n.sqrt||(e=>o(a,e)),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?VP(e,s):GP(e,s),fromBytes:e=>{if(e.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?$P(e):zP(e)}});return Object.freeze(a)}(PO,void 0,void 0,{sqrt:function(e){const t=PO,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,h=dO(d,r,t)*d%t,l=dO(h,r,t)*d%t,f=dO(l,TO,t)*u%t,p=dO(f,i,t)*f%t,m=dO(p,s,t)*p%t,g=dO(m,a,t)*m%t,y=dO(g,c,t)*g%t,b=dO(y,a,t)*m%t,v=dO(b,r,t)*d%t,w=dO(v,o,t)*p%t,A=dO(w,n,t)*u%t,E=dO(A,TO,t);if(!MO.eql(MO.sqr(E),e))throw new Error("Cannot find square root");return E}}),RO=function(e,t){const r=t=>_O({...e,...SO(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:MO,n:OO,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=OO,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-kO*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=CO(s*e,t),c=CO(-n*e,t);let u=cO(e-a*r-c*i,t),d=cO(-a*n-c*s,t);const h=u>o,l=d>o;if(h&&(u=t-u),l&&(d=t-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:u,k2neg:l,k2:d}}}},EP);var NO;BigInt(0),RO.ProjectivePoint;const BO=null!==(NO=RO)&&void 0!==NO?NO:v,LO=BigInt("0xffffffffffffffff"),jO=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),DO=BO.CURVE.n/BigInt(2),FO={type:"object",required:["crypto","id","version","address"],properties:{crypto:{type:"object",required:["cipher","ciphertext","cipherparams","kdf","kdfparams","mac"],properties:{cipher:{type:"string"},ciphertext:{type:"string"},cipherparams:{type:"object"},kdf:{type:"string"},kdfparams:{type:"object"},salt:{type:"string"},mac:{type:"string"}}},id:{type:"string"},version:{type:"number"},address:{type:"string"}}};var UO,qO,HO,zO,$O,GO;!function(e){e[e.Mainnet=1]="Mainnet",e[e.Goerli=5]="Goerli",e[e.Sepolia=11155111]="Sepolia"}(UO||(UO={})),function(e){e.Chainstart="chainstart",e.Homestead="homestead",e.Dao="dao",e.TangerineWhistle="tangerineWhistle",e.SpuriousDragon="spuriousDragon",e.Byzantium="byzantium",e.Constantinople="constantinople",e.Petersburg="petersburg",e.Istanbul="istanbul",e.MuirGlacier="muirGlacier",e.Berlin="berlin",e.London="london",e.ArrowGlacier="arrowGlacier",e.GrayGlacier="grayGlacier",e.MergeForkIdTransition="mergeForkIdTransition",e.Merge="merge",e.Shanghai="shanghai",e.ShardingForkDev="shardingFork"}(qO||(qO={})),function(e){e.ProofOfStake="pos",e.ProofOfWork="pow",e.ProofOfAuthority="poa"}(HO||(HO={})),function(e){e.Ethash="ethash",e.Clique="clique",e.Casper="casper"}(zO||(zO={})),function(e){e.PolygonMainnet="polygon-mainnet",e.PolygonMumbai="polygon-mumbai",e.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",e.ArbitrumOne="arbitrum-one",e.xDaiChain="x-dai-chain",e.OptimisticKovan="optimistic-kovan",e.OptimisticEthereum="optimistic-ethereum"}($O||($O={})),function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"}(GO||(GO={}));const VO=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return tI(e)?e.slice(2):e},KO=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};function WO(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}const QO=function(e){var t;if(null==e)return new Uint8Array;if(e instanceof Uint8Array)return e;if("Uint8Array"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name))return Uint8Array.from(e);if(Array.isArray(e))return Uint8Array.from(e);if("string"==typeof e){if(!Xx(e))throw new Error(`Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ${e}`);return WI(WO(VO(e)))}if("number"==typeof e)return QO(JI(e));if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t=`0${t}`),QO(`0x${t}`)}if(e.toArray)return Uint8Array.from(e.toArray());throw new Error("invalid type")};function ZO(e){const t=KI(e);return"0x"===t?BigInt(0):BigInt(t)}const JO=function(e){return new Uint8Array(e).fill(0)};function YO(e){if(!UI(e))throw new Error(`This method only supports Uint8Array but input was: ${e}`)}const XO=function(e,t){return YO(e),function(e,t){const r=JO(t);return e.length<t?(r.set(e,t-e.length),r):e.subarray(-t)}(e,t)},ek=function(e){return YO(e),function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e}(e)},tk=e=>`0x${e.toString(16)}`;function rk(e){return ek(QO(`0x${e.toString(16)}`))}const nk=function(e,t,r,n,i){const s=function(e,t){return e===BigInt(0)||e===BigInt(1)?e:void 0===t?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}(t,i);if(!function(e){return e===BigInt(0)||e===BigInt(1)}(s))throw new Error("Invalid signature v value");return new BO.Signature(ZO(r),ZO(n)).addRecoveryBit(Number(s)).recoverPublicKey(e).toRawBytes(!1).slice(1)};function ik(e,t){if(null===e)return null;if(void 0===e)return;if("string"==typeof e&&!Xx(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=QO(e);switch(t){case GO.Uint8Array:return r;case GO.BigInt:return ZO(r);case GO.Number:{const e=ZO(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case GO.PrefixedHexString:return KI(r);default:throw new Error("unknown outputType")}}var sk=i(6289),ok=i(2566);const ak={name:"goerli",chainId:5,networkId:5,defaultHardfork:"merge",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://goerli.etherscan.io/block/7382818",name:"merge",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},ck={name:"mainnet",chainId:1,networkId:1,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://etherscan.io/block/15537393",name:"merge",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},uk={name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://sepolia.etherscan.io/block/1450408",name:"merge",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]},dk={1153:{name:"EIP-1153",number:1153,comment:"Transient Storage",url:"https://eips.ethereum.org/EIPS/eip-1153",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}},vm:{},pow:{}},1559:{name:"EIP-1559",number:1559,comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}},gasPrices:{},vm:{},pow:{}},2315:{name:"EIP-2315",number:2315,comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:"Draft",minimumHardfork:"istanbul",gasConfig:{},gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}},vm:{},pow:{}},2537:{name:"EIP-2537",number:2537,comment:"BLS12-381 precompiles",url:"https://eips.ethereum.org/EIPS/eip-2537",status:"Draft",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{Bls12381G1AddGas:{v:600,d:"Gas cost of a single BLS12-381 G1 addition precompile-call"},Bls12381G1MulGas:{v:12e3,d:"Gas cost of a single BLS12-381 G1 multiplication precompile-call"},Bls12381G2AddGas:{v:4500,d:"Gas cost of a single BLS12-381 G2 addition precompile-call"},Bls12381G2MulGas:{v:55e3,d:"Gas cost of a single BLS12-381 G2 multiplication precompile-call"},Bls12381PairingBaseGas:{v:115e3,d:"Base gas cost of BLS12-381 pairing check"},Bls12381PairingPerPairGas:{v:23e3,d:"Per-pair gas cost of BLS12-381 pairing check"},Bls12381MapG1Gas:{v:5500,d:"Gas cost of BLS12-381 map field element to G1"},Bls12381MapG2Gas:{v:11e4,d:"Gas cost of BLS12-381 map field element to G2"},Bls12381MultiExpGasDiscount:{v:[[1,1200],[2,888],[3,764],[4,641],[5,594],[6,547],[7,500],[8,453],[9,438],[10,423],[11,408],[12,394],[13,379],[14,364],[15,349],[16,334],[17,330],[18,326],[19,322],[20,318],[21,314],[22,310],[23,306],[24,302],[25,298],[26,294],[27,289],[28,285],[29,281],[30,277],[31,273],[32,269],[33,268],[34,266],[35,265],[36,263],[37,262],[38,260],[39,259],[40,257],[41,256],[42,254],[43,253],[44,251],[45,250],[46,248],[47,247],[48,245],[49,244],[50,242],[51,241],[52,239],[53,238],[54,236],[55,235],[56,233],[57,232],[58,231],[59,229],[60,228],[61,226],[62,225],[63,223],[64,222],[65,221],[66,220],[67,219],[68,219],[69,218],[70,217],[71,216],[72,216],[73,215],[74,214],[75,213],[76,213],[77,212],[78,211],[79,211],[80,210],[81,209],[82,208],[83,208],[84,207],[85,206],[86,205],[87,205],[88,204],[89,203],[90,202],[91,202],[92,201],[93,200],[94,199],[95,199],[96,198],[97,197],[98,196],[99,196],[100,195],[101,194],[102,193],[103,193],[104,192],[105,191],[106,191],[107,190],[108,189],[109,188],[110,188],[111,187],[112,186],[113,185],[114,185],[115,184],[116,183],[117,182],[118,182],[119,181],[120,180],[121,179],[122,179],[123,178],[124,177],[125,176],[126,176],[127,175],[128,174]],d:"Discount gas costs of calls to the MultiExp precompiles with `k` (point, scalar) pair"}},vm:{},pow:{}},2565:{name:"EIP-2565",number:2565,comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:"Final",minimumHardfork:"byzantium",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}},vm:{},pow:{}},2718:{name:"EIP-2718",comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{},vm:{},pow:{}},2929:{name:"EIP-2929",comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}},vm:{},pow:{}},2930:{name:"EIP-2930",comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:"Final",minimumHardfork:"istanbul",requiredEIPs:[2718,2929],gasConfig:{},gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}},vm:{},pow:{}},3198:{name:"EIP-3198",number:3198,comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}},vm:{},pow:{}},3529:{name:"EIP-3529",comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}},vm:{},pow:{}},3540:{name:"EIP-3540",number:3540,comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:"Review",minimumHardfork:"london",requiredEIPs:[3541],gasConfig:{},gasPrices:{},vm:{},pow:{}},3541:{name:"EIP-3541",comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:"Final",minimumHardfork:"berlin",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3554:{name:"EIP-3554",comment:"Reduction in refunds",url:"Difficulty Bomb Delay to December 1st 2021",status:"Final",minimumHardfork:"muirGlacier",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},3607:{name:"EIP-3607",number:3607,comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:"Final",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3651:{name:"EIP-3651",number:3198,comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:"Review",minimumHardfork:"london",requiredEIPs:[2929],gasConfig:{},gasPrices:{},vm:{},pow:{}},3670:{name:"EIP-3670",number:3670,comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:"london",requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},3675:{name:"EIP-3675",number:3675,comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Final",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3855:{name:"EIP-3855",number:3855,comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}},vm:{},pow:{}},3860:{name:"EIP-3860",number:3860,comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:"Review",minimumHardfork:"spuriousDragon",requiredEIPs:[],gasConfig:{},gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}},pow:{}},4345:{name:"EIP-4345",number:4345,comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},4399:{name:"EIP-4399",number:4399,comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:"Review",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},5133:{name:"EIP-5133",number:5133,comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:"Draft",minimumHardfork:"grayGlacier",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}}},hk={chainstart:{name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:"",gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Base fee of the SHA3 opcode"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},homestead:{name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final",gasConfig:{},gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}},vm:{},pow:{}},dao:{name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{}},tangerineWhistle:{name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final",gasConfig:{},gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{},pow:{}},spuriousDragon:{name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final",gasConfig:{},gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow:{}},byzantium:{name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},vm:{},pow:{minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},constantinople:{name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},vm:{},pow:{minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},petersburg:{name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm:{},pow:{}},istanbul:{name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Final",gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}},vm:{},pow:{}},muirGlacier:{name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},berlin:{name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:"Final",eips:[2565,2929,2718,2930]},london:{name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:"Final",eips:[1559,3198,3529,3541]},shanghai:{name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:"Final",eips:[3651,3855,3860,4895]},arrowGlacier:{name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:"Final",eips:[4345],gasConfig:{},gasPrices:{},vm:{},pow:{}},grayGlacier:{name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:"Draft",eips:[5133],gasConfig:{},gasPrices:{},vm:{},pow:{}},mergeForkIdTransition:{name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Draft",eips:[]},merge:{name:"merge",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:"Final",consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]}},{buf:lk}=ok;class fk extends w_{static custom(e,t={}){var r;const n=null!==(r=t.baseChain)&&void 0!==r?r:"mainnet",i=Object.assign({},fk._getChainParams(n));if(i.name="custom-chain","string"!=typeof e)return new fk(Object.assign({chain:Object.assign(Object.assign({},i),e)},t));if(e===$O.PolygonMainnet)return fk.custom({name:$O.PolygonMainnet,chainId:137,networkId:137},t);if(e===$O.PolygonMumbai)return fk.custom({name:$O.PolygonMumbai,chainId:80001,networkId:80001},t);if(e===$O.ArbitrumRinkebyTestnet)return fk.custom({name:$O.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611},t);if(e===$O.ArbitrumOne)return fk.custom({name:$O.ArbitrumOne,chainId:42161,networkId:42161},t);if(e===$O.xDaiChain)return fk.custom({name:$O.xDaiChain,chainId:100,networkId:100},t);if(e===$O.OptimisticKovan)return fk.custom({name:$O.OptimisticKovan,chainId:69,networkId:69},Object.assign({hardfork:qO.Berlin},t));if(e===$O.OptimisticEthereum)return fk.custom({name:$O.OptimisticEthereum,chainId:10,networkId:10},Object.assign({hardfork:qO.Berlin},t));throw new Error(`Custom chain ${e} not supported`)}static fromGethGenesis(e,{chain:t,eips:r,genesisHash:n,hardfork:i,mergeForkIdPostMerge:s}){var o;const a=function(e,t,r){try{if(["config","difficulty","gasLimit","alloc"].some((t=>!(t in e))))throw new Error("Invalid format, expected geth genesis fields missing");return void 0!==t&&(e.name=t),function(e,t=!0){var r,n;const{name:i,config:s,difficulty:o,mixHash:a,gasLimit:c,coinbase:u,baseFeePerGas:d}=e;let{extraData:h,timestamp:l,nonce:f}=e;const p=Number(l),{chainId:m}=s;if(""===h&&(h="0x"),tI(l)||(l=KO(parseInt(l))),18!==f.length&&(f=function(e){return e&&"0x0"!==e?tI(e)?`0x${VO(e).padStart(16,"0")}`:`0x${e.padStart(16,"0")}`:"0x0000000000000000"}(f)),s.eip155Block!==s.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const g={name:i,chainId:m,networkId:m,genesis:{timestamp:l,gasLimit:parseInt(c),difficulty:parseInt(o),nonce:f,extraData:h,mixHash:a,coinbase:u,baseFeePerGas:d},hardfork:void 0,hardforks:[],bootstrapNodes:[],consensus:void 0!==s.clique?{type:"poa",algorithm:"clique",clique:{period:null!==(r=s.clique.period)&&void 0!==r?r:s.clique.blockperiodseconds,epoch:null!==(n=s.clique.epoch)&&void 0!==n?n:s.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},y={[qO.Homestead]:{name:"homesteadBlock"},[qO.Dao]:{name:"daoForkBlock"},[qO.TangerineWhistle]:{name:"eip150Block"},[qO.SpuriousDragon]:{name:"eip155Block"},[qO.Byzantium]:{name:"byzantiumBlock"},[qO.Constantinople]:{name:"constantinopleBlock"},[qO.Petersburg]:{name:"petersburgBlock"},[qO.Istanbul]:{name:"istanbulBlock"},[qO.MuirGlacier]:{name:"muirGlacierBlock"},[qO.Berlin]:{name:"berlinBlock"},[qO.London]:{name:"londonBlock"},[qO.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:t},[qO.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[qO.ShardingForkDev]:{name:"shardingForkTime",postMerge:!0,isTimestamp:!0}},b=Object.keys(y).reduce(((e,t)=>(e[y[t].name]=t,e)),{}),v=Object.keys(s).filter((e=>void 0!==b[e]&&void 0!==s[e]&&null!==s[e]));if(g.hardforks=v.map((e=>({name:b[e],block:!0===y[b[e]].isTimestamp||"number"!=typeof s[e]?null:s[e],timestamp:!0===y[b[e]].isTimestamp&&"number"==typeof s[e]?s[e]:void 0}))).filter((e=>null!==e.block||void 0!==e.timestamp)),g.hardforks.sort(((e,t)=>{var r,n;return(null!==(r=e.block)&&void 0!==r?r:1/0)-(null!==(n=t.block)&&void 0!==n?n:1/0)})),g.hardforks.sort(((e,t)=>{var r,n;return(null!==(r=e.timestamp)&&void 0!==r?r:p)-(null!==(n=t.timestamp)&&void 0!==n?n:p)})),void 0!==s.terminalTotalDifficulty){const e={name:qO.Merge,ttd:s.terminalTotalDifficulty,block:null},t=g.hardforks.findIndex((e=>{var t;return!0===(null===(t=y[e.name])||void 0===t?void 0:t.postMerge)}));-1!==t?g.hardforks.splice(t,0,e):g.hardforks.push(e)}const w=g.hardforks.length>0?g.hardforks.slice(-1)[0]:void 0;return g.hardfork=null==w?void 0:w.name,g.hardforks.unshift({name:qO.Chainstart,block:0}),g}(e,r)}catch(e){throw new Error(`Error parsing parameters file: ${e.message}`)}}(e,t,s),c=new fk({chain:null!==(o=a.name)&&void 0!==o?o:"custom",customChains:[a],eips:r,hardfork:null!=i?i:a.hardfork});return void 0!==n&&c.setForkHashes(n),c}static isSupportedChainId(e){const t=this._getInitializedChains();return Boolean(t.names[e.toString()])}static _getChainParams(e,t){let r=e;const n=this._getInitializedChains(t);if("number"==typeof r||"bigint"==typeof r){if(r=r.toString(),n.names[r])return n[n.names[r]];throw new Error(`Chain with ID ${r} not supported`)}if(void 0!==n[r])return n[r];throw new Error(`Chain with name ${r} not supported`)}constructor(e){var t,r;super(),this._eips=[],this._customChains=null!==(t=e.customChains)&&void 0!==t?t:[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=null!==(r=this._chainParams.defaultHardfork)&&void 0!==r?r:qO.Merge,this.HARDFORK_CHANGES=this.hardforks().map((e=>[e.name,hk[e.name]])),this._hardfork=this.DEFAULT_HARDFORK,void 0!==e.hardfork&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips)}setChain(e){if("number"==typeof e||"bigint"==typeof e||"string"==typeof e)this._chainParams=fk._getChainParams(e,this._customChains);else{if("object"!=typeof e)throw new Error("Wrong input format");{if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const t=["networkId","genesis","hardforks","bootstrapNodes"];for(const r of t)if(!(r in e))throw new Error(`Missing required chain parameter: ${r}`);this._chainParams=e}}for(const e of this.hardforks())if(void 0===e.block)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let t=!1;for(const r of this.HARDFORK_CHANGES)r[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),t=!0);if(!t)throw new Error(`Hardfork with name ${e} not supported`)}getHardforkByBlockNumber(e,t,r){const n=ik(e,GO.BigInt),i=ik(t,GO.BigInt),s=ik(r,GO.Number),o=this.hardforks().filter((e=>null!==e.block||null!==e.ttd&&void 0!==e.ttd||void 0!==e.timestamp)),a=o.findIndex((e=>null!==e.ttd&&void 0!==e.ttd));if(o.slice(a+1).findIndex((e=>null!==e.ttd&&void 0!==e.ttd))>=0)throw Error("More than one merge hardforks found with ttd specified");let c=o.findIndex((e=>null!==e.block&&e.block>n||void 0!==s&&Number(e.timestamp)>s));if(-1===c)c=o.length;else if(0===c)throw Error("Must have at least one hardfork at block 0");if(void 0===s&&(c-=o.slice(0,c).reverse().findIndex((e=>null!==e.block||void 0!==e.ttd))),c-=1,null===o[c].block&&void 0===o[c].timestamp)(null==i||BigInt(o[c].ttd)>i)&&(c-=1);else if(a>=0&&null!=i){if(c>=a&&BigInt(o[a].ttd)>i)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(c<a&&BigInt(o[a].ttd)<=i)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const u=c;for(;c<o.length-1&&o[c].block===o[c+1].block&&o[c].timestamp===o[c+1].timestamp;c+=1);if(s){const e=o.slice(0,u).reduce(((e,t)=>{var r;return Math.max(Number(null!==(r=t.timestamp)&&void 0!==r?r:"0"),e)}),0);if(e>s)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");const t=o.slice(c+1).reduce(((e,t)=>{var r;return Math.min(Number(null!==(r=t.timestamp)&&void 0!==r?r:s),e)}),s);if(t<s)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return o[c].name}setHardforkByBlockNumber(e,t,r){const n=this.getHardforkByBlockNumber(e,t,r);return this.setHardfork(n),n}_getHardfork(e){const t=this.hardforks();for(const r of t)if(r.name===e)return r;return null}setEIPs(e=[]){for(const t of e){if(!(t in dk))throw new Error(`${t} not supported`);const r=this.gteHardfork(dk[t].minimumHardfork);if(!r)throw new Error(`${t} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${r}`);if(void 0!==dk[t].requiredEIPs)for(const r of dk[t].requiredEIPs)if(!e.includes(r)&&!this.isActivatedEIP(r))throw new Error(`${t} requires EIP ${r}, but is not included in the EIP list`)}this._eips=e}param(e,t){let r;for(const n of this._eips)if(r=this.paramByEIP(e,t,n),void 0!==r)return r;return this.paramByHardfork(e,t,this._hardfork)}paramByHardfork(e,t,r){let n=null;for(const i of this.HARDFORK_CHANGES){if("eips"in i[1]){const r=i[1].eips;for(const i of r){const r=this.paramByEIP(e,t,i);n="bigint"==typeof r?r:n}}else{if(void 0===i[1][e])throw new Error(`Topic ${e} not defined`);void 0!==i[1][e][t]&&(n=i[1][e][t].v)}if(i[0]===r)break}return BigInt(null!=n?n:0)}paramByEIP(e,t,r){if(!(r in dk))throw new Error(`${r} not supported`);const n=dk[r];if(!(e in n))throw new Error(`Topic ${e} not defined`);if(void 0===n[e][t])return;const i=n[e][t].v;return BigInt(i)}paramByBlock(e,t,r,n,i){const s=this.getHardforkByBlockNumber(r,n,i);return this.paramByHardfork(e,t,s)}isActivatedEIP(e){if(this.eips().includes(e))return!0;for(const t of this.HARDFORK_CHANGES){const r=t[1];if(this.gteHardfork(r.name)&&"eips"in r&&r.eips.includes(e))return!0}return!1}hardforkIsActiveOnBlock(e,t){const r=ik(t,GO.BigInt),n=null!=e?e:this._hardfork,i=this.hardforkBlock(n);return"bigint"==typeof i&&i!==BigInt(0)&&r>=i}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){const r=null!=e?e:this._hardfork,n=this.hardforks();let i=-1,s=-1,o=0;for(const e of n)e.name===r&&(i=o),e.name===t&&(s=o),o+=1;return i>=s&&-1!==s}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){var t;const r=null!=e?e:this._hardfork,n=null===(t=this._getHardfork(r))||void 0===t?void 0:t.block;return null==n?null:BigInt(n)}hardforkTimestamp(e){var t;const r=null!=e?e:this._hardfork,n=null===(t=this._getHardfork(r))||void 0===t?void 0:t.timestamp;return null==n?null:BigInt(n)}eipBlock(e){for(const t of this.HARDFORK_CHANGES){const r=t[1];if("eips"in r&&r.eips.includes(e))return this.hardforkBlock("number"==typeof t[0]?String(t[0]):t[0])}return null}hardforkTTD(e){var t;const r=null!=e?e:this._hardfork,n=null===(t=this._getHardfork(r))||void 0===t?void 0:t.ttd;return null==n?null:BigInt(n)}isHardforkBlock(e,t){const r=ik(e,GO.BigInt),n=null!=t?t:this._hardfork,i=this.hardforkBlock(n);return"bigint"==typeof i&&i!==BigInt(0)&&i===r}nextHardforkBlockOrTimestamp(e){var t,r,n;const i=null!==(t=e)&&void 0!==t?t:this._hardfork,s=this.hardforks();let o=s.findIndex((e=>e.name===i));if(i===qO.Merge&&(o-=1),o<0)return null;let a=null!==(r=s[o].timestamp)&&void 0!==r?r:s[o].block;a=null!=a?Number(a):null;const c=s.slice(o+1).find((e=>{var t;let r=null!==(t=e.timestamp)&&void 0!==t?t:e.block;return r=null!=r?Number(r):null,e.name!==qO.Merge&&null!=r&&r!==a}));if(void 0===c)return null;const u=null!==(n=c.timestamp)&&void 0!==n?n:c.block;return null==u?null:BigInt(u)}nextHardforkBlock(e){var t;const r=null!==(t=e)&&void 0!==t?t:this._hardfork;let n=this.hardforkBlock(r);if(null===n&&r===qO.Merge){const e=this.hardforks(),t=e.findIndex((e=>null!==e.ttd&&void 0!==e.ttd));if(t<0)throw Error("Merge hardfork should have been found");n=this.hardforkBlock(e[t-1].name)}return null===n?null:this.hardforks().reduce(((e,t)=>{const r=BigInt(null===t.block||void 0!==t.ttd&&null!==t.ttd?0:t.block);return r>n&&null===e?r:e}),null)}isNextHardforkBlock(e,t){const r=ik(e,GO.BigInt),n=null!=t?t:this._hardfork,i=this.nextHardforkBlock(n);return null!==i&&i===r}_calcForkHash(e,t){let r=new Uint8Array,n=0;for(const t of this.hardforks()){const{block:i,timestamp:s,name:o}=t;let a=null!=s?s:i;if(a=null!==a?Number(a):null,"number"==typeof a&&0!==a&&a!==n&&o!==qO.Merge&&(r=qI(r,WI(a.toString(16).padStart(16,"0"))),n=a),t.name===e)break}const i=qI(t,r),s=KI(function(e){const t=KO(e);return WI(`0x${WO(t.slice(2))}`)}(lk(i)>>>0));return s}forkHash(e,t){const r=null!=e?e:this._hardfork,n=this._getHardfork(r);if(null===n||null===(null==n?void 0:n.block)&&void 0===(null==n?void 0:n.timestamp)&&void 0===(null==n?void 0:n.ttd))throw new Error("No fork hash calculation possible for future hardfork");if(null!==(null==n?void 0:n.forkHash)&&void 0!==(null==n?void 0:n.forkHash))return n.forkHash;if(!t)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(r,t)}hardforkForForkHash(e){const t=this.hardforks().filter((t=>t.forkHash===e));return t.length>=1?t[t.length-1]:null}setForkHashes(e){var t;for(const r of this.hardforks()){const n=null!==(t=r.timestamp)&&void 0!==t?t:r.block;null!==r.forkHash&&void 0!==r.forkHash||null==n&&void 0===r.ttd||(r.forkHash=this.forkHash(r.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){return this._chainParams.hardforks}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.type),r[0]===e)break;return null!=t?t:this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.algorithm),r[0]===e)break;return null!=t?t:this._chainParams.consensus.algorithm}consensusConfig(){var e;const t=this.hardfork();let r;for(const e of this.HARDFORK_CHANGES)if("consensus"in e[1]&&(r=e[1].consensus[e[1].consensus.algorithm]),e[0]===t)break;return null!==(e=null!=r?r:this._chainParams.consensus[this.consensusAlgorithm()])&&void 0!==e?e:{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.removeAllListeners(),e}static _getInitializedChains(e){const t={};for(const[e,r]of Object.entries(UO))t[r]=e.toLowerCase();const r={mainnet:ck,goerli:ak,sepolia:uk};if(e)for(const n of e){const{name:e}=n;t[n.chainId.toString()]=e,r[e]=n}return r.names=t,r}}var pk;!function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists"}(pk||(pk={}));class mk{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new mk(JO(20))}equals(e){return HI(this.buf,e.buf)}isZero(){return this.equals(mk.zero())}toString(){return KI(this.buf)}toArray(){return this.buf}static publicToAddress(e,t=!1){let r=e;if(YO(r),t&&64!==r.length&&(r=BO.ProjectivePoint.fromHex(r).toRawBytes(!1).slice(1)),64!==r.length)throw new Error("Expected pubKey to be of length 64");return AA(r).slice(-20)}}const gk=e=>{let t,r;if(function(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}(e)){r=null!=e?e:[];const n=[];for(let e=0;e<r.length;e+=1){const t=r[e],i=KI(t[0]),s=[];for(let e=0;e<t[1].length;e+=1)s.push(KI(t[1][e]));const o={address:i,storageKeys:s};n.push(o)}t=n}else{t=e;const n=[];for(let t=0;t<e.length;t+=1){const r=e[t],i=QO(r.address),s=[];for(let e=0;e<r.storageKeys.length;e+=1)s.push(QO(r.storageKeys[e]));n.push([i,s])}r=n}return{AccessListJSON:t,accessList:r}},yk=e=>{for(let t=0;t<e.length;t+=1){const r=e[t],n=r[0],i=r[1];if(void 0!==r[2])throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==n.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<i.length;e+=1)if(32!==i[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}},bk=e=>{const t=[];for(let r=0;r<e.length;r+=1){const n=e[r],i={address:KI(XO(n[0],20)),storageKeys:[]},s=n&&n[1];for(let e=0;e<s.length;e+=1){const t=s[e];i.storageKeys.push(KI(XO(t,32)))}t.push(i)}return t},vk=(e,t)=>{const r=t.param("gasPrices","accessListStorageKeyCost"),n=t.param("gasPrices","accessListAddressCost");let i=0;for(let t=0;t<e.length;t+=1)i+=e[t][1].length;return e.length*Number(n)+i*Number(r)};class wk{constructor(e,t){var r,n;this.cache={hash:void 0,dataFee:void 0},this.activeCapabilities=[],this.DEFAULT_CHAIN=UO.Mainnet,this.DEFAULT_HARDFORK=qO.Merge;const{nonce:i,gasLimit:s,to:o,value:a,data:c,v:u,r:d,s:h,type:l}=e;this._type=Number(ZO(QO(l))),this.txOptions=t;const f=QO(""===o?"0x":o),p=QO(""===u?"0x":u),m=QO(""===d?"0x":d),g=QO(""===h?"0x":h);this.nonce=ZO(QO(""===i?"0x":i)),this.gasLimit=ZO(QO(""===s?"0x":s)),this.to=f.length>0?new mk(f):void 0,this.value=ZO(QO(""===a?"0x":a)),this.data=QO(""===c?"0x":c),this.v=p.length>0?ZO(p):void 0,this.r=m.length>0?ZO(m):void 0,this.s=g.length>0?ZO(g):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const y=void 0===this.to||null===this.to,b=null!==(r=t.allowUnlimitedInitCodeSize)&&void 0!==r&&r,v=null!==(n=t.common)&&void 0!==n?n:this._getCommon();y&&v.isActivatedEIP(3860)&&!b&&((e,t)=>{const r=e.param("vm","maxInitCodeSize");if(r&&BigInt(t)>r)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)})(v,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const t=[];return this.getBaseFee()>this.gasLimit&&t.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:0===t.length}_validateYParity(){const{v:e}=this;if(void 0!==e&&e!==BigInt(0)&&e!==BigInt(1)){const e=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(e)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&void 0!==e&&e>DO){const e=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(e)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=BigInt(0);for(let n=0;n<this.data.length;n+=1)0===this.data[n]?r+=e:r+=t;if((void 0===this.to||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));r+=this.common.param("gasPrices","initCodeWordCost")*e}return r}toCreationAddress(){return void 0===this.to||0===this.to.buf.length}isSigned(){const{v:e,r:t,s:r}=this;return void 0!==e&&void 0!==t&&void 0!==r}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==ek(e).length}catch(e){return!1}}getSenderAddress(){return new mk(mk.publicToAddress(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;0===this.type&&this.common.gteHardfork("spuriousDragon")&&!this.supports(pk.EIP155ReplayProtection)&&(this.activeCapabilities.push(pk.EIP155ReplayProtection),t=!0);const r=this.getMessageToSign(!0),{v:n,r:i,s}=this._ecsign(r,e),o=this._processSignature(n,i,s);if(t){const e=this.activeCapabilities.indexOf(pk.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return o}_getCommon(e,t){var r,n,i,s;if(void 0!==t){const r=ZO(QO(t));if(e){if(e.chainId()!==r){const e=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(e)}return e.copy()}return fk.isSupportedChainId(r)?new fk({chain:r,hardfork:this.DEFAULT_HARDFORK}):fk.custom({name:"custom-chain",networkId:r,chainId:r},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}if((null==e?void 0:e.copy)&&"function"==typeof(null==e?void 0:e.copy))return e.copy();if(e){const t="function"==typeof e.hardfork?e.hardfork():e.hardfork;return fk.custom({name:"custom-chain",networkId:e.networkId?e.networkId():null!==(n=BigInt(null===(r=e.customChain)||void 0===r?void 0:r.networkId))&&void 0!==n?n:void 0,chainId:e.chainId?e.chainId():null!==(s=BigInt(null===(i=e.customChain)||void 0===i?void 0:i.chainId))&&void 0!==s?s:void 0},{baseChain:this.DEFAULT_CHAIN,hardfork:t||this.DEFAULT_HARDFORK})}return new fk({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[n,i]of Object.entries(e))switch(t){case 64:if(r){if(void 0!==i&&i>=LO){const e=this._errorMsg(`${n} cannot equal or exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}}else if(void 0!==i&&i>LO){const e=this._errorMsg(`${n} cannot exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}break;case 256:if(r){if(void 0!==i&&i>=jO){const e=this._errorMsg(`${n} cannot equal or exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}}else if(void 0!==i&&i>jO){const e=this._errorMsg(`${n} cannot exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,n]of Object.entries(e))if(t.includes(r)&&Array.isArray(n))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?KI(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let r="";try{r=this.common.hardfork()}catch(e){r="error"}let n=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return n+=`signed=${t} hf=${r}`,n}_ecsign(e,t,r){const n=BO.sign(e,t),i=n.toCompactRawBytes();return{r:i.subarray(0,32),s:i.subarray(32,64),v:void 0===r?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(r)*BigInt(2)}}static fromSerializedTx(e,t={}){}static fromTxData(e,t={}){}}const Ak=WI(2..toString(16).padStart(2,"0"));class Ek extends wk{static fromTxData(e,t={}){return new Ek(e,t)}static fromSerializedTx(e,t={}){if(!HI(e.subarray(0,1),Ak))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: 2, received: ${KI(e.subarray(0,1))}`);const r=sk.Tj.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return Ek.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,n,i,s,o,a,c,u,d,h,l,f]=e;return this._validateNotArray({chainId:r,v:h}),rI({nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:s,gasLimit:o,value:c,v:h,r:l,s:f}),new Ek({chainId:ZO(r),nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:s,gasLimit:o,to:a,value:c,data:u,accessList:null!=d?d:[],v:void 0!==h?ZO(h):void 0,r:l,s:f},t)}constructor(e,t={}){var r;super(Object.assign(Object.assign({},e),{type:2}),t),this.DEFAULT_HARDFORK="london";const{chainId:n,accessList:i,maxFeePerGas:s,maxPriorityFeePerGas:o}=e;if(this.common=this._getCommon(t.common,n),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const a=gk(null!=i?i:[]);if(this.accessList=a.accessList,this.AccessListJSON=a.AccessListJSON,yk(this.accessList),this.maxFeePerGas=ZO(QO(""===s?"0x":s)),this.maxPriorityFeePerGas=ZO(QO(""===o?"0x":o)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),wk._validateNotArray(e),this.gasLimit*this.maxFeePerGas>jO){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this._validateYParity(),this._validateHighS(),(null===(r=null==t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(vk(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const t=this.maxPriorityFeePerGas,r=this.maxFeePerGas-e,n=(t<r?t:r)+e;return this.gasLimit*n+this.value}raw(){return[rk(this.chainId),rk(this.nonce),rk(this.maxPriorityFeePerGas),rk(this.maxFeePerGas),rk(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),rk(this.value),this.data,this.accessList,void 0!==this.v?rk(this.v):Uint8Array.from([]),void 0!==this.r?rk(this.r):Uint8Array.from([]),void 0!==this.s?rk(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return qI(Ak,sk.Tj.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,9),r=qI(Ak,sk.Tj.encode(t));return e?AA(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=AA(this.serialize())),this.cache.hash):AA(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r,s:n}=this;this._validateHighS();try{return nk(e,t+BigInt(27),rk(r),rk(n))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const n=Object.assign(Object.assign({},this.txOptions),{common:this.common});return Ek.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:ZO(t),s:ZO(r)},n)}toJSON(){const e=bk(this.accessList);return{chainId:tk(this.chainId),nonce:tk(this.nonce),maxPriorityFeePerGas:tk(this.maxPriorityFeePerGas),maxFeePerGas:tk(this.maxFeePerGas),gasLimit:tk(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:tk(this.value),data:KI(this.data),accessList:e,v:void 0!==this.v?tk(this.v):void 0,r:void 0!==this.r?tk(this.r):void 0,s:void 0!==this.s?tk(this.s):void 0}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const xk=WI(1..toString(16).padStart(2,"0"));class Ik extends wk{static fromTxData(e,t={}){return new Ik(e,t)}static fromSerializedTx(e,t={}){if(!HI(e.subarray(0,1),xk))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: 1, received: ${KI(e.subarray(0,1))}`);const r=sk.Tj.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return Ik.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,n,i,s,o,a,c,u,d,h,l]=e;return this._validateNotArray({chainId:r,v:d}),rI({nonce:n,gasPrice:i,gasLimit:s,value:a,v:d,r:h,s:l}),new Ik({chainId:ZO(r),nonce:n,gasPrice:i,gasLimit:s,to:o,value:a,data:c,accessList:null!=u?u:[],v:void 0!==d?ZO(d):void 0,r:h,s:l},t)}constructor(e,t={}){var r;super(Object.assign(Object.assign({},e),{type:1}),t),this.DEFAULT_HARDFORK="berlin";const{chainId:n,accessList:i,gasPrice:s}=e;if(this.common=this._getCommon(t.common,n),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const o=gk(null!=i?i:[]);if(this.accessList=o.accessList,this.AccessListJSON=o.AccessListJSON,yk(this.accessList),this.gasPrice=ZO(QO(""===s?"0x":s)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),wk._validateNotArray(e),this.gasPrice*this.gasLimit>jO){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}this._validateYParity(),this._validateHighS(),(null===(r=null==t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(vk(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[rk(this.chainId),rk(this.nonce),rk(this.gasPrice),rk(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),rk(this.value),this.data,this.accessList,void 0!==this.v?rk(this.v):Uint8Array.from([]),void 0!==this.r?rk(this.r):Uint8Array.from([]),void 0!==this.s?rk(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return qI(xk,sk.Tj.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,8),r=qI(xk,sk.Tj.encode(t));return e?AA(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=AA(this.serialize())),this.cache.hash):AA(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r,s:n}=this;this._validateHighS();try{return nk(e,t+BigInt(27),rk(r),rk(n))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const n=Object.assign(Object.assign({},this.txOptions),{common:this.common});return Ik.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:ZO(t),s:ZO(r)},n)}toJSON(){const e=bk(this.accessList);return{chainId:tk(this.chainId),nonce:tk(this.nonce),gasPrice:tk(this.gasPrice),gasLimit:tk(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:tk(this.value),data:KI(this.data),accessList:e,v:void 0!==this.v?tk(this.v):void 0,r:void 0!==this.r?tk(this.r):void 0,s:void 0!==this.s?tk(this.s):void 0}}errorStr(){var e,t;let r=this._getSharedErrorPostfix();return r+=` gasPrice=${this.gasPrice} accessListCount=${null!==(t=null===(e=this.accessList)||void 0===e?void 0:e.length)&&void 0!==t?t:0}`,r}_errorMsg(e){return`${e} (${this.errorStr()})`}}function _k(e,t){const r=Number(e),n=2*Number(t);return r===n+35||r===n+36}class Sk extends wk{static fromTxData(e,t={}){return new Sk(e,t)}static fromSerializedTx(e,t={}){const r=sk.Tj.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,n,i,s,o,a,c,u,d]=e;return rI({nonce:r,gasPrice:n,gasLimit:i,value:o,v:c,r:u,s:d}),new Sk({nonce:r,gasPrice:n,gasLimit:i,to:s,value:o,data:a,v:c,r:u,s:d},t)}constructor(e,t={}){var r;if(super(Object.assign(Object.assign({},e),{type:0}),t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=ZO(QO(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>jO){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),wk._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?_k(this.v,this.common.chainId())&&this.activeCapabilities.push(pk.EIP155ReplayProtection):this.activeCapabilities.push(pk.EIP155ReplayProtection)),(null===(r=null==t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}raw(){return[rk(this.nonce),rk(this.gasPrice),rk(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),rk(this.value),this.data,void 0!==this.v?rk(this.v):Uint8Array.from([]),void 0!==this.r?rk(this.r):Uint8Array.from([]),void 0!==this.s?rk(this.s):Uint8Array.from([])]}serialize(){return sk.Tj.encode(this.raw())}_getMessageToSign(){const e=[rk(this.nonce),rk(this.gasPrice),rk(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),rk(this.value),this.data];return this.supports(pk.EIP155ReplayProtection)&&(e.push(QO(this.common.chainId())),e.push(ek(QO(0))),e.push(ek(QO(0)))),e}getMessageToSign(e=!0){const t=this._getMessageToSign();return e?AA(sk.Tj.encode(t)):t}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=AA(sk.Tj.encode(this.raw()))),this.cache.hash):AA(sk.Tj.encode(this.raw()))}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}const e=this._getMessageToSign();return AA(sk.Tj.encode(e))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r,s:n}=this;this._validateHighS();try{return nk(e,t,rk(r),rk(n),this.supports(pk.EIP155ReplayProtection)?this.common.chainId():void 0)}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){let n=e;this.supports(pk.EIP155ReplayProtection)&&(n+=this.common.chainId()*BigInt(2)+BigInt(8));const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return Sk.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:n,r:ZO(t),s:ZO(r)},i)}toJSON(){return{nonce:tk(this.nonce),gasPrice:tk(this.gasPrice),gasLimit:tk(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:tk(this.value),data:KI(this.data),v:void 0!==this.v?tk(this.v):void 0,r:void 0!==this.r?tk(this.r):void 0,s:void 0!==this.s?tk(this.s):void 0}}_validateTxV(e,t){let r;const n=void 0!==e?Number(e):void 0;if(void 0!==n&&n<37&&27!==n&&28!==n)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${n}`);if(void 0!==n&&0!==n&&(!t||t.gteHardfork("spuriousDragon"))&&27!==n&&28!==n)if(t){if(!_k(BigInt(n),t.chainId()))throw new Error(`Incompatible EIP155-based V ${n} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(n-35)%2==0?35:36,r=BigInt(n-e)/BigInt(2)}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const Pk=new Map;class Ok{constructor(){}static typeToInt(e){return Number(ZO(QO(e)))}static registerTransactionType(e,t){const r=Ok.typeToInt(e);Pk.set(r,t)}static fromTxData(e,t={}){if(!("type"in e)||void 0===e.type)return Sk.fromTxData(e,t);const r=Ok.typeToInt(e.type);if(0===r)return Sk.fromTxData(e,t);if(1===r)return Ik.fromTxData(e,t);if(2===r)return Ek.fromTxData(e,t);const n=Pk.get(r);if(null==n?void 0:n.fromTxData)return n.fromTxData(e,t);throw new Error(`Tx instantiation with type ${r} not supported`)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return Sk.fromSerializedTx(e,t);switch(e[0]){case 1:return Ik.fromSerializedTx(e,t);case 2:return Ek.fromSerializedTx(e,t);default:{const r=Pk.get(Number(e[0]));if(null==r?void 0:r.fromSerializedTx)return r.fromSerializedTx(e,t);throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}}static fromBlockBodyData(e,t={}){if(UI(e))return this.fromSerializedData(e,t);if(Array.isArray(e))return Sk.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}}var kk=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const Tk=(e,t)=>{let r;if(!t&&"string"==typeof e&&Yx(e)&&66!==e.length)throw new Bb;try{r=UI(e)?e:GI(e)}catch(e){throw new Lb}if(!t&&32!==r.byteLength)throw new Bb;return r},Ck=(e,t=!1)=>{const r=Yx(e)?e:e_(e),n=WI(r),i=WI(t_(`Ethereum Signed Message:\n${n.byteLength}`)),s=t?n:qI(i,n);return Y_(s)},Mk=(e,t)=>{const r=Ck(e),{messageHash:n,v:i,r:s,s:o,signature:a}=((e,t)=>{const r=Tk(t),n=BO.sign(e.substring(2),r),i=n.toCompactRawBytes(),s=n.r.toString(16).padStart(64,"0"),o=n.s.toString(16).padStart(64,"0"),a=n.recovery+27;return{messageHash:e,v:JI(a),r:`0x${s}`,s:`0x${o}`,signature:`${KI(i)}${a.toString(16)}`}})(r,t);return{message:e,messageHash:n,v:i,r:s,s:o,signature:a}},Rk=e=>{if(MI(e))throw new bv;const t=Ok.fromSerializedData(WI(e));return g_(t.getSenderAddress().toString())},Nk=(e,t,r,n,i)=>{if("object"==typeof e){const t=`${e.r}${e.s.slice(2)}${e.v.slice(2)}`;return Nk(e.messageHash,t,r)}if("string"==typeof t&&"string"==typeof r&&!MI(n)){const s=`${r}${n.slice(2)}${t.slice(2)}`;return Nk(e,s,i)}if(MI(t))throw new jb("signature string undefined");const s=r?e:Ck(e);let o=parseInt(t.substring(130),16);o>26&&(o-=27);const a=BO.Signature.fromCompact(t.slice(2,130)).addRecoveryBit(o).recoverPublicKey(s.replace("0x","")).toRawBytes(!1),c=Y_(a.subarray(1));return g_(`0x${c.slice(-40)}`)},Bk=e=>{const t=Tk(e),r=BO.getPublicKey(t,!1),n=Y_(r.slice(1)).slice(-40);return g_(`0x${n}`)},Lk=(e,t)=>{const r=Tk(e);return`0x${KI(BO.getPublicKey(r,t)).slice(4)}`},jk=(e,t,r)=>kk(void 0,void 0,void 0,(function*(){var n,i,s,o,a,c,u;const d=Tk(e);let h;if(h=(null==r?void 0:r.salt)?"string"==typeof r.salt?WI(r.salt):r.salt:aS(32),!Jx(t)&&!UI(t))throw new qb;const l="string"==typeof t?WI(e_(t)):t;let f;if(null==r?void 0:r.iv){if(f="string"==typeof r.iv?WI(r.iv):r.iv,16!==f.length)throw new Hb}else f=aS(16);const p=null!==(n=null==r?void 0:r.kdf)&&void 0!==n?n:"scrypt";let m,g;if("pbkdf2"===p){if(g={dklen:null!==(i=null==r?void 0:r.dklen)&&void 0!==i?i:32,salt:KI(h).replace("0x",""),c:null!==(s=null==r?void 0:r.c)&&void 0!==s?s:262144,prf:"hmac-sha256"},g.c<1e3)throw new zb;m=kP(l,h,g.c,g.dklen,"sha256")}else{if("scrypt"!==p)throw new Db;g={n:null!==(o=null==r?void 0:r.n)&&void 0!==o?o:8192,r:null!==(a=null==r?void 0:r.r)&&void 0!==a?a:8,p:null!==(c=null==r?void 0:r.p)&&void 0!==c?c:1,dklen:null!==(u=null==r?void 0:r.dklen)&&void 0!==u?u:32,salt:KI(h).replace("0x","")},m=MP(l,h,g.n,g.p,g.r,g.dklen)}const y=yield lP(d,m.slice(0,16),f,"aes-128-ctr"),b=KI(y).slice(2),v=Y_(qI(m.slice(16,32),y)).replace("0x","");return{version:3,id:gS(),address:Bk(d).toLowerCase().replace("0x",""),crypto:{ciphertext:b,cipherparams:{iv:KI(f).replace("0x","")},cipher:"aes-128-ctr",kdf:p,kdfparams:g,mac:v}}})),Dk=(e,t)=>{const r=Tk(e,t);return{address:Bk(r),privateKey:KI(r),signTransaction:e=>{throw new Qv("Do not have network access to sign the transaction")},sign:e=>Mk("string"==typeof e?e:JSON.stringify(e),r),encrypt:(e,t)=>kk(void 0,void 0,void 0,(function*(){return jk(r,e,t)}))}};var Fk=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class Uk{constructor(e){this._requestManager=e,this._requests=new Map}get requests(){return[...this._requests.values()].map((e=>e.payload))}add(e){const t=PS(e),r=new MS;return this._requests.set(t.id,{payload:t,promise:r}),r}execute(e){return Fk(this,void 0,void 0,(function*(){var t;if(0===this.requests.length)return Promise.resolve([]);const r=new MS({timeout:null!==(t=null==e?void 0:e.timeout)&&void 0!==t?t:1e3,eagerStart:!0,timeoutMessage:"Batch request timeout"});return this._processBatchRequest(r).catch((e=>r.reject(e))),r.catch((e=>{e instanceof sv&&this._abortAllRequests("Batch request timeout"),r.reject(e)})),r}))}_processBatchRequest(e){return Fk(this,void 0,void 0,(function*(){var t,r;const n=yield this._requestManager.sendBatch([...this._requests.values()].map((e=>e.payload)));if(n.length!==this._requests.size)throw this._abortAllRequests("Invalid batch response"),new lw(n,`Batch request size mismatch the results size. Requests: ${this._requests.size}, Responses: ${n.length}`);const i=this.requests.map((e=>e.id)).map(Number).sort(((e,t)=>e-t)),s=n.map((e=>e.id)).map(Number).sort(((e,t)=>e-t));if(JSON.stringify(i)!==JSON.stringify(s))throw this._abortAllRequests("Invalid batch response"),new lw(n,`Batch request mismatch the results. Requests: [${i.join()}], Responses: [${s.join()}]`);for(const e of n)bS(e)?null===(t=this._requests.get(e.id))||void 0===t||t.promise.resolve(e.result):vS(e)&&(null===(r=this._requests.get(e.id))||void 0===r||r.promise.reject(e.error));e.resolve(n)}))}_abortAllRequests(e){for(const{promise:t}of this._requests.values())t.reject(new ov(e))}}class qk extends qS{constructor(e){var t;if(super(),this.providers=rP.providers,R_(e)||"string"==typeof e&&""!==e.trim()||YS(e))return this._requestManager=new rP(e),void(this._subscriptionManager=new iP(this._requestManager,{}));const{config:r,provider:n,requestManager:i,subscriptionManager:s,registeredSubscriptions:o,accountProvider:a,wallet:c,requestManagerMiddleware:u}=e;this.setConfig(null!=r?r:{}),this._requestManager=null!=i?i:new rP(n,null===(t=null==r?void 0:r.enableExperimentalFeatures)||void 0===t?void 0:t.useSubscriptionWhenCheckingBlockTimeout,u),this._subscriptionManager=s||new iP(this.requestManager,null!=o?o:{}),a&&(this._accountProvider=a),c&&(this._wallet=c)}get requestManager(){return this._requestManager}get subscriptionManager(){return this._subscriptionManager}get wallet(){return this._wallet}get accountProvider(){return this._accountProvider}static fromContextObject(...e){return new this(...e.reverse())}getContextObject(){var e;return{config:this.config,provider:this.provider,requestManager:this.requestManager,subscriptionManager:this.subscriptionManager,registeredSubscriptions:null===(e=this.subscriptionManager)||void 0===e?void 0:e.registeredSubscriptions,providers:this.providers,wallet:this.wallet,accountProvider:this.accountProvider}}use(e,...t){const r=new e(...[...t,this.getContextObject()]);return this.on(US.CONFIG_CHANGE,(e=>{r.setConfig({[e.name]:e.newValue})})),this[e.name]=r,r}link(e){this.setConfig(e.config),this._requestManager=e.requestManager,this.provider=e.provider,this._subscriptionManager=e.subscriptionManager,this._wallet=e.wallet,this._accountProvider=e._accountProvider,e.on(US.CONFIG_CHANGE,(e=>{this.setConfig({[e.name]:e.newValue})}))}registerPlugin(e){if(void 0!==this[e.pluginNamespace])throw new cv(e.pluginNamespace);const t={[e.pluginNamespace]:e};t[e.pluginNamespace].link(this),Object.assign(this,t)}get provider(){return this.currentProvider}set provider(e){this.requestManager.setProvider(e)}get currentProvider(){return this.requestManager.provider}set currentProvider(e){this.requestManager.setProvider(e)}get givenProvider(){return qk.givenProvider}setProvider(e){return this.provider=e,!0}setRequestManagerMiddleware(e){this.requestManager.setMiddleware(e)}get BatchRequest(){return Uk.bind(void 0,this._requestManager)}extend(e){var t;return e.property&&!this[e.property]&&(this[e.property]={}),null===(t=e.methods)||void 0===t||t.forEach((t=>{const r=(...e)=>function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return this.requestManager.send({method:t.call,params:e})}));e.property?this[e.property][t.name]=r:this[t.name]=r})),this}}qk.providers=rP.providers;class Hk{constructor(e){if(this.toAddress=()=>{if(this.isDirect()){const e=this._iban.slice(4),t=Hk._parseInt(e,36),r=F_(t,40);return g_(r)}throw new Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},!Hk.isIndirect(e)&&!Hk.isDirect(e))throw new Error("Invalid IBAN was provided");this._iban=e}static isDirect(e){return 34===e.length||35===e.length}isDirect(){return Hk.isDirect(this._iban)}static isIndirect(e){return 20===e.length}isIndirect(){return Hk.isIndirect(this._iban)}static isValid(e){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(e)&&1===Hk._mod9710(Hk._iso13616Prepare(e))}isValid(){return Hk.isValid(this._iban)}static fromBban(e){const t=`0${(98-this._mod9710(this._iso13616Prepare(`XE00${e}`))).toString()}`.slice(-2);return new Hk(`XE${t}${e}`)}static createIndirect(e){return Hk.fromBban(`ETH${e.institution}${e.identifier}`)}static fromAddress(e){if(!EI(e))throw new ew(e);const t=BigInt(QI(e)).toString(36),r=F_(t,15);return Hk.fromBban(r.toUpperCase())}static toIban(e){return Hk.fromAddress(e).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}}Hk._iso13616Prepare=e=>{const t="A".charCodeAt(0),r="Z".charCodeAt(0),n=e.toUpperCase();return`${n.slice(4)}${n.slice(0,4)}`.split("").map((e=>{const n=e.charCodeAt(0);return n>=t&&n<=r?n-t+10:e})).join("")},Hk._parseInt=(e,t)=>[...e].reduce(((e,r)=>BigInt(parseInt(r,t))+BigInt(t)*e),BigInt(0)),Hk._mod9710=e=>{let t,r=e;for(;r.length>2;)t=r.slice(0,9),r=`${(parseInt(t,10)%97).toString()}${r.slice(t.length)}`;return parseInt(r,10)%97},Hk.toAddress=e=>new Hk(e).toAddress();var zk,$k=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class Gk extends FS{constructor(e){super(),this[zk]="Promise",this._promise=new Promise(e)}then(e,t){return $k(this,void 0,void 0,(function*(){return this._promise.then(e,t)}))}catch(e){return $k(this,void 0,void 0,(function*(){return this._promise.catch(e)}))}finally(e){return $k(this,void 0,void 0,(function*(){return this._promise.finally(e)}))}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}}zk=Symbol.toStringTag,i(2791);var Vk=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function Kk(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_syncing",params:[]})}))}function Wk(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["hex"],[t]),e.send({method:"eth_sendRawTransaction",params:[t]})}))}function Qk(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["blockNumberOrTag","bool"],[t,r]),e.send({method:"eth_getBlockByNumber",params:[t,r]})}))}var Zk=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},Jk=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const Yk={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},Xk={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},eT={type:"object",properties:{gasPrice:{type:"null"}}},tT=(e,t,r)=>{try{FI.validateJSONSchema(e,t)}catch(e){if(e instanceof Wx)throw new Jv(e.errors,r);throw e}},rT=e=>{var t,r;const n=e;if(!MI(n.type)){let e;switch(n.type){case"0x0":e=Yk;break;case"0x1":e=Xk;break;case"0x2":e=eT;break;default:return W_({format:"uint"},n.type,ob)}return tT(e,n,n.type),W_({format:"uint"},n.type,ob)}if(!MI(n.maxFeePerGas)||!MI(n.maxPriorityFeePerGas))return tT(eT,n,"0x2"),"0x2";if(!MI(n.accessList))return tT(Xk,n,"0x1"),"0x1";const i=null!==(t=n.hardfork)&&void 0!==t?t:null===(r=n.common)||void 0===r?void 0:r.hardfork;if(!MI(i)){const e=Object.keys(cb).indexOf(i);if(e>=Object.keys(cb).indexOf("london"))return MI(n.gasPrice)?"0x2":"0x0";if(e===Object.keys(cb).indexOf("berlin"))return"0x0"}return MI(n.gasPrice)?void 0:(tT(Yk,n,"0x0"),"0x0")},nT=(e,t)=>{var r;return(null!==(r=null==t?void 0:t.transactionTypeParser)&&void 0!==r?r:rT)(e)},iT={type:"array",items:Object.assign({},{type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}})},sT={type:"object",properties:{accessList:Object.assign({},iT),gasUsed:{type:"string"}}},oT={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},aT={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},cT={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},iT),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},oT),hardfork:Object.assign({},aT),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},{type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}}),baseChain:Object.assign({},oT),hardfork:Object.assign({},aT)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},uT={type:"object",properties:Object.assign(Object.assign({},cT.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},iT),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},dT={type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}},hT={type:"object",properties:{baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},uT)},{type:"array",items:{format:"bytes32"}}]},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},dT)},withdrawalsRoot:{format:"bytes32"}}},lT={type:"object",properties:{author:{format:"bytes32"},excessDataGas:{format:"uint"},baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{type:"array",items:{format:"bytes32"}},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},dT)},withdrawalsRoot:{format:"bytes32"}}},fT={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},pT={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},mT={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},fT)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},gT={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},yT={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},bT={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},{type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}})}}};function vT(e,t=sb,r={transactionSchema:uT,fillInputAndData:!1}){var n,i;let s=B_({},e);if(MI(null==e?void 0:e.common)||(s.common=Object.assign({},e.common),MI(null===(n=e.common)||void 0===n?void 0:n.customChain)||(s.common.customChain=Object.assign({},e.common.customChain))),s=W_(null!==(i=r.transactionSchema)&&void 0!==i?i:uT,s,t),!MI(s.data)&&!MI(s.input)&&h_(s.data)!==h_(s.input))throw new Hv({data:KI(s.data),input:KI(s.input)});return r.fillInputAndData&&(MI(s.data)?MI(s.input)||(s.data=s.input):s.input=s.data),MI(s.gasLimit)||(s.gas=s.gasLimit,delete s.gasLimit),s}var wT=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function AT(e,t){return wT(this,void 0,void 0,(function*(){const r=yield function(e){return Zk(this,void 0,void 0,(function*(){return e.send({method:"net_version",params:[]})}))}(e.requestManager);return W_({format:"uint"},r,t)}))}const ET=e=>wT(void 0,void 0,void 0,(function*(){return function(e){return Zk(this,void 0,void 0,(function*(){return e.send({method:"net_listening",params:[]})}))}(e.requestManager)}));var xT=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class IT extends qk{getId(e=this.defaultReturnFormat){return xT(this,void 0,void 0,(function*(){return AT(this,e)}))}getPeerCount(e=this.defaultReturnFormat){return xT(this,void 0,void 0,(function*(){return function(e,t){return wT(this,void 0,void 0,(function*(){const r=yield function(e){return Zk(this,void 0,void 0,(function*(){return e.send({method:"net_peerCount",params:[]})}))}(e.requestManager);return W_({format:"uint"},r,t)}))}(this,e)}))}isListening(){return xT(this,void 0,void 0,(function*(){return ET(this)}))}}const _T="ALLEVENTS",ST={name:_T,signature:"",type:"event",inputs:[]},PT={bytes:ib.HEX,number:nb.NUMBER};var OT=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function kT(e,t,r){return OT(this,void 0,void 0,(function*(){const n=MT(e,t);if(!MI(n)){if(n.startsWith("-"))throw new qv(n);if(Number(n)<0||Number(n)>127)throw new qv(n);if(MI(e.gasPrice)&&("0x0"===n||"0x1"===n))return{gasPrice:yield tM(t,r),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if("0x2"===n)return Object.assign({gasPrice:void 0},yield function(e,t,r){return OT(this,void 0,void 0,(function*(){var n,i,s,o;const a=yield nM(t,t.defaultBlock,!1,ob);if(MI(a.baseFeePerGas))throw new Uv;let c;if(MI(e.gasPrice)&&BigInt(a.baseFeePerGas)===BigInt(0)&&(c=yield tM(t,r)),!MI(e.gasPrice)||!MI(c)){const t=W_({format:"uint"},null!==(n=e.gasPrice)&&void 0!==n?n:c,r);return{maxPriorityFeePerGas:t,maxFeePerGas:t}}return{maxPriorityFeePerGas:W_({format:"uint"},null!==(i=e.maxPriorityFeePerGas)&&void 0!==i?i:t.defaultMaxPriorityFeePerGas,r),maxFeePerGas:W_({format:"uint"},null!==(s=e.maxFeePerGas)&&void 0!==s?s:BigInt(a.baseFeePerGas)*BigInt(2)+BigInt(null!==(o=e.maxPriorityFeePerGas)&&void 0!==o?o:t.defaultMaxPriorityFeePerGas),r)}}))}(e,t,r))}}))}var TT=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const CT=(e,t,r,n)=>{if(void 0!==r&&e in r&&void 0!==r[e]){if("string"==typeof r[e]&&EI(r[e]))return r[e];if(!Yx(r[e])&&SI(r[e])){if(t.wallet){const n=t.wallet.get(W_({format:"uint"},r[e],PT));if(!MI(n))return n.address;throw new Zv}throw new Zv}throw"from"===e?new wv(r.from):new Av(r.to)}if("from"===e){if(!MI(n))return Bk(n);if(!MI(t.defaultAccount))return t.defaultAccount}},MT=(e,t)=>{const r=nT(e,t);return MI(r)?MI(t.defaultTransactionType)?void 0:W_({format:"uint"},t.defaultTransactionType,ob):r};function RT(e){return TT(this,void 0,void 0,(function*(){var t,r;let n=W_(cT,e.transaction,e.web3Context.defaultReturnFormat);if(MI(n.from)&&(n.from=CT("from",e.web3Context,void 0,e.privateKey)),MI(n.nonce)&&(n.nonce=yield((e,t,...r)=>TT(void 0,[e,t,...r],void 0,(function*(e,t,r=e.defaultReturnFormat){if(MI(t))throw new Fv;return sM(e,t,e.defaultBlock,r)})))(e.web3Context,n.from,ob)),MI(n.value)&&(n.value="0x0"),MI(n.data))MI(n.input)?n.input="0x":n.input.startsWith("0x")||(n.input=`0x${n.input}`);else{if(!MI(n.input)&&n.data!==n.input)throw new Hv({data:KI(n.data),input:KI(n.input)});n.data.startsWith("0x")||(n.data=`0x${n.data}`)}if(MI(n.common)){if(e.web3Context.defaultCommon){const t=e.web3Context.defaultCommon,r=t.customChain.chainId,i=t.customChain.networkId,s=t.customChain.name;n.common=Object.assign(Object.assign({},t),{customChain:{chainId:r,networkId:i,name:s}})}MI(n.chain)&&(n.chain=e.web3Context.defaultChain),MI(n.hardfork)&&(n.hardfork=e.web3Context.defaultHardfork)}if(MI(n.chainId)&&MI(null===(t=n.common)||void 0===t?void 0:t.customChain.chainId)&&(n.chainId=yield dM(e.web3Context,ob)),MI(n.networkId)&&(n.networkId=null!==(r=e.web3Context.defaultNetworkId)&&void 0!==r?r:yield AT(e.web3Context,ob)),MI(n.gasLimit)&&!MI(n.gas)&&(n.gasLimit=n.gas),n.type=MT(n,e.web3Context),!MI(n.accessList)||"0x1"!==n.type&&"0x2"!==n.type||(n.accessList=[]),e.fillGasPrice&&(n=Object.assign(Object.assign({},n),yield kT(n,e.web3Context,ob))),MI(n.gas)&&MI(n.gasLimit)&&e.fillGasLimit){const t=yield cM(e.web3Context,n,"latest",ob);n=Object.assign(Object.assign({},n),{gas:W_({format:"uint"},t,ob)})}return n}))}var NT=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function BT(e,t,r){const n=e.transactionPollingInterval,[i,s]=mS((()=>NT(this,void 0,void 0,(function*(){let n;try{n=yield rM(e,PT)}catch(e){return void console.warn("An error happen while trying to get the block number",e)}const i=n-t;if(i>=e.transactionBlockTimeout)return new Vv({starterBlockNumber:t,numberOfBlocks:i,transactionHash:r})}))),n);return[s,{clean:()=>{clearInterval(i)}}]}function LT(e,t){return NT(this,void 0,void 0,(function*(){var r,n;const{provider:i}=e.requestManager;let s;const o=yield rM(e,PT);return s=(null===(n=(r=i).supportsSubscriptions)||void 0===n?void 0:n.call(r))&&e.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?yield function(e,t,r){return NT(this,void 0,void 0,(function*(){var n;let i,s,o=!0;function a(n,i){i&&console.warn("error happened at subscription. So revert to polling...",i),s.clean(),o=!1;const[a,c]=BT(e,t,r);s.clean=c.clean,a.catch((e=>n(e)))}try{i=yield null===(n=e.subscriptionManager)||void 0===n?void 0:n.subscribe("newHeads"),s={clean:()=>{var t;i.id&&(null===(t=e.subscriptionManager)||void 0===t||t.removeSubscription(i).then((()=>{})).catch((()=>{})))}}}catch(n){return BT(e,t,r)}return[new Promise(((n,s)=>{try{i.on("data",(n=>{if(o=!1,!(null==n?void 0:n.number))return;const i=Number(BigInt(n.number)-BigInt(t));i>=e.transactionBlockTimeout&&s(new Vv({starterBlockNumber:t,numberOfBlocks:i,transactionHash:r}))})),i.on("error",(e=>{a(s,e)}))}catch(e){a(s,e)}setTimeout((()=>{o&&a(s)}),1e3*e.blockHeaderTimeout)})),s]}))}(e,o,t):BT(e,o,t),s}))}function jT(e,t,r){return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const[n,i]=pS(e.transactionSendTimeout,new zv({numberOfSeconds:e.transactionSendTimeout/1e3,transactionHash:r})),[s,o]=yield LT(e,r);try{return yield Promise.race([t(),i,s])}finally{clearTimeout(n),o.clean()}}))}var DT=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function FT(e,t,r,n){return DT(this,void 0,void 0,(function*(){var i;const s=null!==(i=e.transactionReceiptPollingInterval)&&void 0!==i?i:e.transactionPollingInterval,[o,a]=lS((()=>DT(this,void 0,void 0,(function*(){try{return(null!=n?n:iM)(e,t,r)}catch(e){return void console.warn("An error happen while trying to get the transaction receipt",e)}}))),s),[c,u]=pS(e.transactionPollingTimeout,new Gv({numberOfSeconds:e.transactionPollingTimeout/1e3,transactionHash:t})),[d,h]=yield LT(e,t);try{return yield Promise.race([o,u,d])}finally{c&&clearTimeout(c),a&&clearInterval(a),h.clean()}}))}const UT=({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,customTransactionReceiptSchema:n,returnFormat:i})=>{var s;let o=1;const a=setInterval((()=>{!function(e,t,r,n){new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function*(){if(o>=e.transactionConfirmationBlocks)return void clearInterval(a);const s=yield Qk(e.requestManager,JI(BigInt(t.blockNumber)+BigInt(o)),!1);(null==s?void 0:s.hash)&&(o+=1,r.emit("confirmation",{confirmations:W_({format:"uint"},o,i),receipt:W_(null!=n?n:mT,t,i),latestBlockHash:W_({format:"bytes32"},s.hash,i)}))}))}),null!==(s=e.transactionReceiptPollingInterval)&&void 0!==s?s:e.transactionPollingInterval)};var qT=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const HT=e=>!R_(e)&&"object"==typeof e&&!R_(e.type)&&"error"===e.type,zT=e=>!R_(e)&&"object"==typeof e&&!R_(e.type)&&"event"===e.type,$T=e=>!R_(e)&&"object"==typeof e&&!R_(e.type)&&"function"===e.type,GT=e=>e.includes("[]")?{type:"tuple[]",name:e.slice(0,-2)}:{type:"tuple",name:e},VT=e=>{const t=[];for(const r of Object.keys(e)){const n=e[r];"object"==typeof n?t.push(Object.assign(Object.assign({},GT(r)),{components:VT(n)})):t.push({name:r,type:e[r]})}return t},KT=(e,t)=>{const r=[];return t.forEach((t=>{if("object"==typeof t.components){if(!t.type.startsWith("tuple"))throw new av(`Invalid value given "${t.type}". Error: components found but type is not tuple.`);const n=t.type.indexOf("["),i=n>=0?t.type.substring(n):"",s=KT(e,t.components);Array.isArray(s)&&e?r.push(`tuple(${s.join(",")})${i}`):e?r.push(`(${s.join()})`):r.push(`(${s.join(",")})${i}`)}else r.push(t.type)})),r},WT=e=>{var t,r,n,i;return HT(e)||zT(e)||$T(e)?(null===(t=e.name)||void 0===t?void 0:t.includes("("))?e.name:`${null!==(r=e.name)&&void 0!==r?r:""}(${KT(!1,null!==(n=e.inputs)&&void 0!==n?n:[]).join(",")})`:`(${KT(!1,null!==(i=e.inputs)&&void 0!==i?i:[]).join(",")})`},QT=e=>{if("string"!=typeof e&&!zT(e))throw new av("Invalid parameter value in encodeEventSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:WT(e),Y_(t)};function ZT(e,t){const r=e.exec(t);return r?.groups}var JT=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,YT=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,XT=/^\(.+?\).*?$/,eC=Object.defineProperty,tC=(e,t,r)=>(((e,t,r)=>{t in e?eC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),rC=class extends Error{constructor(e,t={}){const r=t.cause instanceof rC?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof rC&&t.cause.docsPath||t.docsPath;super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: https://abitype.dev${n}`]:[],...r?[`Details: ${r}`]:[],"Version: abitype@0.7.1"].join("\n")),tC(this,"details"),tC(this,"docsPath"),tC(this,"metaMessages"),tC(this,"shortMessage"),tC(this,"name","AbiTypeError"),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.shortMessage=e}},nC=/^struct (?<name>[a-zA-Z0-9_]+) \{(?<properties>.*?)\}$/;function iC(e){return nC.test(e)}function sC(e){return ZT(nC,e)}var oC=new Set(["memory","indexed","storage","calldata"]),aC=new Set(["calldata","memory","storage"]),cC=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),uC=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,dC=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,hC=/^u?int$/;function lC(e,t){const r=function(e,t){return t?`${t}:${e}`:e}(e,t?.type);if(cC.has(r))return cC.get(r);const n=XT.test(e),i=ZT(n?dC:uC,e);if(!i)throw new rC("Invalid ABI parameter.",{details:e});if(i.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||JT.test(e)||YT.test(e)||mC.test(e)}(i.name))throw new rC("Invalid ABI parameter.",{details:e,metaMessages:[`"${i.name}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]});const s=i.name?{name:i.name}:{},o="indexed"===i.modifier?{indexed:!0}:{},a=t?.structs??{};let c,u={};if(n){c="tuple";const e=fC(i.type),t=[],r=e.length;for(let n=0;n<r;n++)t.push(lC(e[n],{structs:a}));u={components:t}}else if(i.type in a)c="tuple",u={components:a[i.type]};else if(hC.test(i.type))c=`${i.type}256`;else if(c=i.type,"struct"!==t?.type&&!pC(c))throw new rC("Unknown type.",{metaMessages:[`Type "${c}" is not a valid ABI type.`]});if(i.modifier){if(!t?.modifiers?.has?.(i.modifier))throw new rC("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${i.modifier}" not allowed${t?.type?` in "${t.type}" type`:""}.`]});if(aC.has(i.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(c,!!i.array))throw new rC("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${i.modifier}" not allowed${t?.type?` in "${t.type}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${i.modifier}" was given.`]})}const d={type:`${c}${i.array??""}`,...s,...o,...u};return cC.set(r,d),d}function fC(e,t=[],r="",n=0){if(""===e){if(""===r)return t;if(0!==n)throw new rC("Unbalanced parentheses.",{metaMessages:[`"${r.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`});return[...t,r.trim()]}const i=e.length;for(let s=0;s<i;s++){const i=e[s],o=e.slice(s+1);switch(i){case",":return 0===n?fC(o,[...t,r.trim()]):fC(o,t,`${r}${i}`,n);case"(":return fC(o,t,`${r}${i}`,n+1);case")":return fC(o,t,`${r}${i}`,n-1);default:return fC(o,t,`${r}${i}`,n)}}return[]}function pC(e){return"address"===e||"bool"===e||"function"===e||"string"===e||JT.test(e)||YT.test(e)}var mC=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;var gC=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?$/;function yC(e,t,r=new Set){const n=[],i=e.length;for(let s=0;s<i;s++){const i=e[s];if(XT.test(i.type))n.push(i);else{const e=ZT(gC,i.type);if(!e?.type)throw new rC("Invalid ABI parameter.",{details:JSON.stringify(i,null,2),metaMessages:["ABI parameter type is invalid."]});const{array:s,type:o}=e;if(o in t){if(r.has(o))throw new rC("Circular reference detected.",{metaMessages:[`Struct "${o}" is a circular reference.`]});n.push({...i,type:`tuple${s??""}`,components:yC(t[o]??[],t,new Set([...r,o]))})}else{if(!pC(o))throw new rC("Unknown type.",{metaMessages:[`Type "${o}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]});n.push(i)}}}return n}const bC=32;function vC(e=0){var t;if(void 0!==(null===(t=globalThis.Buffer)||void 0===t?void 0:t.alloc)){const t=globalThis.Buffer.alloc(e);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return new Uint8Array(e)}function wC(e){var t,r;return Object.assign(Object.assign({},e),{name:null!==(t=e.name)&&void 0!==t?t:"",components:null===(r=e.components)||void 0===r?void 0:r.map((e=>wC(e)))})}function AC(e){return e.map((e=>{var t,r,n;if(!R_(r=e)&&"object"==typeof r&&!R_(r.type)&&"string"==typeof r.type)return e;if("string"==typeof e)return wC(function(e){let t;if("string"==typeof e)t=lC(e,{modifiers:oC});else{const r=function(e){const t={},r=e.length;for(let n=0;n<r;n++){const r=e[n];if(!iC(r))continue;const i=sC(r);if(!i)throw new rC("Invalid struct signature.",{details:r});const s=i.properties.split(";"),o=[],a=s.length;for(let e=0;e<a;e++){const t=s[e].trim();if(!t)continue;const r=lC(t,{type:"struct"});o.push(r)}if(!o.length)throw new rC("Invalid struct signature.",{details:r,metaMessages:["No properties exist."]});t[i.name]=o}const n={},i=Object.entries(t),s=i.length;for(let e=0;e<s;e++){const[r,s]=i[e];n[r]=yC(s,t)}return n}(e),n=e.length;for(let i=0;i<n;i++){const n=e[i];if(!iC(n)){t=lC(n,{modifiers:oC,structs:r});break}}}if(!t)throw new rC("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(e,null,2)})`,docsPath:"/api/human.html#parseabiparameter-1"});return t}(e.replace(/tuple/,"")));if("object"==typeof(n=e)&&void 0===n.components&&void 0===n.name){const r=Object.keys(e)[0],n=GT(r);return n.name=null!==(t=n.name)&&void 0!==t?t:"",Object.assign(Object.assign({},n),{components:VT(e[r])})}throw new av("Invalid abi")}))}function EC(e){const t=e.type.lastIndexOf("["),r=e.type.substring(0,t),n=e.type.substring(t);let i=-1;if("[]"!==n&&(i=Number(n.slice(1,-1)),isNaN(i)))throw new av("Invalid fixed array size",{size:n});return{param:{type:r,name:"",components:e.components},size:i}}function xC(e){var t,r;return!("string"!==e.type&&"bytes"!==e.type&&!e.type.endsWith("[]"))||("tuple"===e.type?null!==(r=null===(t=e.components)||void 0===t?void 0:t.some(xC))&&void 0!==r&&r:!!e.type.endsWith("]")&&xC(EC(e).param))}const IC=new Map;let _C=BigInt(256);for(let e=8;e<=256;e+=8)IC.set(`uint${e}`,{min:BigInt(0),max:_C-BigInt(1)}),IC.set(`int${e}`,{min:-_C/BigInt(2),max:_C/BigInt(2)-BigInt(1)}),_C*=BigInt(256);IC.set("int",IC.get("int256")),IC.set("uint",IC.get("uint256"));const SC=BigInt(1)<<BigInt(256);function PC(e,t=32){let r;return r=e<0?(SC+e).toString(16):e.toString(16),r=L_(r,2*t),yI(r)}function OC(e,t){let r;try{r=f_(t)}catch(r){throw new av("provided input is not number value",{type:e.type,value:t,name:e.name})}const n=IC.get(e.type);if(!n)throw new av("provided abi contains invalid number datatype",{type:e.type});if(r<n.min)throw new av("provided input is less then minimum for given type",{type:e.type,value:t,name:e.name,minimum:n.min.toString()});if(r>n.max)throw new av("provided input is greater then maximum for given type",{type:e.type,value:t,name:e.name,maximum:n.max.toString()});return{dynamic:!1,encoded:PC(r)}}function kC(e,t){if(t.length<bC)throw new av("Not enough bytes left to decode",{param:e,bytesLeft:t.length});const r=t.subarray(0,bC),n=IC.get(e.type);if(!n)throw new av("provided abi contains invalid number datatype",{type:e.type});const i=function(e,t){const r=pI(e),n=BigInt(r);return n<=t?n:n-SC}(r,n.max);if(i<n.min)throw new av("decoded value is less then minimum for given type",{type:e.type,value:i,name:e.name,minimum:n.min.toString()});if(i>n.max)throw new av("decoded value is greater then maximum for given type",{type:e.type,value:i,name:e.name,maximum:n.max.toString()});return{result:i,encoded:t.subarray(bC),consumed:bC}}function TC(e,t){if("string"==typeof t&&t.length%2!=0&&(t+="0"),!wI(t))throw new av("provided input is not valid bytes value",{type:e.type,value:t,name:e.name});const r=GI(t),[,n]=e.type.split("bytes");if(n){if(Number(n)>32||Number(n)<1)throw new av("invalid bytes type. Static byte type can have between 1 and 32 bytes",{type:e.type});if(Number(n)<r.length)throw new av("provided input size is different than type size",{type:e.type,value:t,name:e.name});const i=vC(bC);return i.set(r),{dynamic:!1,encoded:i}}const i=Math.ceil(r.length/bC),s=vC(bC+i*bC);return s.set(OC({type:"uint32",name:""},r.length).encoded),s.set(r,bC),{dynamic:!0,encoded:s}}function CC(e,t){const[,r]=e.type.split("bytes");let n=Number(r),i=t,s=1,o=0;if(!n){const e=kC({type:"uint32",name:""},i);n=Number(e.result),o+=e.consumed,i=e.encoded,s=Math.ceil(n/bC)}if(n>t.length)throw new av("there is not enough data to decode",{type:e.type,encoded:t,size:n});return{result:KI(i.subarray(0,n)),encoded:i.subarray(s*bC),consumed:o+s*bC}}function MC(e){let t=0,r=0;const n=[],i=[];for(const r of e)r.dynamic?t+=bC:t+=r.encoded.length;for(const s of e)s.dynamic?(n.push(OC({type:"uint256",name:""},t+r)),i.push(s),r+=s.encoded.length):n.push(s);return qI(...n.map((e=>e.encoded)),...i.map((e=>e.encoded)))}function RC(e,t){if("string"===e.type)return function(e,t){if("string"!=typeof t)throw new av("invalid input, should be string",{input:t});return TC({type:"bytes",name:""},s_(t))}(0,t);if("bool"===e.type)return function(e,t){let r;try{r=y_(t)}catch(r){if(r instanceof ow)throw new av("provided input is not valid boolean value",{type:e.type,value:t,name:e.name})}return OC({type:"uint8",name:""},Number(r))}(e,t);if("address"===e.type)return function(e,t){if("string"!=typeof t)throw new av("address type expects string as input type",{value:t,name:e.name,type:e.type});let r=t.toLowerCase();if(r.startsWith("0x")||(r=`0x${r}`),!EI(r))throw new av("provided input is not valid address",{value:t,name:e.name,type:e.type});const n=yI(r),i=vC(bC);return i.set(n,12),{dynamic:!1,encoded:i}}(e,t);if("tuple"===e.type)return BC(e,t);if(e.type.endsWith("]"))return function(e,t){if(!Array.isArray(t))throw new av("Expected value to be array",{abi:e,values:t});const{size:r,param:n}=EC(e),i=t.map((e=>RC(n,e))),s=-1===r,o=i.length>0&&i[0].dynamic;if(!s&&t.length!==r)throw new av("Given arguments count doesn't match array length",{arrayLength:r,argumentsLength:t.length});if(s||o){const e=MC(i);if(s){const t=OC({type:"uint256",name:""},i.length).encoded;return{dynamic:!0,encoded:i.length>0?qI(t,e):t}}return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:qI(...i.map((e=>e.encoded)))}}(e,t);if(e.type.startsWith("bytes"))return TC(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return OC(e,t);throw new av("Unsupported",{param:e,value:t})}function NC(e,t){if("string"===e.type)return function(e,t){const r=CC({type:"bytes",name:""},t);return{result:n_(r.result),encoded:r.encoded,consumed:r.consumed}}(0,t);if("bool"===e.type)return function(e,t){const r=kC({type:"uint8",name:""},t);if(r.result>1||r.result<0)throw new av("Invalid boolean value encoded",{boolBytes:t.subarray(0,bC),numberResult:r});return{result:r.result===BigInt(1),encoded:r.encoded,consumed:bC}}(0,t);if("address"===e.type)return function(e,t){const r=t.subarray(12,bC);if(20!==r.length)throw new av("Invalid decoding input, not enough bytes to decode address",{bytes:t});const n=pI(r);return{result:g_(n),encoded:t.subarray(bC),consumed:bC}}(0,t);if("tuple"===e.type)return LC(e,t);if(e.type.endsWith("]"))return function(e,t){let{size:r,param:n}=EC(e),i=0;const s=[];let o=t;if(-1===r){const e=kC({type:"uint32",name:""},t);r=Number(e.result),i=e.consumed,o=e.encoded}if(xC(n)){for(let e=0;e<r;e+=1){const t=kC({type:"uint32",name:""},o.subarray(e*bC));i+=t.consumed;const r=NC(n,o.subarray(Number(t.result)));i+=r.consumed,s.push(r.result)}return{result:s,encoded:o.subarray(i),consumed:i}}for(let e=0;e<r;e+=1){const e=NC(n,t.subarray(i));i+=e.consumed,s.push(e.result)}return{result:s,encoded:t.subarray(i),consumed:i}}(e,t);if(e.type.startsWith("bytes"))return CC(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return kC(e,t);throw new av("Unsupported",{param:e,bytes:t})}function BC(e,t){var r,n,i;let s=!1;if(!Array.isArray(t)&&"object"!=typeof t)throw new av("param must be either Array or Object",{param:e,input:t});const o=t,a=[];for(let c=0;c<(null!==(n=null===(r=e.components)||void 0===r?void 0:r.length)&&void 0!==n?n:0);c+=1){const r=e.components[c];let n;if(Array.isArray(o)){if(c>=o.length)throw new av("input param length missmatch",{param:e,input:t});n=RC(r,o[c])}else{const s=o[null!==(i=r.name)&&void 0!==i?i:""];if(null==s)throw new av("missing input defined in abi",{param:e,input:t,paramName:r.name});n=RC(r,s)}n.dynamic&&(s=!0),a.push(n)}return s?{dynamic:!0,encoded:MC(a)}:{dynamic:!1,encoded:qI(...a.map((e=>e.encoded)))}}function LC(e,t){const r={__length__:0};let n=0;if(!e.components)return{result:r,encoded:t,consumed:n};let i=0;for(const[s,o]of e.components.entries()){let e;if(xC(o)){const r=kC({type:"uint32",name:""},t.subarray(n));e=NC(o,t.subarray(Number(r.result))),n+=r.consumed,i+=e.consumed}else e=NC(o,t.subarray(n)),n+=e.consumed;r.__length__+=1,r[s]=e.result,o.name&&""!==o.name&&(r[o.name]=e.result)}return{encoded:t.subarray(n+i),result:r,consumed:n+i}}function jC(e){const t=[];return e.forEach((e=>{if(Array.isArray(e)){const r=jC(e);t.push({type:"tuple",components:r,name:""})}else t.push({type:h_(e,!0)})})),t}function DC(e,t){if((null==e?void 0:e.length)!==t.length)throw new av("Invalid number of values received for given ABI",{expected:null==e?void 0:e.length,received:t.length});return pI(BC({type:"tuple",name:"",components:AC(e)},t).encoded)}const FC=(e,t)=>DC([e],[t]),UC=(e,t,r)=>{try{if(e.length>0&&(!t||"0x"===t||"0X"===t))throw new av("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return function(e,t){return LC({type:"tuple",name:"",components:AC(e)},yI(t)).result}(e,`0x${t.replace(/0x/i,"")}`)}catch(e){throw new av(`Parameter decoding error: ${e.message}`,{internalErr:e})}},qC=(e,t)=>UC(e,t),HC=(e,t)=>qC([e],t)[0],zC=e=>{if("string"!=typeof e&&!$T(e))throw new av("Invalid parameter value in encodeFunctionSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:WT(e),Y_(t).slice(0,10)},$C=(e,t,r=!0)=>{const n=r&&t&&t.length>=10&&t.startsWith("0x")?t.slice(10):t;if(!e.inputs)throw new Qb("No inputs found in the ABI");const i=qC([...e.inputs],n);return Object.assign(Object.assign({},i),{__method__:WT(e)})},GC=["bool","string","int","uint","address","fixed","ufixed"],VC=(e,t,r)=>{const n=Array.isArray(r)?r:[r],i={},s={};for(const[t,r]of e.entries())r.indexed?i[t]=r:s[t]=r;const o=t?UC(Object.values(s),t):{__length__:0},a=n.length-Object.keys(i).length,c=Object.values(i).map(((e,t)=>{return GC.some((t=>e.type.startsWith(t)))?(r=e.type,i=n[t+a],"string"===r?i:HC(r,i)):n[t+a];var r,i})),u={__length__:0};let d=0,h=0;for(const[t,r]of e.entries())u[t]="string"===r.type?"":void 0,i[t]&&(u[t]=c[d],d+=1),s[t]&&(u[t]=o[String(h)],h+=1),r.name&&(u[r.name]=u[t]),u.__length__+=1;return u},KC=(e,t)=>{if(null==t?void 0:t.data){let r,n,i;try{const s=t.data.slice(0,10),o=e.find((e=>(e=>{if("string"!=typeof e&&!HT(e))throw new av("Invalid parameter value in encodeErrorSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:WT(e),Y_(t)})(e).startsWith(s)));(null==o?void 0:o.inputs)?(r=o.name,n=WT(o),i=qC([...o.inputs],t.data.substring(10))):t.data.startsWith("0x08c379a0")?(r="Error",n="Error(string)",i=qC([{name:"message",type:"string"}],t.data.substring(10))):t.data.startsWith("0x4e487b71")?(r="Panic",n="Panic(uint256)",i=qC([{name:"code",type:"uint256"}],t.data.substring(10))):console.error("No matching error abi found for error data",t.data)}catch(e){console.error(e)}r&&t.setDecodedProperties(r,n,i)}};const WC=(e,t)=>{var r,n,i,s,o;if(e instanceof Yb&&e.cause instanceof Jb){if(void 0!==t){const i=t.filter((e=>HT(e)));return KC(i,e.cause),{reason:e.cause.message,signature:null===(r=e.cause.data)||void 0===r?void 0:r.slice(0,10),data:null===(n=e.cause.data)||void 0===n?void 0:n.substring(10),customErrorName:e.cause.errorName,customErrorDecodedSignature:e.cause.errorSignature,customErrorArguments:e.cause.errorArgs}}return{reason:e.cause.message,signature:null===(i=e.cause.data)||void 0===i?void 0:i.slice(0,10),data:null===(s=e.cause.data)||void 0===s?void 0:s.substring(10)}}if(e instanceof fw&&!Array.isArray(null===(o=e.cause)||void 0===o?void 0:o.errors)&&void 0!==e.cause)return e.cause.message;throw e};function QC(e,t,r){return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,arguments,void 0,(function*(e,t,r,n=e.defaultReturnFormat){try{return void(yield aM(e,t,e.defaultBlock,n))}catch(e){return WC(e,r)}}))}function ZC(e,t,r,n,i,s){return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){let o,a=s;if(void 0===a&&(void 0!==n?a=WC(n):e.handleRevert&&void 0!==t&&(a=yield QC(e,t,i))),void 0===a)o=new yv(r);else if("string"==typeof a)o=new mv(a,void 0,r);else if(void 0!==a.customErrorName&&void 0!==a.customErrorDecodedSignature&&void 0!==a.customErrorArguments){const e=a;o=new gv(e.reason,e.customErrorName,e.customErrorDecodedSignature,e.customErrorArguments,e.signature,r,e.data)}else o=new mv(a.reason,a.signature,r,a.data);return o}))}const JC=(e,t,r,n=sb)=>{var i,s,o,a,c,u;let d=Object.assign({},e);const h=W_(fT,t,n);if([_T,"allEvents"].includes(d.name)){const e=r.find((e=>e.signature===t.topics[0]));d=e||{anonymous:!0}}if(d.inputs=null!==(s=null!==(i=d.inputs)&&void 0!==i?i:e.inputs)&&void 0!==s?s:[],!d.anonymous){let e=0;(null!==(o=d.inputs)&&void 0!==o?o:[]).forEach((t=>{t.indexed&&(e+=1)})),e>0&&(null==t?void 0:t.topics)&&(null==t?void 0:t.topics.length)!==e+1&&(d=Object.assign(Object.assign({},d),{anonymous:!0,inputs:[]}))}const l=d.anonymous?t.topics:(null!==(a=t.topics)&&void 0!==a?a:[]).slice(1);return Object.assign(Object.assign({},h),{returnValues:VC([...null!==(c=d.inputs)&&void 0!==c?c:[]],t.data,l),event:d.name,signature:!d.anonymous&&(null===(u=t.topics)||void 0===u?void 0:u.length)>0&&t.topics[0]?t.topics[0]:void 0,raw:{data:t.data,topics:t.topics}})};var YC=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class XC{constructor({options:e,web3Context:t,promiEvent:r,returnFormat:n}){this.options={checkRevertBeforeSending:!0},this.options=e,this.web3Context=t,this.promiEvent=r,this.returnFormat=n}getReceiptWithEvents(e){var t,r;const n=Object.assign({},null!=e?e:{});if((null===(t=this.options)||void 0===t?void 0:t.contractAbi)&&n.logs&&n.logs.length>0){n.events={};for(const e of n.logs){const t=JC(ST,e,null===(r=this.options)||void 0===r?void 0:r.contractAbi,this.returnFormat);t.event&&(n.events[t.event]=t)}}return n}checkRevertBeforeSending(e){return YC(this,void 0,void 0,(function*(){if(!1!==this.options.checkRevertBeforeSending){let t=e;MI(e.data)&&MI(e.input)&&MI(e.gas)&&(t=Object.assign(Object.assign({},e),{gas:21e3}));const r=yield QC(this.web3Context,t,this.options.contractAbi);if(void 0!==r)throw yield ZC(this.web3Context,e,void 0,void 0,this.options.contractAbi,r)}}))}emitSending(e){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",e)}populateGasPrice(e){return YC(this,arguments,void 0,(function*({transactionFormatted:e,transaction:t}){var r;let n=e;return this.web3Context.config.ignoreGasPricing||(null===(r=this.options)||void 0===r?void 0:r.ignoreGasPricing)||!MI(e.gasPrice)||!MI(t.maxPriorityFeePerGas)&&!MI(t.maxFeePerGas)||(n=Object.assign(Object.assign({},e),yield kT(e,this.web3Context,ob))),n}))}signAndSend(e){return YC(this,arguments,void 0,(function*({wallet:e,tx:t}){if(e){const r=yield e.signTransaction(t);return jT(this.web3Context,(()=>YC(this,void 0,void 0,(function*(){return Wk(this.web3Context.requestManager,r.rawTransaction)}))),r.transactionHash)}return jT(this.web3Context,(()=>YC(this,void 0,void 0,(function*(){return function(e,t){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_sendTransaction",params:[t]})}))}(this.web3Context.requestManager,t)}))))}))}emitSent(e){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",e)}emitTransactionHash(e){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",e)}emitReceipt(e){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",e)}handleError(e){return YC(this,arguments,void 0,(function*({error:e,tx:t}){var r;let n=e;return n instanceof Yb&&this.web3Context.handleRevert&&(n=yield ZC(this.web3Context,t,void 0,void 0,null===(r=this.options)||void 0===r?void 0:r.contractAbi)),(n instanceof fw||n instanceof Yb||n instanceof gv||n instanceof yv||n instanceof mv||n instanceof Gv)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",n),n}))}emitConfirmation({receipt:e,transactionHash:t,customTransactionReceiptSchema:r}){this.promiEvent.listenerCount("confirmation")>0&&function(e,t,r,n,i,s){if(MI(r)||MI(r.blockHash))throw new Kv({receipt:r,blockHash:W_({format:"bytes32"},null==r?void 0:r.blockHash,i),transactionHash:W_({format:"bytes32"},n,i)});if(!r.blockNumber)throw new Wv({receipt:r});t.emit("confirmation",{confirmations:W_({format:"uint"},1,i),receipt:W_(null!=s?s:mT,r,i),latestBlockHash:W_({format:"bytes32"},r.blockHash,i)});const o=e.requestManager.provider;o&&"supportsSubscriptions"in o&&o.supportsSubscriptions()?(({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,customTransactionReceiptSchema:n,returnFormat:i})=>{let s,o=!0;setImmediate((()=>{var a;null===(a=e.subscriptionManager)||void 0===a||a.subscribe("newHeads").then((a=>{a.on("data",(c=>qT(void 0,void 0,void 0,(function*(){var u;if(o=!1,!(null==c?void 0:c.number)||s===(null==c?void 0:c.parentHash))return;s=null==c?void 0:c.parentHash;const d=BigInt(c.number)-BigInt(t.blockNumber)+BigInt(1);r.emit("confirmation",{confirmations:W_({format:"uint"},d,i),receipt:W_(null!=n?n:mT,t,i),latestBlockHash:W_({format:"bytes32"},c.parentHash,i)}),d>=e.transactionConfirmationBlocks&&(yield null===(u=e.subscriptionManager)||void 0===u?void 0:u.removeSubscription(a))})))),a.on("error",(()=>qT(void 0,void 0,void 0,(function*(){var s;yield null===(s=e.subscriptionManager)||void 0===s?void 0:s.removeSubscription(a),o=!1,UT({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,customTransactionReceiptSchema:n,returnFormat:i})}))))})).catch((()=>{o=!1,UT({web3Context:e,transactionReceipt:t,customTransactionReceiptSchema:n,transactionPromiEvent:r,returnFormat:i})}))})),setTimeout((()=>{o&&UT({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,returnFormat:i})}),1e3*e.blockHeaderTimeout)})({web3Context:e,transactionReceipt:r,transactionPromiEvent:t,customTransactionReceiptSchema:s,returnFormat:i}):UT({web3Context:e,transactionReceipt:r,transactionPromiEvent:t,customTransactionReceiptSchema:s,returnFormat:i})}(this.web3Context,this.promiEvent,e,t,this.returnFormat,r)}handleResolve(e){return YC(this,arguments,void 0,(function*({receipt:e,tx:t}){var r,n,i;if(null===(r=this.options)||void 0===r?void 0:r.transactionResolver)return null===(n=this.options)||void 0===n?void 0:n.transactionResolver(e);if(e.status===BigInt(0)){const r=yield ZC(this.web3Context,t,e,void 0,null===(i=this.options)||void 0===i?void 0:i.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",r),r}return e}))}}var eM=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function tM(e,t){return eM(this,void 0,void 0,(function*(){const r=yield function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_gasPrice",params:[]})}))}(e.requestManager);return W_({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}function rM(e,t){return eM(this,void 0,void 0,(function*(){const r=yield function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_blockNumber",params:[]})}))}(e.requestManager);return W_({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}function nM(e){return eM(this,arguments,void 0,(function*(e,t=e.defaultBlock,r=!1,n){var i;let s;if(wI(t)){const n=W_({format:"bytes32"},t,ob);s=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["bytes32","bool"],[t,r]),e.send({method:"eth_getBlockByHash",params:[t,r]})}))}(e.requestManager,n,r)}else{const n=OI(t)?t:W_({format:"uint"},t,ob);s=yield Qk(e.requestManager,n,r)}const o=W_(hT,s,null!=n?n:e.defaultReturnFormat);return MI(o)?o:Object.assign(Object.assign({},o),{transactions:null!==(i=o.transactions)&&void 0!==i?i:[]})}))}function iM(e,t,r){return eM(this,void 0,void 0,(function*(){const n=W_({format:"bytes32"},t,sb);let i;try{i=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionReceipt",params:[t]})}))}(e.requestManager,n)}catch(e){if("object"!=typeof e||MI(e)||!("message"in e)||"transaction indexing is in progress"!==e.message)throw e;console.warn("Transaction indexing is in progress.")}return MI(i)?i:W_(mT,i,null!=r?r:e.defaultReturnFormat)}))}function sM(e,t){return eM(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n){const i=OI(r)?r:W_({format:"uint"},r,ob),s=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getTransactionCount",params:[t,r]})}))}(e.requestManager,t,i);return W_({format:"uint"},s,null!=n?n:e.defaultReturnFormat)}))}function oM(e,t,r,n={checkRevertBeforeSending:!0},i){const s=new Gk(((o,a)=>{setImmediate((()=>{(()=>{eM(this,void 0,void 0,(function*(){const c=new XC({web3Context:e,promiEvent:s,options:n,returnFormat:r});let u=Object.assign({},t);MI(i)||(u=yield i.processTransaction(u));let d=vT(Object.assign(Object.assign({},u),{from:CT("from",e,u),to:CT("to",e,u)}),ob,{transactionSchema:e.config.customTransactionSchema});try{let t;d=yield c.populateGasPrice({transaction:u,transactionFormatted:d}),yield c.checkRevertBeforeSending(d),c.emitSending(d),e.wallet&&!MI(d.from)&&(t=e.wallet.get(d.from));const n=yield c.signAndSend({wallet:t,tx:d}),i=W_({format:"bytes32"},n,null!=r?r:e.defaultReturnFormat);c.emitSent(d),c.emitTransactionHash(i);const s=yield FT(e,n,null!=r?r:e.defaultReturnFormat),a=c.getReceiptWithEvents(W_(mT,s,null!=r?r:e.defaultReturnFormat));c.emitReceipt(a),o(yield c.handleResolve({receipt:a,tx:d})),c.emitConfirmation({receipt:a,transactionHash:n})}catch(e){a(yield c.handleError({error:e,tx:d}))}}))})()}))}));return s}function aM(e,t){return eM(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n=e.defaultReturnFormat){const i=OI(r)?r:W_({format:"uint"},r,ob),s=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_call",params:[t,r]})}))}(e.requestManager,vT(t,ob,{transactionSchema:e.config.customTransactionSchema}),i);return W_({format:"bytes"},s,n)}))}function cM(e,t){return eM(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n){const i=vT(t,ob,{transactionSchema:e.config.customTransactionSchema}),s=OI(r)?r:W_({format:"uint"},r,ob),o=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_estimateGas",params:[t,r]})}))}(e.requestManager,i,s);return W_({format:"uint"},o,null!=n?n:e.defaultReturnFormat)}))}function uM(e,t,r){return eM(this,void 0,void 0,(function*(){let{toBlock:n,fromBlock:i}=t;MI(n)||"number"!=typeof n&&"bigint"!=typeof n||(n=JI(n)),MI(i)||"number"!=typeof i&&"bigint"!=typeof i||(i=JI(i));const s=Object.assign(Object.assign({},t),{fromBlock:i,toBlock:n}),o=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["filter"],[t]),e.send({method:"eth_getLogs",params:[t]})}))}(e.requestManager,s);return o.map((t=>"string"==typeof t?t:W_(fT,t,null!=r?r:e.defaultReturnFormat)))}))}function dM(e,t){return eM(this,void 0,void 0,(function*(){const r=yield function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_chainId",params:[]})}))}(e.requestManager);return W_({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}function hM(e,t){return eM(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n){const i=OI(r)?r:W_({format:"uint"},r,ob),s=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_createAccessList",params:[t,r]})}))}(e.requestManager,vT(t,ob,{transactionSchema:e.config.customTransactionSchema}),i);return W_(sT,s,null!=n?n:e.defaultReturnFormat)}))}var lM=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class fM extends oP{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(e){return W_(fT,e,super.returnFormat)}}class pM extends oP{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(e){return W_({format:"string"},e,super.returnFormat)}}class mM extends oP{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(e){return W_(lT,e,super.returnFormat)}}class gM extends oP{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(e){if("boolean"==typeof e)this.emit("changed",e);else{const t=Object.fromEntries(Object.entries((null==e?void 0:e.status)||e).map((([e,t])=>[e.charAt(0).toLowerCase()+e.substring(1),t])));this.emit("changed",e.syncing),this.emit("data",W_(pT,t,super.returnFormat))}}}var yM=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const bM={logs:fM,newPendingTransactions:pM,newHeads:mM,syncing:gM,pendingTransactions:pM,newBlockHeaders:mM};class vM extends qk{constructor(e){"string"==typeof e||YS(e)?super({provider:e,registeredSubscriptions:bM}):e.registeredSubscriptions?super(e):(super(Object.assign(Object.assign({},e),{registeredSubscriptions:bM})),this.getFeeData=this.calculateFeeData)}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}getProtocolVersion(){return yM(this,void 0,void 0,(function*(){return function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_protocolVersion",params:[]})}))}(this.requestManager)}))}isSyncing(){return yM(this,void 0,void 0,(function*(){return Kk(this.requestManager)}))}getCoinbase(){return yM(this,void 0,void 0,(function*(){return function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_coinbase",params:[]})}))}(this.requestManager)}))}isMining(){return yM(this,void 0,void 0,(function*(){return function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_mining",params:[]})}))}(this.requestManager)}))}getHashrate(e){return yM(this,void 0,void 0,(function*(){var t;return void 0===e&&(e=null!==(t=this.defaultReturnFormat)&&void 0!==t?t:sb),this.getHashRate(e)}))}getHashRate(){return yM(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return function(e,t){return eM(this,void 0,void 0,(function*(){const r=yield function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_hashrate",params:[]})}))}(e.requestManager);return W_({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}(this,e)}))}getGasPrice(){return yM(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return tM(this,e)}))}getMaxPriorityFeePerGas(){return yM(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return function(e,t){return eM(this,void 0,void 0,(function*(){const r=yield function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_maxPriorityFeePerGas",params:[]})}))}(e.requestManager);return W_({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}(this,e)}))}calculateFeeData(){return yM(this,arguments,void 0,(function*(e=BigInt(2),t=zI.Gwei){var r;const n=yield this.getBlock(void 0,!1),i=null!==(r=null==n?void 0:n.baseFeePerGas)&&void 0!==r?r:void 0;let s,o,a;try{s=yield this.getGasPrice()}catch(e){}try{o=yield this.getMaxPriorityFeePerGas()}catch(e){}if(i){let r;o=null!=o?o:t,r="number"==typeof e?BigInt(Math.floor(1e3*e))/BigInt(1e3):e,a=i*r+o}return{gasPrice:s,maxFeePerGas:a,maxPriorityFeePerGas:o,baseFeePerGas:i}}))}getAccounts(){return yM(this,void 0,void 0,(function*(){var e;return(null!==(e=yield function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_accounts",params:[]})}))}(this.requestManager))&&void 0!==e?e:[]).map((e=>g_(e)))}))}getBlockNumber(){return yM(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return rM(this,e)}))}getBalance(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return function(e,t){return eM(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n){const i=OI(r)?r:W_({format:"uint"},r,ob),s=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getBalance",params:[t,r]})}))}(e.requestManager,t,i);return W_({format:"uint"},s,null!=n?n:e.defaultReturnFormat)}))}(this,e,t,r)}))}getStorageAt(e,t){return yM(this,arguments,void 0,(function*(e,t,r=this.defaultBlock,n=this.defaultReturnFormat){return function(e,t,r){return eM(this,arguments,void 0,(function*(e,t,r,n=e.defaultBlock,i){const s=W_({format:"uint"},r,ob),o=OI(n)?n:W_({format:"uint"},n,ob),a=yield function(e,t,r,n){return Vk(this,void 0,void 0,(function*(){return FI.validate(["address","hex","blockNumberOrTag"],[t,r,n]),e.send({method:"eth_getStorageAt",params:[t,r,n]})}))}(e.requestManager,t,s,o);return W_({format:"bytes"},a,null!=i?i:e.defaultReturnFormat)}))}(this,e,t,r,n)}))}getCode(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return function(e,t){return eM(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n){const i=OI(r)?r:W_({format:"uint"},r,ob),s=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getCode",params:[t,r]})}))}(e.requestManager,t,i);return W_({format:"bytes"},s,null!=n?n:e.defaultReturnFormat)}))}(this,e,t,r)}))}getBlock(){return yM(this,arguments,void 0,(function*(e=this.defaultBlock,t=!1,r=this.defaultReturnFormat){return nM(this,e,t,r)}))}getBlockTransactionCount(){return yM(this,arguments,void 0,(function*(e=this.defaultBlock,t=this.defaultReturnFormat){return function(e){return eM(this,arguments,void 0,(function*(e,t=e.defaultBlock,r){let n;if(wI(t)){const r=W_({format:"bytes32"},t,ob);n=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["bytes32"],[t]),e.send({method:"eth_getBlockTransactionCountByHash",params:[t]})}))}(e.requestManager,r)}else{const r=OI(t)?t:W_({format:"uint"},t,ob);n=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getBlockTransactionCountByNumber",params:[t]})}))}(e.requestManager,r)}return W_({format:"uint"},n,null!=r?r:e.defaultReturnFormat)}))}(this,e,t)}))}getBlockUncleCount(){return yM(this,arguments,void 0,(function*(e=this.defaultBlock,t=this.defaultReturnFormat){return function(e){return eM(this,arguments,void 0,(function*(e,t=e.defaultBlock,r){let n;if(wI(t)){const r=W_({format:"bytes32"},t,ob);n=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["bytes32"],[t]),e.send({method:"eth_getUncleCountByBlockHash",params:[t]})}))}(e.requestManager,r)}else{const r=OI(t)?t:W_({format:"uint"},t,ob);n=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getUncleCountByBlockNumber",params:[t]})}))}(e.requestManager,r)}return W_({format:"uint"},n,null!=r?r:e.defaultReturnFormat)}))}(this,e,t)}))}getUncle(){return yM(this,arguments,void 0,(function*(e=this.defaultBlock,t,r=this.defaultReturnFormat){return function(e){return eM(this,arguments,void 0,(function*(e,t=e.defaultBlock,r,n){const i=W_({format:"uint"},r,ob);let s;if(wI(t)){const r=W_({format:"bytes32"},t,ob);s=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["bytes32","hex"],[t,r]),e.send({method:"eth_getUncleByBlockHashAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}else{const r=OI(t)?t:W_({format:"uint"},t,ob);s=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["blockNumberOrTag","hex"],[t,r]),e.send({method:"eth_getUncleByBlockNumberAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}return W_(hT,s,null!=n?n:e.defaultReturnFormat)}))}(this,e,t,r)}))}getTransaction(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){const r=yield function(e,t){return eM(this,arguments,void 0,(function*(e,t,r=e.defaultReturnFormat){const n=W_({format:"bytes32"},t,sb),i=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionByHash",params:[t]})}))}(e.requestManager,n);return MI(i)?i:vT(i,r,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})}))}(this,e,t);if(!r)throw new vv;return r}))}getPendingTransactions(){return yM(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return function(e,t){return eM(this,void 0,void 0,(function*(){return(yield function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_pendingTransactions",params:[]})}))}(e.requestManager)).map((r=>vT(r,null!=t?t:e.defaultReturnFormat,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})))}))}(this,e)}))}getTransactionFromBlock(){return yM(this,arguments,void 0,(function*(e=this.defaultBlock,t,r=this.defaultReturnFormat){return function(e){return eM(this,arguments,void 0,(function*(e,t=e.defaultBlock,r,n){const i=W_({format:"uint"},r,ob);let s;if(wI(t)){const r=W_({format:"bytes32"},t,ob);s=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["bytes32","hex"],[t,r]),e.send({method:"eth_getTransactionByBlockHashAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}else{const r=OI(t)?t:W_({format:"uint"},t,ob);s=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["blockNumberOrTag","hex"],[t,r]),e.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}return MI(s)?s:vT(s,null!=n?n:e.defaultReturnFormat,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})}))}(this,e,t,r)}))}getTransactionReceipt(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){const r=yield iM(this,e,t);if(!r)throw new vv;return r}))}getTransactionCount(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return sM(this,e,t,r)}))}sendTransaction(e,t=this.defaultReturnFormat,r){return oM(this,e,t,r,this.transactionMiddleware)}sendSignedTransaction(e,t=this.defaultReturnFormat,r){return function(e,t,r,n={checkRevertBeforeSending:!0}){const i=new Gk(((s,o)=>{setImmediate((()=>{(()=>{eM(this,void 0,void 0,(function*(){const a=new XC({web3Context:e,promiEvent:i,options:n,returnFormat:r}),c=W_({format:"bytes"},t,ob),u=Ok.fromSerializedData(GI(WI(c))),d=Object.assign(Object.assign({},u.toJSON()),{from:u.getSenderAddress().toString()});try{const{v:t,r:n,s:i}=d,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(d,["v","r","s"]);yield a.checkRevertBeforeSending(o),a.emitSending(c);const u=yield jT(e,(()=>eM(this,void 0,void 0,(function*(){return Wk(e.requestManager,c)}))));a.emitSent(c);const h=W_({format:"bytes32"},u,null!=r?r:e.defaultReturnFormat);a.emitTransactionHash(h);const l=yield FT(e,u,null!=r?r:e.defaultReturnFormat),f=a.getReceiptWithEvents(W_(mT,l,null!=r?r:e.defaultReturnFormat));a.emitReceipt(f),s(yield a.handleResolve({receipt:f,tx:d})),a.emitConfirmation({receipt:f,transactionHash:u})}catch(e){o(yield a.handleError({error:e,tx:d}))}}))})()}))}));return i}(this,e,t,r)}sign(e,t){return yM(this,arguments,void 0,(function*(e,t,r=this.defaultReturnFormat){return function(e,t,r){return eM(this,arguments,void 0,(function*(e,t,r,n=e.defaultReturnFormat){var i;const s=W_({format:"bytes"},t,sb);if(null===(i=e.wallet)||void 0===i?void 0:i.get(r)){const t=e.wallet.get(r).sign(s);return W_(gT,t,n)}if("number"==typeof r)throw new fv(t,'RPC method "eth_sign" does not support index signatures');const o=yield function(e,t,r){return Vk(this,void 0,void 0,(function*(){return FI.validate(["address","hex"],[t,r]),e.send({method:"eth_sign",params:[t,r]})}))}(e.requestManager,r,s);return W_({format:"bytes"},o,n)}))}(this,e,t,r)}))}signTransaction(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){return function(e,t){return eM(this,arguments,void 0,(function*(e,t,r=e.defaultReturnFormat){const n=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_signTransaction",params:[t]})}))}(e.requestManager,vT(t,ob,{transactionSchema:e.config.customTransactionSchema}));return Jx(n)?function(e,t,r={fillInputAndData:!1}){return{raw:W_({format:"bytes"},e,t),tx:vT(Object.assign(Object.assign({},Ok.fromSerializedData(WI(e)).toJSON()),{hash:KI(Z_(WI(e))),type:(n=WI(e),n[0]>127?"0x0":h_(n[0]))}),t,{fillInputAndData:r.fillInputAndData,transactionSchema:r.transactionSchema})};var n}(n,r,{fillInputAndData:!0}):{raw:W_({format:"bytes"},n.raw,r),tx:vT(n.tx,r,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})}}))}(this,e,t)}))}call(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return aM(this,e,t,r)}))}estimateGas(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return cM(this,e,t,r)}))}getPastLogs(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){return uM(this,e,t)}))}getWork(){return yM(this,void 0,void 0,(function*(){return function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_getWork",params:[]})}))}(this.requestManager)}))}submitWork(e,t,r){return yM(this,void 0,void 0,(function*(){return function(e,t,r,n){return Vk(this,void 0,void 0,(function*(){return FI.validate(["bytes8","bytes32","bytes32"],[t,r,n]),e.send({method:"eth_submitWork",params:[t,r,n]})}))}(this.requestManager,e,t,r)}))}requestAccounts(){return yM(this,void 0,void 0,(function*(){return function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_requestAccounts",params:[]})}))}(this.requestManager)}))}getChainId(){return yM(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return dM(this,e)}))}getNodeInfo(){return yM(this,void 0,void 0,(function*(){return function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"web3_clientVersion",params:[]})}))}(this.requestManager)}))}getProof(e,t){return yM(this,arguments,void 0,(function*(e,t,r=this.defaultBlock,n=this.defaultReturnFormat){return function(e,t,r){return eM(this,arguments,void 0,(function*(e,t,r,n=e.defaultBlock,i){const s=r.map((e=>W_({format:"bytes"},e,ob))),o=OI(n)?n:W_({format:"uint"},n,ob),a=yield function(e,t,r,n){return Vk(this,void 0,void 0,(function*(){return FI.validate(["address","bytes32[]","blockNumberOrTag"],[t,r,n]),e.send({method:"eth_getProof",params:[t,r,n]})}))}(e.requestManager,t,s,o);return W_(bT,a,null!=i?i:e.defaultReturnFormat)}))}(this,e,t,r,n)}))}getFeeHistory(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultBlock,r,n=this.defaultReturnFormat){return function(e,t){return eM(this,arguments,void 0,(function*(e,t,r=e.defaultBlock,n,i){const s=W_({format:"uint"},t,ob),o=OI(r)?r:W_({format:"uint"},r,ob),a=W_({type:"array",items:{format:"uint"}},n,PT),c=yield function(e,t,r,n){return Vk(this,void 0,void 0,(function*(){FI.validate(["hex","blockNumberOrTag"],[t,r]);for(const e of n)FI.validate(["number"],[e]);return e.send({method:"eth_feeHistory",params:[t,r,n]})}))}(e.requestManager,s,o,a);return W_(yT,c,null!=i?i:e.defaultReturnFormat)}))}(this,e,t,r,n)}))}createAccessList(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultBlock,r=this.defaultReturnFormat){return hM(this,e,t,r)}))}signTypedData(e,t,r,n){return yM(this,void 0,void 0,(function*(){var i;return void 0===r&&(r=!1),void 0===n&&(n=null!==(i=this.defaultReturnFormat)&&void 0!==i?i:sb),function(e,t,r,n,i){return eM(this,void 0,void 0,(function*(){const s=yield function(e,t,r,n=!1){return Vk(this,void 0,void 0,(function*(){return FI.validate(["address"],[t]),e.send({method:"eth_signTypedData"+(n?"":"_v4"),params:[t,r]})}))}(e.requestManager,t,r,n);return W_({format:"bytes"},s,null!=i?i:e.defaultReturnFormat)}))}(this,e,t,r,n)}))}subscribe(e,t,r){return yM(this,void 0,void 0,(function*(){var n,i;void 0===r&&(r=null!==(n=this.defaultReturnFormat)&&void 0!==n?n:sb);const s=yield null===(i=this.subscriptionManager)||void 0===i?void 0:i.subscribe(e,t,r);return s instanceof fM&&"logs"===e&&"object"==typeof t&&!R_(t.fromBlock)&&Number.isFinite(Number(t.fromBlock))&&setImmediate((()=>{this.getPastLogs(t).then((e=>{for(const t of e)s._processSubscriptionResult(t)})).catch((e=>{s._processSubscriptionError(e)}))})),s}))}static shouldClearSubscription({sub:e}){return!(e instanceof gM)}clearSubscriptions(e=!1){var t;return null===(t=this.subscriptionManager)||void 0===t?void 0:t.unsubscribe(e?vM.shouldClearSubscription:void 0)}createNewPendingTransactionFilter(){return yM(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return function(e,t){return lM(this,void 0,void 0,(function*(){const r=yield function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_newPendingTransactionFilter",params:[]})}))}(e.requestManager);return W_({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}(this,e)}))}createNewFilter(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){return function(e,t,r){return lM(this,void 0,void 0,(function*(){let{toBlock:n,fromBlock:i}=t;MI(n)||"number"!=typeof n&&"bigint"!=typeof n||(n=JI(n)),MI(i)||"number"!=typeof i&&"bigint"!=typeof i||(i=JI(i));const s=Object.assign(Object.assign({},t),{fromBlock:i,toBlock:n}),o=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["filter"],[t]),e.send({method:"eth_newFilter",params:[t]})}))}(e.requestManager,s);return W_({format:"uint"},o,null!=r?r:e.defaultReturnFormat)}))}(this,e,t)}))}createNewBlockFilter(){return yM(this,arguments,void 0,(function*(e=this.defaultReturnFormat){return function(e,t){return lM(this,void 0,void 0,(function*(){const r=yield function(e){return Vk(this,void 0,void 0,(function*(){return e.send({method:"eth_newBlockFilter",params:[]})}))}(e.requestManager);return W_({format:"uint"},r,null!=t?t:e.defaultReturnFormat)}))}(this,e)}))}uninstallFilter(e){return yM(this,void 0,void 0,(function*(){return function(e,t){return lM(this,void 0,void 0,(function*(){const r=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["hex"],[t]),e.send({method:"eth_uninstallFilter",params:[t]})}))}(e.requestManager,JI(t));return r}))}(this,e)}))}getFilterChanges(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){return function(e,t,r){return lM(this,void 0,void 0,(function*(){const n=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["hex"],[t]),e.send({method:"eth_getFilterChanges",params:[t]})}))}(e.requestManager,JI(t));return n.map((t=>"string"==typeof t?t:W_(fT,t,null!=r?r:e.defaultReturnFormat)))}))}(this,e,t)}))}getFilterLogs(e){return yM(this,arguments,void 0,(function*(e,t=this.defaultReturnFormat){return function(e,t,r){return lM(this,void 0,void 0,(function*(){const n=yield function(e,t){return Vk(this,void 0,void 0,(function*(){return FI.validate(["hex"],[t]),e.send({method:"eth_getFilterLogs",params:[t]})}))}(e.requestManager,JI(t));return n.map((t=>"string"==typeof t?t:W_(fT,t,null!=r?r:e.defaultReturnFormat)))}))}(this,e,t)}))}}const wM=e=>{if(MI(e.gas)||!II(e.gas)||MI(e.gasPrice)||!II(e.gasPrice))throw new Rv({gas:e.gas,gasPrice:e.gasPrice});if(!MI(e.maxFeePerGas)||!MI(e.maxPriorityFeePerGas))throw new Lv({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas})},AM=e=>{if(!MI(e.gasPrice)&&"0x2"===e.type)throw new Bv(e.gasPrice);if("0x0"===e.type||"0x1"===e.type)throw new Lv({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas});if(MI(e.maxFeePerGas)||!II(e.maxFeePerGas)||MI(e.maxPriorityFeePerGas)||!II(e.maxPriorityFeePerGas))throw new Nv({maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas})};const EM=(e,t,r,...n)=>function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(void 0,[e,t,r,...n],void 0,(function*(e,t,r,n=!1,i=!0){const s=yield(o={transaction:e,web3Context:t,privateKey:r,fillGasPrice:n,fillGasLimit:i},TT(void 0,void 0,void 0,(function*(){var e;return(null!==(e=o.web3Context.transactionBuilder)&&void 0!==e?e:RT)(Object.assign(Object.assign({},o),{transaction:o.transaction}))})));var o;const a=vT(s,ob,{transactionSchema:t.config.customTransactionSchema});return((e,t,r={transactionSchema:void 0})=>{if(!MI(t))return void t(e);if("object"!=typeof e||MI(e))throw new jv(e);(e=>{if(!MI(e.common)){if(MI(e.common.customChain))throw new Ev;if(MI(e.common.customChain.chainId))throw new xv;if(!MI(e.chainId)&&e.chainId!==e.common.customChain.chainId)throw new Iv({txChainId:e.chainId,customChainId:e.common.customChain.chainId})}})(e),(e=>{if(!MI(e.common)&&!MI(e.chain)&&!MI(e.hardfork))throw new Pv;if(!MI(e.chain)&&MI(e.hardfork)||!MI(e.hardfork)&&MI(e.chain))throw new Ov({chain:e.chain,hardfork:e.hardfork})})(e),(e=>{if(!MI(e.common)&&!MI(e.common.baseChain)&&!MI(e.chain)&&e.chain!==e.common.baseChain)throw new _v({txChain:e.chain,baseChain:e.common.baseChain})})(e),(e=>{if(!MI(e.common)&&!MI(e.common.hardfork)&&!MI(e.hardfork)&&e.hardfork!==e.common.hardfork)throw new Sv({txHardfork:e.hardfork,commonHardfork:e.common.hardfork})})(e);const n=vT(e,ob,{transactionSchema:r.transactionSchema});if((e=>{const t=!MI(e.gas)||!MI(e.gasLimit),r=t&&!MI(e.gasPrice),n=t&&!MI(e.maxPriorityFeePerGas)&&!MI(e.maxFeePerGas);if(!r&&!n)throw new Tv({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});if(r&&n)throw new Mv({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});(r?wM:AM)(e),(!MI(e.type)&&e.type>"0x1"?AM:wM)(e)})(n),MI(n.nonce)||MI(n.chainId)||n.nonce.startsWith("-")||n.chainId.startsWith("-"))throw new Dv({nonce:e.nonce,chainId:e.chainId})})(a,void 0,{transactionSchema:t.config.customTransactionSchema}),Ok.fromTxData((e=>{var t,r;return Object.assign(Object.assign({},e),{nonce:e.nonce,gasPrice:e.gasPrice,gasLimit:null!==(t=e.gasLimit)&&void 0!==t?t:e.gas,to:e.to,value:e.value,data:null!==(r=e.data)&&void 0!==r?r:e.input,type:e.type,chainId:e.chainId,accessList:e.accessList,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas})})(a),((e,t)=>{var r,n,i,s,o,a,c,u,d,h,l,f,p,m,g,y,b,v;let w;if((MI(e.chain)||MI(e.hardfork))&&MI(e.common))t.defaultCommon?(w=Object.assign({},t.defaultCommon),MI(w.hardfork)&&(w.hardfork=null!==(r=e.hardfork)&&void 0!==r?r:t.defaultHardfork),MI(w.baseChain)&&(w.baseChain=t.defaultChain)):w=fk.custom({name:"custom-network",chainId:l_(e.chainId),networkId:MI(e.networkId)?void 0:l_(e.networkId),defaultHardfork:null!==(n=e.hardfork)&&void 0!==n?n:t.defaultHardfork},{baseChain:t.defaultChain});else{const r=null!==(a=null!==(o=null===(s=null===(i=null==e?void 0:e.common)||void 0===i?void 0:i.customChain)||void 0===s?void 0:s.name)&&void 0!==o?o:e.chain)&&void 0!==a?a:"custom-network",n=l_(null!==(d=null===(u=null===(c=null==e?void 0:e.common)||void 0===c?void 0:c.customChain)||void 0===u?void 0:u.chainId)&&void 0!==d?d:null==e?void 0:e.chainId),A=l_(null!==(f=null===(l=null===(h=null==e?void 0:e.common)||void 0===h?void 0:h.customChain)||void 0===l?void 0:l.networkId)&&void 0!==f?f:null==e?void 0:e.networkId),E=null!==(g=null!==(m=null===(p=null==e?void 0:e.common)||void 0===p?void 0:p.hardfork)&&void 0!==m?m:null==e?void 0:e.hardfork)&&void 0!==g?g:t.defaultHardfork,x=null!==(v=null!==(b=null===(y=e.common)||void 0===y?void 0:y.baseChain)&&void 0!==b?b:e.chain)&&void 0!==v?v:t.defaultChain;n&&A&&r&&(w=fk.custom({name:r,chainId:n,networkId:A,defaultHardfork:E},{baseChain:x}))}return{common:w}})(a,t))})),xM=({address:e},t,r)=>{var n,i;const s=null==r?void 0:r.topics,o=null!==(n=null==r?void 0:r.filter)&&void 0!==n?n:{},a={};if(R_(null==r?void 0:r.fromBlock)||(a.fromBlock=W_(hT.properties.number,null==r?void 0:r.fromBlock,{number:nb.HEX,bytes:ib.HEX})),R_(null==r?void 0:r.toBlock)||(a.toBlock=W_(hT.properties.number,null==r?void 0:r.toBlock,{number:nb.HEX,bytes:ib.HEX})),s&&Array.isArray(s))a.topics=[...s];else if(a.topics=[],!t||t.anonymous||[_T,"allEvents"].includes(t.name)||a.topics.push(null!==(i=t.signature)&&void 0!==i?i:QT(WT(t))),![_T,"allEvents"].includes(t.name)&&t.inputs)for(const e of t.inputs){if(!e.indexed)continue;const t=o[e.name];t?Array.isArray(t)?a.topics.push(t.map((t=>FC(e.type,t)))):"string"===e.type?a.topics.push(Z_(t)):a.topics.push(FC(e.type,t)):a.topics.push(null)}return a.topics.length||delete a.topics,e&&(a.address=e.toLowerCase()),a},IM=(e,t,r)=>{const n=Array.isArray(e.inputs)?e.inputs.length:0;if(e.inputs&&n!==t.length)throw new Qb(`The number of arguments is not matching the methods required number. You need to pass ${n} arguments.`);let i;if(i=e.inputs?DC(Array.isArray(e.inputs)?e.inputs:[],t).replace("0x",""):function(e){try{return pI(BC({type:"tuple",name:"",components:jC(e)},e).encoded)}catch(t){throw new av("Could not infer types from given params",{params:e})}}(t).replace("0x",""),!R_(s=e)&&"object"==typeof s&&!R_(s.type)&&"constructor"===s.type){if(!r)throw new Qb("The contract has no contract data option set. This is necessary to append the constructor parameters.");return r.startsWith("0x")?`${r}${i}`:`0x${r}${i}`}var s;return`${zC(e)}${i}`};class _M extends oP{constructor(e,t){super(e,t),this.address=e.address,this.topics=e.topics,this.abi=e.abi,this.jsonInterface=e.jsonInterface}_buildSubscriptionParams(){return["logs",{address:this.address,topics:this.topics}]}formatSubscriptionResult(e){return JC(this.abi,e,this.jsonInterface,super.returnFormat)}}Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));const SM=(e,t,r,n)=>{var i,s;const o={};return R_(e.data)&&"both"!==n||(o.data=IM(t,r,null!==(i=e.data)&&void 0!==i?i:e.input)),R_(e.input)&&"both"!==n||(o.input=IM(t,r,null!==(s=e.input)&&void 0!==s?s:e.data)),R_(o.input)&&R_(o.data)&&(o[n]=IM(t,r)),{data:o.data,input:o.input}},PM=({abi:e,params:t,options:r,contractOptions:n})=>{var i,s,o;if(!(null!==(o=null!==(s=null!==(i=null==r?void 0:r.input)&&void 0!==i?i:null==r?void 0:r.data)&&void 0!==s?s:n.input)&&void 0!==o?o:n.data)&&!(null==r?void 0:r.to)&&!n.address)throw new Qb("Contract address not specified");if(!(null==r?void 0:r.from)&&!n.from)throw new Qb('Contract "from" address not specified');let a=B_({to:n.address,gas:n.gas,gasPrice:n.gasPrice,from:n.from,input:n.input,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas,data:n.data},r);const c=SM(a,e,t,null==r?void 0:r.dataInputFill);return a=Object.assign(Object.assign({},a),{data:c.data,input:c.input}),a},OM=e=>"object"==typeof e&&!R_(e)&&0!==Object.keys(e).length&&!M_(e);class kM{_contractMethodDeploySend(e){const t={transactionResolver:e=>{if(e.status===BigInt(0))throw new Qb("code couldn't be stored",e);const t=this.parent.clone();return t.options.address=e.contractAddress,t},contractAbi:this.parent.options.jsonInterface,checkRevertBeforeSending:!1};return MI(this.parent.getTransactionMiddleware())?oM(this.parent,e,this.parent.defaultReturnFormat,t):oM(this.parent,e,this.parent.defaultReturnFormat,t,this.parent.getTransactionMiddleware())}constructor(e,t){this.parent=e,this.deployOptions=t;const{args:r,abi:n,contractOptions:i,deployData:s}=this.calculateDeployParams();this.args=r,this.constructorAbi=n,this.contractOptions=i,this.deployData=s}send(e){const t=Object.assign({},e),r=this.populateTransaction(t);return this._contractMethodDeploySend(r)}populateTransaction(e){var t,r;const n=Object.assign(Object.assign({},this.contractOptions),{from:null!==(r=null!==(t=this.contractOptions.from)&&void 0!==t?t:this.parent.defaultAccount)&&void 0!==r?r:void 0}),i=PM({abi:this.constructorAbi,params:this.args,options:Object.assign(Object.assign({},e),{dataInputFill:this.parent.contractDataInputFill}),contractOptions:n});return i.dataInputFill&&delete i.dataInputFill,i}calculateDeployParams(){var e,t,r,n,i,s;let o=this.parent.options.jsonInterface.find((e=>"constructor"===e.type));o||(o={type:"constructor",stateMutability:""});const a=W_({format:"bytes"},null!==(t=null===(e=this.deployOptions)||void 0===e?void 0:e.input)&&void 0!==t?t:this.parent.options.input,sb),c=W_({format:"bytes"},null!==(n=null===(r=this.deployOptions)||void 0===r?void 0:r.data)&&void 0!==n?n:this.parent.options.data,sb);if(!(a&&"0x"!==a.trim()||c&&"0x"!==c.trim()))throw new Qb("contract creation without any data provided.");return{args:null!==(s=null===(i=this.deployOptions)||void 0===i?void 0:i.arguments)&&void 0!==s?s:[],abi:o,contractOptions:Object.assign(Object.assign({},this.parent.options),{input:a,data:c}),deployData:null!=a?a:c}}estimateGas(e){return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,arguments,void 0,(function*(e,t=this.parent.defaultReturnFormat){const r=Object.assign({},e);return this.parent.contractMethodEstimateGas({abi:this.constructorAbi,params:this.args,returnFormat:t,options:r,contractOptions:this.contractOptions})}))}encodeABI(){return IM(this.constructorAbi,this.args,W_({format:"bytes"},this.deployData,this.parent.defaultReturnFormat))}decodeData(e){return Object.assign(Object.assign({},$C(this.constructorAbi,e.replace(this.deployData,""),!1)),{__method__:this.constructorAbi.type})}}class TM extends iP{constructor(e,t){super(e.requestManager,e.registeredSubscriptions),this.parentContract=t}subscribe(e,t){const r=Object.create(null,{subscribe:{get:()=>super.subscribe}});return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,arguments,void 0,(function*(e,t,n=sb){return r.subscribe.call(this,e,null!=t?t:this.parentContract.options,n)}))}}var CM=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const MM={logs:_M,newHeads:mM,newBlockHeaders:mM};class RM extends qk{get subscriptionManager(){return this._subscriptionManager}constructor(e,t,r,n,i){var s,o,a;const c=M_(t)?t:M_(r)?r:void 0;let u,d;if(u=OM(t)?t:OM(r)?r:n,d="object"==typeof t&&"provider"in t?t.provider:"object"==typeof r&&"provider"in r?r.provider:"object"==typeof n&&"provider"in n?n.provider:RM.givenProvider,super(Object.assign(Object.assign({},u),{provider:d,registeredSubscriptions:MM})),this.syncWithContext=!1,this._functions={},this._subscriptionManager=new TM(super.subscriptionManager,this),(null==u?void 0:u.wallet)&&(this._wallet=u.wallet),(null==u?void 0:u.accountProvider)&&(this._accountProvider=u.accountProvider),!MI(c)&&!MI(c.data)&&!MI(c.input)&&"both"!==this.config.contractDataInputFill)throw new Xb({data:c.data,input:c.input});this._overloadedMethodAbis=new Map;const h=z_(n)?n:z_(r)?r:null!=i?i:this.defaultReturnFormat,l="string"==typeof t?t:void 0;this.config.contractDataInputFill=null!==(s=null==c?void 0:c.dataInputFill)&&void 0!==s?s:this.config.contractDataInputFill,this._parseAndSetJsonInterface(e,h),this.defaultReturnFormat!==h&&(this.defaultReturnFormat=h),MI(l)||this._parseAndSetAddress(l,h),this.options={address:l,jsonInterface:this._jsonInterface,gas:null!==(o=null==c?void 0:c.gas)&&void 0!==o?o:null==c?void 0:c.gasLimit,gasPrice:null==c?void 0:c.gasPrice,from:null==c?void 0:c.from,input:null==c?void 0:c.input,data:null==c?void 0:c.data},this.syncWithContext=null!==(a=null==c?void 0:c.syncWithContext)&&void 0!==a&&a,u instanceof qk&&this.subscribeToContextEvents(u),Object.defineProperty(this.options,"address",{set:e=>this._parseAndSetAddress(e,h),get:()=>this._address}),Object.defineProperty(this.options,"jsonInterface",{set:e=>this._parseAndSetJsonInterface(e,h),get:()=>this._jsonInterface}),u instanceof qk&&u.on(US.CONFIG_CHANGE,(e=>{this.setConfig({[e.name]:e.newValue})}))}setTransactionMiddleware(e){this.transactionMiddleware=e}getTransactionMiddleware(){return this.transactionMiddleware}get events(){return this._events}get methods(){return this._methods}clone(){let e;return e=this.options.address?new RM([...this._jsonInterface,...this._errorsInterface],this.options.address,{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()):new RM([...this._jsonInterface,...this._errorsInterface],{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()),this.context&&e.subscribeToContextEvents(this.context),e}deploy(e){return new kM(this,e)}getPastEvents(e,t,r){return CM(this,void 0,void 0,(function*(){var n;const i="string"==typeof e?e:_T,s="string"==typeof e||z_(e)?z_(t)?{}:t:e,o=z_(e)?e:z_(t)?t:null!=r?r:this.defaultReturnFormat,a="allEvents"===i||i===_T?ST:this._jsonInterface.find((e=>"name"in e&&e.name===i));if(!a)throw new Qb(`Event ${String(i)} not found.`);const{fromBlock:c,toBlock:u,topics:d,address:h}=xM(this.options,a,null!=s?s:{}),l=yield uM(this,{fromBlock:c,toBlock:u,topics:d,address:h},o),f=l?l.map((e=>"string"==typeof e?e:JC(a,e,this._jsonInterface,o))):[],p=null!==(n=null==s?void 0:s.filter)&&void 0!==n?n:{},m=Object.keys(p);return m.length>0?f.filter((e=>"string"==typeof e||m.every((t=>{var r;if(Array.isArray(p[t]))return p[t].some((r=>String(e.returnValues[t]).toUpperCase()===String(r).toUpperCase()));const n=null===(r=a.inputs)||void 0===r?void 0:r.filter((e=>e.name===t))[0];return!(!(null==n?void 0:n.indexed)||"string"!==n.type||Z_(p[t])!==String(e.returnValues[t]))||String(e.returnValues[t]).toUpperCase()===String(p[t]).toUpperCase()})))):f}))}_parseAndSetAddress(e,t=this.defaultReturnFormat){this._address=e?g_(W_({format:"address"},e,t)):e}decodeMethodData(e){const t=e.slice(0,10),r=this._jsonInterface.filter((e=>"error"!==e.type)),n=r.find((e=>t===zC(WT(e))));if(!n)throw new Qb(`The ABI for the provided method signature ${t} was not found.`);return $C(n,e)}_parseAndSetJsonInterface(e,t=this.defaultReturnFormat){var r,n;this._functions={},this._methods={},this._events={};let i=[];const s=e.filter((e=>"error"!==e.type)),o=e.filter((e=>HT(e)));for(const e of s){const s=Object.assign(Object.assign({},e),{signature:""});if($T(s)){const e=WT(s),t=zC(e);s.methodNameWithInputs=e,s.signature=t,s.constant="view"===s.stateMutability||"pure"===s.stateMutability||s.constant,s.payable="payable"===s.stateMutability||s.payable,this._overloadedMethodAbis.set(s.name,[...null!==(r=this._overloadedMethodAbis.get(s.name))&&void 0!==r?r:[],s]);const i=null!==(n=this._overloadedMethodAbis.get(s.name))&&void 0!==n?n:[],a=this._createContractMethod(i,o),c=this._createContractMethod(i,o,!0);this._functions[e]={signature:t,method:c},this._methods[s.name]=a,this._methods[e]=c,this._methods[t]=c}else if(zT(s)){const e=WT(s),r=QT(e),n=this._createContractEvent(s,t);s.signature=r,e in this._events&&"bound"!==s.name||(this._events[e]=n),this._events[s.name]=n,this._events[r]=n}i=[...i,s]}this._events.allEvents=this._createContractEvent(ST,t),this._jsonInterface=[...i],this._errorsInterface=o}_getAbiParams(e,t){var r;try{return uI(null!==(r=e.inputs)&&void 0!==r?r:[],t)}catch(t){throw new Qb(`Invalid parameters for method ${e.name}: ${t.message}`)}}_createContractMethod(e,t,r=!1){const n=e[e.length-1];return(...e)=>{var i,s,o;let a;const c=null!==(s=r?null===(i=this._overloadedMethodAbis.get(n.name))||void 0===i?void 0:i.filter((e=>e.signature===n.signature)):this._overloadedMethodAbis.get(n.name))&&void 0!==s?s:[];let u=c[0];const d=t,h=c.filter((t=>{var r;return(null!==(r=t.inputs)&&void 0!==r?r:[]).length===e.length}));if(1===c.length||0===h.length)a=this._getAbiParams(u,e),FI.validate(null!==(o=n.inputs)&&void 0!==o?o:[],a);else{const t=[],r=[];for(const n of h)try{a=this._getAbiParams(n,e),FI.validate(n.inputs,a),r.push(n)}catch(e){t.push(e)}if(1===r.length?[u]=r:r.length>1&&([u]=r,console.warn(`Multiple methods found that is compatible with the given inputs.\n\tFound ${r.length} compatible methods: ${JSON.stringify(r.map((e=>`${e.methodNameWithInputs} (signature: ${e.signature})`)))} \n\tThe first one will be used: ${u.methodNameWithInputs}`)),t.length===h.length)throw new Wx(t)}const l={arguments:a,call:(e,t)=>CM(this,void 0,void 0,(function*(){return this._contractMethodCall(u,a,d,e,t)})),send:e=>this._contractMethodSend(u,a,d,e),populateTransaction:(t,r)=>{var i,s;let o=null!=r?r:this.options;o=Object.assign(Object.assign({},o),{input:void 0,from:null!==(s=null!==(i=null==o?void 0:o.from)&&void 0!==i?i:this.defaultAccount)&&void 0!==s?s:void 0});const a=PM({abi:n,params:e,options:Object.assign(Object.assign({},t),{dataInputFill:this.config.contractDataInputFill}),contractOptions:o});return a.dataInputFill&&delete a.dataInputFill,a},estimateGas:(e,...t)=>CM(this,[e,...t],void 0,(function*(e,t=this.defaultReturnFormat){return this.contractMethodEstimateGas({abi:u,params:a,returnFormat:t,options:e})})),encodeABI:()=>IM(u,a),decodeData:e=>$C(u,e),createAccessList:(e,t)=>CM(this,void 0,void 0,(function*(){return this._contractMethodCreateAccessList(u,a,d,e,t)}))};return u.stateMutability,l}}_contractMethodCall(e,t,r,n,i){return CM(this,void 0,void 0,(function*(){var s;const o=(({abi:e,params:t,options:r,contractOptions:n})=>{if(!(null==r?void 0:r.to)&&!n.address)throw new Qb("Contract address not specified");let i=B_({to:n.address,gas:n.gas,gasPrice:n.gasPrice,from:n.from,input:n.input,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas,data:n.data},r);const s=SM(i,e,t,null==r?void 0:r.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i})({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(s=this.options.from)&&void 0!==s?s:this.config.defaultAccount})});try{const t=yield aM(this,o,i,this.defaultReturnFormat);return((e,t)=>{if("constructor"===e.type)return t;if(!t)return null;const r=t.length>=2?t.slice(2):t;if(!e.outputs)return null;const n=qC([...e.outputs],r);return 1===n.__length__?n[0]:n})(e,t)}catch(e){throw e instanceof Yb&&KC(r,e.cause),e}}))}_contractMethodCreateAccessList(e,t,r,n,i){return CM(this,void 0,void 0,(function*(){var s;const o=(({abi:e,params:t,options:r,contractOptions:n})=>{if(!(null==r?void 0:r.to)&&!n.address)throw new Qb("Contract address not specified");if(!(null==r?void 0:r.from)&&!n.from)throw new Qb('Contract "from" address not specified');let i=B_({to:n.address,gas:n.gas,gasPrice:n.gasPrice,from:n.from,input:n.input,maxPriorityFeePerGas:n.maxPriorityFeePerGas,maxFeePerGas:n.maxFeePerGas,data:n.data},r);const s=SM(i,e,t,null==r?void 0:r.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i})({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(s=this.options.from)&&void 0!==s?s:this.config.defaultAccount})});try{return hM(this,o,i,this.defaultReturnFormat)}catch(e){throw e instanceof Yb&&KC(r,e.cause),e}}))}_contractMethodSend(e,t,r,n,i){var s,o;let a=null!=i?i:this.options;a=Object.assign(Object.assign({},a),{input:void 0,from:null!==(o=null!==(s=a.from)&&void 0!==s?s:this.defaultAccount)&&void 0!==o?o:void 0});const c=PM({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:a}),u=MI(this.transactionMiddleware)?oM(this,c,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface}):oM(this,c,this.defaultReturnFormat,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface},this.transactionMiddleware);return u.on("error",(e=>{e instanceof Yb&&KC(r,e.cause)})),u}contractMethodEstimateGas(e){return CM(this,arguments,void 0,(function*({abi:e,params:t,returnFormat:r,options:n,contractOptions:i}){const s=(({abi:e,params:t,options:r,contractOptions:n})=>{let i=B_({to:n.address,gas:n.gas,gasPrice:n.gasPrice,from:n.from,input:n.input,data:n.data},r);const s=SM(i,e,t,null==r?void 0:r.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i})({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:null!=i?i:this.options});return cM(this,s,ab.LATEST,null!=r?r:this.defaultReturnFormat)}))}_createContractEvent(e,t=this.defaultReturnFormat){return(...r)=>{var n;const{topics:i,fromBlock:s}=xM(this.options,e,r[0]),o=new _M({address:this.options.address,topics:i,abi:e,jsonInterface:this._jsonInterface},{subscriptionManager:this.subscriptionManager,returnFormat:t});return MI(s)||this.getPastEvents(e.name,{fromBlock:s,topics:i},t).then((e=>{e&&e.forEach((e=>o.emit("data",e)))})).catch((e=>{o.emit("error",new hv("Failed to get past events.",e))})),null===(n=this.subscriptionManager)||void 0===n||n.addSubscription(o).catch((e=>{o.emit("error",new hv("Failed to subscribe.",e))})),o}}subscribeToContextEvents(e){const t=this;this.context=e,t.syncWithContext&&e.on(US.CONFIG_CHANGE,(e=>{t.setConfig({[e.name]:e.newValue})}))}}const NM=RM,BM={addr:"0x3b3b57de",name:"0x691f3431",abi:"0x2203ab56",pubkey:"0xc8690233",text:"0x59d1d43c",contenthash:"0xbc1c58d1"},LM={main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},jM={"0x1":"main","0x5":"goerli"},DM=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"label",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"resolver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"ttl",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"}],FM=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"coinType",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newAddress",type:"bytes"}],name:"AddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"},{indexed:!1,internalType:"bytes",name:"record",type:"bytes"}],name:"DNSRecordChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"}],name:"DNSRecordDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"}],name:"DNSZoneCleared",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"lastzonehash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"zonehash",type:"bytes"}],name:"DNSZonehashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes4",name:"interfaceID",type:"bytes4"},{indexed:!1,internalType:"address",name:"implementer",type:"address"}],name:"InterfaceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"x",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"string",name:"indexedKey",type:"string"},{indexed:!1,internalType:"string",name:"key",type:"string"}],name:"TextChanged",type:"event"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"addr",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"coinType",type:"uint256"}],name:"addr",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"contenthash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"uint16",name:"resource",type:"uint16"}],name:"dnsRecord",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"}],name:"hasDNSRecords",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"interfaceImplementer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"pubkey",outputs:[{internalType:"bytes32",name:"x",type:"bytes32"},{internalType:"bytes32",name:"y",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"string",name:"key",type:"string"}],name:"text",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"zonehash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"address",name:"a",type:"address"}],name:"setAddr",outputs:[],stateMutability:"nonpayable",type:"function"}],UM=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function qM(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,s=[0,1];for(let e=1;e<n;e++)s.push(i+=r());let o=r(),a=t;t+=o;let c=0,u=0;function d(){return 0==c&&(u=u<<8|e[t++],c=8),u>>--c&1}const h=2**31,l=h>>>1,f=l>>1,p=h-1;let m=0;for(let e=0;e<31;e++)m=m<<1|d();let g=[],y=0,b=h;for(;;){let e=Math.floor(((m-y+1)*i-1)/b),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<s[n]?r=n:t=n}if(0==t)break;g.push(t);let o=y+Math.floor(b*s[t]/i),a=y+Math.floor(b*s[t+1]/i)-1;for(;!((o^a)&l);)m=m<<1&p|d(),o=o<<1&p,a=a<<1&p|1;for(;o&~a&f;)m=m&l|m<<1&p>>>1|d(),o=o<<1^l,a=(a^l)<<1|l|1;y=o,b=1+a-o}let v=n-4;return g.map((t=>{switch(t-v){case 3:return v+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return v+256+(e[a++]<<8|e[a++]);case 1:return v+e[a++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,r)=>t[e.charCodeAt(0)]=r));let r=e.length,n=new Uint8Array(6*r>>3);for(let i=0,s=0,o=0,a=0;i<r;i++)a=a<<6|t[e.charCodeAt(i)],o+=6,o>=8&&(n[s++]=a>>(o-=8));return n}(e)))}function HM(e){return 1&e?~e>>1:e>>1}function zM(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=HM(t());return r}function $M(e,t=0){let r=[];for(;;){let n=e(),i=e();if(!i)break;t+=n;for(let e=0;e<i;e++)r.push(t+e);t+=i+1}return r}function GM(e){return KM((()=>{let t=$M(e);if(t.length)return t}))}function VM(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(QM(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(ZM(r,e))}return t.flat()}function KM(e){let t=[];for(;;){let r=e(t.length);if(!r)break;t.push(r)}return t}function WM(e,t,r){let n=Array(e).fill().map((()=>[]));for(let i=0;i<t;i++)zM(e,r).forEach(((e,t)=>n[t].push(e)));return n}function QM(e,t){let r=1+t(),n=t(),i=KM(t);return WM(i.length,1+e,t).flatMap(((e,t)=>{let[s,...o]=e;return Array(i[t]).fill().map(((e,t)=>{let i=t*n;return[s+t*r,o.map((e=>e+i))]}))}))}function ZM(e,t){return WM(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}function JM(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function YM(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let r=[];for(let n=0;n<t;)r.push(String.fromCodePoint(...e.slice(n,n+=4096)));return r.join("")}function XM(e,t){let r=e.length,n=r-t.length;for(let i=0;0==n&&i<r;i++)n=e[i]-t[i];return n}const eR=44032,tR=4352,rR=4449,nR=4519;function iR(e){return e>>24&255}function sR(e){return 16777215&e}let oR,aR,cR,uR;function dR(e){return e>=eR&&e<55204}function hR(e,t){if(e>=tR&&e<4371&&t>=rR&&t<4470)return eR+588*(e-tR)+28*(t-rR);if(dR(e)&&t>nR&&t<4547&&(e-eR)%28==0)return e+(t-nR);{let r=uR.get(e);return r&&(r=r.get(t),r)?r:-1}}function lR(e){oR||function(){let e=qM("AEUDVgHLCGMATwDUADIAdAAhADQAFAAtABQAIQAPACcADQASAAoAGAAJABIACQARAAUACwAFAAwABQAQAAMABwAEAAoABQAJAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACwANAA0AAwAKAAkABAAdAAYAZwDTAeYDMwCxCl8B8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgPi89uj00MsvBXxEPAGPCDwBnQKoEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiC+AZ4EWRJJFbEu7QDQLARtEbgECxDwAb/RyAk1AV4nD2cEQQKTAzsAGpobWgAahAGPCrysdy0OAKwAfFIcBAQFUmoA/PtZADkBIadVj2UMUgx5Il4ANQC9vAITAdQZWxDzALN9AhsZVwIcGSkCBAgXOhG7AqMZ4M7+1M0UAPDNAWsC+mcJDe8AAQA99zkEXLICyQozAo6lAobcP5JvjQLFzwKD9gU/OD8FEQCtEQL6bW+nAKUEvzjDHsuRyUvOFHcacUz5AqIFRSE2kzsBEQCuaQL5DQTlcgO6twSpTiUgCwIFCAUXBHQEqQV6swAVxUlmTmsCwjqsP/wKJQmXb793UgZBEBsnpRD3DDMBtQE7De1L2ATxBjsEyR99GRkPzZWcCKUt3QztJuMuoYBaI/UqgwXtS/Q83QtNUWgPWQtlCeM6Y4FOAyEBDSKLCt0NOQhtEPMKyWsN5RFFBzkD1UmaAKUHAQsRHTUVtSYQYqwLCTl3Bvsa9guPJq8TKXr8BdMaIQZNASka/wDPLueFsFoxXBxPXwYDCyUjxxSoUCANJUC3eEgaGwcVJakCkUNwSodRNh6TIfY8PQ1mLhNRfAf1PAUZTwuBPJ5Gq0UOEdI+jT1IIklMLAQ1fywvJ4sJzw+FDLl8cgFZCSEJsQxxEzERFzfFCDkHGS2XJCcVCCFGlWCaBPefA/MT0QMLBT8JQQcTA7UcLRMuFSkFDYEk1wLzNtUuswKPVoABFwXLDyUf3xBQR+AO6QibAmUDgyXrAC0VIQAXIpsIQ2MAX4/YUwUuywjHamwjdANnFOdhEXMHkQ5XB6ccMxW/HOFwyF4Lhggoo68JWwF1CZkBXwTjCAk1W4ygIEFnU4tYGJsgYUE/XfwCMQxlFZ9EvYd4AosPaxIbATUBcwc5DQECdxHtEWsQlQjrhgQ1tTP4OiUETyGDIBEKJwNPbM4LJyb5DPhpAaMSYgMMND137merYLYkF/0HGTLFQWAh8QuST80MnBrBGEJULhnkB78D8xrzJ+pBVwX/A6MDEzpNM+4EvQtpCIsJPwBJDqMXB9cYagpxjNABMYsBt5kDV5GDAm+PBjcHCwBnC4cFeeUAHQKnCKMABQDPA1cAOQKtB50AGQCFQQE9AycvASHlAo8DkwgxywGVLwHzKQQbwwwVAPc3bkoCw7ECgGpmogXdWAKOAkk1AU0lBAVOR1EDr3HhANsASwYT30cBFatKyxrjQwHfbysAxwD7AAU1BwVBAc0B820AtwFfCzEJorO1AU3pKQCDABVrAdcCiQDdADUAf/EBUwBNBVn5BdMCT0kBETEYK1dhAbsDHwEzAQ0AeQbLjaXJBx8EbQfTAhAbFeEC7y4HtQEDIt8TzULFAr3eVaFgAmSBAmJCW02vWzcgAqH3AmiYAmYJAp+EOBsLAmY7AmYmBG4EfwN/EwN+kjkGOXcXOYI6IyMCbB0CMjY4CgJtxwJtru+KM2dFKwFnAN4A4QBKBQeYDI0A/gvCAA21AncvAnaiPwJ5S0MCeLodXNtFrkbXAnw/AnrIAn0JAnzwBVkFIEgASH1jJAKBbQKAAAKABQJ/rklYSlsVF0rMAtEBAtDMSycDiE8Dh+ZExZEyAvKhXQMDA65LzkwtJQPPTUxNrwKLPwKK2MEbBx1DZwW3Ao43Ao5cQJeBAo7ZAo5ceFG0UzUKUtRUhQKT+wKTDADpABxVHlWvVdAGLBsplYYy4XhmRTs5ApefAu+yWCGoAFklApaPApZ8nACpWaxaCYFNADsClrUClk5cRFzRApnLAplkXMpdBxkCnJs5wjqdApwWAp+bAp64igAdDzEqDwKd8QKekgC1PWE0Ye8CntMCoG4BqQKenx8Cnk6lY8hkJyUrAievAiZ+AqD7AqBMAqLdAqHEAqYvAqXOAqf/AH0Cp/JofGixAANJahxq0QKs4wKsrgKtZwKtAgJXHQJV3AKx4dcDH05slwKyvQ0CsugXbOBtY21IXwMlzQK2XDs/bpADKUUCuF4CuUcVArkqd3A2cOECvRkCu9pwlgMyEQK+iHICAzNxAr4acyJzTwLDywLDBHOCdEs1RXTgAzynAzyaAz2/AsV8AsZHAsYQiQLIaVECyEQCyU8CyS4CZJ0C3dJ4eWF4rnklS9ADGKNnAgJh9BnzlSR7C16SXrsRAs9rAs9sL0tT0vMTnwDGrQLPcwEp6gNOEn5LBQLcJwLbigLSTwNSXANTXwEBA1WMgIk/AMsW7WBFghyC04LOg40C2scC2d6EEIRJpzwDhqUALwNkDoZxWfkAVQLfZQLeuHN3AuIv7RQB8zAnAfSbAfLShwLr8wLpcHkC6vkC6uQA+UcBuQLuiQLrnJaqlwMC7j8DheCYeXDgcaEC8wMAaQOOFpmTAvcTA5FuA5KHAveYAvnZAvhmmhyaq7s3mx4DnYMC/voBGwA5nxyfswMFjQOmagOm2QDRxQMGaqGIogUJAwxJAtQAPwMA4UEXUwER8wNrB5dnBQCTLSu3r73bAYmZFH8RBDkB+ykFIQ6dCZ8Akv0TtRQrxQL3LScApQC3BbmOkRc/xqdtQS4UJo0uAUMBgPwBtSYAdQMOBG0ALAIWDKEAAAoCPQJqA90DfgSRASBFBSF8CgAFAEQAEwA2EgJ3AQAF1QNr7wrFAgD3Cp8nv7G35QGRIUFCAekUfxE0wIkABAAbAFoCRQKEiwAGOlM6lI1tALg6jzrQAI04wTrcAKUA6ADLATqBOjs5/Dn5O3aJOls7nok6bzkYAVYBMwFsBS81XTWeNa01ZjV1NbY1xTWCNZE10jXhNZ41rTXuNf01sjXBNgI2ETXGNdU2FjYnNd417TYuNj02LjUtITY6Nj02PDbJNwgEkDxXNjg23TcgNw82yiA3iTcwCgSwPGc2JDcZN2w6jTchQtRDB0LgQwscDw8JmyhtKFFVBgDpfwDpsAD+mxQ91wLpNSMArQC9BbeOkRdLxptzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgELgEaJZkC7aMAoQCjBcGOmxdNxrsBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUHqSvAj5Gqwr7YrMUACT9AN3rlr3JG9m8w9lIAXltp/v8kfWaIaaR9OwpAES/I3ZVamDXSgB/UsOgAG6D0tq+5CIqE15FiAhV3yA2VhCQ7tj+m6xXaF53FIfGi/IAZIskMGAi2MU7MDVJNCbMzERyHZi+osdPtnFVbvq653O8rwaCy4IAf9OOok65AqJUtUriUfYsGPPVbe6jm0s9lbKlPCUKjdkHsFsEhvX4kT39ZCtAAbwQdn/h4TpO5hTByWAmr5n+Wuwhdegv6bmvX4LyOes3z2+cuHv2JFYwVMNuq2gzn8YHTjlUQd39osyWei4NKl3LAdfxlO876hh5ENp/cOvpuI9bF55guEthLLPOXjD4dktTH04P5TvZrWTM0e4+BHJxj7MLApXIFOs0sWKhNkG8iwuM5wR83my6V3wW06abhDzTXYfOr/ZpFXgXzmv4d12FFyP00/dPGbIVGV5ao8UufGzUwp/IHx6v/wDWJr9iaoCulhWwlZ7A8q/NMoD12+mBdNRgJYnThRLtMx1Bgwttn8/4Qn2CDfOSup9GVXEvA21ILgp0owHYxNOkpwLWz0G7K+WREIDjIzUzSn8I99CuJSmSpPyH0Ke6/NERYiNx+3dncSebPnOUnnWD61AhJ1n/tSLZmU5wYO5GfgzyAYJm6VL91LxZ8hL1lfximQxIDMRhIecQZBmeE5R0XlrpvwplVrJwpa8BBCdp93GPP9lyBeZ2zkRr920CR3cYbKpKHfogvm0nV7XdDz6EbjzlxADCMjSLXuXpIpyuizy39yY+I+H9rmpoIF3YwEjlH9MgGgWcCNTjHEWMqAbprn2Ox7rOHupaVE3lNyg3nt5XaZID6Y+uml5Ja+aOPu+BI+DZbiJVfaspUadakWUX6TA4dETkIqdJJHYnU4Z4yKpt5y8rVIahoMUf8A8kWtAQNCTbjp71gx3/zVdqNz1Sutkw0gFIMVm2BF4Xdv/0olw+NaDIR9Bb3DPweZA2K/cw+/b+AwyWl9ZOP67A9nexmeTNjfdzPGf9J6E6BMPKa5lJh+qNsdUz3HBUevU71eQFCqOcxiIYhacAhh/8PX0J5DdSViZ6WazDDx7cukJNpMfEkYLJ5Ao4vLoVd3d25Pg4qaVa2p2D2L3WvYPJ5Yf/A/MSxptjlgXL/KJtP2U0cRv2I09ATAiWCJYuRwiapeKFsqmi18yMMulDp3HdcIldq+7jkwsJUOHLHCzzzBw5XFvL0CAmo1ub456z7zb7shk3KPGCLZzr47oT1k/j06XNnJvG3Udv6XrP+wsqTBlZ5MaNPt9FOs/4Bt/ja/vbVhTNpBFl9Gq7MqINvGlWKOAwQzwOZy+EzSdjAqKJVV2YcskTuM94aIK+kc/AZaXiZLPREUDpkXIV947IFfj+85TrqPqLfkGcxgboMQjosf+az+odLNXdyp1mDNGsqSdK/pJ2Ca04mt/4d6s1X+lncOEYaGBBeW4pApGcjf7/XJCFbj3N3mFb+BtlIcw8ZiDKoClFX9Rf0bxCqtLpicObKJzBVVHr/6u4siH2hK75RNv7w9GfTbhJOQBYiFUZAByY4rn37tZBHT//kqKsNi3ryL9AqXJRzqiMIJMhILjoi/i8LVEsbu+Ih9bsyW16sgQqjYLO0qda6KaCPKj3DQcu6CfV5lKtjS3ZCdqLAZkOey9MR+QutJBGiz/r15GVD6rCVwJR4UUKC4GNJkfDf00OMW8aQtLSAGLXV8MIi9mbbl/qQEpxCm2L5hutFX4ekeLH4QgBWUFKs/2VVMKy46WtFE6AbwgmYm/Z0yHk5veDIrcl2HpVqb/rSE0PC9EbDzJEWqeaPhh7vF369Umq2kSiB3s5rBI6c/7N9bkRu4h2n+/h5nSwy+7n+/I+6oXQVANo2Jb5zDwtiBPf1ySCzHdT6yJShMzqSRZfnykX49CaFaxhoVF4PBhEuECJ1PrFYSpmHuyYsl14DTAV9ZxRms1XiR/kBrjhZjidOt0UNe+GSml7XNgpVw8YsUTmZXLTK+6iYnyW/wYR1W4UXwOi14xpFROHb6HcZzksgF5DbL2AFXzKNwHU2adjdAY+KCyM/cwRTBkkq/a227NI0q6DR2MkMCRu620t79bGcYUmACtqN3mk/0uNwd3JSXHqE1kzf6Yyj0W2083JNDRnIXDlgBxJ6uf58NN1f6FQiRCWB4egF8QDx74AixV8oTyw7PluIjr3/rj/WzgwPSq4xPojaF7V0xqG2u5ti2L1h6yYHv73Isrukr0kURDIEjClBsBx7kdcXUxaYMS0syT3ymLzDzslNDWQOT1Tao1YNmJHARUenhCkmV9tqCPGI5GqZaRpkiPxyjoncWjyOHYGqvbvRX+Bn1pn7EhRNXa1lqJPmoeN5VqdqIDPhEVhFsyG0d4iQEIYX0wZUbY2XbZWYlpZ/l66IrDDY0q1C1YzBDpHC4h05YqHQLqS9anyl22JQ6lEvjvdBwMHfE7z0luCXD34/rFeDa2TmSeEAykSpYO5j1G/nsgpR3qn0qaQEmLjnnLfcz+veoYqPnRqmRGwCJ6FJ3Gm/Z1/aVX5PSb03MMnjAf41ww54sD5k8FrkfBP+K0b1MrYpapWjtpZfve2HVf4ickX3LKSOhu7qI1Vd4c1kNrn2ajy1t4y93JhV4fnWCKq7OmFpcr7FjdJCXPTql0Drr14Ho3Z87+GPQ4Z/DcTiGqtvZxlRYi8cNuhXABveZIwNl/BX1huhVLaFax5OqypUrQRyb9OE3SSkPlDdy5uo5XGg2EIGEjLY1MO5cr1ibfiFWV7zspcTgkBKkwo5jPyAin04LqizZXb2tDRgwKJjGx4cVk3ngAQixwcxjYAg2Q7vmUR/hpwInMdw7OhC2qyf41vTPkudQAORS0DdLtOGQxb4fH2VYGsvJCkeWPeUwtf1/tuIhzXEThoCZzzSJqqjUtbaPI3ntHm3T5uf849hGUA0zU8ni5W+EEn3/0Y6oUhQFw9z0aGjkljBbAlFXc0y82G2wkd7VdgWa5KTgJJNjNwZMfmdnUIUn1JU5LiWX5UZEZbVlKSN76mlmjUR2ku+fucTNlO4IAAahnLjBhlvQNR9pe9swGBgq0YR7P3VCyI/seYwQ4QBzy9X+HPePgoF8WfKaJ4MBOhLCGHae6Z8xkNXwni9QAKvTNtVA56x8YJflZ/VvONRSlsSLmiSyNMnTjTaE1ko81zkzGEnVwEhjCzlwIqpxmpDAqwsEmtpdr3xpc7i/ZX3f2TzT3M0FdxIEQvO1jgmmiN+D1YpMduAzEhBtj2OBkMN/rv6p7Th4pSH6f5aH3aTvwFTl7EOSgGASI7ttyMehzpm4AVyK+bFEaFg9gnZsSUPpsbAe/0RFhrH+EXZ12Z7thf4dzN1+Sn+G8QrDA1VKaN4IFxD1rQz9Xq9Coii9S9/hPbTGjyBwFH3H1UdQuz5KsgPDEHua4/kPg2Gp/IIItsaLWBqiT9XH45MiQxSosGJ56H/0F2cjcCFd72l1665RNHURdC3lspI77esfJsl+rXXabkAy7vxDXG/XGGcKpwiKDPFfvMEgjkAHil4Za1F36RnyxxvdIAzvgfH8knukYDck07tc++DP4TdWeI7HXuq5Yl6VVFrUQtf64/dkXewlKZSHQo6YvCSpREB0GDrz+Ys2GfO8nw2SwrYwaf88AifzlPvP17bf1mI3AuccJvAjZIpBmqvharKFAebEjVKfGAwpQjWoXlm9LROsq9bCk1UeQ3CJxJqprzssS/Q04JeS1ReCCubL3J7sx86spkP4eNpp95UF+8K748icIs8vdILFklk9skQqi1So6cx3X906pvy1vz+KipTJ8fiVJxsV5MmT0XwA");oR=new Map(GM(e).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),aR=new Set($M(e)),cR=new Map,uR=new Map;for(let[t,r]of VM(e)){if(!aR.has(t)&&2==r.length){let[e,n]=r,i=uR.get(e);i||(i=new Map,uR.set(e,i)),i.set(n,t)}cR.set(t,r.reverse())}}();let t=[],r=[],n=!1;function i(e){let r=oR.get(e);r&&(n=!0,e|=r),t.push(e)}for(let n of e)for(;;){if(n<128)t.push(n);else if(dR(n)){let e=n-eR,t=e%588/28|0,r=e%28;i(tR+(e/588|0)),i(rR+t),r>0&&i(nR+r)}else{let e=cR.get(n);e?r.push(...e):i(n)}if(!r.length)break;n=r.pop()}if(n&&t.length>1){let e=iR(t[0]);for(let r=1;r<t.length;r++){let n=iR(t[r]);if(0==n||e<=n){e=n;continue}let i=r-1;for(;;){let r=t[i+1];if(t[i+1]=t[i],t[i]=r,!i)break;if(e=iR(t[--i]),e<=n)break}e=iR(t[r])}}return t}function fR(e){return lR(e).map(sR)}function pR(e){return function(e){let t=[],r=[],n=-1,i=0;for(let s of e){let e=iR(s),o=sR(s);if(-1==n)0==e?n=o:t.push(o);else if(i>0&&i>=e)0==e?(t.push(n,...r),r.length=0,n=o):r.push(o),i=e;else{let s=hR(n,o);s>=0?n=s:0==i&&0==e?(t.push(n),n=o):(r.push(o),i=e)}}return n>=0&&t.push(n,...r),t}(lR(e))}const mR=e=>Array.from(e);function gR(e,t){return e.P.has(t)||e.Q.has(t)}class yR extends Array{get is_emoji(){return!0}}let bR,vR,wR,AR,ER,xR,IR,_R,SR,PR,OR,kR;function TR(){if(bR)return;let e=qM("AEkU4AngDVgB0QKRAQYBOwDqATEAnwDbAIUApABsAOAAbwCRAEYAiQBPAHYAPgA+ACsANwAlAGMAHwAvACsAJQAWAC8AGwAiACIALwAUACsAEQAiAAsAGwARABcAGAA6ACkALAAsADUAFgAsABEAHQAhAA8AGwAdABUAFgAZAA0ADQAXABAAGQAUABIEqgYJAR4UFjfDBdMAsQCuPwFnAKUBA10jAK5/Ly8vLwE/pwUJ6/0HPwbkMQVXBVgAPSs5APa2EQbIwQuUCkEDyJ4zAsUKLwKOoQKG2D+Ob4kCxcsCg/IBH98JAPKtAUECLY0KP48A4wDiChUAF9S5yAwLPZ0EG3cA/QI5GL0P6wkGKekFBIFnDRsHLQCrAGmR76WcfwBbBpMjBukAGwA7DJMAWxVbqfu75wzbIM8IuykDsRQ7APcta6MAoX0YABcEJdcWAR0AuRnNBPoJIEw3CZcJiB4bVllM44NCABMADAAVAA5rVAAhAA4AR+4V2D3zOVjKleYuChAdX01YPewAEwAMABUADmsgXECXAMPrABsAOQzFABsVW6n7Adq4HB0FWwXiAtCfAsSwCkwcpGUUcxptTPUAuw1nAuEACy00iRfJkQKBewETGwC9DWcC4QALLQFIUCWRTAoDLfsFMgnXaRetAddDAEkrEncCMRYhAusnuTdrADnhAfUlAMcOy7UBG2OBALEFAAUAitNJBRvDHwcXAKgn0QGhKy0DmwBnAQoZPu03dAQYFwCqAccCIQDTKxJzOvNQsAWQOncnNUgF+icFWQVYr7gFaTtdQhI6WEGXe5NmX6H4CxMDxQcl8XcjBKNLAlNTAnUbqycBj6OlNVsDRRcEg2EJANEGqz8vIwcpAjldAGsBYR9xAIMdGQCVAUm3ACdpFwGvxQM3LSFDUwFvWQZlAmUA8UkXAykBBQBJQQCrAF0AcwArtQYH8+8ZjX8ACSEAKQCzG0cB0QHbBwsxl3iB6AAKABEANAA9ADgzd3nTwBBfEFwBTQlMbDoVCwKsD6YL5REVDNEqy9PYADSpB+sDUwfrA1MDUwfrB+sDUwfrA1MDUwNTA1McCvAa08AQXw9IBG0FjgWLBNYIgyZJEYEHKAjSVA10HhxHA0UA/CMlSRw7kzMLJUJMDE0DB/w2QmynfTgDRzGrVPWQogPLMk85bAEecRKgACoPcxw1tU5+ekdxoApLT661f0liTmcCvjqoP/gKIQmTb7t3TgY9EBcnoRDzDC8BsQE3DelL1ATtBjcExR95GRUPyZWYCKEt2QzpJt8unYBWI/EqfwXpS/A82QtJUWQPVQthCd86X4FKAx0BCSKHCtkNNQhpEO8KxWcN4RFBBzUD0UmWAKEG/QsNHTEVsSYMYqgLBTlzBvca8guLJqsTJXr4Bc8aHQZJASUa+wDLLuOFrFotXBhPWwX/CyEjwxSkUBwNIUCzeEQaFwcRJaUCjUNsSoNRMh6PIfI8OQ1iLg9ReAfxPAEZSwt9PJpGp0UKEc4+iT1EIkVMKAQxeywrJ4cJyw+BDLV8bgFVCR0JrQxtEy0REzfBCDUHFSmXICcRCB1GkWCWBPObA+8TzQMHBTsJPQcPA7EcKRMqFSUFCYEg0wLvNtEurwKLVnwBEwXHDyEf2xBMR9wO5QiXAmEDfyXnACkVHQATIpcIP18AW4/UUwEuxwjDamgjcANjFONdEW8HjQ5TB6McLxW7HN1wxF4HhgQon6sJVwFxCZUBWwTfCAU1V4ycID1nT4tUGJcgXUE7XfgCLQxhFZtEuYd0AocPZxIXATEBbwc1DP0CcxHpEWcQkQjnhgA1sTP0OiEESyF/IA0KIwNLbMoLIyb1DPRlAZ8SXgMINDl36menYLIgF/kHFTLBQVwh7QuOT8kMmBq9GD5UKhngB7sD7xrvJ+ZBUwX7A58POkkz6gS5C2UIhwk7AEUOnxMH0xhmCm2MzAEthwGzlQNTjX8Ca4sGMwcHAGMHgwV14QAZAqMInwABAMsDUwA1AqkHmQAVAIE9ATkDIysBHeECiwOPCC3HAZErAe8lBBe/DBEA8zNuRgLDrQKAZmaeBdlUAooCRTEBSSEEAUpDTQOrbd0A1wBHBg/bQwERp0bHFt8/AdtrJwDDAPcAATEHAT0ByQHvaQCzAVsLLQmer7EBSeUlAH8AEWcB0wKFANkAMQB77QFPAEkFVfUFzwJLRQENLRQnU10BtwMbAS8BCQB1BseJocUDGwRpB88CEBcV3QLvKgexAyLbE8lCwQK92lEAMhIKNAq1CrQfX/NcLwItbj1MAAofpD7DP0oFTTtPO1Q7TztUO087VDtPO1Q7TztUA5O73rveCmhfQWHnDKIN0ETEOkUT12BNYC4TxC2zFL0VyiVSGTkauCcBJeBVBQ8ALc9mLAgoNHEXuAA7KWSDPWOCHiwKRxzjU41U9C0XAK1LnjOrDagbEUQ8BUN16WImFgoKHgJkfQJiPldJq1c3HAKh8wJolAJmBQKfgDgXBwJmNwJmIgRqBHsDfw8Dfo45AjlzEzl+Oh8fAmwZAjIyOAYCbcMCbarrhi9jQScBYwDaAN0ARgEHlAyJAPoHvgAJsQJ3KwJ2njsCeUc/Ani2GVjXRapG0wJ8OwJ6xAJ9BQJ87AVVBRxH/Eh5XyAAJxFJVEpXERNKyALQ/QLQyEsjA4hLA4fiRMGRLgLynVz/AwOqS8pMKSHLTUhNqwKLOwKK1L0XAxk/YwGzAo4zAo5YPJN9Ao7VAo5YdFGwUzEGUtBUgQKT9wKTCADlABhVGlWrVcwCLBcpkYIy3XhiRTc1ApebAu+uWB2kAFUhApaLApZ4mAClWahaBX1JADcClrEClkpcQFzNApnHAplgXMZdAxUCnJc5vjqZApwSAp+XAp60hgAZCy0mCwKd7QKejgCxOWEwYesCns8CoGoBpQKemxsCnkqhY8RkIyEnAierAiZ6AqD3AqBIAqLZAqHAAqYrAqXKAqf7AHkCp+5oeGit/0VqGGrNAqzfAqyqAq1jAqz+AlcZAlXYArHd0wMfSmyTArK5CQKy5BNs3G1fbURbAyXJArZYNztujAMpQQK4WgK5QxECuSZzcDJw3QK9FQK71nCSAzINAr6Ecf4DM20CvhZzHnNLAsPHAsMAc350RzFBdNwDPKMDPJYDPbsCxXgCxkMCxgyFAshlTQLIQALJSwLJKgJkmQLdznh1XXiqeSFLzAMYn2b+AmHwGe+VIHsHXo5etw0Cz2cCz2grR0/O7w+bAMKpAs9vASXmA04OfkcBAtwjAtuGAtJLA1JYA1NbAP0DVYiAhTvHEulcQYIYgs+CyoOJAtrDAtnahAyERac4A4ahACsDZAqGbVX1AFEC32EC3rRvcwLiK+0QAfMsIwH0lwHyzoMC6+8C6Wx1Aur1AurgAPVDAbUC7oUC65iWppb/Au47A4XcmHVw3HGdAvL/AGUDjhKZjwL3DwORagOSgwL3lAL51QL4YpoYmqe3M5saA51/Av72ARcANZ8Yn68DBYkDpmYDptUAzcEDBmahhKIBBQMMRQELARsHaQZdtWMBALcEZ7sNhx6vCQATcTUAHwMvEkkDhXsBXyMdAIzrAB0A5p8Dm40IswYbn8EApwURu+kdPT4WeAVoNz5AK0IhQrRfcRFfvACWxQUyAJBMGZu5OyZgMhG6zw4vGMYYicn2BVcFWAVXBVgFYwVYBVcFWAVXBVgFVwVYBVcFWEYVCNeFZwICAgpkXukrBMkDsQYvu7sAuwSnuwDnQCkWsgVGPmk+cEI/QrZfdTdf6ABYETOrAIz+zGvL/KbnRno9JiMEKxYnNjV+bd9qwfEZwixpAWvXbjAXBV8FasnBybgIz0lbAAAACnxefYu+ADM/gQADFtEG5a0jBQCMwwsDAQ0A5WUdPSQfSkKxQrxBOCNfJ2A2JzgjCcE9CkQ/Qz54PoE+cD5xAolCvElCO1/LTk9qTQosa1QvagtuH1/gMzobCWebCmIjKzwdJkKrQrwrzAHL/F/JDh8uCQgJIn6d32o6LUoXyavJrAllwcvMCmBBXw/lEKMRAJONHUVCJRupbTnOOAozP0M+cEI/HAcKHUxHbFssLVrhvBIKfe0dK0I/HF0ISgkOM1RDQjcEO0OcLAqBGy1CPxv1CFMiIxgwMQAFj2HwXgpxZMlgC2AtI25DYBk5AhseYLMGAmsQZU5gTREBZOdgFWCVYH1gs2BLYJFoFhcGtQ7cVam8WgtDFqsBuyvNwQIfFQAcAx4BeQJsLzCVUoABigq4RxoA5CN0jgrKDaZN6gGbAoecTwVAXwD39wkANBZXDAulDCQfuq9HAE8MNAAVE58rggh6AtILS2URGwDYTgZ1BAoeWgAxALa4AZonCxZvqyQ4nxkBWwGGCfwD2e0PBqoGSga5AB3LValaCbthE4kLLT8OuwG7ASICR1ooKCggHh8hLBImBiEMjQBUAm5XkEmVAW4fD3FHAdN1D85RIBmpsE3qBxEFTF8A9/cKAHoGJGwKKwulODAtx69WDQsAX7wLAGNAlQh6AOpN7yIbvwAxALa4AZonLTsOzgKQGHtQu1jIdHKO16WbDvWZFT0b7AEpEFwSBg8bAccJOhCTBRArDDYLABEAs84BAgCkAOEAmIIABWtXLwAUAFsbxi5sdioNwRACOyQz0+EcHgsbfQJ7Ls6hHATBCqrxbAA3OS0Opge7CQAQOi7OERkAfavaHA+7GkcczaF3HgE9Kl8cAuugCAHCAULz5B9lAb4Jtwz6CDwKPgAFwAs9AksNuwi8DTwKvC7OoSoJPA67BZgBG2sKD4sa4QHDARELuxY7AKALOxC7BBige9wAO2sMPAACpgm8BRvQ9QUBvgH6bsoGewAHuwG7D00RErwBAQDqAQAAdBVbBhbLFPxvF7sYOwAuuwLrDlaouwAeuwJVICp/AAG7AALjAAg7FTwVuwAbuwG9KOClWw6/xAD0AGj7L7ZtvgNIo7vIqDsDAbuVJ0sAAlsACrsEAOfdGbsIGnsIoQUK/3AA37unuxjbGruji3lyBvupm4MAErsGGwsBvAAAhgBtuwYAC7unOwEaO7oIoZzKAbsL7QfAqTsA4XsBvwAA5QAVuwAG+wAJuwBpiwAauwAOuwIYu45pFfsAAVsADmsALkseAAa7ABe7CCEADUoBwgC3ryYBwAAAtAAOmwG+J+QAsloAHBsBv/7hCqEABcYLFRXbAAebAEK7AQIAabsAC3sAHbsACLsJoQAFygBunxnVAJEIIQAFygABOwAH2wAdmwghAAaaAAl7ABsrAG0bAOa7gAAIWwAUuwkhAAbKAOOLAAk7C6EOxPtfAAc7AG6cQEgARwADOwAJrQM3AAcbABl7Abv/Aab7AAobAAo7AAn7p+sGuwAJGwADCwAQOwAAFDsAEWsAD4sADesADbsAGQsGFhsAFTsAbpsWswG7ALoAEzsDAGkrCgDhSwACOwAEUgAXewUbAAbQABi7AAv7AF+7AGv7AOSLAbsAF3YBvAABcguhAAVKHgF7KFIAOUUA/gcNDHIAKCpwAaQFCF4BvF4jDAkHb0tsXyqJHzwUYi02A6EKtAHYABYC0QNuAXZyR1IUIQNPAhU+ASwGA3NGvHtSekAAKQAxAfsAUwrbAHuQLAErAHblDREyRgFKAFcFAAFQAQeKzAB4OwQgpQBaANYVAJVoNx+LAM1rsQDP1BYIwnVzGxhWHQnRAYiQqyJTU01IEjzCifkAfxw3QCkr4BGXTwByASksMClCGQ8DMFUE98XuAEtl3ABqAnECPxF6Osd4LjXVBgUAEBsdCggMKgQfHSlOU04IuboAChLNACYAARoAhgCJAI41AO4AtADgAJ08ALsAqwCmAKEA8gCfANMAnADrAQwBBwDAAHkAWgDLAM0BBwDXAOsAiACiATUA4wDYANUDAQcqM9TU1NS2wNzN0M5DMhcBTQFXL0cBVQFkAWMBVgFHS0NFaA0BThUHCAMyNgwHACINJCYpLDg6Oj09PT4/DkAeUVFRUVNTUlMpVFVXVlYcXWFhYGJhI2ZocG9ycnJycnJ0dHR0dHR0dHR0dHZ2d3Z1WwBA7ABFAJYAdAAuAGLyAIoAUwBTADMCc+kAh//y8gBgAI/sAJsASwBeAGD5+aoAgQCBAGUAUgCtAB4AsgB/AjwCPwD4AOMA+gD6AOQA+wDlAOUA5ADiACkCdwFNATwBOgFQAToBOgE6ATUBNAE0ATQBGAFUDwArCAAATRcKFgMVFg4AigCSAKIASwBkGAItAHAAaQCRAxIDJCoDHkE+RykAiwJLAMMCUwKgALoCkgKSApICkgKSApIChwKSApICkgKSApICkgKRApEClAKcApMCkgKSApACkAKQApACjgKRAnEB0AKTApsCkgKSApEWeQsA+gUDpwJdAjYXAVAQNQLeEQorEwFKNxNNkQF3pDwBZVkA/wM9RwEAAJMpHhiPagApYABpAC4AiQOUzIvwroRaBborDsIRAZ3VdCoLBCMxbAEzWmwBsgDdfoB/foB+gYKCfoOGhH6FiIaAh4KIgol+in6LfoyKjX6Ofo+CkH6RfpJ+k36Ug5WIloKXftoC2WzhAtdsAIJsJGygAINsbARCBD8EQQREBEIESARFBEAERgRIBEcEQwRFBEgAlmZsAKMDh2wAtGYBBWwAyVFsbADPbAIMbAD2WmwA9gEZAPYA9AD0APUA9AN8XmzUhCNlvwD2APQA9AD1APQcbGwAiVpsAPYAiQEZAPYAiQLsAPYAiQN8XmzUhCNlvxxsAPdabAEZAPYA9gD0APQA9QD0APcA9AD0APUA9AN8XmzUhCNlvxxsbACJWmwBGQD2AIkA9gCJAuwA9gCJA3xebNSEI2W/HGwCQwE2bAJKATlsAkvBbGwCV2xsA54C7AOeA54DnwOfA58DnwN8XmzUhCNlvxxsbACJWmwBGQOeAIkDngCJAuwDngCJA3xebNSEI2W/HGwEN2wAiQQ4AIkGjTFtIC9s1m4DJmwA/QDGWgJsbABVWv4UMgJsbACJAmwAVAEAuV5sAmxebGwAiV5sAmxebD3YAEls1gJsbEZFNiJ9FGVAe8xvEZKvxVfKZszAVTBzYBH2d1iyUXEHH7twNw7eZF5JJRHI5EgaRr5D20/3dfONrFLSq5qSrrgd2CEUq722WBQ/LzpA+bx1oREI5xy4BDSZNun0ZWORUJqInZSyMaioyvfSI0l5uFDzbWaQ28/zdB0hwR4OQZ0/jn9ALSLNikjFYGfqR389qtFlhD3a6KdIh97rhZYpywuLc7o8ql5/X8KCbPU3L/QlmCowhRXhsGDvg6wUNprA9bM/49uxlAj7ZVy3ouEY/BgFXBNyK0TLrSjZWeJm/T4nz6QGLT3cJNtWRZVZTvIdtaxMMJRHgig9+S11LjBh7Inr06ykoch1U097Rw0hvgmOrydQyaWcEQDg0RavuMuT0zYabUZl1e33HNSK1oNUCS03eh+9C2EvF3fq9h+XBaAMFuoWeZf+mfZgL4HzyiKDIUtfNU4oFu0aE9qt3VA3U4D3fOSrAcYVnjG3cSkp1vhXZnp3JQm4JknKdBitO2NVnGCYQwU3YMWHWB87NEd+4AHuOKI8BSIH92reW0pfs+kWCTJxDCbRjFv8Cfc4/DSBYJScJYTeAEgg9wTEvcwd/QuHRHqGzAQ4fXf5FUI1lPrO+fvEcPl4JInM1z9AtBT2bL4QYEREe7KiSnnxTwtmAFjn8lqT3mND8qTktX2F16Ae9cakqJ6/pEQsHURqyqWlRMCzKXRKfCHT7sYHWx9/T/ugYTFY6iVN3Btm58ATJR5alYZybKMWojwOw3HbFn23NFyeLl7+Er82RchyYuBoGQ3j7SAWNxiYvp5U+Fq/DEzB9cG5DlJWsqkosRze92OVlCtQEYo1S1lF72Z8xWc4ld/+fFcfTEDTFb9d8tJGQ75dpJEvcWyGmGBiTbiWDdGOcw93Dmxq5ISUrmasygONfHLvhgo83HQZenbdBtSzBkvYrCEQ/xEDMhMZsN6gqplx5jGG9mSQLhM81UEdEeJ59sdNJDAFy/gPyJoKlwPZgB/MkC/kICLiCB8va+nCdO2ry4aDfkmPFpF/H/SGQ3LJ6aAv9dtJ8DniHtLOckZix0BVb0iR5V3LAp521LBSIi6AtV7r2ZB/hQEvAw54EFNOQcFnl1xGUIc67tqK1INNwD2n/RbwgzO9h45LM6VMuN8V1ZNIQ6t+Xy3lTqyVCD5kqLy/t3/b8MLbgDg8JIWDkSZ+LrGhhr+gYpH+pr1TnCUnZPjpUdw6bSL6MWVXoDDciQDWECwU2e6VEpfrcOBbrSOijqGkEIoJPbpmeJLkcwbvA0yWIixQVjo0HnYh7fji+Dfdq1mtV1lG2Zz9R7eFMHS+FK7nybutu2fwzDpFldO2pZBshsHJWaltn3PWOoGJpCT2jE8EHOuC6FkejNWcfsWCqNqMLP9xTwcWArj2EiiI7D+EaDi7/2cqHL1gPiF6C/J7aUo7RQqogPZ11WqbyP97nsoMxPOC78wZMF7B1Y0g7JNXJV/nN1m4xx8hbqWz07KSaqr5hE4icB326DMR/vUKX9LoNjle/ZWtbUhrTAcsdgrLlG5Ne8aiR0bS/2ZhpNOVVxavWIZsEM/rd68EB4vjbbD13NkMK1qvMk74vGbSkL7ULO0sZ9R6APSCo6KH+Xn98wEdw1bCPAnDTaBsD6sidAGN58uiH4a3ovG1KyZAu2XtyGgF/vgWKGxw9R1lfAVcfuYE71DHuxtTzfGZnHaDpDGWmfEq0N4GawE7yIkaoz8jcmVmzJe1ydM8q0p08YIxFcY1YcqQc1djWBEoNETDFcgk5waRftEJasPREkrV++N/TOKkERF1fCLrXS8DFGYGRBeECMQRNEs0ES3FzUtXCcNxpYEM3Uei6XodZruXUIRnn+UXf2b/r7n1vQutoi6WoIbW7svDNWBbUWcDUc7F9SJK3bvSy9KIqhgyJHoW2Kpvv0J4ob14HFXGWWVsYXJzjwxS+SADShTgCRjhoDgjAYRGxwJ1Vonw+cpnCKhz8NQPrb0SFxHIRbmG95Q2hlC4mDxvPBRbkFa60cvWakd7f0kVBxxktzZ9agPJEWyA63RSHYVqt8cPrs2uFJ3rS3k9ETGKn5+A6F9IOrdZHfT1biEyUJKEvwzuscwshGCBJvd16TrefW03xVnJf4xvs72PdxrMidjJO8EiWyN/VWyB3fv9kc34YIuZTFtXGo9DuG3H1Uka5FgBMwDPEvRcSabi3WakNQkXFecJlFk6buLVk5YHpuKWTw6oF632FPPSVIVl5hgUAeHhj0t/sw/PEEvThLQDDFE34eCg/rLOyXT3r+L98oRKrlTO0MdALYQ3rRQqC7d822dJPGxF1K4J2TtfPSMFaCAg0n0NGk9yiaKKOJD1v2aBX9HUOIawjjfvwCmjHZJTR62R9c9x33JnBjWrN4QYEOmehy0oZMP9XM9Zyi6TYoe07PaLceRXcCWZiY/imRUWW6+mci7+wMxSdwMdbXckXtvhJH8sc4iQcTwm7yp+3f7CaesTTQB2qkgeXh+wFiSMXfMlH7Yil0OoZ2QTtRLTip2O0cLZ4SstqWHZ6H+8A2kZXhpm0kPbL9dUanTOvziqIUh6Ambwa3WrCb2eWbuCN3L1hgWUmjRC3JoL3dBhR3imSQI8xuCMfsszlji7cSShNSYdqCXPxEVwbqO9i5B6hf93YI7aeyI8jxgcVXK0I/klbvhSXjkjOIwZgPdVwmsFW7HGPLUAvDRuKm+itybRg7c8+Yqqjg824Qf+/NxsBSUNAK9KCoJpauFqK0XQULrWYj4FnxeKDuvr54iokpi+D57e6Y1zxRJJdsHnDR3JyraCUufHBRTKODWBVzthjm4k3/Hv+Q990XDVR+KW+TcJX045LW86EKhz/97aqj89A8ZvTk1//tczosU90loIPVaHuWegJU3wP//7XHcO7c0yQM2jM/IhQKrf8hiObHWiWDZManF8Uf/HzbmDfC2wT//aiZ4hGTv/xzgKwdb1sD6cGEkceow0s3b89/zg+3plyRm0HlZi886j5wUwFhdHiDTaBidZRo5cx/tMeLyguOATbzq17ydhzbrpxunuHx6lbFGiO97gsd4dk//7iCIo+Ew+hG2so5kvv+ITG4c1fzHPtu1Xn5QfUnqY3/uByVmB7gmnE/E+5zdm+6nDmoews5fr+NzThdSHzK4bBQOL9c4O8OI0xLSqjJ4lbniLJg1aFpQRLwaSMZmpkC9e/j6FOVrTQ6a/a4alGgfrl2ZL1sbHUQ3DOI7ntq9diHFfm3t1mul3rdJEJCHnlW/hlQntipMrpeMs7fUr6wK370D7VbXH0DUHzdYfRg/6Z11Ult1sffJS+heHbco15Sxy3+rDnPesqH1lajk0yu02hPUvEUqvcUXWXL7Ad0wNGMx5gOle4XJxq/r/YY0xdco2wRSEGwcT7YADlBrHc9ZbvzOL0QwyWCWWChB9Obg800v7tyBWaNvdwz+fL7Ph9i2irEeJkRgOzeEDw+JiD/V93vH9FgMEoFIJMoIuogmicZohf94SBuPn6hXaV9jP4VVVA/bu+Wg8S88GLtmEPSNRLdtlXx2XL/nuM8nKkhnlnjaropiKKLIH94pLIASci0pDBfj9Hi5BfaTSXQg5+PMjQX91Ktk4MOqK1K99l4BRPv5+vNovGZ3IxQv8ICvjV4/diThpoaM8uvd3D9d/DE477w3yAbW3IDm2i73pZ9aEj38JqS6h/s8/xgmUIVcuq2JTgefAyuoafzQxAuRASeg3NtG3ach/JEkyuX+JDt2PnDZTShUhyHHG3ttBg/6lhAchGjLJBtopj4e01MlCp2yqQRTr4sBBXru+lKaoanwYX8y2aWCJiR3KnhCOkYVFSvsO0oDRujUFOEptiNDTYrJoUbvOyvl4AhC9h3wORiTXK1MrpMfnvdnndnR/HRVSusMBgIxwrLdn3vq1VcncPiD0SquTx/kNmxeFyCT4uXVUd9AL+rSGmuq7OOCzDKeVPjiNWVaoP5KOFqYq5Xcuf/xW9S+u9eIq9GAtZWtQlgkRecjRtvG1NR4WXXpn+pwsTBTIy079Ikg8rSef1aVapIFcXCd6C2wHVjLXR+N0tw4Taw6x6H90BFRgNrtlq2up6hHKuV3inM5RJaQWZHd84e6RsKkk9po3dk9by54tpPw7cBkFas/G+GbHwuG+AwP55BZyXILTHCIVrPpXHEaUPYfL6nphJP1Rc10xG4UaCeY4IHCwuur8xmSQDgY4aVwhzWhjbtSHG8JO6P2i2nC9/0Bfx0zk6dYQq3aw7k5vIObD7SEKrxhz0fQ0+YTOfHW23CBNeZci1qNsUDhoeqmfyP6PvjoEjHk8QbrFyQVZPHVWijnb8YCM65iYNoEbvnchStZ/9cKg5Vd45j8KnB6UjzXl/bkyZx7VoD47ocUUi117WwgySSb4rXgLJ52Mv5XJbp3I+uBP81BUvOjy4Cacgi+GWWlC/8dwgqwiojjUBDnEOxyRyowwLQfytFra1OZS4XvRYr4uoamAfG3I/p2bA7G90yqKThH8Ke00Tqd+3l3dmJpaCZelBMYjGqNLVa3SM4+LQeL56gY6Bymy2LQPVOxjWfj5tq4o74swcxhyGJPynkS5xAjOXZP1/FAYcBT3u6qLoIkEfErwo4gozmyI1YCvM0oyI3ghjGPQSsof2sKUhq91WsKy9cYWN+4A2v4pG/Mxpdc6w6kI/HX7Xb0TuihmsiOy2wQIsrZbUmr3OBSUo6oDJNgQp+YqYkgTgYcWZDgawJw3DFfdzT//PhVUidgB2qa8uw/j9ToHBAS33iT8YLhhAfyXG0bQUFp7QmH7oQ3i6Flf4OTZLvJdh8pfuflmWu2ohm5pTiSg1pl3vq9uluTJwqXfh1hqy8e2iHoD+Y35gCIViTo6VOtK5dD8HYClucJucXASzwe2kPj4S4eYQtmkYHagXhAzp/F541xE8YFYqSPszDuz3soWzHy0p3E2jwZNQaIcGU9FNQwQxeDw0ZlK9dxXrj9IUHGUPTOyib8CqXmbZ7Ex54bn1rLx3qqAavu/gh6XjV0GmN1p+yyMK9HN5uYEvxgbAk43tsheREhyI+Q5WLIneKTGPmYiM/lxOp8fvqHy8YgXK0TlMiX0tliLI2JtfmWZP8eVV732sdYm+pcWzDzEmKLJZyeelyaZKkjPnnUO9keDwtgiLnmd5+t+Sr5y8brRnlvxcWEWfCqIALQYHvaXx6jTg4dAlye469uGwwOZVZCILLfGjaMg4LUCNMTtMSp1aC2y/3wR2t1v3w/iNBRQ+bNbtDqL2NAr7K4rUcyqbSpNrXZgAWXvjxBBtfYLK1uRYt3q2pfXJOAL0HtWcEwJLddOSJKV1SwvcvEuzg/4MPnA8MIUJOLqm3qI6wFyN99Ck6zYaV/zGSAzF/PGsaNa4vPLe5QnyuqVUnVQ6xELA6gbe53aGgeke+R/ycb2LJVyc7BhuzI90zA+c6wUDTb7NH//gdDSl2u/aW7lRJm8m1fLtPxcNuEM5JbkOCZKPM88HUsLRoC1pmKKlvWyeAXuxILbu0snpSxf8N+RgtLUSe5n2gdjOjoSTaN7mMZ7bF+cWk/MS8mFD4pcyl5UN7CbpFZH2a+Pm1VAnUTVfbw8qrmz1G9m5aKmRzY1SMhhPrlCn2t4uNUXNA3IFe6NOjSC1DEaAFZAfDlEkQCsbNhsZPj6NQPDSB3tLiTo0ZYoEbIeEIaKtU3Wk60rEszawTFuyHVd365LA/c/uarABN5M5rGq/dqTG3Ilye/5EKiYisisuzqNaZjmWv0z9TORc0CKbaTea214oNM9u2sXUZub/eqM3Pi/PjRSyQiOSwPWif2asTgu6hS6fb5UGosCWxdedMqdViIUUSSdIJx+qQ4KShfTT39VAWZbi+mB+iKICNwpt6cflY57Rcbs6d1kA26Iru73cuxYVlSvuJdcR5VfDYZRk8X0AXePROyw3Le6LaUdmTLzYsoNhhgQpd67xVNiHgk3pakmndeIAtTC4DCXy9oS6eU4CWxDdVmY53pKNbdAKmQsP37lrJZC6iDXMELGKcHjNuuZgcDyY8W/yv6ha3DX7OWm/35fpvhw55oitf4V+GULlcPWYyGGuVBdro19c8u0RDddDun40W7G5cSIzHLh/qZxb59R+EPY+wZ2XerkUim92hhXpKyW6WtAh6zQS97DrPyjCvKi3pCw96LeKynOpyjtsMQc2RmI/20zFOZcSa2AK++PoRcT6zeJyxlBZ7kk5mhqXGkLlM2hFKc+/T544xXP0Ua38Q6xdPTLTeG1PHnLMaOvksUQMrEFTB/lizCirmFQL8zYVU+OTeYQEFaITsBSMMYexS9HkajO2gGIf2micvntCZJsZQEwIH3/4JGJQGflBuH5rNXmnRRYXDQs3ZoEQoMtYDr1kFKUS/siiQSUxcTH9XYeBZiKDDFQoExREO9dddKQLO3BwMHvymCSTFyY+vxn3D27NDx6OlU092D5EDUwilttqVHpjJQDUceJYCLsK2swfXeNUVrBJT/w/sk+7si8rPtiMFis+oxvGdGQxirMBID700T39mULuNHzOyN+xBfcFACZcyngF1aSpv0JPkNUrAZTqfplv509cGXFUiEEm5dZb+OsP/blizqdK45/dSsIrufYTrCPY2lgJD6k6QljTfXVlHfYKSq+MsagyUcaMintyr95bD8kdTAeYNLNsMmo/Wdd8a2nStBP49ARIjqqpUHWY4q4mvO5Cq/CgCP+4/B+5zutGwX5pssgVLr1+fIM7WWLfiUQDk4c6ZdHZOWv5hG3g2dgQ5NXnpIY+BWwJpaouf25bXnjDzbHnQNofH/c6m+dEAS9Gs2h7pFRPKOBDnqswZ8KZjhId1ytHUTs533KwBoSiImoxKQUgZ7z6pA9QB3sZ8Cq0vwutJTTkfbX8AzCpm2cFXx/P22niUMHauU8IGc+78R6TsutoonoqFuoNA3l80t387YHMoL5KGAT1JO4zmx+vJ0LbLHlicHraSVYvJjnO9p++qnWgKw9OwFVVUagvZuf9qfiuum+hIicxP1q4zDnzkHsCNriLxBpxY9N+UOmqzdY1MunLMDgkMyi3uvnN3UBXJeZ8YLs5xr8QrOhimYoKuGBebZHAiBIkViv3DG8k2oNpp5OIgX6ulqaRN8V62QUPjn5tl1kPXhT9bcd8qIm8gi4or/FGbvQ6pgGSHmnayrugmf5E0upGxPRf/3xOtitGMaHLKJVm5zhglmVfI91o0yxhJZVS/5wQ8zfxK8Ylw0WmHXoGfRkoBRx9Hsnl/6sgTjAVwpmNuSeZtBwlX4qB8Bh8lxjqBDIuFGJ4I1wxN0XRlAAslzqMKwQfyA7OkuivCXfv+i+3XmhcBFM2n4jdT+NyUmBnQJPV3F2sZfKvJhUlXzSosFR4VevVVcOkFnnjdiRWc0TeSYxj41sJGYMbZTeLI3GvyZ8/gAAudQ1+4oFX+enX5V49MczGCYVBuoC4kHjp7ZVxj+clBwPr9k+v05SsezQK3enxLs1Nt/N7c7AImVUysjGou4iOohHo83Zs9/MI/OWB+OyXzOBD93NbApGHXrv8CVRHp2bwH+xB55cfNrdqFD35HSMx4iVmtzYAmSCIV8kXsHoq3DIb93riTWbubnjxbBW5zConVtbxLRStXHkIyAByaozME952Gc9aAdAbBpZSVCH88Uwb/4bPTVOVl+WoMYD7JIvK8VcMrJ8zHV4bbG0Dg7Kx17A4ej/ZcZ2Z5pVuVLUH1E/AccUTKm81SE+LQ6STTUDscUk0x2OWIbEORhg69tdoTGNkA1RfkGIRZHr5mCXOpLC55WWzCZoGPFUVtZRHwh0nq039CDdjEPo+JyaxSQAvDgR6Iqvxy0frrtEG1A385N81l05SSzN+IDm9bypF9m92EUqblnauZ5sjc37wRykOdl7w4o8WMgQsjii3EE/aJYDfHs1cH6DNBEujjcCc8qAefYFyIAURDcDnzun5UmkbBQsU4eu/W8I9nBE0qJKTdg2hwjq0+XV7a3TJ7R+alvJZCRia9lJ+grNB9dbrOmWEvUotMjvDhq4wV/kq4fvIBkzUGpDeYH74rne8uU3dgoNZdR9pUL6q9YDNRfOiF6Dyk+SYXQIghTjm9qR4tBHh0gnmF/9q3Qv22EzaLhSvDlDOxMrrCNRmLCl1jApzLrBCPn2mjn5zqK7OYK7VxOfQ5GfBfoPdyQwqFEgCVHkJ9oTnagRM3R0+rsuN5jQv9icCav/p1WqiEXSzCdLd/WEA6z6dDP7tPqPbeDYKAkVcz1lLGbFOC9b7cBd3MV0Ve8dZ89oR7OnxGS7uVpSry8banVZwpJg+nkH1jRBYa2BvBMY2xITH9ERXCjHzdZxs+ipdXP2DY7X+eWiBhtT2L0RRGTLPeazn5tpl4tu8iE2rWig731iuJDRbCHHy+g/Mb9+miAyVqfIpXT/iZeOxOxODO0hEpLM78I1+G2Z45yi3lS1K3m4WMQ559Lp4UML5vZUjYGJuxl+OPpUH5klpyBujkjprhei0TmUik10gjvNUp8mDkWlNKikmYspaVTqewbnOzJrmz8FLIpsT67EJLHIIfeDcWEfiP+DJrZ1jfxpoAb2abeMqLx+9RuZGzQoYtYVGgAWwEM9Kek2vPIeBNAKD6ao7nw6sgvfeLZPoXkbYO/tStHJdKzk+WFSFEU2NcALJAEP6S8pcnqqBBt57dwTrzQNCIdk2SocK4dLRbD/pu/VryKnm65ZYXiJCfHJk3mx9MRSl+nSK6OqEBSoGjz0/LADddwF/HqcfK3K3O+6YUGQcmj8pZL4PhZ6KrGkb8B38FmDvvLd3XQXbvS/FQmrXFTvJNkaN/FGo83KuS43BK1UfVnIqigGkCoP5fBda2MwAGTGNKX9K9t4Bx83pMFc5KSORmWKv+8VoVggWxoaBz3/9IBh6RwLd1tebwy89xvE5z6EEpXpDfrXWfRsMs6+ekUHH6idVosno55+xQ8Zqzelh0bxtJTgCcH3Z3/Cxlx9eNIS4JIFKOAVrDqbrXRszmY55a5+niJGHtkO3b6mnIDxLa1WXc7BAe33mt2KyM4Fbc3R6/WVTQN8QhlqAtave2WsQTqzWeSlKuGUVIJRqtObpv294rS0kDN1RKzdstZTXJebR2HlzsQ4P3NbMHUqFZMZw+/IKXnh4t+lY8qocp/B1oMszR03EFs3bPeND8QkItMvllObeCz3SZAjqZrobmLcrpFyQV7mwBjg3C3C8/bc5goQhv8j/IXMLGnt4mF7tybRDG5G0polxoUScQkPvmnga2/K+aapKeqSL0BTmo1Cm5g+booNOtdyKva2KoefRURaBk7113QKo3y+WTuFKtgETIK8HRluYS9DvlcciCDvnG8UaJRfZE2siZsiTHvRmN80xkUIInHeRZl5Re/+ATL6VhKFi8CZ/n/jbFV6T5pZ+Uoppvsi3qjacVFOJgWWfdlwVHKPW/TJO3na9hRM9bS2yo2rEsC6IBzRReVO6IesJU7PItzOamr+ROFfwGZmZ7ue8HNxAgLJKb7P3p8dMqk6Be5PJaT/5Rdc1deYVihWH9cjVKc9uz5EnfHqxLUkOO8iJUENBNVf5LyNy8zjLu/78k5WNTywiPfYeX3CPk7yc6CI3lum/CEZwfUaNpcI3KsPqfn2lmz3kd/acQjKA1ebkJaiuLD+epQ/Fc1llHXXMzofWzz/Kd29SNmOhcjMWw1jq1g3YfrXZ9rzXDYW4ZttfgfMi6oCUtBs0PkMVuxmq5lxEoCaSXPSqCJJ7MlKdRDidVt0AFlxk5cTdX++sBF2+E35mjwfm8ERVxH0FvuAQtsfA4V2G0TKTUxeyRGVjd/u6F1SvuAiU2/WaQjcNCU4Ep7VunXCYSbZj3U3wzu/LWM5MPlYuyQ3FOOCD/zt7K295hY2JhwF+ODDIZ676vGQFKveEQYkWj7lkK7rVmD7MhU0Y/tF8EcTTpo4/yqOufbd/zWIpMajnbDuWK2vn6OPPtz2rc9MIBNlPd8tt+yf+7SC4wqEPbozKMCwY5Bygx4JmoIEDsixWRDcdHd6S3/dZMHXOJAAv7+NIstl00crgSqHZKAEe4g3G4dzIV51EeZB01r7p8GNlfUnG/GjZgNGsqXZdYMBVtAtFNv3hJWPve4GvqZ2XxuiNkHTz5kxWgr0PjQdJlVywJ9Zf2ZvqeeTbolKtvK54re2Lq5BoyzfsRtvDfyao3kmyFzDQ88nM+qx83w74RDlkngtYiArI05Epre3GgBeSlMig0pE6RGQaFznKkGeb0SozLCyiOtxh7hgwZlbKbClzUUfC8ntMiHUOZE375RhTy9c4DA+oMLkUDkztSybZbdmP1xpaIbjUpPAHBq3cIq+CBFzbMlMMCCkUQ6d9LGV6GYCsYiEWZIy3nBnuxOYXeU4YTGDSin9e4/pCjPtQSHlg5LMEvIlF0ElthqrF129iK2RPBEWd3XWOl3SWV5uz5VUyZYp5kEFmz7QfP/B1W1BBzQ2iTGbSVT79lUHzcGXz3PJceSgz4uknETUwo0xffpr2KUvZF0i/r2sL3IFIClYx8CbIZE6Qt7MDJbOPB3xMScwaOcWG66IJfCnDkb0D2Mb+PHzX+oiCbxeTIogtyN+s2NJirNACk/OACSOTtV6vscwbzW4M168xqaI+RzR47S1nlV/rOoZnid87n/Ima2XYa3un3BuGAisNjb8eLMT9OnMtazQROFCuO1HiZXaOc0oUDbNC4eKLToOx8DzVhMgGA8XIAQ2x3b6I0uEyLssQjJX3QphcUMx4KsMgJ+72km4N2aqkBF2coKmUEt1eqIMGn+5txMT4kYVGd3ALO+y9Z4PP3d3l48JQK8s9ZZ/Qx/+NBKgBEJFlQ32psoJiihGO7FSYM5L81q72kaAYcilEFMG+ZK1BcMqELkflyCV7v8JEXLO4Rf/oZYNZHZVjJhfL6fnpP9Tio3Euue5uS7FMkfGOeRCTrBZ06Caev7tgufeTrX34Ur/Vvc+b8ksiIShNJtuF9WmYxOZ4xg8y6zTdy3KAB2y5kYkcRnXsptWwAFyKZ2I/QGySNeoQLkINUMloC+5L3WuMMx297Q1xUYLKqZ9XHavaobo6QQv4auMm+i84IhxRpPt9nUmcav9NcjCcP+TcMmxsQZ/F3mgeoA0fQgwvTsyXuuTaM3Sqtv2jaaajmaFQpK9W6uIbeqwvSDo34ZrY6elDUHwSCjHRRmlwmyy+eOra64Ssq0XSXYljMHtKY+FShcMkHsEUY/4Bw63dJ6KpwDaxmthlDdbdE+TvYF3v33cGSKqO+1H1pKYhJMvZD5ckQcHyNF8zrtiR5b0ko6NPGoRexUZTYP6VbUdn3zzxGBOi8Z0OqHjGqYxRXwN3mYi0GYEEZYq+Q3QvdKcEHILLLj8S+VFepSfErtmfZCdvxbfIifFSpEzKi+7VJsLMT+zEFeyp1OdwRC1VZrfTLIyR7xTPUcZFYPD9qI7D70uTb4hdpqPXsJIRNYbZtNwch1OI3trh3u2ScoQyM9POnInsUa+OovcwkUP1UfIzPb95n4BaF2ev57NHAej0+BVMF9/Cj9663HN2/JN3SQgslL914bKfiTTDFAz9PlQEL/dSv1H8xl3mtWxh1McFO9EJXlRDaKQDsyKO4vOJW90NFE6yw2tjbc2GeF95sbs0I9enAa6QwQVf/kJQhAD2BzUDKggOyjy1TEhED6sfk+418lQy3c/uj8aw8UEzZ6hIMCd8RohAkumMtIj9m73l2yPWoGHVTPaywkC7Yj9tBM1NxMgcrDwRtk4RO2WHT7Ql5kQCKdJj6kNuOTeyEBYBjLMhGz+O5/YGa84HEiTYEpZ6fFzy26GG2hWtTyteuYrhSyG56BjsT/wQeLRytpTY3D7sIMqZnJ9z1FDrfyjFlGl2TNw9BQysbaxOuwYYZs/7I6BANgkqCknWZC7/BBXvaeKwAmC959I+G39BUE9bExkNlbRoFRyEtNzv+NJ91FuisG3JCS6uYBeRnfv8AkAfKTeg9EYamqnsGfAV7d0f9DghHEQ5IsPGDIUhgoSj7obM4Bu5uhQ3/CYEDTHc92AsFvDK4XGrwUeGBWBHPlS+f4x+CxmmHz2sAGmSFNt65kwZC64mnaoWlu2310laYn8r62AqsR5dfjyK18MEdurdagldzfJtjFXlZs7St4QhdPiye6TPh2/ZAQLU/Fip5s7TDEM16KtRWrK9hmxnQ7bmfa/+7pa10Z8WDPK3NuJ+NN/RAbQ5vHx2uX0Lm7/w7cAEH/hvZA+mt7J7zGw7YtQYwnNN6dpgwkGjjrS3yQoeoYt1EnczmtmJfQZWzUlP3Hlg9Wzlr9IH23q3thGth+QNEANFettxKfskkGOlLk8AqoKJwDqOxAa6UzAx07plSSyNBJSGco9zjnC5gGbDoKvsMDuBR6bGRlGzJ+hFsGa/Izt78aI+WZ6dJlZKp4pGISuv9rV0sAS0MWEwCmfauO7oQZMiakHU35LBxiyJoOMddhUWgcZuC8r4Ksvn75TTcQXLJ7kWtYhGuGqPd9dZuFjBWQHNwosXY5snbHFQq72CvHXhIg+shQxycuLOuWYErwCLZeF24b7F78pO7xw4X6lIAR02hUOf5087Rl0nOaeb6CK4i/KA/EZv76ftOWZtjwxslNr0E/u8rWUmnf3amfg6UZmBAluuoj3Dd7UV+9IAJ6iYcDfSJlgmIImohjfIUMJ27z+opj50Ak9af2LCNrWrBJvMovA1OeNO+MF/MwZvnaCxTgG7Cw4QfSPF6AYCGFt21M8PySZFeV3t2Rqqs5JMzMYzGRgq4o+UaKRgBf9GHi/9X9HXA3wxkCsd/UhnHSh2zUVDiraio/6nP4y3XJqs8ABfALAtCYU7DHPMPRjgcM6Ad/HiSXDAbOdSMkvGZPAkHs8wuQTy6X2Ov/JFvcPuKfV3/r9Q28");const t=()=>$M(e),r=()=>new Set(t()),n=(e,t)=>t.forEach((t=>e.add(t)));bR=new Map(VM(e)),vR=r(),wR=t(),AR=new Set(t().map((e=>wR[e]))),wR=new Set(wR),ER=r(),xR=r();let i=GM(e),s=e();const o=()=>{let e=new Set;return t().forEach((t=>n(e,i[t]))),n(e,t()),e};IR=KM((t=>{let r=KM(e).map((e=>e+96));if(r.length){let n=t>=s;return r[0]-=32,r=YM(r),n&&(r=`Restricted[${r}]`),{N:r,P:o(),Q:o(),M:!e(),R:n}}})),_R=r(),SR=new Map;let a=t().concat(mR(_R)).sort(((e,t)=>e-t));a.forEach(((t,r)=>{let n=e(),i=a[r]=n?a[r-n]:{V:[],M:new Map};i.V.push(t),_R.has(t)||SR.set(t,i)}));for(let{V:e,M:t}of new Set(SR.values())){let r=[];for(let t of e){let e=IR.filter((e=>gR(e,t))),i=r.find((({G:t})=>e.some((e=>t.has(e)))));i||(i={G:new Set,V:[]},r.push(i)),i.V.push(t),n(i.G,e)}let i=r.flatMap((e=>mR(e.G)));for(let{G:e,V:n}of r){let r=new Set(i.filter((t=>!e.has(t))));for(let e of n)t.set(e,r)}}PR=new Set;let c=new Set;const u=e=>PR.has(e)?c.add(e):PR.add(e);for(let e of IR){for(let t of e.P)u(t);for(let t of e.Q)u(t)}for(let e of PR)SR.has(e)||c.has(e)||SR.set(e,1);n(PR,fR(PR)),OR=function(e){let t=[],r=$M(e);return function e({S:r,B:n},i,s){if(!(4&r&&s===i[i.length-1])){2&r&&(s=i[i.length-1]),1&r&&t.push(i);for(let t of n)for(let r of t.Q)e(t,[...i,r],s)}}(function t(n){let i=e(),s=KM((()=>{let n=$M(e).map((e=>r[e]));if(n.length)return t(n)}));return{S:i,B:s,Q:n}}([]),[]),t}(e).map((e=>yR.from(e))).sort(XM),kR=new Map;for(let e of OR){let t=[kR];for(let r of e){let e=t.map((e=>{let t=e.get(r);return t||(t=new Map,e.set(r,t)),t}));65039===r?t.push(...e):t=e}for(let r of t)r.V=e}}function CR(e){return(NR(e)?"":`${MR(RR([e]))} `)+JM(e)}function MR(e){return`"${e}"`}function RR(e,t=1/0,r=JM){let n=[];var i;i=e[0],TR(),wR.has(i)&&n.push(""),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let s=0,o=e.length;for(let t=0;t<o;t++){let i=e[t];NR(i)&&(n.push(YM(e.slice(s,t))),n.push(r(i)),s=t+1)}return n.push(YM(e.slice(s,o))),n.join("")}function NR(e){return TR(),ER.has(e)}function BR(e,t,r){if(!e)return[];TR();let n=0;return e.split(".").map((e=>{let i=function(e){let t=[];for(let r=0,n=e.length;r<n;){let n=e.codePointAt(r);r+=n<65536?1:2,t.push(n)}return t}(e),s={input:i,offset:n};n+=i.length+1;try{let e,n=s.tokens=function(e,t,r){let n=[],i=[];for(e=e.slice().reverse();e.length;){let s=UR(e);if(s)i.length&&(n.push(t(i)),i=[]),n.push(r(s));else{let t=e.pop();if(PR.has(t))i.push(t);else{let e=bR.get(t);if(e)i.push(...e);else if(!vR.has(t))throw LR(t)}}}return i.length&&n.push(t(i)),n}(i,t,r),o=n.length;if(!o)throw new Error("empty label");let a=s.output=n.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}(a),!(s.emoji=o>1||n[0].is_emoji)&&a.every((e=>e<128)))!function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw new Error(`invalid label extension: "${YM(e.slice(0,4))}"`)}(a),e="ASCII";else{let t=n.flatMap((e=>e.is_emoji?[]:e));if(t.length){if(wR.has(a[0]))throw DR("leading combining mark");for(let e=1;e<o;e++){let t=n[e];if(!t.is_emoji&&wR.has(t[0]))throw DR(`emoji + combining mark: "${YM(n[e-1])} + ${RR([t[0]])}"`)}!function(e){let t=e[0],r=UM.get(t);if(r)throw DR(`leading ${r}`);let n=e.length,i=-1;for(let s=1;s<n;s++){t=e[s];let n=UM.get(t);if(n){if(i==s)throw DR(`${r} + ${n}`);i=s+1,r=n}}if(i==n)throw DR(`trailing ${r}`)}(a);let r=mR(new Set(t)),[i]=function(e){let t=IR;for(let r of e){let e=t.filter((e=>gR(e,r)));if(!e.length)throw IR.some((e=>gR(e,r)))?jR(t[0],r):LR(r);if(t=e,1==e.length)break}return t}(r);!function(e,t){for(let r of t)if(!gR(e,r))throw jR(e,r);if(e.M){let e=fR(t);for(let t=1,r=e.length;t<r;t++)if(AR.has(e[t])){let n=t+1;for(let i;n<r&&AR.has(i=e[n]);n++)for(let r=t;r<n;r++)if(e[r]==i)throw new Error(`duplicate non-spacing marks: ${CR(i)}`);if(n-t>4)throw new Error(`excessive non-spacing marks: ${MR(RR(e.slice(t-1,n)))} (${n-t}/4)`);t=n}}}(i,t),function(e,t){let r,n=[];for(let e of t){let t=SR.get(e);if(1===t)return;if(t){let n=t.M.get(e);if(r=r?r.filter((e=>n.has(e))):mR(n),!r.length)return}else n.push(e)}if(r)for(let t of r)if(n.every((e=>gR(t,e))))throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}(i,r),e=i.N}else e="Emoji"}s.type=e}catch(e){s.error=e}return s}))}function LR(e){return new Error(`disallowed character: ${CR(e)}`)}function jR(e,t){let r=CR(t),n=IR.find((e=>e.P.has(t)));return n&&(r=`${n.N} ${r}`),new Error(`illegal mixture: ${e.N} + ${r}`)}function DR(e){return new Error(`illegal placement: ${e}`)}function FR(e){return e.filter((e=>65039!=e))}function UR(e,t){let r,n=kR,i=e.length;for(;i&&(n=n.get(e[--i]),n);){let{V:s}=n;s&&(r=s,t&&t.push(...e.slice(i).reverse()),e.length=i)}return r}const qR=e=>function(e){return function(e){return e.map((({input:t,error:r,output:n})=>{if(r){let n=r.message;throw new Error(1==e.length?n:`Invalid label ${MR(RR(t,63))}: ${n}`)}return YM(n)})).join(".")}(BR(e,pR,FR))}(e),HR=e=>{let t="";for(let e=0;e<32;e+=1)t+="00";if(e){const r=qR(e).split(".");for(let e=r.length-1;e>=0;e-=1){const n=Y_(r[e]).slice(2);t=Y_(`0x${t}${n}`).slice(2)}}return`0x${t}`};var zR=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class $R{constructor(e,t){this.contract=new RM(DM,null!=t?t:LM.main,e),this.context=e}getOwner(e){return zR(this,void 0,void 0,(function*(){try{return this.contract.methods.owner(HR(e)).call()}catch(e){throw new Error}}))}getTTL(e){return zR(this,void 0,void 0,(function*(){try{return this.contract.methods.ttl(HR(e)).call()}catch(e){throw new Error}}))}recordExists(e){return zR(this,void 0,void 0,(function*(){try{return this.contract.methods.recordExists(HR(e)).call()}catch(e){throw new Error}}))}getResolver(e){return zR(this,void 0,void 0,(function*(){try{return this.contract.methods.resolver(HR(e)).call().then((e=>{if("string"==typeof e)return new RM(FM,e,this.context);throw new Error}))}catch(e){throw new Error}}))}get events(){return this.contract.events}}var GR=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class VR{constructor(e){this.registry=e}getResolverContractAdapter(e){return GR(this,void 0,void 0,(function*(){return this.registry.getResolver(e)}))}checkInterfaceSupport(e,t){var r,n;return GR(this,void 0,void 0,(function*(){if(R_(BM[t]))throw new Zb(null!==(r=e.options.address)&&void 0!==r?r:"",t);if(!(yield e.methods.supportsInterface(BM[t]).call()))throw new Zb(null!==(n=e.options.address)&&void 0!==n?n:"",t)}))}supportsInterface(e,t){var r;return GR(this,void 0,void 0,(function*(){const n=yield this.getResolverContractAdapter(e);let i=t;if(!Yx(i)){if(i=null!==(r=J_(t))&&void 0!==r?r:"",""===t)throw new Error("Invalid interface Id");i=i.slice(0,10)}return n.methods.supportsInterface(i).call()}))}getAddress(e,t=60){return GR(this,void 0,void 0,(function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,"addr"),r.methods.addr(HR(e),t).call()}))}getPubkey(e){return GR(this,void 0,void 0,(function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,"pubkey"),t.methods.pubkey(HR(e)).call()}))}getContenthash(e){return GR(this,void 0,void 0,(function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,"contenthash"),t.methods.contenthash(HR(e)).call()}))}setAddress(e,t,r){return GR(this,void 0,void 0,(function*(){const n=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(n,"addr"),n.methods.setAddr(HR(e),t).send(r)}))}getText(e,t){return GR(this,void 0,void 0,(function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,"text"),r.methods.text(HR(e),t).call()}))}getName(e,t=!0){return GR(this,void 0,void 0,(function*(){const r=`${e.toLowerCase().substring(2)}.addr.reverse`,n=yield this.getResolverContractAdapter(r);return t&&(yield this.checkInterfaceSupport(n,"name")),n.methods.name(HR(r)).call()}))}}var KR=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class WR extends qk{constructor(e,t){super(null!=t?t:""),this.registryAddress=null!=e?e:LM.main,this._registry=new $R(this.getContextObject(),e),this._resolver=new VR(this._registry)}getResolver(e){return KR(this,void 0,void 0,(function*(){return this._registry.getResolver(e)}))}recordExists(e){return KR(this,void 0,void 0,(function*(){return this._registry.recordExists(e)}))}getTTL(e){return KR(this,void 0,void 0,(function*(){return this._registry.getTTL(e)}))}getOwner(e){return KR(this,void 0,void 0,(function*(){return this._registry.getOwner(e)}))}getAddress(e,t=60){return KR(this,void 0,void 0,(function*(){return this._resolver.getAddress(e,t)}))}getText(e,t){return KR(this,void 0,void 0,(function*(){return EI(e)?this._resolver.getText(yield this._resolver.getName(e,!1),t):this._resolver.getText(e,t)}))}getName(e,t=!0){return KR(this,void 0,void 0,(function*(){return this._resolver.getName(e,t)}))}getPubkey(e){return KR(this,void 0,void 0,(function*(){return this._resolver.getPubkey(e)}))}getContenthash(e){return KR(this,void 0,void 0,(function*(){return this._resolver.getContenthash(e)}))}checkNetwork(){return KR(this,void 0,void 0,(function*(){const e=Date.now()/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){const r=yield(t=this,eM(void 0,void 0,void 0,(function*(){return Kk(t.requestManager)})));if("boolean"!=typeof r||r)throw new tv;this._lastSyncCheck=e}var t;if(this._detectedAddress)return this._detectedAddress;const r=yield AT(this,Object.assign(Object.assign({},this.defaultReturnFormat),{number:nb.HEX})),n=LM[jM[r]];if(void 0===n)throw new ev(r);return this._detectedAddress=n,this._detectedAddress}))}supportsInterface(e,t){return KR(this,void 0,void 0,(function*(){return this._resolver.supportsInterface(e,t)}))}get events(){return this._registry.events}setAddress(e,t,r){return KR(this,void 0,void 0,(function*(){return this._resolver.setAddress(e,t,r)}))}}var QR=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};var ZR,JR,YR=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class XR extends qk{getAccounts(){return YR(this,void 0,void 0,(function*(){return e=this.requestManager,QR(void 0,void 0,void 0,(function*(){const t=yield(e=>Jk(void 0,void 0,void 0,(function*(){return e.send({method:"personal_listAccounts",params:[]})})))(e);return t.map(g_)}));var e}))}newAccount(e){return YR(this,void 0,void 0,(function*(){return((e,t)=>QR(void 0,void 0,void 0,(function*(){FI.validate(["string"],[t]);const r=yield((e,t)=>Jk(void 0,void 0,void 0,(function*(){return e.send({method:"personal_newAccount",params:[t]})})))(e,t);return g_(r)})))(this.requestManager,e)}))}unlockAccount(e,t,r){return YR(this,void 0,void 0,(function*(){return((e,t,r,n)=>QR(void 0,void 0,void 0,(function*(){return FI.validate(["address","string","uint"],[t,r,n]),((e,t,r,n)=>Jk(void 0,void 0,void 0,(function*(){return e.send({method:"personal_unlockAccount",params:[t,r,n]})})))(e,t,r,n)})))(this.requestManager,e,t,r)}))}lockAccount(e){return YR(this,void 0,void 0,(function*(){return((e,t)=>QR(void 0,void 0,void 0,(function*(){return FI.validate(["address"],[t]),((e,t)=>Jk(void 0,void 0,void 0,(function*(){return e.send({method:"personal_lockAccount",params:[t]})})))(e,t)})))(this.requestManager,e)}))}importRawKey(e,t){return YR(this,void 0,void 0,(function*(){return((e,t,r)=>QR(void 0,void 0,void 0,(function*(){return FI.validate(["string","string"],[t,r]),((e,t,r)=>Jk(void 0,void 0,void 0,(function*(){return e.send({method:"personal_importRawKey",params:[t,r]})})))(e,t,r)})))(this.requestManager,e,t)}))}sendTransaction(e,t){return YR(this,void 0,void 0,(function*(){return((e,t,r,n)=>QR(void 0,void 0,void 0,(function*(){const i=vT(t,ob,{transactionSchema:null==n?void 0:n.customTransactionSchema});return((e,t,r)=>Jk(void 0,void 0,void 0,(function*(){return e.send({method:"personal_sendTransaction",params:[t,r]})})))(e,i,r)})))(this.requestManager,e,t,this.config)}))}signTransaction(e,t){return YR(this,void 0,void 0,(function*(){return((e,t,r,n)=>QR(void 0,void 0,void 0,(function*(){const i=vT(t,ob,{transactionSchema:null==n?void 0:n.customTransactionSchema});return((e,t,r)=>Jk(void 0,void 0,void 0,(function*(){return e.send({method:"personal_signTransaction",params:[t,r]})})))(e,i,r)})))(this.requestManager,e,t,this.config)}))}sign(e,t,r){return YR(this,void 0,void 0,(function*(){return((e,t,r,n)=>QR(void 0,void 0,void 0,(function*(){FI.validate(["string","address","string"],[t,r,n]);const i=Yx(t)?t:e_(t);return((e,t,r,n)=>Jk(void 0,void 0,void 0,(function*(){return e.send({method:"personal_sign",params:[t,r,n]})})))(e,i,r,n)})))(this.requestManager,e,t,r)}))}ecRecover(e,t){return YR(this,void 0,void 0,(function*(){return((e,t,r)=>QR(void 0,void 0,void 0,(function*(){FI.validate(["string","string"],[t,r]);const n=Yx(t)?t:e_(t);return((e,t,r)=>Jk(void 0,void 0,void 0,(function*(){return e.send({method:"personal_ecRecover",params:[t,r]})})))(e,n,r)})))(this.requestManager,e,t)}))}}!function(e){e.HTTPS="https",e.WebSocket="wss"}(ZR||(ZR={})),function(e){e.ETH_MAINNET="eth_mainnet",e.ETH_SEPOLIA="eth_sepolia",e.ETH_HOLESKY="eth_holesky",e.POLYGON_MAINNET="polygon_mainnet",e.POLYGON_AMOY="polygon_amoy",e.AVALANCHE_C_MAINNET="avalanche_c_mainnet",e.AVALANCHE_P_MAINNET="avalanche_p_mainnet",e.AVALANCHE_X_MAINNET="avalanche_x_mainnet",e.ARBITRUM_MAINNET="arbitrum_mainnet",e.ARBITRUM_SEPOLIA="arbitrum_sepolia",e.BASE_MAINNET="base_mainnet",e.BASE_SEPOLIA="base_sepolia",e.OPTIMISM_MAINNET="optimism_mainnet",e.OPTIMISM_SEPOLIA="optimism_sepolia",e.FANTOM_MAINNET="fantom_mainnet",e.FANTOM_TESTNET="fantom_testnet",e.DYMENSION_MAINNET="dymension_mainnet",e.DYMENSION_TESTNET="dymension_testnet",e.BNB_MAINNET="bnb_mainnet",e.BNB_TESTNET="bnb_testnet",e.BSC_MAINNET="bsc_mainnet",e.BSC_TESTNET="bsc_testnet",e.ARBITRUM_ONE="arbitrum_one",e.ARBITRUM_NOVA="arbitrum_nova",e.AVALANCHE_FUJI_C="avalanche_fuji_c",e.AVALANCHE_FUJI_P="avalanche_fuji_p",e.AVALANCHE_FUJI_X="avalanche_fuji_x",e.BLAST_MAINNET="blast_mainnet",e.OPBNB_MAINNET="opbnb_mainnet",e.OPBNB_TESTNET="opbnb_testnet",e.GNOSIS_MAINNET="gnosis_mainnet",e.GNOSIS_CHIADO="gnosis_chiado",e.PULSECHAIN_MAINNET="pulsechain_mainnet",e.PULSECHAIN_TESTNET="pulsechain_testnet",e.KAVA_MAINNET="kava_mainnet",e.CRONOS_MAINNET="cronos_mainnet",e.MANTLE_MAINNET="mantle_mainnet",e.CHILIZ_MAINNET="chiliz_mainnet",e.CHILIZ_SPICY="chiliz_spicy",e.MOONBEAM_MAINNET="moonbeam_mainnet",e.TAIKO_MAINNET="taiko_mainnet",e.TAIKO_HEKLA="taiko_hekla",e.LINEA_MAINNET="linea_mainnet",e.LINEA_SEPOLIA="linea_sepolia",e.BAHAMUT_MAINNET="bahamut_mainnet",e.SCROLL_MAINNET="scroll_mainnet",e.SCROLL_SEPOLIA="scroll_sepolia",e.TRON_MAINNET="tron_mainnet",e.SYSCOIN_MAINNET="syscoin_mainnet",e.SYSCOIN_TANENBAUM="syscoin_tanenbaum",e.MOONRIVER_MAINNET="moonriver_mainnet",e.HAQQ_MAINNET="haqq_mainnet",e.EVMOS_MAINNET="evmos_mainnet",e.EVMOS_TESTNET="evmos_testnet",e.BERACHAIN_TESTNET="berachain_testnet"}(JR||(JR={}));class eN extends Mb{constructor(e){super("You've reach the rate limit of free RPC calls from our Partner Quick Nodes. There are two options you can either create a paid Quick Nodes account and get 20% off for 2 months using WEB3JS referral code, or use Free public RPC endpoint.",e),this.code=1300}}class tN extends Mb{constructor(e){super(`Invalid provider config options given for ${e}`),this.code=1301}}class rN extends BS{constructor(e,t,r,n,i){if(super(),void 0!==i&&t===ZR.HTTPS&&!("providerOptions"in i))throw new tN("HTTP Provider");if(void 0!==i&&t===ZR.WebSocket&&!("socketOptions"in i)&&!("reconnectOptions"in i))throw new tN("Websocket Provider");this.transport=t,t===ZR.HTTPS?this.provider=new zS(this.getRPCURL(e,t,r,n),i):t===ZR.WebSocket&&(this.provider=new VS(this.getRPCURL(e,t,r,n),null==i?void 0:i.socketOptions,null==i?void 0:i.reconnectOptions))}request(e,t){return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return this.transport===ZR.HTTPS?yield this.provider.request(e,t):this.provider.request(e)}))}getStatus(){return this.provider.getStatus()}supportsSubscriptions(){return this.provider.supportsSubscriptions()}once(e,t){var r;(null===(r=this.provider)||void 0===r?void 0:r.once)&&this.provider.once(e,t)}removeAllListeners(e){var t;(null===(t=this.provider)||void 0===t?void 0:t.removeAllListeners)&&this.provider.removeAllListeners(e)}connect(){var e;(null===(e=this.provider)||void 0===e?void 0:e.connect)&&this.provider.connect()}disconnect(e,t){var r;(null===(r=this.provider)||void 0===r?void 0:r.disconnect)&&this.provider.disconnect(e,t)}reset(){var e;(null===(e=this.provider)||void 0===e?void 0:e.reset)&&this.provider.reset()}on(e,t){this.provider&&this.provider.on(e,t)}removeListener(e,t){this.provider&&this.provider.removeListener(e,t)}}const nN=e=>void 0!==e&&e.trim().length>0,iN=[JR.DYMENSION_MAINNET,JR.DYMENSION_TESTNET,JR.KAVA_MAINNET,JR.CRONOS_MAINNET,JR.POLYGON_MAINNET];class sN extends rN{constructor(e=JR.ETH_MAINNET,t=ZR.HTTPS,r="",n){super(e,t,"",r,n)}getRPCURL(e,t,r,n){if(!sN.networkHostMap[e])throw new Error("Network info not avalible.");const i=`${sN.networkHostMap[e]}.publicnode.com`,s=void 0!==(o=n)&&o.trim().length>0?n:i;var o;return iN.includes(e)&&t===ZR.WebSocket?`${t}://${s}/websocket`:`${t}://${s}`}}sN.networkHostMap={[JR.POLYGON_AMOY]:"polygon-amoy-bor-rpc",[JR.DYMENSION_MAINNET]:"dymension-evm-rpc",[JR.DYMENSION_TESTNET]:"dymension-testnet-evm-rpc",[JR.BLAST_MAINNET]:"blast-rpc",[JR.GNOSIS_MAINNET]:"gnosis-rpc",[JR.PULSECHAIN_MAINNET]:"pulsechain-rpc",[JR.PULSECHAIN_TESTNET]:"pulsechain-testnet-rpc",[JR.KAVA_MAINNET]:"kava-evm-rpc",[JR.CRONOS_MAINNET]:"cronos-evm-rpc",[JR.MANTLE_MAINNET]:"mantle-rpc",[JR.TAIKO_MAINNET]:"taiko-rpc",[JR.TAIKO_HEKLA]:"taiko-hekla-rpc",[JR.LINEA_MAINNET]:"linea-rpc",[JR.LINEA_SEPOLIA]:"linea-sepolia-rpc",[JR.SCROLL_MAINNET]:"scroll-rpc",[JR.SCROLL_SEPOLIA]:"scroll-sepolia-rpc",[JR.SYSCOIN_MAINNET]:"syscoin-evm-rpc",[JR.SYSCOIN_TANENBAUM]:"syscoin-tanenbaum-evm-rpc",[JR.HAQQ_MAINNET]:"haqq-evm-rpc",[JR.EVMOS_MAINNET]:"evmos-evm-rpc",[JR.EVMOS_TESTNET]:"evmos-testnet-evm-rpc",[JR.BERACHAIN_TESTNET]:"berachain-testnet-evm-rpc",[JR.ETH_MAINNET]:"ethereum-rpc",[JR.ETH_SEPOLIA]:"ethereum-sepolia-rpc",[JR.ETH_HOLESKY]:"ethereum-holesky-rpc",[JR.BSC_MAINNET]:"bsc-rpc",[JR.BSC_TESTNET]:"bsc-testnet-rpc",[JR.POLYGON_MAINNET]:"polygon-bor-rpc",[JR.BASE_MAINNET]:"base-rpc",[JR.BASE_SEPOLIA]:"base-sepolia-rpc",[JR.ARBITRUM_ONE]:"arbitrum-one-rpc",[JR.ARBITRUM_NOVA]:"arbitrum-nova-rpc",[JR.ARBITRUM_SEPOLIA]:"arbitrum-sepolia-rpc",[JR.AVALANCHE_C_MAINNET]:"avalanche-c-chain-rpc",[JR.AVALANCHE_P_MAINNET]:"avalanche-p-chain-rpc",[JR.AVALANCHE_X_MAINNET]:"avalanche-x-chain-rpc",[JR.AVALANCHE_FUJI_C]:"avalanche-fuji-c-chain-rpc",[JR.AVALANCHE_FUJI_P]:"avalanche-fuji-p-chain-rpc",[JR.AVALANCHE_FUJI_X]:"avalanche-fuji-x-chain-rpc",[JR.OPTIMISM_MAINNET]:"optimism-rpc",[JR.OPTIMISM_SEPOLIA]:"optimism-sepolia-rpc",[JR.FANTOM_MAINNET]:"fantom-rpc",[JR.FANTOM_TESTNET]:"fantom-testnet-rpc",[JR.OPBNB_MAINNET]:"opbnb-rpc",[JR.OPBNB_TESTNET]:"opbnb-testnet-rpc",[JR.GNOSIS_CHIADO]:"gnosis-chiado-rpc",[JR.CHILIZ_MAINNET]:"chiliz-rpc",[JR.CHILIZ_SPICY]:"chiliz-spicy-rpc",[JR.MOONBEAM_MAINNET]:"moonbeam-rpc",[JR.BAHAMUT_MAINNET]:"bahamut-rpc",[JR.TRON_MAINNET]:"tron-evm-rpc",[JR.MOONRIVER_MAINNET]:"moonriver-rpc"};const oN=new class extends rN{constructor(e=JR.ETH_MAINNET,t=ZR.HTTPS,r="",n="",i){super(e,t,r,n,i)}request(e,t){const r=Object.create(null,{request:{get:()=>super.request}});return function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){try{return yield r.request.call(this,e,t)}catch(e){if(e instanceof lw&&429===e.statusCode)throw new eN(e);throw e}}))}getRPCURL(e,t,r,n){let i="",s="";switch(e){case JR.ETH_MAINNET:i=nN(n)?n:"powerful-holy-bush.quiknode.pro",s=nN(r)?r:"3240624a343867035925ff7561eb60dfdba2a668";break;case JR.ETH_SEPOLIA:i=nN(n)?n:"dimensional-fabled-glitter.ethereum-sepolia.quiknode.pro",s=nN(r)?r:"382a3b5a4b938f2d6e8686c19af4b22921fde2cd";break;case JR.ETH_HOLESKY:i=nN(n)?n:"yolo-morning-card.ethereum-holesky.quiknode.pro",s=nN(r)?r:"481ebe70638c4dcf176af617a16d02ab866b9af9";break;case JR.ARBITRUM_MAINNET:i=nN(n)?n:"autumn-divine-dinghy.arbitrum-mainnet.quiknode.pro",s=nN(r)?r:"a5d7bfbf60b5ae9ce3628e53d69ef50d529e9a8c";break;case JR.ARBITRUM_SEPOLIA:i=nN(n)?n:"few-patient-pond.arbitrum-sepolia.quiknode.pro",s=nN(r)?r:"3be985450970628c860b959c65cd2642dcafe53c";break;case JR.BNB_MAINNET:i=nN(n)?n:"purple-empty-reel.bsc.quiknode.pro",s=nN(r)?r:"ebf6c532961e21f092ff2facce1ec4c89c540158";break;case JR.BNB_TESTNET:i=nN(n)?n:"floral-rough-scion.bsc-testnet.quiknode.pro",s=nN(r)?r:"5b297e5acff5f81f4c37ebf6f235f7299b6f9d28";break;case JR.POLYGON_MAINNET:i=nN(n)?n:"small-chaotic-moon.matic.quiknode.pro",s=nN(r)?r:"847569f8a017e84d985e10d0f44365d965a951f1";break;case JR.POLYGON_AMOY:i=nN(n)?n:"prettiest-side-shape.matic-amoy.quiknode.pro",s=nN(r)?r:"79a9476eea661d4f82de614db1d8a895b14b881c";break;default:throw new Error("Network info not avalible.")}return`${t}://${i}/${s}`}},aN={encodeEventSignature:QT,encodeFunctionCall:(e,t)=>{var r;if(!$T(e))throw new av("Invalid parameter value in encodeFunctionCall");return`${zC(e)}${DC(null!==(r=e.inputs)&&void 0!==r?r:[],null!=t?t:[]).replace("0x","")}`},encodeFunctionSignature:zC,encodeParameter:FC,encodeParameters:DC,decodeParameter:HC,decodeParameters:qC,decodeLog:VC};var cN=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const uN=e=>{const t=(t,r)=>cN(void 0,void 0,void 0,(function*(){return((e,t)=>kk(void 0,void 0,void 0,(function*(){const r=e.sign(WI(t));if(MI(r.v)||MI(r.r)||MI(r.s))throw new Qv("Signer Error");const n=r.validate(!0);if(n.length>0){let e="Signer Error ";for(const t of n)e+=`${e} ${t}.`;throw new Qv(e)}const i=KI(r.serialize()),s=Y_(i);return{messageHash:KI(r.getMessageToSign(!0)),v:`0x${r.v.toString(16)}`,r:`0x${r.r.toString(16).padStart(64,"0")}`,s:`0x${r.s.toString(16).padStart(64,"0")}`,rawTransaction:i,transactionHash:KI(s)}})))(yield EM(t,e),W_({format:"bytes"},r,ob))})),r=e=>{const r=Dk(e);return Object.assign(Object.assign({},r),{signTransaction:e=>cN(void 0,void 0,void 0,(function*(){return t(e,r.privateKey)}))})},n=(e,r,n)=>cN(void 0,void 0,void 0,(function*(){var i;const s=yield((e,t,r)=>kk(void 0,void 0,void 0,(function*(){const n="object"==typeof e?e:JSON.parse(r?e.toLowerCase():e);if(FI.validateJSONSchema(FO,n),3!==n.version)throw new Ub;const i="string"==typeof t?WI(e_(t)):t;let s;if(FI.validate(["bytes"],[i]),"scrypt"===n.crypto.kdf){const e=n.crypto.kdfparams;s=MP(i,"string"==typeof e.salt?WI(e.salt):e.salt,e.n,e.p,e.r,e.dklen)}else{if("pbkdf2"!==n.crypto.kdf)throw new Db;{const e=n.crypto.kdfparams;s=kP(i,"string"==typeof e.salt?WI(e.salt):e.salt,e.c,e.dklen,"sha256")}}const o=WI(n.crypto.ciphertext);if(Y_(qI(s.slice(16,32),o)).replace("0x","")!==n.crypto.mac)throw new Fb;const a=yield async function(e,t,r,n="aes-128-ctr",i=!0){if(dP(t,r,n),uP.web){const[s,o]=await hP(n,t,r);if(!i&&"aes-cbc"===o.name){const i=await async function(e,t,r,n){const i=e.slice(-16);for(let e=0;e<16;e++)i[e]^=16^r[e];return(await lP(i,t,r,n)).slice(0,16)}(e,t,r,n);e=Kw(e,i)}const a=await uP.web.subtle.decrypt(o,s,e),c=new Uint8Array(a);if("aes-cbc"===o.name&&!function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(await lP(c,t,r,n),e))throw new Error("AES: wrong padding");return c}if(uP.node){const s=uP.node.createDecipheriv(n,t,r);return s.setAutoPadding(i),Kw(s.update(e),s.final())}throw new Error("The environment doesn't have AES module")}(WI(n.crypto.ciphertext),s.slice(0,16),WI(n.crypto.cipherparams.iv));return Dk(a)})))(e,r,null===(i=null==n?void 0:n.nonStrict)||void 0===i||i);return Object.assign(Object.assign({},s),{signTransaction:e=>cN(void 0,void 0,void 0,(function*(){return t(e,s.privateKey)}))})})),i=()=>{const e=(()=>{const e=BO.utils.randomPrivateKey();return Dk(`${KI(e)}`)})();return Object.assign(Object.assign({},e),{signTransaction:r=>cN(void 0,void 0,void 0,(function*(){return t(r,e.privateKey)}))})},s=new cP({create:i,privateKeyToAccount:r,decrypt:n});return{signTransaction:t,create:i,privateKeyToAccount:r,decrypt:n,recoverTransaction:Rk,hashMessage:Ck,sign:Mk,recover:Nk,encrypt:jk,wallet:s,privateKeyToAddress:Bk,parseAndValidatePrivateKey:Tk,privateKeyToPublicKey:Lk}};var dN;!function(e){e.eip6963announceProvider="eip6963:announceProvider",e.eip6963requestProvider="eip6963:requestProvider"}(dN||(dN={}));const hN=new Map,lN="web3:providersMapUpdated";class fN extends qk{constructor(e=oN){var t;(R_(e)||"string"==typeof e&&""===e.trim()||"string"!=typeof e&&!YS(e)&&!e.provider)&&console.warn("NOTE: web3.js is running without provider. You need to pass a provider in order to interact with the network!");let r={};"string"==typeof e||YS(e)?r.provider=e:r=e||{},r.registeredSubscriptions=Object.assign(Object.assign({},bM),null!==(t=r.registeredSubscriptions)&&void 0!==t?t:{}),super(r);const n=uN(this);this._wallet=n.wallet,this._accountProvider=n,this.utils=y;const i=this,s=i.use(vM);this.eth=Object.assign(s,{ens:i.use(WR,LM.main),Iban:Hk,net:i.use(IT),personal:i.use(XR),Contract:class extends NM{constructor(e,t,r,n,o){if(M_(t)&&M_(r))throw new rv("Should not provide options at both 2nd and 3rd parameters");let a,c,u,d={};if(!R_(t)&&"object"!=typeof t&&"string"!=typeof t)throw new rv;if("string"==typeof t&&(a=t),d=M_(t)?t:M_(r)?r:{},c=t instanceof qk?t:r instanceof qk?r:n instanceof qk?n:i.getContextObject(),o?u=o:z_(r)?u=r:z_(n)&&(u=n),super(e,a,d,c,u),super.subscribeToContextEvents(i),!R_(s)){const e=s.getTransactionMiddleware();R_(e)||super.setTransactionMiddleware(e)}}},abi:aN,accounts:n})}}fN.version="4.16.0",fN.utils=y,fN.requestEIP6963Providers=()=>function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function*(){return new Promise(((e,t)=>{"undefined"==typeof window&&t(new Error("window object not available, EIP-6963 is intended to be used within a browser")),window.addEventListener(dN.eip6963announceProvider,(t=>{hN.set(t.detail.info.uuid,t.detail);const r=new CustomEvent(lN,{detail:hN});window.dispatchEvent(r),e(hN)})),window.dispatchEvent(new Event(dN.eip6963requestProvider))}))})),fN.onNewProviderDiscovered=e=>{if("undefined"==typeof window)throw new Error("window object not available, EIP-6963 is intended to be used within a browser");window.addEventListener(lN,e)},fN.modules={Web3Eth:vM,Iban:Hk,Net:IT,ENS:WR,Personal:XR};const pN=fN;async function mN(){try{localStorage.removeItem("walletConnected"),localStorage.removeItem("connectedAccount"),window.account=null,window.web3Instance=null,console.log("Wallet disconnected from application"),window.location.href="index.html",console.log("Redirecting to index.html")}catch(e){console.error("Error disconnecting wallet:",e)}}void 0===pN?console.error("Web3 library not loaded. Ensure Web3.js is included in your HTML."):(window.contractAddress="0xB42ea9EFb6769E91b2C2e9F571bb6692f6C4131e",window.referidor="1",window.web3Instance=null,window.initializeWeb3=async function(){try{if(/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)){const e=await rb.init({projectId:"215b6a26b6fd51d0763936a159365b19",chains:[80001],showQrModal:!0,qrModalOptions:{themeMode:"light"}});await e.connect(),window.web3Instance=new pN(e),console.log("WalletConnect initialized and connected."),e.on("accountsChanged",(e=>{console.log("WalletConnect accounts changed:",e),window.account=e[0],window.updateAccountDisplay(e[0]),localStorage.setItem("connectedAccount",e[0]),localStorage.setItem("walletConnected","true"),window.validateUser(e[0])})),e.on("disconnect",((e,t)=>{console.log("WalletConnect disconnected",e,t),localStorage.removeItem("walletConnected"),localStorage.removeItem("connectedAccount"),window.updateAccountDisplay(null),window.account=null,window.web3Instance=null})),e.on("chainChanged",(e=>{console.log("WalletConnect chain changed:",e)}))}else if(window.ethereum){await window.ethereum.request({method:"eth_requestAccounts"}),window.web3Instance=new pN(window.ethereum),console.log("MetaMask detected and connected.");const e=await window.web3Instance.eth.getAccounts();window.account=e[0],localStorage.setItem("walletConnected","true"),localStorage.setItem("connectedAccount",window.account)}else console.log("MetaMask not detected, using HTTP provider."),window.web3Instance=new pN("https://rpc-amoy.polygon.technology/"),console.log("web3Instance initialized with HTTP provider.")}catch(e){console.error("Error initializing Web3:",e),alert("Error al conectar con la billetera. Por favor, intntalo de nuevo.")}window.checkMetaMask=function(){void 0===window.ethereum&&alert("MetaMask no detectado")},window.checkWalletConnection=async function(){const e=localStorage.getItem("walletConnected"),t=localStorage.getItem("connectedAccount");"true"===e&&t&&("function"==typeof updateButtonState&&updateButtonState(),"function"==typeof updateConnectButtonState&&updateConnectButtonState(t),"function"==typeof validateUser&&await validateUser(t),window.account=t)},document.addEventListener("DOMContentLoaded",(async()=>{})),window.ethereum&&window.ethereum.on("disconnect",(e=>{console.log("MetaMask disconnected:",e),mN()}))},console.log("initializeWeb3 se ha inicializado correctamente en window.")),window.loadABI=async function(){try{const e=await fetch("script/abi.json");if(!e.ok)throw new Error(`Error al cargar ABI: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error al cargar el ABI:",e),null}},console.log("loadABI ha sido asignada al objeto window."),window.disconnectWallet=mN,document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("disconnectButton");e&&e.addEventListener("click",mN),window.ethereum&&window.ethereum.on("disconnect",(e=>{e&&console.error("MetaMask disconnect error:",e),console.log("MetaMask disconnected"),mN()}))}))})()})();